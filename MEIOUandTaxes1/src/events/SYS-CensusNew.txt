country_event = {
    id = POP_Census.001
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		hidden_effect = {
			every_province = {
				if = {
					limit = {
						isValidProv = yes
					}
					if = {
						limit = {
							NOT = { has_province_flag = Colony_Init }
						}
						owner = {
							set_country_flag = tf_recalculate_communication_efficiency
						}
						province_event = {
							id = SYS_Colony.001
						}
					}
				}
			}
			regiongroup = {
				region = {
					limit = {
						isValidProv = yes
					}
					if = {
						limit = {
							Columbian_Exchange = 100
						}
						if = {
							limit = {
								has_province_flag = no_horses_present
							}
							clr_province_flag = no_horses_present
						}
						if = {
							limit = {
								NOT = { has_province_flag = Exchange_Complete }
							}
							if = {
								limit = {
									NOT = { check_key = { lhs = Land_WheatAvailability value = 100 } }
								}
								change_key = { lhs = Land_WheatAvailability value = 10 }
							}
							if = {
								limit = {
									NOT = { check_key = { lhs = Land_RiceAvailability value = 100 } }
								}
								change_key = { lhs = Land_RiceAvailability value = 10 }
							}
							if = {
								limit = {
									NOT = { check_key = { lhs = Land_MilletAvailability value = 100 } }
								}
								change_key = { lhs = Land_MilletAvailability value = 10 }
							}
							if = {
								limit = {
									NOT = { check_key = { lhs = Land_BarleyAvailability value = 100 } }
								}
								change_key = { lhs = Land_BarleyAvailability value = 10 }
							}
							if = {
								limit = {
									NOT = { check_key = { lhs = Land_MaizeAvailability value = 100 } }
								}
								change_key = { lhs = Land_MaizeAvailability value = 10 }
							}
							if = {
								limit = {
									NOT = { check_key = { lhs = Land_PotatoAvailability value = 100 } }
								}
								change_key = { lhs = Land_PotatoAvailability value = 10 }
							}
							Land_CalcCrops = yes
							if = {
								limit = {
									check_key = { lhs = Land_WheatAvailability value = 100 }
									check_key = { lhs = Land_RiceAvailability value = 100 }
									check_key = { lhs = Land_MilletAvailability value = 100 }
									check_key = { lhs = Land_BarleyAvailability value = 100 }
									check_key = { lhs = Land_MaizeAvailability value = 100 }
									check_key = { lhs = Land_PotatoAvailability value = 100 }
								}
								set_province_flag = Exchange_Complete
							}
						}
					}
					set_key = { lhs = Infra_Income value = 0 }
					set_key = { lhs = Infra_Spend value = 0 }
					set_key = { lhs = Infra_6 value = 0 }
					set_key = { lhs = Infra_10 value = 0 }
					set_key = { lhs = Infra_22 value = 0 }
					set_key = { lhs = Infra_23 value = 0 }
					set_key = { lhs = Infra_24 value = 0 }
					set_key = { lhs = Infra_41 value = 0 }
					set_key = { lhs = Infra_R value = 0 }
					set_key = { lhs = Infra_UL value = 0 }
					set_key = { lhs = Building_R value = 0 }
					set_key = { lhs = Building_UL value = 0 }

					set_key = { lhs = Infra_StateSpend value = 0 }
					set_key = { lhs = Infra_State6 value = 0 }
					set_key = { lhs = Infra_State10 value = 0 }
					set_key = { lhs = Infra_State22 value = 0 }
					set_key = { lhs = Infra_State23 value = 0 }
					set_key = { lhs = Infra_State24 value = 0 }
					set_key = { lhs = Infra_State41 value = 0 }
					set_key = { lhs = Infra_StateR value = 0 }
					set_key = { lhs = Infra_StateUL value = 0 }

					Infra_SetMaintInfra = { type = Pathing 		prod1 = 6 	prod2 = 10 	prod3 = 24 labor = R }
					Infra_SetMaintInfra = { type = Harbourage 	prod1 = 23 	prod2 = 24 	labor = UL }
					Infra_SetMaintInfra = { type = Amenities 	prod1 = 24 	prod2 = 41 	labor = UL }
					Infra_SetMaintInfra = { type = Irrigation 	prod1 = 6 	prod2 = 10	labor = R }
					Infra_SetMaintInfra = { type = Capitol 		prod1 = 24 	prod2 = 41 	labor = UL StateBased=yes  }
					#Infra_SetMaintInfra = { type = Courthouse prod1 = 24 prod2 = 41 labor = UL StateFunded=yes }
					Infra_SetMaintInfra = { type = Garrison 	prod1 = 22 	prod2 = 24 	labor = R }

					Infra_SetFillInfra = yes

					set_key = { lhs = Infra_Building6 value = 0 }
					set_key = { lhs = Infra_Building10 value = 0 }
					set_key = { lhs = Infra_Building22 value = 0 }
					set_key = { lhs = Infra_Building23 value = 0 }
					set_key = { lhs = Infra_Building24 value = 0 }
					set_key = { lhs = Infra_Building41 value = 0 }
					set_key = { lhs = Infra_BuildingR value = 0 }
					set_key = { lhs = Infra_BuildingUL value = 0 }

					if = {
						limit = {
							has_province_flag = Infra_S0
						}
						change_key = { lhs = Infra_Building6 which = Infra_S06 }
						change_key = { lhs = Infra_Building10 which = Infra_S010 }
						change_key = { lhs = Infra_Building22 which = Infra_S022 }
						change_key = { lhs = Infra_Building23 which = Infra_S023 }
						change_key = { lhs = Infra_Building24 which = Infra_S024 }
						change_key = { lhs = Infra_Building41 which = Infra_S041 }
						change_key = { lhs = Infra_BuildingR which = Infra_S0R }
						change_key = { lhs = Infra_BuildingUL which = Infra_S0UL }
					}
					if = {
						limit = {
							has_province_flag = Infra_S1
						}
						change_key = { lhs = Infra_Building6 which = Infra_S16 }
						change_key = { lhs = Infra_Building10 which = Infra_S110 }
						change_key = { lhs = Infra_Building22 which = Infra_S122 }
						change_key = { lhs = Infra_Building23 which = Infra_S123 }
						change_key = { lhs = Infra_Building24 which = Infra_S124 }
						change_key = { lhs = Infra_Building41 which = Infra_S141 }
						change_key = { lhs = Infra_BuildingR which = Infra_S1R }
						change_key = { lhs = Infra_BuildingUL which = Infra_S1UL }
					}
					if = {
						limit = {
							has_province_flag = Infra_S2
						}
						change_key = { lhs = Infra_Building6 which = Infra_S26 }
						change_key = { lhs = Infra_Building10 which = Infra_S210 }
						change_key = { lhs = Infra_Building22 which = Infra_S222 }
						change_key = { lhs = Infra_Building23 which = Infra_S223 }
						change_key = { lhs = Infra_Building24 which = Infra_S224 }
						change_key = { lhs = Infra_Building41 which = Infra_S241 }
						change_key = { lhs = Infra_BuildingR which = Infra_S2R }
						change_key = { lhs = Infra_BuildingUL which = Infra_S2UL }
					}
					if = {
						limit = {
							has_province_flag = Infra_S3
						}
						change_key = { lhs = Infra_Building6 which = Infra_S36 }
						change_key = { lhs = Infra_Building10 which = Infra_S310 }
						change_key = { lhs = Infra_Building22 which = Infra_S322 }
						change_key = { lhs = Infra_Building23 which = Infra_S323 }
						change_key = { lhs = Infra_Building24 which = Infra_S324 }
						change_key = { lhs = Infra_Building41 which = Infra_S341 }
						change_key = { lhs = Infra_BuildingR which = Infra_S3R }
						change_key = { lhs = Infra_BuildingUL which = Infra_S3UL }
					}
					if = {
						limit = {
							has_province_flag = Infra_S4
						}
						change_key = { lhs = Infra_Building6 which = Infra_S46 }
						change_key = { lhs = Infra_Building10 which = Infra_S410 }
						change_key = { lhs = Infra_Building22 which = Infra_S422 }
						change_key = { lhs = Infra_Building23 which = Infra_S423 }
						change_key = { lhs = Infra_Building24 which = Infra_S424 }
						change_key = { lhs = Infra_Building41 which = Infra_S441 }
						change_key = { lhs = Infra_BuildingR which = Infra_S4R }
						change_key = { lhs = Infra_BuildingUL which = Infra_S4UL }
					}
					if = {
						limit = {
							has_province_flag = Infra_S5
						}
						change_key = { lhs = Infra_Building6 which = Infra_S56 }
						change_key = { lhs = Infra_Building10 which = Infra_S510 }
						change_key = { lhs = Infra_Building22 which = Infra_S522 }
						change_key = { lhs = Infra_Building23 which = Infra_S523 }
						change_key = { lhs = Infra_Building24 which = Infra_S524 }
						change_key = { lhs = Infra_Building41 which = Infra_S541 }
						change_key = { lhs = Infra_BuildingR which = Infra_S5R }
						change_key = { lhs = Infra_BuildingUL which = Infra_S5UL }
					}
					if = {
						limit = {
							has_province_flag = Infra_S6
						}
						change_key = { lhs = Infra_Building6 which = Infra_S66 }
						change_key = { lhs = Infra_Building10 which = Infra_S610 }
						change_key = { lhs = Infra_Building22 which = Infra_S622 }
						change_key = { lhs = Infra_Building23 which = Infra_S623 }
						change_key = { lhs = Infra_Building24 which = Infra_S624 }
						change_key = { lhs = Infra_Building41 which = Infra_S641 }
						change_key = { lhs = Infra_BuildingR which = Infra_S6R }
						change_key = { lhs = Infra_BuildingUL which = Infra_S6UL }
					}
					if = {
						limit = {
							has_province_flag = Infra_S7
						}
						change_key = { lhs = Infra_Building6 which = Infra_S76 }
						change_key = { lhs = Infra_Building10 which = Infra_S710 }
						change_key = { lhs = Infra_Building22 which = Infra_S722 }
						change_key = { lhs = Infra_Building23 which = Infra_S723 }
						change_key = { lhs = Infra_Building24 which = Infra_S724 }
						change_key = { lhs = Infra_Building41 which = Infra_S741 }
						change_key = { lhs = Infra_BuildingR which = Infra_S7R }
						change_key = { lhs = Infra_BuildingUL which = Infra_S7UL }
					}
					if = {
						limit = {
							has_province_flag = Infra_S8
						}
						change_key = { lhs = Infra_Building6 which = Infra_S86 }
						change_key = { lhs = Infra_Building10 which = Infra_S810 }
						change_key = { lhs = Infra_Building22 which = Infra_S822 }
						change_key = { lhs = Infra_Building23 which = Infra_S823 }
						change_key = { lhs = Infra_Building24 which = Infra_S824 }
						change_key = { lhs = Infra_Building41 which = Infra_S841 }
						change_key = { lhs = Infra_BuildingR which = Infra_S8R }
						change_key = { lhs = Infra_BuildingUL which = Infra_S8UL }
					}
					if = {
						limit = {
							has_province_flag = Infra_S9
						}
						change_key = { lhs = Infra_Building6 which = Infra_S96 }
						change_key = { lhs = Infra_Building10 which = Infra_S910 }
						change_key = { lhs = Infra_Building22 which = Infra_S922 }
						change_key = { lhs = Infra_Building23 which = Infra_S923 }
						change_key = { lhs = Infra_Building24 which = Infra_S924 }
						change_key = { lhs = Infra_Building41 which = Infra_S941 }
						change_key = { lhs = Infra_BuildingR which = Infra_S9R }
						change_key = { lhs = Infra_BuildingUL which = Infra_S9UL }
					}
					# Expansion or shrinkage of industries based on profitability.
					# Then create the demand of maintenance of goods for Property.
					Infra_SetMaint = { type = Agriculture 	RegularMaint=yes 		food = 0.1 	raw = 0.8 	indust = 0 		rate = 0.010 factor = 0.5 max=yes }
					Infra_SetMaint = { type = Forestry 		RegularMaint=yes 		food = 0.1 	raw = 0.5 	indust = 0 		rate = 0.010 factor = 0.5 max=yes }
					Infra_SetMaint = { type = Extraction 	RegularMaint=yes 		food = 0.1 	raw = 0.75 	indust = 0.15 	rate = 0.010 factor = 0.5 max=yes }
					Infra_SetMaint = { type = Fishery 		RegularMaint=yes 		food = 0.1 	raw = 0.6 	indust = 0 		rate = 0.010 factor = 0.5 max=yes }
					Infra_SetMaint = { type = Commercial 	IncomeMaint=yes 		food = 0.05 raw = 0.05 	indust = 0.6 				 factor = 1.0 }
					Infra_SetMaint = { type = Industrial 	RegularMaint=yes 		food = 0.05 raw = 0.15 	indust = 0.6 	rate = 0.010 factor = 0.5 }
					Infra_SetMaint = { type = Academic 		RegularMaint=yes 		food = 0.05 raw = 0.1 	indust = 0.8 	rate = 0.020 factor = 1.0 }
				}
			}
			north_asia = {
				limit = {
					isValidProv = yes
					NOT = { has_province_flag = Siberia_Init }
					owner = {
						has_institution = Banking
						is_nomad = no
					}
				}
				set_province_flag = Siberia_Init
				clr_province_flag = Colony_Init
			}
			steppes_region = {
				limit = {
					NOT = { has_province_flag = Siberia_Init }
					isValidProv = yes
					owner = {
						has_institution = Banking
						is_nomad = no
					}
					NOT = { area = nogai_area }
				}
				set_province_flag = Siberia_Init
				clr_province_flag = Colony_Init
			}
			volga_region = {
				limit = {
					NOT = { has_province_flag = Siberia_Init }
					isValidProv = yes
					owner = {
						has_institution = Banking
						is_nomad = no
					}
					NOT = { area = nogai_area }
				}
				set_province_flag = Siberia_Init
				clr_province_flag = Colony_Init
			}
			crimea_region = {
				limit = {
					NOT = { has_province_flag = Siberia_Init }
					isValidProv = yes
					owner = {
						has_institution = Banking
						is_nomad = no
					}
				}
				set_province_flag = Siberia_Init
				clr_province_flag = Colony_Init
			}
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0012
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		hidden_effect = {
			#TN_AssignSectorID = yes
			TN_PrepSector = yes
			TN_RefreshPrice = yes

			every_country = {
				limit = {
					isValidCountry = yes
				}
				set_key = { lhs = TN_Dole value = 0 }

				if = {
					limit = {
						has_country_modifier = BU_GrainDoleMinor
					}
					set_key = { lhs = TN_Dole value = 0.3 }
				}
				else_if = {
					limit = {
						has_country_modifier = BU_GrainDoleMajor
					}
					set_key = { lhs = TN_Dole value = 0.6 }
				}
				else_if = {
					limit = {
						has_country_modifier = BU_GrainDoleFull
					}
					set_key = { lhs = TN_Dole value = 1 }
				}
				Nat_Stockpiles = yes # Stockpile decay + refresh values		
			}

			regiongroup = {
				region = {
					limit = {
						isValidProv = yes
					}
					if = {
						limit = {
							OR = {
								owner = { has_country_flag = TN_Dole_Universal }
								is_overseas = no
								has_province_modifier = trading_post_province
							}
							is_state = yes
						}
						set_key = { lhs = TN_Dole which = owner }
					}
					else = {
						set_key = { lhs = TN_Dole value = 0 }
					}

					TN_DoSupplyDemand = yes

					set_key = { lhs = Tariff_Income value = 0 }
				}
			}

			TN_SumSector = yes
			TN_ScoreSector = yes

			every_country = {
				limit = {
					isValidCountry = yes
				}
				set_key = { lhs = Tariff_Rate1 value = 0.2 }
				set_key = { lhs = Tariff_Rate2 value = 0.2 }
				set_key = { lhs = Tariff_Rate4 value = 0.2 }
				set_key = { lhs = Tariff_Rate5 value = 0.2 }
				set_key = { lhs = Tariff_Rate6 value = 0.2 }
				set_key = { lhs = Tariff_Rate9 value = 0.2 }
				set_key = { lhs = Tariff_Rate10 value = 0.2 }
				set_key = { lhs = Tariff_Rate21 value = 0.2 }
				set_key = { lhs = Tariff_Rate22 value = 0.2 }
				set_key = { lhs = Tariff_Rate23 value = 0.2 }
				set_key = { lhs = Tariff_Rate24 value = 0.2 }
				set_key = { lhs = Tariff_Rate25 value = 0.2 }
				set_key = { lhs = Tariff_Rate41 value = 0.2 }
			}

			regiongroup = {
				region = {
					limit = {
						has_province_flag = TN_SectorCent
						
						isValidProv = yes
					}
					Tariff_SetRate = yes
				}
			}
			
			regiongroup = {
				region = {
					limit = {
						has_province_flag = TN_SectorCent
					}
					TN_UpdateSubsistence = yes
				}
			}

		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0013
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		hidden_effect = {
			if = {
				limit = {
					has_global_flag = POP_Sim10
				}
				every_province = {
					limit = {
						isValidProv = yes
					}
					trigger_switch = {
						on_trigger = has_province_flag
						
						TN_Major = {
							remove_province_modifier = TN_Important
							remove_province_modifier = TN_Minor
							
							add_permanent_province_modifier = {
								name = TN_Major
								duration = -1
							}
						}
						TN_Important = {
							if = {
								limit = {
									NOT = {
										has_province_modifier = TN_Major
									}
								}
								remove_province_modifier = TN_Minor
								
								add_permanent_province_modifier = {
									name = TN_Important
									duration = -1
								}
							}
						}
						TN_Minor = {
							if = {
								limit = {
									NOT = { has_province_modifier = TN_Major }
									NOT = { has_province_modifier = TN_Important }
								}
								add_permanent_province_modifier = {
									name = TN_Minor
									duration = -1
								}
							}
						}
					}
				}
			}
		}
    }

    option = {
		name = no_localisation
    }
}
country_event = {
    id = POP_Census.0015
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		hidden_effect = {
			TN_DoTrade = yes
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0016
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		hidden_effect = {
			regiongroup = {
				region = {
					limit = {
						has_province_flag = TN_SectorCent
					}
					# Edit for new produce
					
					TN_SetPrcFill = { prod = 1 fluctuationFactor=0.666 }
					TN_SetPrcFill = { prod = 2 fluctuationFactor=0.666 }
					TN_SetPrcFill = { prod = 4 fluctuationFactor=0.666 }
					TN_SetPrcFill = { prod = 5 fluctuationFactor=0.666 }
					TN_SetPrcFill = { prod = 6 fluctuationFactor=0.8 }
					TN_SetPrcFill = { prod = 9 fluctuationFactor=1.5 }
					TN_SetPrcFill = { prod = 10 fluctuationFactor=1.333 }
					TN_SetPrcFill = { prod = 21 fluctuationFactor=1.5 }
					TN_SetPrcFill = { prod = 22 }
					TN_SetPrcFill = { prod = 23 }
					TN_SetPrcFill = { prod = 24 fluctuationFactor=1.5 }
					TN_SetPrcFill = { prod = 25 fluctuationFactor=1.5 }
					TN_SetPrcFill = { prod = 41 fluctuationFactor=1.5 }

					TN_SetMilFills = { prod = 1 var = PublicHelper_Tmp1 }
					TN_SetMilFills = { prod = 2 var = PublicHelper_Tmp2 }
					TN_SetMilFills = { prod = 5 var = PublicHelper_Tmp3 }					
					TN_SetMilFills = { prod = 21 var = PublicHelper_Tmp4 }
					TN_SetMilFills = { prod = 22 var = PublicHelper_Tmp5 }					
					TN_SetMilFills = { prod = 24 var = PublicHelper_Tmp6 }					
					TN_SetMilFills = { prod = 41 var = PublicHelper_Tmp7 }					

					# Edit for new produce
					TN_DoTradeAfterHelper0 = { type=Dmnd moneyVar=Spend prod=1 }
					TN_DoTradeAfterHelper0 = { type=Dmnd moneyVar=Spend prod=2 }
					TN_DoTradeAfterHelper0 = { type=Dmnd moneyVar=Spend prod=4 }
					TN_DoTradeAfterHelper0 = { type=Dmnd moneyVar=Spend prod=5 }
					TN_DoTradeAfterHelper0 = { type=Dmnd moneyVar=Spend prod=6 }
					TN_DoTradeAfterHelper0 = { type=Dmnd moneyVar=Spend prod=9 }
					TN_DoTradeAfterHelper0 = { type=Dmnd moneyVar=Spend prod=10 }
					TN_DoTradeAfterHelper0 = { type=Dmnd moneyVar=Spend prod=21 }
					TN_DoTradeAfterHelper0 = { type=Dmnd moneyVar=Spend prod=22 }
					TN_DoTradeAfterHelper0 = { type=Dmnd moneyVar=Spend prod=23 }
					TN_DoTradeAfterHelper0 = { type=Dmnd moneyVar=Spend prod=24 }
					TN_DoTradeAfterHelper0 = { type=Dmnd moneyVar=Spend prod=25 }
					TN_DoTradeAfterHelper0 = { type=Dmnd moneyVar=Spend prod=41 }

					# Edit for new produce
					TN_DoTradeAfterHelper0 = { type=Sply moneyVar=Earn prod=1 }
					TN_DoTradeAfterHelper0 = { type=Sply moneyVar=Earn prod=2 }
					TN_DoTradeAfterHelper0 = { type=Sply moneyVar=Earn prod=4 }
					TN_DoTradeAfterHelper0 = { type=Sply moneyVar=Earn prod=5 }
					TN_DoTradeAfterHelper0 = { type=Sply moneyVar=Earn prod=6 }
					TN_DoTradeAfterHelper0 = { type=Sply moneyVar=Earn prod=9 }
					TN_DoTradeAfterHelper0 = { type=Sply moneyVar=Earn prod=10 }
					TN_DoTradeAfterHelper0 = { type=Sply moneyVar=Earn prod=21 }
					TN_DoTradeAfterHelper0 = { type=Sply moneyVar=Earn prod=22 }
					TN_DoTradeAfterHelper0 = { type=Sply moneyVar=Earn prod=23 }
					TN_DoTradeAfterHelper0 = { type=Sply moneyVar=Earn prod=24 }
					TN_DoTradeAfterHelper0 = { type=Sply moneyVar=Earn prod=25 }
					TN_DoTradeAfterHelper0 = { type=Sply moneyVar=Earn prod=41 }
					
					DisplayNew = yes
					
					
					every_trade_node_member_province = {
						if = {
							limit = {
								has_province_flag = TN_SectorPart

								owned_by = PREV
								NOT = {
									province_id = PREV
								}
							}
							set_key = { lhs = TN_SectorEarn1 which = PREV }
							set_key = { lhs = TN_SectorEarn2 which = PREV }
							set_key = { lhs = TN_SectorEarn4 which = PREV }
							set_key = { lhs = TN_SectorEarn5 which = PREV }
							set_key = { lhs = TN_SectorEarn6 which = PREV }
							set_key = { lhs = TN_SectorEarn9 which = PREV }
							set_key = { lhs = TN_SectorEarn10 which = PREV }
							set_key = { lhs = TN_SectorEarn21 which = PREV }
							set_key = { lhs = TN_SectorEarn22 which = PREV }
							set_key = { lhs = TN_SectorEarn23 which = PREV }
							set_key = { lhs = TN_SectorEarn24 which = PREV }
							set_key = { lhs = TN_SectorEarn25 which = PREV }
							set_key = { lhs = TN_SectorEarn41 which = PREV }

							set_key = { lhs = TN_SectorSpend1 which = PREV }
							set_key = { lhs = TN_SectorSpend2 which = PREV }
							set_key = { lhs = TN_SectorSpend4 which = PREV }
							set_key = { lhs = TN_SectorSpend5 which = PREV }
							set_key = { lhs = TN_SectorSpend6 which = PREV }
							set_key = { lhs = TN_SectorSpend9 which = PREV }
							set_key = { lhs = TN_SectorSpend10 which = PREV }
							set_key = { lhs = TN_SectorSpend21 which = PREV }
							set_key = { lhs = TN_SectorSpend22 which = PREV }
							set_key = { lhs = TN_SectorSpend23 which = PREV }
							set_key = { lhs = TN_SectorSpend24 which = PREV }
							set_key = { lhs = TN_SectorSpend25 which = PREV }
							set_key = { lhs = TN_SectorSpend41 which = PREV }

							set_key = { lhs = Mil_Fill1 which = PREV }
							set_key = { lhs = Mil_Fill2 which = PREV }
							set_key = { lhs = Mil_Fill5 which = PREV }
							set_key = { lhs = Mil_Fill21 which = PREV }
							set_key = { lhs = Mil_Fill22 which = PREV }
							set_key = { lhs = Mil_Fill24 which = PREV }
							set_key = { lhs = Mil_Fill41 which = PREV }
						}
					}
					every_trade_node_member_province = {
						if = {
							limit = {
								has_province_flag = TN_SectorPart

								owned_by = PREV
							}
							# Edit for new produce
							TN_DoTradeAfter = { prod = 1 type = Food DirectBuy=yes }
							TN_DoTradeAfter = { prod = 2 type = Life DirectBuy=yes }
							TN_DoTradeAfter = { prod = 4 type = Life DirectBuy=yes }
							TN_DoTradeAfter = { prod = 5 type = Life DirectBuy=yes }
							TN_DoTradeAfter = { prod = 6 type = Comfort }
							TN_DoTradeAfter = { prod = 9 type = Luxury }
							TN_DoTradeAfter = { prod = 10 type = Luxury }
							TN_DoTradeAfter = { prod = 21 type = Comfort }
							TN_DoTradeAfter = { prod = 22 }
							TN_DoTradeAfter = { prod = 23 type = Comfort }
							TN_DoTradeAfter = { prod = 24 type = Luxury }
							TN_DoTradeAfter = { prod = 25 type = Luxury }
							TN_DoTradeAfter = { prod = 41 type = Knowledge }

							TN_DoDole = { class = SF }
							TN_DoDole = { class = NM }
							TN_DoDole = { class = RE }
							TN_DoDole = { class = NO }
							TN_DoDole = { class = BG }
							TN_DoDole = { class = CL }
						}
					} 				
				}
			}
			
			TN_SpreadStockpile = yes
			TN_SetTradeIncome = yes
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0017
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		hidden_effect = {
			every_country = {
				limit = {
					isValidCountry = yes
				}
				set_key = { lhs = Infra_StateSpend value = 0 }
			}

			regiongroup = {
				region = {
					limit = {
						isValidProv = yes
					}
					Infra_SetBuildingMax = yes
					Infra_CheckClass = { class=SF }
					Infra_CheckClass = { class=NM }
					Infra_CheckClass = { class=RE }
					Infra_CheckClass = { class=NO }
					Infra_CheckClass = { class=BG }
					Infra_CheckClass = { class=CL }
					Infra_CheckBU = yes
					
					# If property has no slots clear the property
					Infra_ClearEmptyPropertyType = { type = Agriculture }
					Infra_ClearEmptyPropertyType = { type = Forestry }
					Infra_ClearEmptyPropertyType = { type = Extraction }
					Infra_ClearEmptyPropertyType = { type = Fishery }
					Infra_ClearEmptyPropertyType = { type = Commercial }
					Infra_ClearEmptyPropertyType = { type = Industrial }
					Infra_ClearEmptyPropertyType = { type = Academic }
					
					set_key = { lhs = SF_IncomePrp value = 0 }
					set_key = { lhs = NM_IncomePrp value = 0 }
					set_key = { lhs = RE_IncomePrp value = 0 }
					set_key = { lhs = NO_IncomePrp value = 0 }
					set_key = { lhs = BG_IncomePrp value = 0 }
					set_key = { lhs = CL_IncomePrp value = 0 }
					set_key = { lhs = BU_IncomePrp value = 0 }

					set_key = { lhs = Building_AgricultureIncome value = 0 }
					set_key = { lhs = Building_ForestryIncome value = 0 }
					set_key = { lhs = Building_ExtractionIncome value = 0 }
					set_key = { lhs = Building_FisheryIncome value = 0 }
					set_key = { lhs = Building_CommercialIncome value = 0 }
					set_key = { lhs = Building_IndustrialIncome value = 0 }
					set_key = { lhs = Building_AcademicIncome value = 0 }
					
					set_key = { lhs = Building_AgricultureLoss value = 0 }
					set_key = { lhs = Building_ForestryLoss value = 0 }
					set_key = { lhs = Building_ExtractionLoss value = 0 }
					set_key = { lhs = Building_FisheryLoss value = 0 }
					set_key = { lhs = Building_CommercialLoss value = 0 }
					set_key = { lhs = Building_IndustrialLoss value = 0 }
					set_key = { lhs = Building_AcademicLoss value = 0 }

					# Set income from all slots to it's corresponding properties (Agriculture, Resource, etc)
					Prod_SetBuildingIncome = { slot = 0 }
					Prod_SetBuildingIncome = { slot = 1 }
					Prod_SetBuildingIncome = { slot = 2 }
					Prod_SetBuildingIncome = { slot = 3 }
					Prod_SetBuildingIncome = { slot = 4 }
					Prod_SetBuildingIncome = { slot = 5 }
					Prod_SetBuildingIncome = { slot = 6 }
					Prod_SetBuildingIncome = { slot = 7 }
					Prod_SetBuildingIncome = { slot = 8 }
					Prod_SetBuildingIncome = { slot = 9 }
					Prod_SetBuildingIncome = { slot = 10 }
					Prod_SetBuildingIncome = { slot = 11 }
					Prod_SetBuildingIncome = { slot = 12 }
					Prod_SetBuildingIncome = { slot = 13 }
					Prod_SetBuildingIncome = { slot = 14 }
					Prod_SetBuildingIncome = { slot = 15 }
					
					multiply_key = { lhs = Building_AgricultureIncomeAverage value = 0.9 }
					multiply_key = { lhs = Building_ForestryIncomeAverage value = 0.9 }
					multiply_key = { lhs = Building_ExtractionIncomeAverage value = 0.9 }
					multiply_key = { lhs = Building_FisheryIncomeAverage value = 0.9 }
					multiply_key = { lhs = Building_CommercialIncomeAverage value = 0.9 }
					multiply_key = { lhs = Building_IndustrialIncomeAverage value = 0.9 }
					multiply_key = { lhs = Building_AcademicIncomeAverage value = 0.9 }
					
					change_key = { lhs = Building_AgricultureIncomeAverage 	which = Building_AgricultureIncome }
					change_key = { lhs = Building_ForestryIncomeAverage 	which = Building_ForestryIncome }
					change_key = { lhs = Building_ExtractionIncomeAverage 	which = Building_ExtractionIncome }
					change_key = { lhs = Building_FisheryIncomeAverage 		which = Building_FisheryIncome }
					change_key = { lhs = Building_CommercialIncomeAverage 	which = Building_CommercialIncome }
					change_key = { lhs = Building_IndustrialIncomeAverage 	which = Building_IndustrialIncome }
					change_key = { lhs = Building_AcademicIncomeAverage 	which = Building_AcademicIncome }

					# Distribute income of property to classes based on ownership
					Prod_SetPrpIncome = { type = Agriculture }
					Prod_SetPrpIncome = { type = Forestry }
					Prod_SetPrpIncome = { type = Extraction }
					Prod_SetPrpIncome = { type = Fishery }
					Prod_SetPrpIncome = { type = Commercial }
					Prod_SetPrpIncome = { type = Industrial }
					Prod_SetPrpIncome = { type = Academic }
					
					set_key = { lhs = Building_ResourcesSpend value = 0 }
					set_key = { lhs = Building_BuildingSpend value = 0 }
					set_key = { lhs = Building_ProjectSpend value = 0 }

					# Sum spending of maintenance goods of property.
					Infra_SumSpend = { type = Agriculture }
					Infra_SumSpend = { type = Forestry }
					Infra_SumSpend = { type = Extraction }
					Infra_SumSpend = { type = Fishery }
					Infra_SumSpend = { type = Commercial }
					Infra_SumSpend = { type = Industrial }
					Infra_SumSpend = { type = Academic }
					
					# Increase or decrease size of property. For more detailed info visit the specific Function Infra_DoSize
					Infra_DoSize = { type = Agriculture 	cap = Building_AgricultureMax excl = 8 }
					Infra_DoSize = { type = Forestry 		cap = Building_ForestryMax }
					Infra_DoSize = { type = Extraction 		cap = Building_ExtractionMax }
					Infra_DoSize = { type = Fishery 		cap = Building_FisheryMax }
					Infra_DoSize = { type = Commercial }
					Infra_DoSize = { type = Industrial 		excl_cottage = 38 }
					Infra_DoSize = { type = Academic 		excl_relig = 29  }

					set_key = { lhs = Infra_Income value = 0 }
					set_key = { lhs = SF_SpendPrp value = 0 }
					set_key = { lhs = RE_SpendPrp value = 0 }
					set_key = { lhs = NM_SpendPrp value = 0 }
					set_key = { lhs = NO_SpendPrp value = 0 }
					set_key = { lhs = BG_SpendPrp value = 0 }
					set_key = { lhs = CL_SpendPrp value = 0 }
					set_key = { lhs = BU_SpendPrp value = 0 }
					
					set_key = { lhs = SF_SpendInfra value = 0 }
					set_key = { lhs = RE_SpendInfra value = 0 }
					set_key = { lhs = NM_SpendInfra value = 0 }
					set_key = { lhs = NO_SpendInfra value = 0 }
					set_key = { lhs = BG_SpendInfra value = 0 }
					set_key = { lhs = CL_SpendInfra value = 0 }
					set_key = { lhs = BU_SpendInfra value = 0 }
					
					# Decay the share of every class by 2%. This will later by re adjusted based on which class payed for full maintenance of their part.
					Infra_DoDecay = { type = Agriculture }
					Infra_DoDecay = { type = Forestry }
					Infra_DoDecay = { type = Extraction }
					Infra_DoDecay = { type = Fishery }
					Infra_DoDecay = { type = Commercial }
					Infra_DoDecay = { type = Industrial }
					Infra_DoDecay = { type = Academic }
					
					# Total expenditure of property maintenance. What estates and state have to pay to maintain, including what they have to pay to maintain their share.
					Infra_DoSpend = { type = Agriculture 	BU = 0.05 Mine=no }
					Infra_DoSpend = { type = Forestry 		BU = 0.25 Mine=no }
					Infra_DoSpend = { type = Extraction 	BU = 0.40 Mine=yes }
					Infra_DoSpend = { type = Fishery 		BU = 0.05 Mine=no }
					Infra_DoSpend = { type = Commercial 	BU = 0.00 Mine=no }
					Infra_DoSpend = { type = Industrial 	BU = 0.03 Mine=no }
					Infra_DoSpend = { type = Academic 		BU = 0.05 Mine=no Uni=yes }
					set_key = { lhs = Ai_Prp_Maint value = 0 }
					
					Infra_DoShare = { type = Agriculture }
					Infra_DoShare = { type = Forestry }
					Infra_DoShare = { type = Extraction }
					Infra_DoShare = { type = Fishery }
					Infra_DoShare = { type = Commercial }
					Infra_DoShare = { type = Industrial }
					Infra_DoShare = { type = Academic }

					# Set spending of Classes to Infra (Pathing, Harbourage, etc). Add that spending into the infra as Infra_Income
					# Infra_Income is basically how much money is being injected into the infrastructure.
					Infra_DoIncomeInfra = { class = NO div = 140  power = yes antinomad = yes	commercial = yes commercial_div = 90  }
					Infra_DoIncomeInfra = { class = BG div = 100  power = yes charter_BG = yes 	commercial = no  commercial_div = 85 }
					Infra_DoIncomeInfra = { class = CL div = 115  power = yes 					commercial = no  commercial_div = 85 }
					Infra_DoIncomeInfra = { class = SF div = 250 			  freedom = yes 	commercial = yes commercial_div = 225 }
					Infra_DoIncomeInfra = { class = RE div = 225 			  charter_RE = yes 	commercial = yes commercial_div = 175 }

					set_key = { lhs = Infra_StateSpend value = 0 }

					Infra_SetCostPerUnit = { type = Pathing prod1 = 6 prod2 = 24 labor = R }
					Infra_SetCostPerUnit = { type = Harbourage prod1 = 23 prod2 = 24 labor = UL }
					Infra_SetCostPerUnit = { type = Amenities prod1 = 24 prod2 = 41 labor = UL }
					Infra_SetCostPerUnit = { type = Irrigation prod1 = 6 labor = R }
					Infra_SetCostPerUnit = { type = Capitol prod1 = 24 prod2 = 41 labor = UL }
					#Infra_SetCostPerUnit = { type = Courthouse prod1 = 24 prod2 = 41 labor = UL }
					Infra_SetCostPerUnit = { type = Garrison prod1 = 22 prod2 = 24 labor = R }

					Infra_SetSpendInfra = { type = Pathing prod1 = 6 prod2 = 24 labor = R StateBased=no }
					Infra_SetSpendInfra = { type = Harbourage prod1 = 23 prod2 = 24 labor = UL StateBased=no }
					Infra_SetSpendInfra = { type = Amenities prod1 = 24 prod2 = 41 labor = UL StateBased=no }
					Infra_SetSpendInfra = { type = Irrigation prod1 = 6 labor = R StateBased=no }
					Infra_SetSpendInfra = { type = Capitol prod1 = 24 prod2 = 41 labor = UL StateBased=yes }
					#Infra_SetSpendInfra = { type = Courthouse prod1 = 24 prod2 = 41 labor = UL StateBased=yes }
					Infra_SetSpendInfra = { type = Garrison prod1 = 22 prod2 = 24 labor = R StateBased=no }

					if = {
						limit = {
							isValidProv = yes
						}
						owner = {
							change_key = { lhs = Infra_StateSpend which = PREV }
						}
					}

					set_key = { lhs = Infra_Spend which = Infra_PathingSpend }
					change_key = { lhs = Infra_Spend which = Infra_HarbourageSpend }
					change_key = { lhs = Infra_Spend which = Infra_AmenitiesSpend }
					change_key = { lhs = Infra_Spend which = Infra_IrrigationSpend }
					change_key = { lhs = Infra_Spend which = Infra_CapitolSpend }
					#change_key = { lhs = Infra_Spend which = Infra_CourthouseSpend }
					change_key = { lhs = Infra_Spend which = Infra_GarrisonSpend }

					if = {
						limit = {
							NOT = {
								has_global_flag = POP_Sim4
							}
						}						
						Infra_CheckInfra = { type = Pathing prod1 = 6 prod2 = 24 labor = R num = 3 StateBased=no }
						Infra_CheckInfra = { type = Harbourage prod1 = 23 prod2 = 24 labor = UL num = 3 StateBased=no }
						Infra_CheckInfra = { type = Amenities prod1 = 24 prod2 = 41 labor = UL num = 3 StateBased=no }
						Infra_CheckInfra = { type = Irrigation prod1 = 6 labor = R num = 2 StateBased=no }
						Infra_CheckInfra = { type = Garrison prod1 = 22 prod2 = 24 labor = R num = 3 StateBased=no }
						#Infra_CheckInfra = { type = Courthouse prod1 = 24 prod2 = 41 labor = UL num = 3 StateBased=yes }
						Infra_CheckInfra = { type = Capitol prod1 = 24 prod2 = 41 labor = UL num = 3 StateBased=yes }
					}
					
					set_key = { lhs = Building_ResourcesIncome which = Building_AgricultureIncome }
					change_key = { lhs = Building_ResourcesIncome which = Building_ForestryIncome }
					change_key = { lhs = Building_ResourcesIncome which = Building_ExtractionIncome }
					change_key = { lhs = Building_ResourcesIncome which = Building_FisheryIncome }
					set_key = { lhs = Building_BuildingIncome which = Building_CommercialIncome }
					change_key = { lhs = Building_BuildingIncome which = Building_IndustrialIncome }
					change_key = { lhs = Building_BuildingIncome which = Building_AcademicIncome }

					set_key = { lhs = Building_ResourcesSpend which = Building_AgricultureSpend }
					change_key = { lhs = Building_ResourcesSpend which = Building_ForestrySpend }
					change_key = { lhs = Building_ResourcesSpend which = Building_ExtractionSpend }
					change_key = { lhs = Building_ResourcesSpend which = Building_FisherySpend }
					set_key = { lhs = Building_BuildingSpend which = Building_CommercialSpend }
					change_key = { lhs = Building_BuildingSpend which = Building_IndustrialSpend }
					change_key = { lhs = Building_BuildingSpend which = Building_AcademicSpend }
					
					Prod_SumIncomeSpending = { class = SF }
					Prod_SumIncomeSpending = { class = NM }
					Prod_SumIncomeSpending = { class = RE }
					Prod_SumIncomeSpending = { class = NO }
					Prod_SumIncomeSpending = { class = BG }
					Prod_SumIncomeSpending = { class = CL }
					Prod_SumIncomeSpending = { powerbroker = BU }

					Infra_SpendProject = { slot = 0 }
					Infra_SpendProject = { slot = 1 }
					Infra_SpendProject = { slot = 2 }
					Infra_SpendProject = { slot = 3 }
					Infra_SpendProject = { slot = 4 }
					Infra_SpendProject = { slot = 5 }
					Infra_SpendProject = { slot = 6 }
					Infra_SpendProject = { slot = 7 }
					Infra_SpendProject = { slot = 8 }
					Infra_SpendProject = { slot = 9 }

					Infra_CheckProject = { slot = 0 }
					Infra_CheckProject = { slot = 1 }
					Infra_CheckProject = { slot = 2 }
					Infra_CheckProject = { slot = 3 }
					Infra_CheckProject = { slot = 4 }
					Infra_CheckProject = { slot = 5 }
					Infra_CheckProject = { slot = 6 }
					Infra_CheckProject = { slot = 7 }
					Infra_CheckProject = { slot = 8 }
					Infra_CheckProject = { slot = 9 }

					set_key = { lhs = Building_Resources which = Building_Agriculture }
					change_key = { lhs = Building_Resources which = Building_Forestry }
					change_key = { lhs = Building_Resources which = Building_Extraction }
					change_key = { lhs = Building_Resources which = Building_Fishery }

					set_key = { lhs = Building_ResourcesMax value = 0 }
					if = {
						limit = {
							check_key = { lhs = Building_Agriculture value = 0.001 }
						}
						change_key = { lhs = Building_ResourcesMax which = Building_AgricultureMax }
					}
					if = {
						limit = {
							check_key = { lhs = Building_Forestry value = 0.001 }
						}
						change_key = { lhs = Building_ResourcesMax which = Building_ForestryMax }
					}
					if = {
						limit = {
							check_key = { lhs = Building_Extraction value = 0.001 }
						}
						change_key = { lhs = Building_ResourcesMax which = Building_ExtractionMax }
					}
					if = {
						limit = {
							check_key = { lhs = Building_Fishery value = 0.001 }
						}
						change_key = { lhs = Building_ResourcesMax which = Building_FisheryMax }
					}
					Infra_UpdatePerc = { type = Resources }
					
					# Update values
					Prp_SetPrpSumR = yes
					Prp_SetPrpSumB = yes
					# Update values
					Prp_SetPrpShare = { type=Agriculture }
					Prp_SetPrpShare = { type=Forestry }
					Prp_SetPrpShare = { type=Extraction }
					Prp_SetPrpShare = { type=Fishery }
					Prp_SetPrpShare = { type=Commercial }
					Prp_SetPrpShare = { type=Industrial }
					Prp_SetPrpShare = { type=Academic }
					# Update values and disp
					if = {
						limit = {
							check_key = { lhs = Building_Resources value = 0.001 }
						}
						set_key = { lhs = SF_PrpResources which = SF_Resources }
						divide_key = { lhs = SF_PrpResources which = Building_Resources }
						multiply_key = { lhs = SF_PrpResources value = 100 }

						set_key = { lhs = NM_PrpResources which = NM_Resources }
						divide_key = { lhs = NM_PrpResources which = Building_Resources }
						multiply_key = { lhs = NM_PrpResources value = 100 }

						set_key = { lhs = RE_PrpResources which = RE_Resources }
						divide_key = { lhs = RE_PrpResources which = Building_Resources }
						multiply_key = { lhs = RE_PrpResources value = 100 }

						set_key = { lhs = NO_PrpResources which = NO_Resources }
						divide_key = { lhs = NO_PrpResources which = Building_Resources }
						multiply_key = { lhs = NO_PrpResources value = 100 }

						set_key = { lhs = BG_PrpResources which = BG_Resources }
						divide_key = { lhs = BG_PrpResources which = Building_Resources }
						multiply_key = { lhs = BG_PrpResources value = 100 }

						set_key = { lhs = CL_PrpResources which = CL_Resources }
						divide_key = { lhs = CL_PrpResources which = Building_Resources }
						multiply_key = { lhs = CL_PrpResources value = 100 }

						set_key = { lhs = BU_PrpResources which = BU_Resources }
						divide_key = { lhs = BU_PrpResources which = Building_Resources }
						multiply_key = { lhs = BU_PrpResources value = 100 }
					}
					else = {
						set_key = { lhs = NO_PrpResources value = 50 }
						set_key = { lhs = BG_PrpResources value = 0 }
						set_key = { lhs = CL_PrpResources value = 30 }
						set_key = { lhs = SF_PrpResources value = 20 }
						set_key = { lhs = NM_PrpResources value = 0 }
						set_key = { lhs = RE_PrpResources value = 0 }
						set_key = { lhs = BU_PrpResources value = 0 }
					}

					set_key = { lhs = Building_Building which = Building_Commercial }
					change_key = { lhs = Building_Building which = Building_Industrial }
					change_key = { lhs = Building_Building which = Building_Academic }

					if = {
						limit = {
							check_key = { lhs = Building_Building value = 0.001 }
						}
						set_key = { lhs = SF_PrpBuilding which = SF_Building }
						divide_key = { lhs = SF_PrpBuilding which = Building_Building }
						multiply_key = { lhs = SF_PrpBuilding value = 100 }

						set_key = { lhs = NM_PrpBuilding which = NM_Building }
						divide_key = { lhs = NM_PrpBuilding which = Building_Building }
						multiply_key = { lhs = NM_PrpBuilding value = 100 }

						set_key = { lhs = RE_PrpBuilding which = RE_Building }
						divide_key = { lhs = RE_PrpBuilding which = Building_Building }
						multiply_key = { lhs = RE_PrpBuilding value = 100 }

						set_key = { lhs = NO_PrpBuilding which = NO_Building }
						divide_key = { lhs = NO_PrpBuilding which = Building_Building }
						multiply_key = { lhs = NO_PrpBuilding value = 100 }

						set_key = { lhs = BG_PrpBuilding which = BG_Building }
						divide_key = { lhs = BG_PrpBuilding which = Building_Building }
						multiply_key = { lhs = BG_PrpBuilding value = 100 }

						set_key = { lhs = CL_PrpBuilding which = CL_Building }
						divide_key = { lhs = CL_PrpBuilding which = Building_Building }
						multiply_key = { lhs = CL_PrpBuilding value = 100 }

						set_key = { lhs = BU_PrpBuilding which = BU_Building }
						divide_key = { lhs = BU_PrpBuilding which = Building_Building }
						multiply_key = { lhs = BU_PrpBuilding value = 100 }
					}
					else = {
						set_key = { lhs = NO_PrpBuilding value = 0 }
						set_key = { lhs = BG_PrpBuilding value = 50 }
						set_key = { lhs = CL_PrpBuilding value = 30 }
						set_key = { lhs = SF_PrpBuilding value = 0 }
						set_key = { lhs = NM_PrpBuilding value = 0 }
						set_key = { lhs = RE_PrpBuilding value = 20 }
						set_key = { lhs = BU_PrpBuilding value = 0 }
					}
					
					if = {
						limit = {
							check_key = { lhs = Building_Resources value = 0.001 }
						}
						set_key = { lhs = Tmp_0 which = Building_AgricultureIncomeAverage }
						change_key = { lhs = Tmp_0 which = Building_ForestryIncomeAverage }
						change_key = { lhs = Tmp_0 which = Building_ExtractionIncomeAverage }
						change_key = { lhs = Tmp_0 which = Building_FisheryIncomeAverage }
						divide_key = { lhs = Tmp_0 which = Building_Resources }
						
						set_key = { lhs = SF_WealthResources which = SF_Resources }
						set_key = { lhs = NM_WealthResources which = NM_Resources }
						set_key = { lhs = RE_WealthResources which = RE_Resources }
						set_key = { lhs = NO_WealthResources which = NO_Resources }
						set_key = { lhs = BG_WealthResources which = BG_Resources }
						set_key = { lhs = CL_WealthResources which = CL_Resources }
						
						multiply_key = { lhs = SF_WealthResources which = Tmp_0 }
						multiply_key = { lhs = NM_WealthResources which = Tmp_0 }
						multiply_key = { lhs = RE_WealthResources which = Tmp_0 }
						multiply_key = { lhs = NO_WealthResources which = Tmp_0 }
						multiply_key = { lhs = BG_WealthResources which = Tmp_0 }
						multiply_key = { lhs = CL_WealthResources which = Tmp_0 }
					}
					else = {
						set_key = { lhs = SF_WealthResources value = 0 }
						set_key = { lhs = NM_WealthResources value = 0 }
						set_key = { lhs = RE_WealthResources value = 0 }
						set_key = { lhs = NO_WealthResources value = 0 }
						set_key = { lhs = BG_WealthResources value = 0 }
						set_key = { lhs = CL_WealthResources value = 0 }
					}
					
					if = {
						limit = {
							check_key = { lhs = Building_Building value = 0.001 }
						}
						set_key = { lhs = Tmp_0 which = Building_CommercialIncomeAverage }
						change_key = { lhs = Tmp_0 which = Building_IndustrialIncomeAverage }
						change_key = { lhs = Tmp_0 which = Building_AcademicIncomeAverage }
						divide_key = { lhs = Tmp_0 which = Building_Building }
						
						set_key = { lhs = SF_WealthBuilding which = SF_Building }
						set_key = { lhs = NM_WealthBuilding which = NM_Building }
						set_key = { lhs = RE_WealthBuilding which = RE_Building }
						set_key = { lhs = NO_WealthBuilding which = NO_Building }
						set_key = { lhs = BG_WealthBuilding which = BG_Building }
						set_key = { lhs = CL_WealthBuilding which = CL_Building }
						
						multiply_key = { lhs = SF_WealthBuilding which = Tmp_0 }
						multiply_key = { lhs = NM_WealthBuilding which = Tmp_0 }
						multiply_key = { lhs = RE_WealthBuilding which = Tmp_0 }
						multiply_key = { lhs = NO_WealthBuilding which = Tmp_0 }
						multiply_key = { lhs = BG_WealthBuilding which = Tmp_0 }
						multiply_key = { lhs = CL_WealthBuilding which = Tmp_0 }
					}
					else = {
						set_key = { lhs = SF_WealthBuilding value = 0 }
						set_key = { lhs = NM_WealthBuilding value = 0 }
						set_key = { lhs = RE_WealthBuilding value = 0 }
						set_key = { lhs = NO_WealthBuilding value = 0 }
						set_key = { lhs = BG_WealthBuilding value = 0 }
						set_key = { lhs = CL_WealthBuilding value = 0 }
					}

					set_key = { lhs = Tmp_0 value = 0 }
					set_key = { lhs = Tmp_1 value = 0 }
					set_key = { lhs = Tmp_0 value = 0 }
					set_key = { lhs = Tmp_3 value = 0 }
					set_key = { lhs = Tmp_4 value = 0 }
					set_key = { lhs = Tmp_5 value = 0 }
					set_key = { lhs = Tmp_6 value = 0 }
					set_key = { lhs = Tmp_8 value = 0 }
					set_key = { lhs = Tmp_9 value = 0 }
		
					set_key = { lhs = Building_Total value = 0 }
					change_key = { lhs = Building_Total which = Building_Resources }
					change_key = { lhs = Building_Total which = Building_Building }
					
					# Sums of income
					Prp_SetPrpGross = yes
					Infra_RefreshModifier = yes
				}
			}
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0018
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0019
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		hidden_effect = {
			regiongroup = {
				region = {
					limit = {
						isValidProv = yes
					}
					TN_DoIncomeSpending = yes
					clr_province_flag = Wealth_Dispersal
					set_key = { lhs = Tmp_0 value = 0 }
					set_key = { lhs = Tmp_1 value = 0 }
					set_key = { lhs = Tmp_2 value = 0 }
				}
			}
			every_country = {
				limit = {
					isValidCountry = yes
					num_of_cities = 2
				}
				every_owned_province = {
					limit = {
						NOT = { has_province_flag = Wealth_Dispersal }
						NOT = { check_key = { lhs = NM_Ratio value = 75 } } ### cant build anything
					}
					set_province_flag = Wealth_Dispersal
					set_key = { lhs = Tmp_0 which = Infra_Wealth }
					multiply_key = { lhs = Tmp_0 value = 0.02 } # Spread 2% of infra wealth pools around the area
					subtract_key = { lhs = Infra_Wealth which = Tmp_0 } # Take out of wealth pool
					set_key = { lhs = Tmp_1 value = 0 }
					area = {
						if = {
							limit = {
								isValidProv = yes
								NOT = { has_province_flag = Wealth_Dispersal } # all other provs in the area
								owned_by = PREV
								NOT = { check_key = { lhs = NM_Ratio value = 75 } } ### cant build anything
							}
							set_key = { lhs = Tmp_0 which = Infra_Wealth }
							multiply_key = { lhs = Tmp_0 value = 0.02 } # Spread 2% of infra wealth pools around the area
							subtract_key = { lhs = Infra_Wealth which = Tmp_0 } # Take out of wealth pool
							set_key = { lhs = Tmp_1 which = Class_Total } # Calc Pop Share
							multiply_key = { lhs = Tmp_1 value = 0.1 }
							PREV = { change_key = { lhs = Tmp_0 which = PREV } }
							PREV = { change_key = { lhs = Tmp_1 which = PREV } }
						}
					}
					if = {
						limit = {
							check_key = { lhs = Tmp_1 value = 0.001 } # Only if any other prov exists in this area same owner
						}
						#Tmp_0 is the dispersal pool
						set_key = { lhs = Tmp_2 which = Tmp_1 } ### Total Population for Weighting

						# Add this Prov
						set_key = { lhs = Tmp_1 which = Class_Total } # Calc Pop Share
						multiply_key = { lhs = Tmp_1 value = 0.1 }
						change_key = { lhs = Tmp_2 which = Tmp_1 } ### Total Population for Weighting

						divide_key = { lhs = Tmp_1 which = Tmp_2 } ### Divide this pop by total pop
						multiply_key = { lhs = Tmp_1 which = Tmp_0 } ### Apply share onto Wealth Pool
						change_key = { lhs = Infra_Wealth which = Tmp_1 } ### Change Infra Wealth by this amount

						# Handle the rest of the provs
						area = {
							if = {
								limit = {
									isValidProv = yes
									NOT = { has_province_flag = Wealth_Dispersal } # all other provs in the area
									owned_by = PREV
									NOT = { check_key = { lhs = NM_Ratio value = 75 } } ### cant build anything
									NOT = { province_id = PREV } ## just in case
								}
								set_province_flag = Wealth_Dispersal ## Mark as Done.
								if = {
									limit = {
										PREV = { check_key = { lhs = Tmp_0 value = 0.1 } } # Only if any wealth notable was available
									}
									set_key = { lhs = Tmp_0 which = PREV }
									set_key = { lhs = Tmp_2 which = PREV }

									divide_key = { lhs = Tmp_1 which = Tmp_2 } ### Divide this pop by total pop
									multiply_key = { lhs = Tmp_1 which = Tmp_0 } ### Apply share onto Wealth Pool
									change_key = { lhs = Infra_Wealth which = Tmp_1 } ### Change Infra Wealth by this amount
								}
							}
						}
					}
					else = {
						change_key = { lhs = Infra_Wealth which = Tmp_0 } ### Put back in the wealth pool
					}
				} 
			}
			regiongroup = {
				region = {
					limit = {
						isValidEmpty = yes
						NOT = { has_global_flag = POP_Sim }
					}
					
					random_list = {
						6 = {
						}
						2 = {
							Immunity_Calc = { Type=0 }
							Immunity_Calc = { Type=1 }
							Immunity_Calc = { Type=2 }
							Immunity_Calc = { Type=3 }
							Immunity_Calc = { Type=4 }
						}
					}
				}
			}

			regiongroup = {
				region = {
					limit = {
						isValidProv = yes
					}
					TN_SetIncome = yes

					set_key = { lhs = Tmp_0 value = 0 }
					set_key = { lhs = Tmp_1 value = 0 }
					set_key = { lhs = Tmp_0 value = 0 }
					set_key = { lhs = Tmp_3 value = 0 }
				}
			}
		}
    }
    
    option = {
        name = no_localisation
    }
}

country_event = {
    id = POP_Census.002
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		hidden_effect = {
			Modi_Main = yes
		}
    }

    option = {
		name = no_localisation
    }
}
country_event = {
    id = POP_Census.003
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		hidden_effect = {
			every_province = {
				limit = {
					isValidProv = yes
				}
				# General Timer
				change_key = { lhs = YearsOfRule value = 1 }
				
				# 5 Year Timer
				change_key = { lhs = YearTimer5 value = 1 }
				if = {
					limit = {
						check_key = { lhs = YearTimer5 value = 5 }
					}
					set_key = { lhs = YearTimer5 value = 0 }
				}
				
				# 10 Year Timer
				change_key = { lhs = YearTimer10 value = 1 }
				if = {
					limit = {
						check_key = { lhs = YearTimer10 value = 10 }
					}
					set_key = { lhs = YearTimer10 value = 0 }
				}
				
				# 25 Year Timer
				change_key = { lhs = YearTimer25 value = 1 }
				if = {
					limit = {
						check_key = { lhs = YearTimer25 value = 25 }
					}
					set_key = { lhs = YearTimer25 value = 0 }
					Rights_SyncTick = yes
				}
			}
		}
    }

    option = {
		name = no_localisation
    }
}
country_event = {
    id = POP_Census.0021
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		hidden_effect = {
			every_country = {
				limit = {
					isValidCountry = yes
				}
				clr_country_flag = Teuton_Sponsor
				clr_country_flag = Knights_Sponsor
				
				#clr_country_flag = BAL_Coloniser
				#clr_country_flag = FEA_Coloniser
				#clr_country_flag = HOA_Coloniser
				#clr_country_flag = IND_Coloniser
				#clr_country_flag = SEA_Coloniser
				#clr_country_flag = LATIN_Coloniser
				#clr_country_flag = MEN_Coloniser
				#clr_country_flag = RUS_Coloniser
				#clr_country_flag = SWA_Coloniser
				#clr_country_flag = WAF_Coloniser
				
				clr_country_flag = has_too_much_money

				## Pre tax
				Stat_Pre = yes
				Admin_Main = yes # tax efficency, bureaucracy
				
				set_key = { lhs = Building_ProjectSpend value = 0 }
				every_owned_province = {
					limit = {
						check_key = { lhs = Building_ProjectSpend value = 0.001 }
					}
					PREV = {
						change_key = { lhs = Building_ProjectSpend which = PREV }
					}
				}
				
				subtract_key = { lhs = Building_ProjectWealth which = Building_ProjectSpend }
				
				if = {
					limit = {
						NOT = {
							check_key = { lhs = Building_ProjectWealth value = 0 }
						}
					}
					multiply_key = { lhs = Building_ProjectWealth value = -1 }
					
					every_owned_province = {
						limit = {
							check_key = { lhs = Building_ProjectSpend value = 0.001 }
						}
						set_key = { lhs = Building_ProjectWealth which = PREV }
						
						multiply_key = { lhs = Building_ProjectSpend which = Building_ProjectWealth }
						divide_key = { lhs = Building_ProjectSpend which = PREV }
					}
					
					set_key = { lhs = Building_ProjectWealth value = 0 }
				}
				else = {
					every_owned_province = {
						limit = {
							check_key = { lhs = Building_ProjectSpend value = 0.001 }
						}
						set_key = { lhs = Building_ProjectSpend value = 0 }
					}
				}
				
				if = {
					limit = {
						ai = no 
						#always = yes
					}
					every_owned_province = {
						POP_Consumption = { prod = 1 }
						POP_Consumption = { prod = 2 }
						POP_Consumption = { prod = 4 }
						POP_Consumption = { prod = 5 }
						POP_Consumption = { prod = 6 }
						POP_Consumption = { prod = 9 }
						POP_Consumption = { prod = 10 }
						POP_Consumption = { prod = 21 }
						POP_Consumption = { prod = 23 }
						POP_Consumption = { prod = 24 }
						POP_Consumption = { prod = 25 }
						POP_Consumption = { prod = 41 }
					}
				}
				export_ship_speed_multiplier_effect = { which = Tmp_0 }

				if = {
					limit = {
						NOT = {
							check_key = { lhs = pc_ss which = Tmp_0 }
						}
					}
					set_country_flag = tf_recalculate_communication_efficiency
				}

				set_key = { lhs = pc_ss which = Tmp_0 }

				set_key = { lhs = Tmp_0 value = 0 }
			}
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0022
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		hidden_effect = {
			regiongroup = {
				region = {
					limit = {
						isValidProv = yes
					}
					Prov_Main = yes
				}
			}
			every_country = {
				limit = {
					isValidCountry = yes
				}
				Nat_SumStats = yes # sum up variables at national level
			}
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0023
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

	immediate = {
		hidden_effect = {
			every_province = {
				limit = {
					isValidProv = yes
				}
				Stat_Set = yes
				Prov_DispProfit = yes
				Prod_Disp = yes
				#if = {
				#	limit = {
				#		isValidProv = yes
				#	}
					if = {
						limit = {
							OR = {
								has_province_modifier = Teuton_Commandery_Low
								has_province_modifier = Teuton_Commandery_Med
								has_province_modifier = Teuton_Commandery_High
								has_province_modifier = Teuton_Commandery_Low_trade
								has_province_modifier = Teuton_Commandery_Med_trade
								has_province_modifier = Teuton_Commandery_High_trade
							}
						}
						owner = { set_country_flag = Teuton_Sponsor }
					}
					if = {
						limit = {
							OR = {
								has_province_modifier = Knights_Commandery_Low
								has_province_modifier = Knights_Commandery_Med
								has_province_modifier = Knights_Commandery_High
								has_province_modifier = Knights_Commandery_Low_trade
								has_province_modifier = Knights_Commandery_Med_trade
								has_province_modifier = Knights_Commandery_High_trade
							}
						}
						owner = { set_country_flag = Knights_Sponsor }
					}
				#}
			}
		}
	}

	option = {
		name = no_localisation
	}
}

country_event = {
    id = POP_Census.0024
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

	immediate = {
		hidden_effect = {
			every_country = {
				limit = {
					isValidCountry = yes
				}
				Ruler_Calc = yes
				Nat_Main = yes
				#Nat_StateCrpt = yes
				Stat_CountrySet = yes
				FC_Census = yes
				
				#Desire_DoGainAnnual = { type = NO }
				#Desire_DoGainAnnual = { type = BG }
				#Desire_DoGainAnnual = { type = CL }

				MP_LossGainRecalc = yes
				if = {
					limit = {
						NOT = { has_global_flag = POP_Sim }
					}
					Combat_Penalties = yes
				}
			}
		}
	}

	option = {
		name = no_localisation
	}
}
country_event = {
    id = POP_Census.005
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
    
    immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_global_flag = Minor_Opts }
				}
				set_global_flag = Minor_Opts
				every_province = {
					if = {
						limit = {
							latin_med_coast = yes
						}
						set_province_flag = latin_med_coast
					}
					if = {
						limit = {
							maghreb_med_coast = yes
						}
						set_province_flag = maghreb_med_coast
					}
				}
			}
			if = {
				limit = {
					has_country_flag = biannual
				}
				clr_country_flag = biannual
				set_country_flag = notbiannual
			}
			else = {
				clr_country_flag = notbiannual
				set_country_flag = biannual
			}
			if = {
				limit = {
					has_country_flag = triannual1
				}
				clr_country_flag = triannual1
				set_country_flag = triannual2
			}
			else_if = {
				limit = {
					has_country_flag = triannual2
				}
				clr_country_flag = triannual2
				set_country_flag = triannual3
			}
			else_if = {
				limit = {
					has_country_flag = triannual3
				}
				clr_country_flag = triannual3
				set_country_flag = triannual1
			}
			else = {
				set_country_flag = triannual1
			}
			if = {
				limit = {
					has_country_flag = quadannual1
				}
				clr_country_flag = quadannual1
				set_country_flag = quadannual2
			}
			else_if = {
				limit = {
					has_country_flag = quadannual2
				}
				clr_country_flag = quadannual2
				set_country_flag = quadannual3
			}
			else_if = {
				limit = {
					has_country_flag = quadannual3
				}
				clr_country_flag = quadannual3
				set_country_flag = quadannual4
			}
			else_if = {
				limit = {
					has_country_flag = quadannual4
				}
				clr_country_flag = quadannual4
				set_country_flag = quadannual1
			}
			else = {
				set_country_flag = quadannual1
			}
			if = {
				limit = {
					has_country_flag = pentannual1
				}
				clr_country_flag = pentannual1
				set_country_flag = pentannual2
			}
			else_if = {
				limit = {
					has_country_flag = pentannual2
				}
				clr_country_flag = pentannual2
				set_country_flag = pentannual3
			}
			else_if = {
				limit = {
					has_country_flag = pentannual3
				}
				clr_country_flag = pentannual3
				set_country_flag = pentannual4
			}
			else_if = {
				limit = {
					has_country_flag = pentannual4
				}
				clr_country_flag = pentannual4
				set_country_flag = pentannual5
			}
			else_if = {
				limit = {
					has_country_flag = pentannual5
				}
				clr_country_flag = pentannual5
				set_country_flag = pentannual1
			}
			else = {
				set_country_flag = pentannual1
			}
			every_country = {
				limit = {
					isValidCountry = yes
				}
				Centralism_Check = yes
				clr_country_flag = RussiaExpansion
				clr_country_flag = RomeExpansion
				clr_country_flag = InMiddleKingdom
				clr_country_flag = CAUCASIANISOLATION
				capital_scope = { 
					if = {
						limit = {
							NOT = { is_year = 1550 }
							OR = {
								region = north_caucasus_region
								region = south_caucasus_region
								superregion = european_steppe_superregion
							}
						}
					}
					PREV = { set_country_flag = CAUCASIANISOLATION }
				}
				capital_scope = {
					if = {
						limit = {
							OR = {
								continent = north_america
								continent = south_america
							}
						}
                        PREV = { set_country_flag = NewWorldTag }
					}
					else = {
						PREV = { clr_country_flag = NewWorldTag }
					}
				}
				clr_country_flag = PriorityTag
				if = {
					limit = {
						OR = {
							has_country_flag = ongoing_civil_war
							tag = PAP
							tag = OTT
							tag = TUR
							tag = RUS
							tag = MOS
							tag = ENG
							tag = CAS
							tag = POR
							tag = SPA
							tag = FRA
							tag = TIM
							tag = BYZ
							tag = POL
							tag = LIT
							tag = PLC
							tag = HAB
							tag = JAP
							tag = KOR
							tag = GBR
							is_emperor = yes
							has_reform = shogunate
						}
					}
					set_country_flag = PriorityTag
				}
			}
			greece_region = {
				if = {
					limit = {
						NOT = { has_province_flag = RomeExpansion }
					}
					set_province_flag = RomeExpansion
				}
				owner = {
					set_country_flag = RomeExpansion
				}
			}
			east_balkan_region = {
				if = {
					limit = {
						NOT = { has_province_flag = RomeExpansion }
					}
					set_province_flag = RomeExpansion
				}
				owner = {
					set_country_flag = RomeExpansion
				}
			}
			central_balkan_region = {
				if = {
					limit = {
						NOT = { has_province_flag = RomeExpansion }
					}
					set_province_flag = RomeExpansion
				}
				owner = {
					set_country_flag = RomeExpansion
				}
			}
			north_anatolia_region = {
				if = {
					limit = {
						NOT = { has_province_flag = RomeExpansion }
					}
					set_province_flag = RomeExpansion
				}
				owner = {
					set_country_flag = RomeExpansion
				}
			}
			west_anatolia_region = {
				if = {
					limit = {
						NOT = { has_province_flag = RomeExpansion }
					}
					set_province_flag = RomeExpansion
				}
				owner = {
					set_country_flag = RomeExpansion
				}
			}
			south_anatolia_region = {
				if = {
					limit = {
						NOT = { has_province_flag = RomeExpansion }
					}
					set_province_flag = RomeExpansion
				}
				owner = {
					set_country_flag = RomeExpansion
				}
			}
			cilicia_area = {
				if = {
					limit = {
						NOT = { has_province_flag = RomeExpansion }
					}
					set_province_flag = RomeExpansion
				}
				owner = {
					set_country_flag = RomeExpansion
				}
			}
			malatya_area = {
				if = {
					limit = {
						NOT = { has_province_flag = RomeExpansion }
					}
					set_province_flag = RomeExpansion
				}
				owner = {
					set_country_flag = RomeExpansion
				}
			}
			sophene_area = {
				if = {
					limit = {
						NOT = { has_province_flag = RomeExpansion }
					}
					set_province_flag = RomeExpansion
				}
				owner = {
					set_country_flag = RomeExpansion
				}
			}
			crimea_area = {
				if = {
					limit = {
						NOT = { has_province_flag = RomeExpansion }
					}
					set_province_flag = RomeExpansion
				}
				owner = {
					set_country_flag = RomeExpansion
				}
			}
			albania_area = {
				if = {
					limit = {
						NOT = { has_province_flag = RomeExpansion }
					}
					set_province_flag = RomeExpansion
				}
				owner = {
					set_country_flag = RomeExpansion
				}
			}
			west_circassia_area = {
				if = {
					limit = {
						NOT = { has_province_flag = RussiaExpansion }
					}
					set_province_flag = RussiaExpansion
				}
				owner = {
					set_country_flag = RussiaExpansion
				}
			}
			west_siberia_region = {
				if = {
					limit = {
						NOT = { has_province_flag = RussiaExpansion }
					}
					set_province_flag = RussiaExpansion
				}
				owner = {
					set_country_flag = RussiaExpansion
				}
			}
			east_siberia_region = {
				if = {
					limit = {
						NOT = { has_province_flag = RussiaExpansion }
					}
					set_province_flag = RussiaExpansion
				}
				owner = {
					set_country_flag = RussiaExpansion
				}
			}
			outer_mongolia_region = {
				if = {
					limit = {
						NOT = { has_province_flag = RussiaExpansion }
					}
					set_province_flag = RussiaExpansion
				}
				owner = {
					set_country_flag = RussiaExpansion
				}
			}
			east_manchuria_region = {
				if = {
					limit = {
						NOT = { has_province_flag = RussiaExpansion }
					}
					set_province_flag = RussiaExpansion
				}
				owner = {
					set_country_flag = RussiaExpansion
				}
			}
			every_province = {
				limit = {
					isValidProv = yes
				}
				trigger_switch = {
					on_trigger = superregion
					commonwealth_superregion = {
						if = {
							limit = {
								NOT = { has_province_flag = RussiaExpansion }
							}
							set_province_flag = RussiaExpansion
						}
						owner = {
							set_country_flag = RussiaExpansion
						}
					}
					greater_russia_superregion = {
						if = {
							limit = {
								NOT = { has_province_flag = RussiaExpansion }
							}
							set_province_flag = RussiaExpansion
						}
						owner = {
							set_country_flag = RussiaExpansion
						}
					}
					european_steppe_superregion = {
						if = {
							limit = {
								NOT = { has_province_flag = RussiaExpansion }
							}
							set_province_flag = RussiaExpansion
						}
						owner = {
							set_country_flag = RussiaExpansion
						}
					}
					central_asia_superregion = {
						if = {
							limit = {
								NOT = { has_province_flag = RussiaExpansion }
							}
							set_province_flag = RussiaExpansion
						}
						owner = {
							set_country_flag = RussiaExpansion
						}
					}
					north_china_superregion = {
						if = {
							limit = {
								NOT = { has_province_flag = InMiddleKingdom }
							}
							set_province_flag = InMiddleKingdom
						}
						owner = {
							set_country_flag = InMiddleKingdom
						}
					}
					east_china_superregion = {
						if = {
							limit = {
								NOT = { area = taiwan_area }
								NOT = { has_province_flag = InMiddleKingdom }
							}
							set_province_flag = InMiddleKingdom
						}
						owner = {
							set_country_flag = InMiddleKingdom
						}
					}
					southwest_china_superregion = {
						if = {
							limit = {
								NOT = { has_province_flag = InMiddleKingdom }
							}
							set_province_flag = InMiddleKingdom
						}
						owner = {
							set_country_flag = InMiddleKingdom
						}
					}
					france_superregion = {
						if = {
							limit = {
								NOT = { region = belgii_region }
								NOT = {
									AND = {
										province_id = 202
										owned_by = PAP
									}
								}
							}
							set_province_flag = Core_FRA
						}
					}
				}
			}
			every_country = {
				limit = {
					ai = no
				}
				capital_scope = {
					every_province = {
						limit = {
							is_capital = yes
							OR = {
								superregion = PREV
								AND = {
									PREV = { province_id = 1402 }
									superregion = anatolia_superregion
								}
							}
							owner = {
								ai = yes
							}
						}
						owner = {
							set_country_flag = PriorityTag
						}
					}
				}
				every_known_country = {
					limit = {
						isValidCountry = yes
						ai = yes
						OR = {
							is_rival = PREV
							PREV = { is_rival = PREV }
							is_enemy = PREV
							PREV = { is_enemy = PREV }
							alliance_with = PREV
							PREV = { is_subject_of = PREV }
							is_subject_of = PREV
							war_with = PREV
						}
					}
					set_country_flag = PriorityTag
				}
				every_neighbor_country = {
					limit = {
						isValidCountry = yes
						ai = yes
					}
					set_country_flag = PriorityTag
				}
			}
			if = {
				limit = {
					any_country = {
						Timur_Has = yes
						exists = yes
					}
				}
				country_event = {
					id = timur.20
					days = 2
				} 
			}
			every_country = {
				limit = {
					has_country_flag = no_cavalry
					isValidCountry = yes
					any_owned_province = { NOT = { has_province_flag = no_horses_present } }
				}
				clr_country_flag = no_cavalry
				country_event = {
					id = SYS_Colony.003
					days = 30
				} 
			}
			MigrationZone_Census = yes
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.006
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes
    
    is_triggered_only = yes
    trigger = {
        tag = AAA
    }

    immediate = {
		hidden_effect = {
			every_country = {
				limit = {
					isValidCountry = yes
				}
				set_key = { lhs = ID_Tag_Opt_Max which = PREV }
				### CE
				if = {
					limit = {
						OR = {
							AND = {
								has_country_flag = PriorityTag
								NOT = { num_of_cities = 30 } # super-large
							}
							ai = no
						}
					}
					AAA = {
						trigger_switch = {
							on_trigger = has_country_flag
							quadannual1 = {
								PREV = {
									if = {
										limit = {
											check_key = { lhs = ID_Tag_Opt which = ID_Quad1 }
										}
										set_country_flag = tf_recalculate_communication_efficiency
									}
								}
							}
							quadannual2 = {
								PREV = {
									if = {
										limit = {
											NOT = { check_key = { lhs = ID_Tag_Opt which = ID_Quad1 } }
											check_key = { lhs = ID_Tag_Opt which = ID_Quad2 }
										}
										set_country_flag = tf_recalculate_communication_efficiency
									}
								}
							}
							quadannual3 = {
								PREV = {
									if = {
										limit = {
											NOT = { check_key = { lhs = ID_Tag_Opt which = ID_Quad2 } }
											check_key = { lhs = ID_Tag_Opt which = ID_Quad3 }
										}
										set_country_flag = tf_recalculate_communication_efficiency
									}
								}
							}
							quadannual4 = {
								PREV = {
									if = {
										limit = {
											NOT = { check_key = { lhs = ID_Tag_Opt which = ID_Quad3 } }
										}
										set_country_flag = tf_recalculate_communication_efficiency
									}
								}
							}
						}
					}
				}
				else = {
					AAA = {
						trigger_switch = {
							on_trigger = has_country_flag
							pentannual1 = {
								PREV = {
									if = {
										limit = {
											check_key = { lhs = ID_Tag_Opt which = ID_Pent1 }
										}
										set_country_flag = tf_recalculate_communication_efficiency
									}
								}
							}
							pentannual2 = {
								PREV = {
									if = {
										limit = {
											NOT = { check_key = { lhs = ID_Tag_Opt which = ID_Pent1 } }
											check_key = { lhs = ID_Tag_Opt which = ID_Pent2 }
										}
										set_country_flag = tf_recalculate_communication_efficiency
									}
								}
							}
							pentannual3 = {
								PREV = {
									if = {
										limit = {
											NOT = { check_key = { lhs = ID_Tag_Opt which = ID_Pent2 } }
											check_key = { lhs = ID_Tag_Opt which = ID_Pent3 }
										}
										set_country_flag = tf_recalculate_communication_efficiency
									}
								}
							}
							pentannual4 = {
								PREV = {
									if = {
										limit = {
											NOT = { check_key = { lhs = ID_Tag_Opt which = ID_Pent3 } }
											check_key = { lhs = ID_Tag_Opt which = ID_Pent4 }
										}
										set_country_flag = tf_recalculate_communication_efficiency
									}
								}
							}
							pentannual5 = {
								PREV = {
									if = {
										limit = {
											NOT = { check_key = { lhs = ID_Tag_Opt which = ID_Pent4 } }
										}
										set_country_flag = tf_recalculate_communication_efficiency
									}
								}
							}
						}
					}
				}
				if = {
					limit = {
						ai = yes
					}
					## AI Tax
					if = {
						limit = {
							OR = {
								num_of_cities = 10
								has_country_flag = PriorityTag
							}
						}
						AAA = {
							trigger_switch = {
								on_trigger = has_country_flag
								triannual1 = {
									PREV = {
										if = {
											limit = {
												check_key = { lhs = ID_Tag_Opt which = ID_Tri1 }
											}
											set_country_flag = AITax_Yearly
										}
									}
								}
								triannual2 = {
									PREV = {
										if = {
											limit = {
												NOT = { check_key = { lhs = ID_Tag_Opt which = ID_Tri1 } }
												check_key = { lhs = ID_Tag_Opt which = ID_Tri2 }
											}
											set_country_flag = AITax_Yearly
										}
									}
								}
								triannual3 = {
									PREV = {
										if = {
											limit = {
												NOT = { check_key = { lhs = ID_Tag_Opt which = ID_Tri2 } }
											}
											set_country_flag = AITax_Yearly
										}
									}
								}
							}
						}
					}
					else_if = {
						limit = {
							NOT = { num_of_cities = 10 }
							num_of_cities = 5
						}
						AAA = {
							trigger_switch = {
								on_trigger = has_country_flag
								quadannual1 = {
									PREV = {
										if = {
											limit = {
												check_key = { lhs = ID_Tag_Opt which = ID_Quad1 }
											}
											set_country_flag = AITax_Yearly
										}
									}
								}
								quadannual2 = {
									PREV = {
										if = {
											limit = {
												NOT = { check_key = { lhs = ID_Tag_Opt which = ID_Quad1 } }
												check_key = { lhs = ID_Tag_Opt which = ID_Quad2 }
											}
											set_country_flag = AITax_Yearly
										}
									}
								}
								quadannual3 = {
									PREV = {
										if = {
											limit = {
												NOT = { check_key = { lhs = ID_Tag_Opt which = ID_Quad2 } }
												check_key = { lhs = ID_Tag_Opt which = ID_Quad3 }
											}
											set_country_flag = AITax_Yearly
										}
									}
								}
								quadannual4 = {
									PREV = {
										if = {
											limit = {
												NOT = { check_key = { lhs = ID_Tag_Opt which = ID_Quad3 } }
											}
											set_country_flag = AITax_Yearly
										}
									}
								}
							}
						}
					}
					else = {
						AAA = {
							trigger_switch = {
								on_trigger = has_country_flag
								pentannual1 = {
									PREV = {
										if = {
											limit = {
												check_key = { lhs = ID_Tag_Opt which = ID_Pent1 }
											}
											set_country_flag = AITax_Yearly
										}
									}
								}
								pentannual2 = {
									PREV = {
										if = {
											limit = {
												NOT = { check_key = { lhs = ID_Tag_Opt which = ID_Pent1 } }
												check_key = { lhs = ID_Tag_Opt which = ID_Pent2 }
											}
											set_country_flag = AITax_Yearly
										}
									}
								}
								pentannual3 = {
									PREV = {
										if = {
											limit = {
												NOT = { check_key = { lhs = ID_Tag_Opt which = ID_Pent2 } }
												check_key = { lhs = ID_Tag_Opt which = ID_Pent3 }
											}
											set_country_flag = AITax_Yearly
										}
									}
								}
								pentannual4 = {
									PREV = {
										if = {
											limit = {
												NOT = { check_key = { lhs = ID_Tag_Opt which = ID_Pent3 } }
												check_key = { lhs = ID_Tag_Opt which = ID_Pent4 }
											}
											set_country_flag = AITax_Yearly
										}
									}
								}
								pentannual5 = {
									PREV = {
										if = {
											limit = {
												NOT = { check_key = { lhs = ID_Tag_Opt which = ID_Pent4 } }
											}
											set_country_flag = AITax_Yearly
										}
									}
								}
							}
						}
					}
				}
			}
			country_event = {
				id = AI_Tax.001
			}
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.116
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes
    
    is_triggered_only = yes
    trigger = {
        tag = AAA
    }

    immediate = {
		hidden_effect = {
		# every_province = {
		#     limit = {
		#         isValidProv = yes
		#     }
		#     Edu_DoProv = yes
		# }
		# every_country = {
		#     Edu_DoCountry = yes
		# }
		# every_province = {
		#     limit = {
		#         has_province_flag = Has_Uni
		#     }
		#     #log = "[This.GetName] Literacy Peasantry [This.GV_SF_Lit]"
		#     #log = "[This.GetName] Literacy Nomads [This.GV_NM_Lit]"
		#     #log = "[This.GetName] Literacy Residents [This.GV_RE_Lit]"
		#     #log = "[This.GetName] Literacy Nobles [This.GV_NO_Lit]"
		#     #log = "[This.GetName] Literacy Burghers [This.GV_BG_Lit]"
		#     #log = "[This.GetName] Literacy Clergy [This.GV_CL_Lit]"
		# }           
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.117
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes
    
    is_triggered_only = yes
    trigger = {
        tag = AAA
    }

    immediate = {
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = Do_World_Edu
				}
				#WorldEducation = { cont = 1 }
				#WorldEducation = { cont = 7 }
				#WorldEducationAsia = { cont = 12 cont1 = 6 cont2 = 5 }
				#WorldEducation = { cont = 8 }
				#WorldEducation = { cont = 11 }
				clr_country_flag = Do_World_Edu
			}
			else = {
				set_country_flag = Do_World_Edu
			}
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.009
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = { is_year = 1358 }
				}
				every_country = { limit = { isValidCountry = yes ai = yes } 
					set_country_flag = AITax_Yearly
					add_years_of_income = 2.5
				}
			}
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.020
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		hidden_effect = {
			Prod_DoMain = yes
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0093
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		hidden_effect = {
			every_country = {
				limit = {
					isValidCountry = yes
				}
				Advisor_UpdateTimers = yes
				POP_GetAdminEffic = { return = Tax_AdminEffic }
				every_owned_province = {
					Tax_CalcCosts = yes
				}
			}
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.0095
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes
    is_triggered_only = yes

    immediate = {
		hidden_effect = {
			#if = { limit = { religion = catholic } country_event = { id = DG_Papacy.001 days = 10 } }
			#PAP = { country_event = { id = DG_Papacy.002 days = 10 } }
			if = {
				limit = { is_religion_enabled = waldensian }
				event_target:wal_origins = { province_event = { id = DG_Waldensians.118 days = 5 } }
			}
			if = {
				limit = { is_religion_enabled = lollard }
				event_target:lol_origins = { province_event = { id = DG_Lollards.118 days = 6 } }
			}
			if = {
				limit = { is_religion_enabled = hussite }
				event_target:hus_origins = { province_event = { id = DG_Hussites.118 days = 4 } }
			}
			if = {
				limit = { is_religion_enabled = protestant }
				event_target:pro_origins = { province_event = { id = DG_Protestant.118 days = 2 } }
			}
			if = {
				limit = { is_religion_enabled = reformed }
				event_target:ref_origins = { province_event = { id = DG_Reformed.118 days = 3 } }
			}
		}
	}

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.893
    title = POP_Census.893.t
    desc = POP_Census.893.d
	picture = ECONOMY_eventPicture

    is_triggered_only = yes

    option = {
		name = POP_Census.893.6
		custom_tooltip = POP_Census.893.6d
		hidden_effect = {
			trigger_switch = {
				on_trigger = has_country_flag
				Tax_ScopeAll = {
					clr_country_flag = Tax_ScopeAll
					set_country_flag = Tax_ScopeSelected
				}
				Tax_ScopeSelected = {
					clr_country_flag = Tax_ScopeSelected
					set_country_flag = Tax_ScopeNonOverseas
				}
				Tax_ScopeNonOverseas = {
					clr_country_flag = Tax_ScopeNonOverseas
					set_country_flag = Tax_ScopeAll
				}
			}
			country_event = {
				id = POP_Census.894
			}
		}
    }
    option = {
		name = POP_Census.893.7
		custom_tooltip = POP_Census.893.7d
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = Tax_DelegationS
				}
				clr_country_flag = Tax_DelegationS
			}
			else = {
				set_country_flag = Tax_DelegationS
			}
			country_event = {
				id = POP_Census.894
			}
		}
    }
    option = {
		name = POP_Census.893.8
		custom_tooltip = POP_Census.893.8d
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = Tax_EventS
				}
				clr_country_flag = Tax_EventS
			}
			else = {
				set_country_flag = Tax_EventS
			}
			country_event = {
				id = POP_Census.894
			}
		}
    }
    option = {
		name = POP_Census.893.1
		custom_tooltip = POP_Census.893.1d
		
		country_event = {
			id = POP_Census.931
		}
    }
	option = {
		name = POP_Census.893.2
		custom_tooltip = POP_Census.893.2d
		
		country_event = {
			id = POP_Census.932
		}
    }
	option = {
		name = POP_Census.893.3
		custom_tooltip = POP_Census.893.3d
		
		country_event = {
			id = POP_Census.933
		}
    }
	option = {
		name = POP_Census.893.4
        highlight = yes
		custom_tooltip = POP_Census.893.4d
		
		hidden_effect = {
			every_owned_province = {
				clr_province_flag = PlayerTaxCost
			}
			if = {
				limit = {
					has_country_flag = Tax_ScopeSelected
				}
				every_owned_province = {
					limit = {
						has_province_flag = UI_Select
					}
					set_province_flag = PlayerTaxCost
				}
			}
			country_event = {
				id = POP_Census.934
			}
		}
    }
	
	option = {
        name = exit
        highlight = yes
    }
}
country_event = {
    id = POP_Census.894
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture
	
	hidden = yes
	
    is_triggered_only = yes

    option = {
		name = no_localisation
		
		country_event = {
			id = POP_Census.893
		}
    }
}
country_event = {
	id = POP_Census.895
	title = "POP_Census.895.name"
	desc = "POP_Census.895.desc"
	picture = ECONOMY_eventPicture
	is_triggered_only = yes

	option = {
		name = "Tax_DisabledTaxLand"
		custom_tooltip = Tax_SummaryTaxLand
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxLand
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxLand
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxLand"
		custom_tooltip = Tax_SummaryTaxLand
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxLand }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxLand
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxProp"
		custom_tooltip = Tax_SummaryTaxProp #TODO: check this, as sum of property tax seems to include property income
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxProp
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxProp
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxProp"
		custom_tooltip = Tax_SummaryTaxProp #TODO: check this, as sum of property tax seems to include property income
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxProp }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxProp
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxChattels"
		custom_tooltip = Tax_SummaryTaxChattels
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxChattel
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxChattel
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxChattels"
		custom_tooltip = Tax_SummaryTaxChattel
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxChattel }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxChattel
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxInherit"
		custom_tooltip = Tax_SummaryTaxInherit
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxInherit
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxInherit
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxInherit"
		custom_tooltip = Tax_SummaryTaxInherit
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxInherit }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxInherit
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxPoll"
		custom_tooltip = Tax_SummaryTaxPoll
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxPoll
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxPoll
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxPoll"
		custom_tooltip = Tax_SummaryTaxPoll
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxPoll }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxPoll
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxToll"
		custom_tooltip = Tax_SummaryTaxToll
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxToll
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxToll
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxToll"
		custom_tooltip = Tax_SummaryTaxToll
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxToll }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxToll
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxSalt"
		custom_tooltip = Tax_SummaryTaxSalt
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxSalt
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxSalt
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxSalt"
		custom_tooltip = Tax_SummaryTaxSalt
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxSalt }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxSalt
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxTimber"
		custom_tooltip = Tax_SummaryTaxTimber
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxTimber
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxTimber
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxTimber"
		custom_tooltip = Tax_SummaryTaxTimber
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxTimber }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxTimber
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxSubst"
		custom_tooltip = Tax_SummaryTaxSubst
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxSubst
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxSubst
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxSubst"
		custom_tooltip = Tax_SummaryTaxSubst
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxSubst }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxSubst
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxAlcohol"
		custom_tooltip = Tax_SummaryTaxAlcohol
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxAlcohol
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxAlcohol
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxAlcohol"
		custom_tooltip = Tax_SummaryTaxAlcohol
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxAlcohol }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxAlcohol
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxFeudal"
		custom_tooltip = Tax_SummaryTaxFeudal
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxFeudal
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxFeudal
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxFeudal"
		custom_tooltip = Tax_SummaryTaxFeudal
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxFeudal }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxFeudal
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxNoble"
		custom_tooltip = Tax_SummaryTaxNoble
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxNoble
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxNoble
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxNoble"
		custom_tooltip = Tax_SummaryTaxNoble
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxNoble }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxNoble
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxCharter"
		custom_tooltip = Tax_SummaryTaxCharter
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxCharter
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxCharter
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxCharter"
		custom_tooltip = Tax_SummaryTaxCharter
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxCharter }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxCharter
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxTribute"
		custom_tooltip = Tax_SummaryTaxTribute
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxTribute
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxTribute
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxTribute"
		custom_tooltip = Tax_SummaryTaxTribute
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxTribute }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxTribute
			country_event = { id = POP_Census.896 } #rotating UI
		}
	}

	option = {
		name = "PTM_EXIT"
		highlight = yes
	}
}
country_event = {
	id = POP_Census.896
	title = "POP_Census.895.name"
	desc = "POP_Census.895.desc"
	picture = ECONOMY_eventPicture
	is_triggered_only = yes

	option = {
		name = "Tax_DisabledTaxLand"
		custom_tooltip = Tax_SummaryTaxLand
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxLand
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxLand
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxLand"
		custom_tooltip = Tax_SummaryTaxLand
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxLand }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxLand
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxProp"
		custom_tooltip = Tax_SummaryTaxProp #TODO: check this, as sum of property tax seems to include property income
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxProp
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxProp
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxProp"
		custom_tooltip = Tax_SummaryTaxProp #TODO: check this, as sum of property tax seems to include property income
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxProp }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxProp
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxChattels"
		custom_tooltip = Tax_SummaryTaxChattels
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxChattel
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxChattel
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxChattels"
		custom_tooltip = Tax_SummaryTaxChattel
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxChattel }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxChattel
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxInherit"
		custom_tooltip = Tax_SummaryTaxInherit
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxInherit
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxInherit
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxInherit"
		custom_tooltip = Tax_SummaryTaxInherit
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxInherit }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxInherit
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxPoll"
		custom_tooltip = Tax_SummaryTaxPoll
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxPoll
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxPoll
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxPoll"
		custom_tooltip = Tax_SummaryTaxPoll
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxPoll }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxPoll
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxToll"
		custom_tooltip = Tax_SummaryTaxToll
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxToll
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxToll
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxToll"
		custom_tooltip = Tax_SummaryTaxToll
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxToll }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxToll
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxSalt"
		custom_tooltip = Tax_SummaryTaxSalt
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxSalt
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxSalt
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxSalt"
		custom_tooltip = Tax_SummaryTaxSalt
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxSalt }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxSalt
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxTimber"
		custom_tooltip = Tax_SummaryTaxTimber
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxTimber
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxTimber
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxTimber"
		custom_tooltip = Tax_SummaryTaxTimber
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxTimber }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxTimber
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxSubst"
		custom_tooltip = Tax_SummaryTaxSubst
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxSubst
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxSubst
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxSubst"
		custom_tooltip = Tax_SummaryTaxSubst
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxSubst }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxSubst
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxAlcohol"
		custom_tooltip = Tax_SummaryTaxAlcohol
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxAlcohol
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxAlcohol
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxAlcohol"
		custom_tooltip = Tax_SummaryTaxAlcohol
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxAlcohol }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxAlcohol
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxFeudal"
		custom_tooltip = Tax_SummaryTaxFeudal
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxFeudal
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxFeudal
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxFeudal"
		custom_tooltip = Tax_SummaryTaxFeudal
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxFeudal }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxFeudal
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxNoble"
		custom_tooltip = Tax_SummaryTaxNoble
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxNoble
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxNoble
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxNoble"
		custom_tooltip = Tax_SummaryTaxNoble
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxNoble }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxNoble
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxCharter"
		custom_tooltip = Tax_SummaryTaxCharter
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxCharter
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxCharter
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxCharter"
		custom_tooltip = Tax_SummaryTaxCharter
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxCharter }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxCharter
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}

	option = {
		name = "Tax_DisabledTaxTribute"
		custom_tooltip = Tax_SummaryTaxTribute
		custom_tooltip = Tax_SummarySum

		trigger = {
			has_country_flag = DisabledTaxTribute
		}
		hidden_effect = { 
			clr_country_flag = DisabledTaxTribute
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}
	option = {
		name = "Tax_EnabledTaxTribute"
		custom_tooltip = Tax_SummaryTaxTribute
		custom_tooltip = Tax_SummarySum

		trigger = {
			NOT = { has_country_flag = DisabledTaxTribute }
		}
		hidden_effect = { 
			set_country_flag = DisabledTaxTribute
			country_event = { id = POP_Census.895 } #rotating UI
		}
	}

	option = {
		name = "PTM_EXIT"
		highlight = yes
	}
}

country_event = {
    id = POP_Census.934
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    is_triggered_only = yes
	
	hidden = yes
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					has_country_flag = Tax_ScopeSelected
				}
				every_owned_province = {
					limit = {
						has_province_flag = PlayerTaxCost
					}
					set_province_flag = Tax_CostFlag
				}
			}
			else_if = {
				limit = {
					has_country_flag = Tax_ScopeAll
				}
				every_owned_province = {
					set_province_flag = Tax_CostFlag
				}
			}
			else_if = {
				limit = {
					has_country_flag = Tax_ScopeNonOverseas
				}
				every_owned_province = {
					limit = {
						is_overseas = no
					}
					set_province_flag = Tax_CostFlag
				}
			}
			Tax_ManaAI = { adm = Tax_CostAdmInp dip = Tax_CostDipInp mil = Tax_CostMilInp }
			Tax_DistributeMana = { flag = yes }
			
			every_owned_province = {
				limit = {
					has_province_flag = Tax_CostFlag
				}
				clr_province_flag = Tax_CostFlag
			}
		}
	}
	
	option = {
		name = no_localisation
	}
}

country_event = {
    id = POP_Census.931
    title = POP_Census.893.t
    desc = POP_Census.893.d
	picture = ECONOMY_eventPicture

    is_triggered_only = yes

    option = {
		name = POP_Census.893.1
		
		country_event = {
			id = POP_Census.935
		}
    }
    option = {
		name = POP_Census.931.1
		
		hidden_effect = {
			change_key = { lhs = Tax_CostAdmInp value = 10 }
			
			country_event = {
				id = POP_Census.935
			}
		}
    }
	option = {
		name = POP_Census.931.2
		
		hidden_effect = {
			change_key = { lhs = Tax_CostAdmInp value = 5 }
			
			country_event = {
				id = POP_Census.935
			}
		}
    }
	option = {
		name = POP_Census.931.3
		
		hidden_effect = {
			change_key = { lhs = Tax_CostAdmInp value = 1 }
			
			country_event = {
				id = POP_Census.935
			}
		}
    }
	
	option = {
		name = POP_Census.931.4
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostAdmInp value = 1 }
			
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostAdmInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostAdmInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.935
			}
		}
    }
	option = {
		name = POP_Census.931.5
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostAdmInp value = 5 }
			
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostAdmInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostAdmInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.935
			}
		}
    }
	option = {
		name = POP_Census.931.6
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostAdmInp value = 10 }
		
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostAdmInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostAdmInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.935
			}
		}
    }
	
	option = {
        name = back
        highlight = yes
		
		country_event = {
			id = POP_Census.893
		}
    }
}
country_event = {
    id = POP_Census.935
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture
	
	hidden = yes
	
    is_triggered_only = yes

    option = {
		name = no_localisation
		
		country_event = {
			id = POP_Census.931
		}
    }
}

country_event = {
    id = POP_Census.932
    title = POP_Census.893.t
    desc = POP_Census.893.d
	picture = ECONOMY_eventPicture

    is_triggered_only = yes

    option = {
		name = POP_Census.893.2
		
		country_event = {
			id = POP_Census.936
		}
    }
    option = {
		name = POP_Census.932.1
		
		hidden_effect = {
			change_key = { lhs = Tax_CostDipInp value = 10 }
			
			country_event = {
				id = POP_Census.936
			}
		}
    }
	option = {
		name = POP_Census.932.2
		
		hidden_effect = {
			change_key = { lhs = Tax_CostDipInp value = 5 }
			
			country_event = {
				id = POP_Census.936
			}
		}
    }
	option = {
		name = POP_Census.932.3
		
		hidden_effect = {
			change_key = { lhs = Tax_CostDipInp value = 1 }
			
			country_event = {
				id = POP_Census.936
			}
		}
    }
	
	option = {
		name = POP_Census.932.4
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostDipInp value = 1 }
			
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostDipInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostDipInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.936
			}
		}
    }
	option = {
		name = POP_Census.932.5
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostDipInp value = 5 }
			
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostDipInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostDipInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.936
			}
		}
    }
	option = {
		name = POP_Census.932.6
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostDipInp value = 10 }
		
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostDipInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostDipInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.936
			}
		}
    }
	
	option = {
        name = back
        highlight = yes
		
		country_event = {
			id = POP_Census.893
		}
    }
}
country_event = {
    id = POP_Census.936
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture
	
	hidden = yes
	
    is_triggered_only = yes

    option = {
		name = no_localisation
		
		country_event = {
			id = POP_Census.932
		}
    }
}

country_event = {
    id = POP_Census.933
    title = POP_Census.893.t
    desc = POP_Census.893.d
	picture = ECONOMY_eventPicture

    is_triggered_only = yes

    option = {
		name = POP_Census.893.3
		
		country_event = {
			id = POP_Census.937
		}
    }
    option = {
		name = POP_Census.933.1
		
		hidden_effect = {
			change_key = { lhs = Tax_CostMilInp value = 10 }
			
			country_event = {
				id = POP_Census.937
			}
		}
    }
	option = {
		name = POP_Census.933.2
		
		hidden_effect = {
			change_key = { lhs = Tax_CostMilInp value = 5 }
			
			country_event = {
				id = POP_Census.937
			}
		}
    }
	option = {
		name = POP_Census.933.3
		
		hidden_effect = {
			change_key = { lhs = Tax_CostMilInp value = 1 }
		
			country_event = {
				id = POP_Census.937
			}
		}
    }
	
	option = {
		name = POP_Census.933.4
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostMilInp value = 1 }
			
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostMilInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostMilInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.937
			}
		}
    }
	option = {
		name = POP_Census.933.5
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostMilInp value = 5 }
			
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostMilInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostMilInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.937
			}
		}
    }
	option = {
		name = POP_Census.933.6
		
		hidden_effect = {
			subtract_key = { lhs = Tax_CostMilInp value = 10 }
		
			if = {
				limit = {
					NOT = {
						check_key = { lhs = Tax_CostMilInp value = 0 }
					}
				}
				set_key = { lhs = Tax_CostMilInp value = 0 }
			}
			
			country_event = {
				id = POP_Census.937
			}
		}
    }
	
	option = {
        name = back
        highlight = yes
		
		country_event = {
			id = POP_Census.893
		}
    }
}
country_event = {
    id = POP_Census.937
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture
	
	hidden = yes
	
    is_triggered_only = yes

    option = {
		name = no_localisation
		
		country_event = {
			id = POP_Census.933
		}
    }
}

country_event = {
    id = POP_Census.103
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		hidden_effect = {
    	    Concern_DoIterMain = yes
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.105
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		hidden_effect = {
			regiongroup = {
				region = {
					limit = {
						isValidProv = yes
					}
					Dev_DoMain = { iterate=yes }
				}
			}
		}
    }

    option = {
		name = no_localisation
    }
}

# Check infrastructure appeal inside provinces by local classes and build infrastructure
country_event = {
    id = POP_Census.107
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		hidden_effect = {
			regiongroup = {
				region = {
					limit = {
						isValidProv = yes
						
						check_key = { lhs = Infra_Wealth value = 80 } # Only build if province has 75 wealth
						check_key = { lhs = Infra_Fill value = 99 } # only build if current infrastructure is nearly fully sustained in terms of goods and labour

						OR = {
							NOT = { has_province_flag = Infra_S0 }
							NOT = { has_province_flag = Infra_S1 }
							NOT = { has_province_flag = Infra_S2 }
							NOT = { has_province_flag = Infra_S3 }
							NOT = { has_province_flag = Infra_S4 }
							NOT = { has_province_flag = Infra_S5 }
							NOT = { has_province_flag = Infra_S6 }
							NOT = { has_province_flag = Infra_S7 }
							NOT = { has_province_flag = Infra_S8 }
							NOT = { has_province_flag = Infra_S9 }
						}

						NOT = {
							AND = {
								check_key = { lhs = Infra_S0 value = 8 }
								check_key = { lhs = Infra_S1 value = 8 }
								check_key = { lhs = Infra_S2 value = 8 }
								check_key = { lhs = Infra_S3 value = 8 }
								check_key = { lhs = Infra_S4 value = 8 }
								check_key = { lhs = Infra_S5 value = 8 }
								check_key = { lhs = Infra_S6 value = 8 }
								check_key = { lhs = Infra_S7 value = 8 }
								check_key = { lhs = Infra_S8 value = 8 }
								check_key = { lhs = Infra_S9 value = 8 }
							}
						}
					}
					set_key = { lhs = Tmp_0 which = Infra_Wealth }
					divide_key = { lhs = Tmp_0 value = 6 }


					#########################################################
					## CALCULATE APPEAL FOR DIFFERENT INFRASTRUCTURE TYPES ##
					#########################################################
					set_key = { lhs = Tmp_1 value = 0.01 } # Initial Appeal cutoff
					set_key = { lhs = Tmp_2 value = 0 } # Tmp_2 used to store type of infrastructure
					# Tmp_3 used to get different types of appeal

					# Pathing
					if = { 
						limit = { Infra_CanPathing = yes }
						Infra_GetAppealInfra = { type = Pathing weightNO = 0.5 weightBG = 0.5 weightCL = 0.5 nomad = yes paths = yes return = Tmp_3 } # Get Pathing appeal
						if = { 
							limit = { check_key = { lhs = Tmp_3 which = Tmp_1 } } # If Pathing Appeal > Current Highest
							set_key = { lhs = Tmp_1 which = Tmp_3 }  # Set current highest to pathing appeal
							set_key = { lhs = Tmp_2 value = 1 } # set current desired build type to pathing (id = 1)
						}
					}
					
					# Harbourage and Amenities only if there is enough resident population
					if = {
						limit = {
							OR = {
								check_key = { lhs = RE_Total value = 2 }
								has_global_flag = POP_Sim
							}
						}
						if = { 
							limit = { Infra_CanHarbourage = yes	}
							Infra_GetAppealInfra = { type = Harbourage weightNO = 0.25 weightBG = 2 weightCL = 0.25 return = Tmp_3 } # Get Harbourage appeal
							if = { 
								limit = { check_key = { lhs = Tmp_3 which = Tmp_1 } } # If harbourage appeal > Current Highest
								set_key = { lhs = Tmp_1 which = Tmp_3 } # Set current highest to harbourage appeal
								set_key = { lhs = Tmp_2 value = 2 } # set current desired build type to pathing (id = 2)
							}
						}
						
						if = { 
							limit = { Infra_CanAmenities = yes }
							Infra_GetAppealInfra = { type = Amenities weightNO = 0.5 weightBG = 8 weightCL = 0.6 urban = yes return = Tmp_3 } # Get amenities appeal
							if = { limit = { check_key = { lhs = Tmp_3 which = Tmp_1 } } # If amenities appeal > Current Highest
								set_key = { lhs = Tmp_1 which = Tmp_3 } # Set current highest to amenities appeal
								set_key = { lhs = Tmp_2 value = 3 } # set current desired build type to amenities (id = 3)
							}
						}
					}
					
					if = { 
						limit = { Infra_CanIrrigation = yes	}
						# Irrigation
						Infra_GetAppealInfra = { type = Irrigation weightNO = 2.5 weightBG = 0.2 weightCL = 0.75 rural = yes nomad = yes return = Tmp_3 } # Get Irrigation appeal
						if = { limit = { check_key = { lhs = Tmp_3 which = Tmp_1 } } # If Irrigation appeal > Current Highest
							set_key = { lhs = Tmp_1 which = Tmp_3 } # Set current highest to Irrigation appeal
							set_key = { lhs = Tmp_2 value = 4 } # set current desired build type to Irrigation (id = 4)
						}
					}
					
					# Deprecated Courthouse 
					#Infra_GetAppealInfra = { type = Courthouse weightNO = 0 weightBG = 0 weightCL = 0.25 return = Tmp_3 }
					#if = { limit = { check_key = { lhs = Tmp_3 which = Tmp_1 } } set_key = { lhs = Tmp_1 which = Tmp_3 } set_key = { lhs = Tmp_2 value = 5 } }
					# Deprecated Courthouse

					if = { 
						limit = { Infra_CanGarrison = yes }
						Infra_GetAppealInfra = { type = Garrison weightNO = 0.6 weightBG = 0.25 weightCL = 0.25 nomad = yes return = Tmp_3 }
						if = { limit = { check_key = { lhs = Tmp_3 which = Tmp_1 } } # If Garrison appeal > Current Highest
							set_key = { lhs = Tmp_1 which = Tmp_3 } # Set current highest to Garrison appeal
							set_key = { lhs = Tmp_2 value = 6 }  # set current desired build type to Garrison (id = 4)
						}
					}

					##################################################
					## Check whether or not you can build something ##
					##################################################
					if = {
						limit = {
							check_key = { lhs = Tmp_2 value = 1 } # Any infrastructure type was selected
						}
						if = {
							limit = { is_key_equal = { lhs = Tmp_2 value = 1 } } # Pathing selected

							if = {
								limit = { check_key = { lhs = Tmp_0 which = Infra_PathingSizeCost1 } } # Infrastructure Wealth > Upgrade costs

								set_key = { lhs = Construct_Parallel value = 2 }
								Infra_StartProject = { id = 8 height = Construct_Parallel width = Construct_Parallel }
								#_#_log = "Infrastructure:[GetYear]:[This.Owner.GetName]:[This.GetName]:local elites build [GV_Construct_Parallel] units of Pathing, cost was [GV_Infra_PathingSizeCost1] per unit"
							}
						}
						else_if = {
							limit = {
								is_key_equal = { lhs = Tmp_2 value = 2 }
							}
							if = {
								limit = {
									check_key = { lhs = Tmp_0 which = Infra_HarbourageSizeCost1 }
								}
								if = {
									limit = {
										check_key = { lhs = Tmp_0 value = 22 }
									}
									set_key = { lhs = Construct_Parallel value = 2 }
								}
								else = {
									set_key = { lhs = Construct_Parallel value = 1 }
								}
								
								Infra_StartProject = { id = 9 height = Construct_Parallel width = Construct_Parallel }
								#_#_log = "Infrastructure:[GetYear]:[This.Owner.GetName]:[This.GetName]:local elites build [GV_Construct_Parallel] units of Harbourage, cost was [GV_Infra_HarbourageSizeCost1] per unit"
							}
						}
						else_if = {
							limit = {
								is_key_equal = { lhs = Tmp_2 value = 3 }
							}
							if = {
								limit = {
									check_key = { lhs = Tmp_0 which = Infra_AmenitiesSizeCost1 }
								}
								if = {
									limit = {
										check_key = { lhs = Tmp_0 value = 22 }
									}
									set_key = { lhs = Construct_Parallel value = 2 }
								}
								else = {
									set_key = { lhs = Construct_Parallel value = 1 }
								}
								#log = "[This.GetName] wants to start Amenities"
								Infra_StartProject = { id = 10 height = Construct_Parallel width = Construct_Parallel }
								#_#_log = "Infrastructure:[GetYear]:[This.Owner.GetName]:[This.GetName]:local elites build [GV_Construct_Parallel] units of Amenities, cost was [GV_Infra_AmenitiesSizeCost1] per unit"
							}
						}
						else_if = {
							limit = {
								is_key_equal = { lhs = Tmp_2 value = 4 }
							}
							if = {
								limit = {
									check_key = { lhs = Tmp_0 which = Infra_IrrigationSizeCost1 }
								}
								if = {
									limit = {
										check_key = { lhs = Tmp_0 value = 22 }
									}
									set_key = { lhs = Construct_Parallel value = 2 }
								}
								else = {
									set_key = { lhs = Construct_Parallel value = 1 }
								}
								Infra_StartProject = { id = 11 height = Construct_Parallel width = Construct_Parallel }
								#_#_log = "Infrastructure:[GetYear]:[This.Owner.GetName]:[This.GetName]:local elites build [GV_Construct_Parallel] units of Irrigation, cost was [GV_Infra_IrrigationSizeCost1] per unit"
							}
						}
						#else_if = {
						#	limit = {
						#		is_key_equal = { lhs = Tmp_2 value = 5 }
						#	}
						#	if = {
						#		limit = {
						#			check_key = { lhs = Tmp_0 which = Infra_CourthouseSizeCost1 }
						#		}
						#		set_key = { lhs = Tmp_9 value = 2 }
						#
						#		Infra_StartProject = { id = 13 height = Tmp_9 width = Tmp_9 }
						#	}
						#}
						else_if = {
							limit = {
								is_key_equal = { lhs = Tmp_2 value = 6 }
							}
							if = {
								limit = {
									check_key = { lhs = Tmp_0 which = Infra_GarrisonSizeCost1 }
								}
								if = {
									limit = {
										check_key = { lhs = Tmp_0 value = 22 }
									}
									set_key = { lhs = Construct_Parallel value = 2 }
								}
								else = {
									set_key = { lhs = Construct_Parallel value = 1 }
								}

								Infra_StartProject = { id = 14 height = Construct_Parallel width = Construct_Parallel }

								#_#_log = "Infrastructure:[GetYear]:[This.Owner.GetName]:[This.GetName]:local elites build [GV_Construct_Parallel] units of Garrison, cost was [GV_Infra_GarrisonSizeCost1] per unit"
							}
						}
					}

					set_key = { lhs = Tmp_0 value = 0 }
					set_key = { lhs = Tmp_1 value = 0 }
					set_key = { lhs = Tmp_2 value = 0 }
					set_key = { lhs = Tmp_3 value = 0 }
					set_key = { lhs = Tmp_9 value = 0 }
				}
			}

			regiongroup = {
				region = {
					limit = {
						isValidProv = yes
					}
					Infra_RefreshModifier = yes
				}
			}
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = {
    id = POP_Census.110
    title = POP_Census.110.t
    desc = POP_Census.110.d
	picture = ECONOMY_eventPicture

    is_triggered_only = yes

    immediate = {
	}

    option = {
		name = Tax_CostAdm
		
		custom_tooltip = Tax_CostAdmSub
		custom_tooltip = Tax_Warning
		
		ai_chance = {
			factor = 0
		}
	}

    option = {
		name = Tax_CostDip
		
		custom_tooltip = Tax_CostDipSub
		custom_tooltip = Tax_Warning
		
		ai_chance = {
			factor = 0
		}
	}

    option = {
		name = Tax_CostMil
		
		custom_tooltip = Tax_CostMilSub
		custom_tooltip = Tax_Warning
		
		ai_chance = {
			factor = 0
		}
	}

    option = {
		name = PTM_EXIT
		highlight = yes
		custom_tooltip = Tax_Warning
		
		ai_chance = {
			factor = 100
		}
	}
}

country_event = {
    id = POP_Census.1102
    title = POP_Census.1102.t
    desc = POP_Census.1102.d
	picture = MEIOU_AND_TAXES_eventPicture

    is_triggered_only = yes
	
	hidden = yes

    immediate = {
		hidden_effect = {
			every_country = {
				limit = {
					isValidCountry = yes
				}
				if = {
					limit = {
						ai = no
					}
					if = {
						limit = {
							has_country_flag = Tax_DelegationS
						}
						hidden_effect = {
							country_event = { id = POP_Census.934 }
						}
					}
					if = {
						limit = {
							has_country_flag = Tax_EventS
						}
						country_event = { id = POP_Census.110 days = 1 }
					}
				}
				else_if = {
					limit = {
						is_at_war = yes
					}
					set_country_flag = AITax_Yearly
				}
				Tax_Update = yes
				Tax_TakeMana = yes
			}
		}
    }

    option = {
		name = PTM_EXIT
	}
}

country_event = {
    id = POP_Census.113
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		hidden_effect = {
			every_owned_province = {
				Unrest_DoMain = yes
			}
		}
    }

    option = {
		name = no_localisation
    }
}

country_event = { # Performance testing
    id = POP_Census.991
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes
	
	trigger = {
		tag = AAA
	}

    immediate = {
		hidden_effect = {
			AAA = {
				country_event = { id = POP_Census.0093 days = 1 }
				#country_event = { id = POP_Census.009 days = 2 } # Trigger AI Tax recalculation for all AI countries
				country_event = { id = POP_Census.002 days = 3 }
				country_event = { id = POP_Census.003 days = 4 }
				country_event = { id = POP_Census.103 days = 5 }
				country_event = { id = POP_Stockpile.0011 days = 6 }
				country_event = { id = POP_Census.001 days = 7 }
				country_event = { id = POP_Census.020 days = 8 }
				country_event = { id = POP_Census.0012 days = 9 } # Tarif Rate, Subsistance, 
				country_event = { id = POP_Census.0013 days = 10 } # Trade set centers (sim only)
				country_event = { id = POP_Census.0015 days = 11 } # Trade main do
				country_event = { id = POP_Census.0016 days = 12 } # Trade after
				country_event = { id = POP_Census.0017 days = 13 }
				country_event = { id = POP_Census.0018 days = 14 }
				country_event = { id = POP_Stockpile.0012 days = 15 }
				country_event = { id = POP_Census.0021 days = 16 }
				country_event = { id = POP_Census.0022 days = 17 }
				country_event = { id = SYS_Post.001 days = 18 }
				country_event = { id = POP_Census.0019 days = 19 }
				country_event = { id = POP_Census.105 days = 20 }
				country_event = { id = POP_Census.0023 days = 21 }
				country_event = { id = POP_Census.0024 days = 22 }
				country_event = { id = PTM_Politics.002 days = 23 }
				#country_event = { id = POP_Census.109 days = 24 } # Enable for simming
				country_event = { id = SYS_Pulse.009 days = 25 }
				country_event = { id = POP_Census.1102 days = 26 }
				country_event = { id = POP_Census.107 days = 27 }
			}
		}
    }

    option = {
		name = no_localisation
    }
}
# Single Country
country_event = {
    id = POP_Census.994
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

    is_triggered_only = yes

    immediate = {
		hidden_effect = {
			Nat_Main = yes
		}
	}

    option = {
		name = no_localisation
	}
}


# Data collection Province
country_event = {
    id = POP_Census.995
    title = no_localisation
    desc = no_localisation
	picture = MEIOU_AND_TAXES_eventPicture

    hidden = yes

	trigger = {
		tag = AAA
		OR = {
			had_global_flag = { 
				flag = DATA_COLLECTION_CD 
				days = 9125
			}
			has_global_flag = first_time_data_collection
		}
	}

    is_triggered_only = yes

	immediate = {
	}

	option = {
		name = EXIT
		hidden_effect = {
			clr_global_flag = DATA_COLLECTION_CD
			if = {
				limit = { has_global_flag = first_time_data_collection }
				clr_global_flag = first_time_data_collection
			}
			#### OUTPUT DATA COUNTRY:
			log = "Rights: Country: NOGov: NOObl: NOTen: NOSer: BGCom: BGGov: CLHie: CLTax: CLObl: BUTax: BUDir: BUInd: BUSer"
			every_country = {
				limit = { 
					isValidCountry = yes
				}
				# Rights
				log = "Rights:[This.GetName]:[GV_Rights_NOGov]:[GV_Rights_NOObl]:[GV_Rights_NOTen]:[GV_Rights_NOSer]:[GV_Rights_BGCom]:[GV_Rights_BGGov]:[GV_Rights_CLHie]:[GV_Rights_CLTax]:[GV_Rights_CLObl]:[GV_Rights_BUTax]:[GV_Rights_BUDir]:[GV_Rights_BUInd]:[GV_Rights_BUSer]"
			}
			log = "Privileges: Country: NOProcessing: NOGame: NOForestry: NOSeigneurial: NOAutonomy: NODiplomacy: NODynastic: NOHierarchy: NOTaxE: NOServiceE"
			every_country = {
				limit = { 
					isValidCountry = yes
				}	
				#Privileges
				log = "Privileges:[This.GetName]:[GV_Privilege_NOProcessing]:[GV_Privilege_NOGame]:[GV_Privilege_NOForestry]:[GV_Privilege_NOSeigneurial]:[GV_Privilege_NOAutonomy]:[GV_Privilege_NODiplomacy]:[GV_Privilege_NODynastic]:[GV_Privilege_NOHierarchy]:[GV_Privilege_NOTaxE]:[GV_Privilege_NOServiceE]"
			}
			log = "Privileges2: BUOffice: BUFarm: BUTenure: BUWages: BUHierarchy: BUHire: BUExams: BUOversight: BUEnlist: BUStructure: BUCourts: BUPolitics: BURotate"
			every_country = {
				limit = { 
					isValidCountry = yes
				}	
				#Privileges
				log = "Privileges2:[GV_Privilege_BUOffice]:[GV_Privilege_BUFarm]:[GV_Privilege_BUTenure]:[GV_Privilege_BUWages]:[GV_Privilege_BUHierarchy]:[GV_Privilege_BUHire]:[GV_Privilege_BUExams]:[GV_Privilege_BUOversight]:[GV_Privilege_BUEnlist]:[GV_Privilege_BUStructure]:[GV_Privilege_BUCourts]:[GV_Privilege_BUPolitics]:[GV_Privilege_BURotate]"
			}

			### OUTPUT DATA PROVINCE:
			log = "PopulationData:ID-Name:Class_type:Owner:Continent:Amount(in k):Ratio:Wealth:FoodNeeds:Life Needs:Food_LifeCombined:Comfort Needs:Luxury Needs"
			every_province = {
				limit = { 
					OR = {
						is_city = yes
						is_colony = yes
					}
				}
				log = "PopulationData:[GV_ID_Prov]-[This.GetName]:Peasants :[This.Owner.GetName]:[This.GetContinentName]:[GV_SF_Total]:[GV_SF_Ratio]:[GV_SF_Wealth]:[SF_FillFood]:[GV_SF_FillLife]:[GV_SF_FillLifeC]:[GV_SF_FillComfort]:[GV_SF_FillLuxury]"
				log = "PopulationData:[GV_ID_Prov]-[This.GetName]:Residents:[This.Owner.GetName]:[This.GetContinentName]:[GV_NM_Total]:[GV_NM_Ratio]:[GV_NM_Wealth]:[NM_FillFood]:[GV_RE_FillLife]:[GV_NM_FillLifeC]:[GV_RE_FillComfort]:[GV_RE_FillLuxury]"
				log = "PopulationData:[GV_ID_Prov]-[This.GetName]:Nomads   :[This.Owner.GetName]:[This.GetContinentName]:[GV_RE_Total]:[GV_RE_Ratio]:[GV_RE_Wealth]:[RE_FillFood]:[GV_NM_FillLife]:[GV_RE_FillLifeC]:[GV_NM_FillComfort]:[GV_NM_FillLuxury]"
				log = "PopulationData:[GV_ID_Prov]-[This.GetName]:Nobles   :[This.Owner.GetName]:[This.GetContinentName]:[GV_NO_Total]:[GV_NO_Ratio]:[GV_NO_Wealth]:[NO_FillFood]:[GV_NO_FillLife]:[GV_NO_FillLifeC]:[GV_NO_FillComfort]:[GV_NO_FillLuxury]"
				log = "PopulationData:[GV_ID_Prov]-[This.GetName]:Burghers :[This.Owner.GetName]:[This.GetContinentName]:[GV_BG_Total]:[GV_BG_Ratio]:[GV_BG_Wealth]:[BG_FillFood]:[GV_BG_FillLife]:[GV_BG_FillLifeC]:[GV_BG_FillComfort]:[GV_BG_FillLuxury]"
				log = "PopulationData:[GV_ID_Prov]-[This.GetName]:Clergy   :[This.Owner.GetName]:[This.GetContinentName]:[GV_CL_Total]:[GV_CL_Ratio]:[GV_CL_Wealth]:[CL_FillFood]:[GV_CL_FillLife]:[GV_CL_FillLifeC]:[GV_CL_FillComfort]:[GV_CL_FillLuxury]"
			}

			log = "EconomyData:ID-Name:FoodPrice:SaltPrice:FibrePrice:FuelPrice:RawPrice:TimberPrice:ExoticsPrice:ConsumerPrice:MilitaryPrice:NavalPrice:IndustrialPrice:LuxuryPrice:KnowledgePrice"
			every_province = {
				limit = { 
					OR = {
						is_city = yes
						is_colony = yes
					}
				}
				log = "EconomyData:[GV_ID_Prov]-[This.GetName]:[This.agp.GetValue]:[This.agq.GetValue]:[This.agr.GetValue]:[This.ags.GetValue]:[This.agt.GetValue]:[This.agu.GetValue]:[This.agv.GetValue]:[This.agw.GetValue]:[This.agx.GetValue]:[This.agy.GetValue]:[This.agz.GetValue]:[This.aha.GetValue]:[This.ahb.GetValue]"
			}
		}
	}	
	after = {
		set_global_flag = DATA_COLLECTION_CD
	}
}