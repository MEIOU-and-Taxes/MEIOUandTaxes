namespace = flavor_swe

### THE ENGELBREKT REBELLION ###

country_event = {
	id = flavor_swe.3217
	title = "flavor_swe.EVTNAME3217"
	desc = "flavor_swe.EVTDESC3217"
	picture = ANGRY_MOB_eventPicture
	fire_only_once = yes
	trigger = {
		tag = SWE
		junior_union_with = DEN
		NOT = { is_year = 1600 }
		OR = {
			NOT = {
				has_opinion = {
					who = DEN
					value = 50
				}
			}
			liberty_desire = 20
		}
	}
	mean_time_to_happen = {
		years = 25
		modifier = {
			factor = 0.5
			DEN = {
				NOT = { stability = 0 }
			}
		}
	}
	immediate = {
		hidden_effect = {
			set_country_flag = SWE_had_event_3217
			random_owned_province = {
				limit = {
					is_core = SWE
					NOT = { is_core = DEN }
					NOT = { is_overseas = yes }
				}
				set_province_flag = engelbrekt_rebellion_3
			}
			random_owned_province = {
				limit = {
					is_core = SWE
					NOT = { is_core = DEN }
					NOT = { has_province_flag = engelbrekt_rebellion_3 }
					NOT = { is_overseas = yes }
				}
				set_province_flag = engelbrekt_rebellion_2
			}
			every_owned_province = {
				limit = {
					is_core = DEN
					NOT = { is_core = SWE }
					NOT = { is_overseas = yes }
				}
				set_province_flag = strong_danish_support
			}
			every_owned_province = {
				limit = {
					is_core = DEN
					is_core = SWE
					NOT = { is_overseas = yes }
				}
				set_province_flag = weak_danish_support
			}
			if = {
				limit = {
					NOR = {
						exists = yes
						junior_union_with = DEN
					}
				}
				every_owned_province = {
					limit = {
						is_core = NOR
						NOT = { is_core = SWE }
						NOT = { has_province_flag = strong_danish_support }
						NOT = { has_province_flag = weak_danish_support }
						NOT = { is_overseas = yes }
					}
					set_province_flag = strong_norwegian_support
				}
				every_owned_province = {
					limit = {
						is_core = NOR
						is_core = SWE
						NOT = { has_province_flag = strong_danish_support }
						NOT = { has_province_flag = weak_danish_support }
						NOT = { has_province_flag = strong_norwegian_support }
						NOT = { is_overseas = yes }
					}
					set_province_flag = weak_norwegian_support
				}
			}
		}
	}
	option = { #With Engelbrekt murdered rebels don't have a leader to lead them in open revolt
		name = "flavor_swe.EVTOPTA3217"
		log = "FE-SWE:[GetYear]:[Root.GetName]:had Engelbrekt murdered:flavor_swe.3217"
		ai_chance = {
			factor = 20
		}
		random_list = {
			50 = {
				Stab_Subtract1 = yes
			}
			50 = {
				Stab_Subtract2 = yes
			}
		}
		random_owned_province = {
			limit = {
				has_province_flag = engelbrekt_rebellion_3
				NOT = { has_province_modifier = peasants_organizing }
			}
			add_province_modifier = {
				name = "peasants_organizing"
				duration = 1825
			}
			custom_tooltip = peasants_organizing_tt
			add_unrest = 20
			clr_province_flag = engelbrekt_rebellion_3
		}
		random_owned_province = {
			limit = {
				has_province_flag = engelbrekt_rebellion_2
				NOT = {
					has_province_modifier = peasants_organizing
				}
			}
			add_province_modifier = {
				name = "peasants_organizing"
				duration = 1825
			}
			custom_tooltip = peasants_organizing_tt
			add_unrest = 20
			clr_province_flag = engelbrekt_rebellion_2
		}
	}
	option = { #Swedish government supported the union causing an open revolt
		name = "flavor_swe.EVTOPTB3217"
		log = "FE-SWE:[GetYear]:[Root.GetName]:stood by the union in face of Engelbrekt rebellion:flavor_swe.3217"
		ai_chance = {
			factor = 60
		}
		random_list = {
			50 = {
				Stab_Subtract50Percent = yes
			}
			50 = {
				Stab_Subtract1 = yes
			}
		}
		DEN = {
			add_opinion = {
				who = ROOT
				modifier = swe_supports_the_union
			}
			reverse_add_opinion = {
				who = ROOT
				modifier = swe_supports_the_union
			}
		}
		random_owned_province = {
			limit = {
				has_province_flag = engelbrekt_rebellion_3
			}
			spawn_rebels = {
				type = mob_rebels
				size = 3
			}
			clr_province_flag = engelbrekt_rebellion_23
		}
		random_owned_province = {
			limit = {
				has_province_flag = engelbrekt_rebellion_2
			}
			spawn_rebels = {
				type = mob_rebels
				size = 2
			}
			clr_province_flag = engelbrekt_rebellion_2
		}
	}
	option = { #Swedish government supported rebels, thus preventing peasant rebellion and gaining casus belli against Denmark
		name = "flavor_swe.EVTOPTC3217"
		log = "FE-SWE:[GetYear]:[Root.GetName]:allowed Engelbrekt rebellion:flavor_swe.3217"
		ai_chance = {
			factor = 20
		}
		DEN = {
			add_opinion = {
				who = ROOT
				modifier = swe_renounced_the_union
			}
			reverse_add_opinion = {
				who = DEN
				modifier = swe_renounced_the_union
			}
		}
		country_event = {
			id = flavor_swe.3220
			days = 1
		}
	}
}

### THE KALMAR RECESS ###

country_event = {
	id = flavor_swe.3218
	title = "flavor_swe.EVTNAME3218"
	desc = "flavor_swe.EVTDESC3218"
	picture = DIPLOMACY_eventPicture
	fire_only_once = yes
	major = yes
	trigger = {
		#TODO: trigger it from crushed rebellion in Sweden and limit MTTH?
		tag = SWE
		junior_union_with = DEN
		is_year = 1450
		NOT = { is_year = 1600 }
		employed_advisor = {
	        category = MIL
        }
		OR = {
			NOT = {
				has_opinion = {
					who = DEN
					value = 50
				}
			}
			liberty_desire = 20
		}
	}
	mean_time_to_happen = {
		years = 50
	}
	option = {
		name = "flavor_swe.EVTOPTA3218"
		ai_chance = {
			factor = 90
			modifier = {
				factor = 0
				NOT = { stability = 0 }
			}
		}
		log = "FE-SWE:[GetYear]:[Root.GetName]:rejected the Kalmar Recess:flavor_swe.3218"
		add_liberty_desire = 25
		DEN = {
			add_opinion = {
				who = ROOT
				modifier = swe_rejected_the_kalmar_recess
			}
			reverse_add_opinion = {
				who = ROOT
				modifier = swe_rejected_the_kalmar_recess
			}
		}
	}
	option = {
		name = "flavor_swe.EVTOPTB3218"
		ai_chance = {
			factor = 10
		}
		log = "FE-SWE:[GetYear]:[Root.GetName]:honoured the Kalmar Recess:flavor_swe.3218"
		remove_advisor_by_category = MIL
		add_liberty_desire = -10
		DEN = {
			add_opinion = {
				who = ROOT
				modifier = swe_honored_the_kalmar_recess
			}
		}
	}
}

### THE END OF THE KALMAR UNION ###

country_event = {
	id = flavor_swe.3219
	title = "flavor_swe.EVTNAME3219"
	desc = "flavor_swe.EVTDESC3219"
	picture = DIPLOMACY_eventPicture
	fire_only_once = yes
	major = yes
	trigger = {
		tag = SWE
		junior_union_with = DEN
		has_country_flag = stockholm_bloodbath
		NOT = {
			has_opinion = {
				who = DEN
				value = 50
			}
		}
		liberty_desire = 50
		DEN = {
			NOT = { stability = 1 }
		}
	}
	mean_time_to_happen = {
		years = 2
	}
	option = { #Swedish government supported rebels
		name = "flavor_swe.EVTOPTA3219"
		log = "FE-SWE:[GetYear]:[Root.GetName]:decided to leave the Kalmar Union:flavor_swe.3219"
		ai_chance = {
			factor = 75
		}
		Stab_Subtract1 = yes
		break_union = DEN
		define_ruler = {
			name = "Gustav"
			dynasty = "Vasa"
			claim = 50
			ADM = 4
			DIP = 3
			MIL = 4
		}
		DEN = {
			add_opinion = {
				who = ROOT
				modifier = swe_renounced_the_union
			}
			add_casus_belli = {
			    target = SWE
			    type = cb_restore_personal_union
			    months = 240
		    }
		}
	}
	option = { #Swedish government supported union
		name = "flavor_swe.EVTOPTB3219"
		log = "FE-SWE:[GetYear]:[Root.GetName]:decided to stay in the Kalmar Union:flavor_swe.3219"
		ai_chance = {
			factor = 25
		}
		DEN = {
			add_opinion = {
				who = ROOT
				modifier = swe_supports_the_union
			}
		}
		random_owned_province = {
			limit = {
				NOT = { is_core = DEN }
				is_capital = no
				NOT = { is_overseas = yes }
			}
			spawn_rebels = {
				type = pretender_rebels
				size = 3
				leader = "Gustav Vasa"
				leader_dynasty = "Vasa"
				should_take_capital = yes
			}
		}
		random_owned_province = {
			limit = {
				NOT = { is_core = DEN }
				is_capital = no
				NOT = { is_overseas = yes }
			}
			spawn_rebels = {
				type = pretender_rebels
				size = 2
				should_take_capital = yes
			}
		}
		random_owned_province = {
			limit = {
				NOT = { is_core = DEN }
				is_capital = no
				NOT = { is_overseas = yes }
			}
			spawn_rebels = {
				type = pretender_rebels
				size = 2
				should_take_capital = yes
			}
		}
	}
}

### UNION IN DANGER ###

country_event = {
	id = flavor_swe.3220
	#TODO: rework allowing for Denmark backing out of the union
	title = "flavor_swe.EVTNAME3220"
	desc = "flavor_swe.EVTDESC3220"
	picture = DIPLOMACY_eventPicture
	is_triggered_only = yes
	option = {
		name = "flavor_swe.EVTOPTA3220"
		add_liberty_desire = 50
		add_casus_belli = {
			target = DEN
			type = cb_independence_war
			months = 24
		}
	}
}

### JORAN PERSSON ###

country_event = {
	id = flavor_swe.3281
	title = "flavor_swe.EVTNAME3281"
	desc = "flavor_swe.EVTDESC3281"
	picture = ADVISOR_eventPicture
	fire_only_once = yes
	trigger = {
		OR = {
			tag = SWE
			primary_culture = swedish
		}
		#owns = 1259 #he came back from Wittenberg, could settle anywhere
		is_year = 1555
		NOT = { is_year = 1568 }
	}
	mean_time_to_happen = {
		years = 5
	}
	option = {
		name = "EXCELLENTCMNISTER"
		define_advisor = {
			type = spymaster_BU
			name = "Joran Persson"
			#location = 1259
			skill = 2
			discount = yes
		}
		Pol_ChangeRelationsStateTooltip = { NO=yes type=value val=-5 }
	}
	option = {
		name = "OPT.GOTOHELL"
		Pol_ChangeRelationsStateTooltip = { NO=yes type=value val=5 }
	}
}

### PER BRAHE THE ELDER ###

country_event = {
	id = flavor_swe.3280
	#TODO: possibly link with Dacke feud, to avoid MTTH event
	title = "flavor_swe.EVTNAME3280"
	desc = "flavor_swe.EVTDESC3280"
	picture = ADVISOR_eventPicture
	fire_only_once = yes
	trigger = {
		OR = {
			tag = SWE
			primary_culture = swedish
		}
		is_year = 1550
		NOT = { is_year = 1590 }
		has_country_flag = had_the_dacke_feud
		owns = 1 #Stockholm
	}
	mean_time_to_happen = {
		years = 25
	}
	option = {
		name = "EXCELLENTCMNISTER"
		set_country_flag = per_brahe_the_elder
		define_advisor = {
			type = statesman_NO
			name = "Per Brahe den aldre"
			location = 1
			skill = 2
			discount = yes
		}
	}
}

### THE MILITARY REFORMS OF GUSTAVUS ADOLPHUS ###

country_event = {
	id = flavor_swe.3228
	title = "flavor_swe.EVTNAME3228"
	desc = "flavor_swe.EVTDESC3228"
	picture = REFORM_eventPicture
	is_triggered_only = yes
	fire_only_once = yes
	major = yes
	trigger = {
		tag = SWE
		mil_tech = 41
		num_of_cities = 15
		MIL = 4
		government = monarchy
		NOT = { ruler_age = 35 }
	}
	option = {
		name = "OPT.GOOD2"
		if = {
		    limit = {
		        MIL = 4
			    NOT = { MIL = 5 }
		    }
		    add_army_tradition = 10
		    add_mil_power = 100
		}
		if = {
		    limit = {
		        MIL = 5
			    NOT = { MIL = 6 }
		    }
		    add_army_tradition = 20
		    add_mil_power = 200
		}
		if = {
		    limit = {
		        MIL = 6
		    }
		    add_army_tradition = 30
		    add_mil_power = 300
		}
		if = {
		    limit = { NOT = { ruler_has_personality = tactical_genius_personality } }
		    add_ruler_personality = tactical_genius_personality
        }
	}
}

### THE SINKING OF VASA ###

country_event = {
	id = flavor_swe.1628
	title = "flavor_swe.EVTNAME1628"
	desc = "flavor_swe.EVTDESC1628"
	picture = SHIP_SAILING_eventPicture
	fire_only_once = yes
	major = yes
	trigger = {
		OR = {
			tag = SWE
			primary_culture = swedish
		}
		dynasty = "Vasa"
		is_year = 1600
		NOT = { is_year = 1700 }
		capital_scope = {
			has_port = yes
			heavy_ships_in_province = 1
		}
	}
	mean_time_to_happen = {
		years = 100
		modifier = {
			factor = 0.75
			NOT = { navy_tradition = 40 }
		}
		modifier = {
			factor = 0.75
			NOT = { navy_tradition = 30 }
		}
		modifier = {
			factor = 0.75
			NOT = { navy_tradition = 20 }
		}
	}
	option = {
		name = "flavor_swe.EVTOPTA1628"
		log = "FE-SWE:[GetYear]:[Root.GetName]:sinking of Vasa:flavor_swe.1628"
		add_prestige = -5
		capital_scope = {
			kill_units = {
				who = owner
				type = heavy_ship
				amount = 1
			}
		}
	}
}

### PER BRAHE THE YOUNGER ###

country_event = {
	id = flavor_swe.3282
	title = "flavor_swe.EVTNAME3282"
	desc = "flavor_swe.EVTDESC3282"
	picture = ADVISOR_eventPicture
	fire_only_once = yes
	trigger = {
		OR = {
			tag = SWE
			primary_culture = swedish
		}
		is_year = 1632
		NOT = { is_year = 1680 }
		owns = 1
		has_country_flag = per_brahe_the_elder
	}
	mean_time_to_happen = {
		years = 25
	}
	immediate = {
	    clr_country_flag = per_brahe_the_elder
	}
	option = {
		name = "EXCELLENTCMNISTER"
		define_advisor = {
			type = statesman_NO
			name = "Per Brahe den yngre"
			location = 1
			skill = 2
			discount = yes
		}
	}
}

### MAGNUS GABRIEL DE LA GARDIE ###

country_event = {
	id = flavor_swe.3283
	title = "flavor_swe.EVTNAME3283"
	desc = "flavor_swe.EVTDESC3283"
	picture = ADVISOR_eventPicture
	fire_only_once = yes
	trigger = {
		OR = {
			tag = SWE
			primary_culture = swedish
		}
		is_year = 1652
		NOT = { is_year = 1686 }
		owns = 36
	}
	mean_time_to_happen = {
		years = 25
	}
	option = {
		name = "EXCELLENTCMNISTER"
		define_advisor = {
			type = army_reformer_NO
			name = "Magnus Gabriel De la Gardie"
			location = 36
			skill = 2
			discount = yes
		}
	}
}

### THE ABSOLUTISM ###

country_event = {
	id = flavor_swe.3232
	title = "flavor_swe.EVTNAME3232"
	desc = "flavor_swe.EVTDESC3232"
	picture = COURT_eventPicture
	is_triggered_only = yes
	fire_only_once = yes
	trigger = {
		tag = SWE
		adm_tech = 45
		government = monarchy
		AND = {
			OR = {
				is_subject = no
				is_subject_of_type = tributary_state
				is_subject_of_type = close_tributary_state
			}
		}
		is_at_war = no
		war_exhaustion = 8
	}
	option = {
		name = "OPT.GOOD2"
		add_absolutism = 10
		add_legitimacy = 10
	}
}

### AXEL OXENSTIERNA ###

country_event = {
	id = flavor_swe.3233
	title = "flavor_swe.EVTNAME3233"
	desc = "flavor_swe.EVTDESC3233"
	picture = ADVISOR_eventPicture
	fire_only_once = yes
	trigger = {
		OR = {
			tag = SWE
			primary_culture = swedish
		}
		is_year = 1613
		NOT = { is_year = 1654 }
		owns = 1
	}
	mean_time_to_happen = {
		years = 25
	}
	option = {
		name = "EXCELLENTCMNISTER"
		define_advisor = {
			type = statesman_NO
			name = "Axel Oxenstierna"
			location = 1
			religion = reformed
			skill = 3
			discount = yes
		}
	}
}

### THE COURT OF APPEALS ###

country_event = {
 	id = flavor_swe.3235
 	title = "flavor_swe.EVTNAME3235"
 	desc = "flavor_swe.EVTDESC3235"
 	picture = LIBERUM_VETO_eventPicture
 	fire_only_once = yes
 	trigger = {
 		OR = {
 			tag = SWE
 			primary_culture = swedish
 		}
 		adm_tech = 40
 		Privilege_HasGreater = { Privilege=NOSeigneurial Lvl=1 }
 	}
	mean_time_to_happen = {
 		years = 10
 	}
 	option = {
 		name = "OPT.GOOD"
		add_adm_power = 50
		Privilege_NOSeigneurialLower = yes
 	}
	option = {
 		name = "OPT.NOWAY"
		add_prestige = -5
 	}
}

### THE CATHOLIC MAIDEN ###

country_event = {
 	id = 3239
 	title = "flavor_swe.EVTNAME3239"
 	desc = "flavor_swe.EVTDESC3239"
 	picture = POPE_PREACHING_eventPicture
	major = yes
 	trigger = {
 		tag = SWE
 		is_female = yes
 		religion = protestant
		ruler_religion = catholic
 		NOT = {
 			has_country_flag = SWE_had_event_3239
 		}
 	}
 	mean_time_to_happen = {
 		years = 5
 	}
 	immediate = {
 		set_country_flag = SWE_had_event_3239
 	}
 	option = {
 		name = "flavor_swe.EVTOPTA3239"
 		ai_chance = {
			factor = 75
 		}
 		Public_ChangePowerbrokerLoyaltyTooltip = { Powerbroker=CL Amount=10 }
		Stab_Add50Percent = yes
 		kill_ruler = yes
 	}
 	option = {
 		name = "flavor_swe.EVTOPTB3239"
 		ai_chance = {
 			factor = 25
 		}
 		Stab_Subtract3 = yes
 		change_religion = catholic
		force_converted = yes
 		PAP = {
 			add_opinion = {
 				who = ROOT
 				modifier = swe_reconverted_to_catholisism
 			}
 		}
 	}
}

### PIETISM AND THE CONVECTILE EDICT ###

country_event = {
 	id = flavor_swe.3248
 	title = "flavor_swe.EVTNAME3248"
 	desc = "flavor_swe.EVTDESC3248"
 	picture = RELIGION_eventPicture
	fire_only_once = yes
	major = yes
 	trigger = {
 		tag = SWE
 		adm_tech = 50
        war_exhaustion = 4
		is_at_war = no
 		OR = {
 			religion = protestant
 			religion = reformed
 		}
 	}
 	mean_time_to_happen = {
 		years = 2
 	}
 	option = {
 		name = "flavor_swe.EVTOPTA3248"
 		ai_chance = {
 			factor = 75
 		}
		
		Public_ChangePowerbrokerLoyaltyTooltip = { Powerbroker=CL Amount=10 }
		CL_FactionBoost = yes
		
		Stab_Add50Percent = yes
 		add_country_modifier = {
 			name = the_conventicle_edict
 			duration = -1
 		}
 	}
 	option = {
 		name = "flavor_swe.EVTOPTB3248"
 		ai_chance = {
 			factor = 25
 		}
		
		Public_ChangePowerbrokerLoyaltyTooltip = { Powerbroker=CL Amount=-20 }
		CL_FactionCrackdown = yes
		
 		Stab_Subtract1 = yes
 		add_country_modifier = {
 			name = pietism
 			duration = -1
 		}
 	}
}

### THE DETHRONEMENT OF GUSTAV IV ADOLF ###

country_event = {
 	id = flavor_swe.3260
 	title = "flavor_swe.EVTNAME3260"
 	desc = "flavor_swe.EVTDESC3260"
 	picture = COURT_eventPicture
 	fire_only_once = yes
	major = yes
 	trigger = {
 		tag = SWE
 		adm_tech = 55
		war_exhaustion = 10
		is_at_war = no
 		NOT = { ADM = 4 }
 		NOT = { DIP = 4 }
 		NOT = { MIL = 4 }
 		is_female = no
 		AND = {
 			OR = {
 				is_subject = no
 				is_subject_of_type = tributary_state
 				is_subject_of_type = close_tributary_state
 			}
 		}
 	}
 	mean_time_to_happen = {
 		years = 2
 	}
 	option = {
 		name = "flavor_swe.EVTOPTA3260"
 		ai_chance = {
 			factor = 75
 		}
 		Public_ChangePowerbrokerLoyaltyTooltip = { Powerbroker=NO Amount=5 }
		Public_ChangePowerbrokerLoyaltyTooltip = { Powerbroker=CL Amount=5 }
		Public_ChangePowerbrokerLoyaltyTooltip = { Powerbroker=BG Amount=5 }
		
 		kill_ruler = yes
 	}
 	option = {
 		name = "flavor_swe.EVTOPTB3260"
 		ai_chance = {
 			factor = 25
 			modifier = {
 				factor = 0
 				NOT = { stability = 1 }
 			}
 		}
 		Stab_Subtract2 = yes
		Public_ChangePowerbrokerLoyaltyTooltip = { Powerbroker=NO Amount=-20 }
		Public_ChangePowerbrokerLoyaltyTooltip = { Powerbroker=CL Amount=-20 }
		Public_ChangePowerbrokerLoyaltyTooltip = { Powerbroker=BG Amount=-20 }
 	}
}

### ERIK DAHLBERG ###

country_event = {
	id = flavor_swe.5030
	title = "flavor_swe.EVTNAME5030"
	desc = "flavor_swe.EVTDESC5030"
	picture = ADVISOR_eventPicture
	fire_only_once = yes
	trigger = {
		OR = {
			tag = SWE
			primary_culture = swedish
		}
		owns = 1
		is_year = 1660
		NOT = { is_year = 1703 }
	}
	mean_time_to_happen = {
		years = 25
	}
	option = {
		name = "EXCELLENT"
		define_advisor = {
			type = fortification_expert_BU
			name = "Erik Dahlbergh"
			skill = 2
			discount = yes
		}
	}
}

### OLOF RUDBECK PUBLISHES 'ATLANTICA' ###

country_event = {
	id = flavor_swe.5031
	title = "flavor_swe.EVTNAME5031"
	desc = "flavor_swe.EVTDESC5031"
	picture = ADVISOR_eventPicture
	fire_only_once = yes
	trigger = {
		tag = SWE
		owns = 1
		is_year = 1660
		NOT = { is_year = 1702 }
	}
	mean_time_to_happen = {
		years = 25
	}
	option = {
		name = "EXCELLENT"
		ai_chance = {
			factor = 90
		}
		add_prestige = 10
	}
	option = {
		name = "EXCELLENTCMNISTER"
		ai_chance = {
			factor = 10
		}
		define_advisor = {
			type = natural_scientist_BU
			name = "Olof Rudbeck"
			location = 1
			skill = 2
			discount = yes
		}
	}
}

### EMANUEL SWEDENBORG ###

country_event = {
	id = flavor_swe.5032
	title = "flavor_swe.EVTNAME5032"
	desc = "flavor_swe.EVTDESC5032"
	picture = INVENTION_eventPicture
	fire_only_once = yes
	trigger = {
		OR = {
			tag = SWE
			primary_culture = swedish
		}
		owns = 1
		is_year = 1718
		NOT = { is_year = 1772 }
	}
	mean_time_to_happen = {
		years = 25
	}
	option = {
		name = "EXCELLENT"
		ai_chance = {
			factor = 90
		}
		add_prestige = 10
	}
	option = {
		name = "EXCELLENTCMNISTER"
		ai_chance = {
			factor = 10
		}
		define_advisor = {
			type = natural_scientist_BU
			name = "Emanuel Swedenborg"
			location = 1
			skill = 2
			discount = yes
		}
	}
}

### CAROLUS LINNAEUS ###

country_event = {
	id = flavor_swe.5033
	title = "flavor_swe.EVTNAME5033"
	desc = "flavor_swe.EVTDESC5033"
	picture = IMPORTANT_STATUE_eventPicture
	fire_only_once = yes
	major = yes
	trigger = {
		OR = {
			tag = SWE
			primary_culture = swedish
		}
		owns = 1
		is_year = 1737
		NOT = { is_year = 1778 }
	}
	mean_time_to_happen = {
		years = 25
	}
	option = {
		name = "EXCELLENT"
		ai_chance = {
			factor = 90
		}
		add_prestige = 15
	}
	option = {
		name = "EXCELLENTCMNISTER"
		ai_chance = {
			factor = 10
		}
		define_advisor = {
			type = natural_scientist_BU
			name = "Carolus Linnaeus"
			location = 1
			skill = 3
			discount = yes
		}
	}
}

#TODO:starting from here, events are broke by lack of SWE_had_event_3246 flag about parliament, set by vanilla event Arvid Horn and the Age of Freedom. At the moment, chain is commented out.
# country_event = {
# 	id = flavor_swe.3254
# 	title = "flavor_swe.EVTNAME3254"
# 	desc = "flavor_swe.EVTDESC3254"
# 	picture = LIBERUM_VETO_eventPicture
# 	fire_only_once = yes
# 	trigger = {
# 		had_country_flag = {
# 			flag = SWE_had_event_3246
# 			days = 100
# 		}
# 		tag = SWE
# 		is_year = 1700
# 		NOT = { is_year = 1800 }
# 		NOT = {
# 			has_country_flag = SWE_had_event_3254
# 		}
# 	}
# 	mean_time_to_happen = {
# 		months = 24
# 	}
# 	immediate = {
# 		set_country_flag = SWE_had_event_3254
# 	}
# 	option = {
# 		name = "flavor_swe.EVTOPTA3254"
# 		if = {
# 			limit = {
# 				has_country_flag = swedish_hats
# 			}
# 			add_adm_power = -25
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 		}
# 		if = {
# 			limit = {
# 				has_country_flag = swedish_caps
# 			}
# 			add_adm_power = -50
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 		}
# 		clr_country_flag = swedish_caps
# 		set_country_flag = swedish_hats
# 	}
# 	option = {
# 		name = "flavor_swe.EVTOPTB3254"
# 		if = {
# 			limit = {
# 				has_country_flag = swedish_caps
# 			}
# 			add_adm_power = -25
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 		}
# 		if = {
# 			limit = {
# 				has_country_flag = swedish_hats
# 			}
# 			add_adm_power = -50
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 		}
# 		clr_country_flag = swedish_hats
# 		set_country_flag = swedish_caps
# 	}
# }
# country_event = {
# 	id = flavor_swe.3255
# 	title = "flavor_swe.EVTNAME3255"
# 	desc = "flavor_swe.EVTDESC3255"
# 	picture = LIBERUM_VETO_eventPicture
# 	trigger = {
# 		has_country_flag = SWE_had_event_3246
# 		had_country_flag = {
# 			flag = SWE_had_event_3254
# 			days = 365
# 		}
# 		tag = SWE
# 		is_year = 1700
# 		NOT = {
# 			is_year = 1800
# 		}
# 		NOT = {
# 			has_country_flag = SWE_had_event_3255
# 		}
# 	}
# 	mean_time_to_happen = {
# 		months = 24
# 	}
# 	immediate = {
# 		set_country_flag = SWE_had_event_3255
# 	}
# 	option = {
# 		name = "flavor_swe.EVTOPTA3255"
# 		if = {
# 			limit = {
# 				has_country_flag = swedish_hats
# 			}
# 			add_adm_power = -25
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 		}
# 		if = {
# 			limit = {
# 				has_country_flag = swedish_caps
# 			}
# 			add_adm_power = -50
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 		}
# 		clr_country_flag = swedish_caps
# 		set_country_flag = swedish_hats
# 	}
# 	option = {
# 		name = "flavor_swe.EVTOPTB3255"
# 		if = {
# 			limit = {
# 				has_country_flag = swedish_caps
# 			}
# 			add_adm_power = -25
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 		}
# 		if = {
# 			limit = {
# 				has_country_flag = swedish_hats
# 			}
# 			add_adm_power = -50
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 		}
# 		clr_country_flag = swedish_hats
# 		set_country_flag = swedish_caps
# 	}
# }
# country_event = {
# 	id = flavor_swe.3256
# 	title = "flavor_swe.EVTNAME3256"
# 	desc = "flavor_swe.EVTDESC3256"
# 	picture = ASSASSINATION_eventPicture
# 	trigger = {
# 		had_country_flag = {
# 			flag = SWE_had_event_3246
# 			days = 730
# 		}
# 		tag = SWE
# 		is_year = 1700
# 		NOT = {
# 			is_year = 1800
# 		}
# 		NOT = {
# 			has_country_flag = SWE_had_event_3256
# 		}
# 	}
# 	mean_time_to_happen = {
# 		years = 25
# 	}
# 	immediate = {
# 		set_country_flag = SWE_had_event_3256
# 	}
# 	option = {
# 		name = "flavor_swe.EVTOPTA3256"
# 		ai_chance = {
# 			factor = 50
# 		}
# 		Stab_Add50Percent = yes
# 	}
# 	option = {
# 		name = "flavor_swe.EVTOPTB3256"
# 		ai_chance = {
# 			factor = 50
# 			modifier = {
# 				factor = 0
# 				NOT = {
# 					stability = 1
# 				}
# 			}
# 		}
# 		Stab_Subtract2 = yes
# 		add_adm_power = 50
# 		set_country_flag = more_royal_power
# 	}
# }
# country_event = {
# 	id = 3257
# 	title = "flavor_swe.EVTNAME3257"
# 	desc = "flavor_swe.EVTDESC3257"
# 	picture = LIBERUM_VETO_eventPicture
# 	trigger = {
# 		has_country_flag = SWE_had_event_3246
# 		had_country_flag = {
# 			flag = SWE_had_event_3255
# 			days = 365
# 		}
# 		tag = SWE
# 		is_year = 1700
# 		NOT = {
# 			is_year = 1800
# 		}
# 		NOT = {
# 			has_country_flag = SWE_had_event_3257
# 		}
# 	}
# 	mean_time_to_happen = {
# 		months = 24
# 	}
# 	immediate = {
# 		set_country_flag = SWE_had_event_3257
# 	}
# 	option = {
# 		name = "flavor_swe.EVTOPTA3257"
# 		if = {
# 			limit = {
# 				has_country_flag = swedish_hats
# 			}
# 			add_adm_power = -25
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 		}
# 		if = {
# 			limit = {
# 				has_country_flag = swedish_caps
# 			}
# 			add_adm_power = -50
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 		}
# 		clr_country_flag = swedish_caps
# 		set_country_flag = swedish_hats
# 	}
# 	option = {
# 		name = "flavor_swe.EVTOPTB3257"
# 		if = {
# 			limit = {
# 				has_country_flag = swedish_caps
# 			}
# 			add_adm_power = -25
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 		}
# 		if = {
# 			limit = {
# 				has_country_flag = swedish_hats
# 			}
# 			add_adm_power = -50
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 		}
# 		clr_country_flag = swedish_hats
# 		set_country_flag = swedish_caps
# 	}
# }
# country_event = {
# 	id = flavor_swe.3258
# 	title = "flavor_swe.EVTNAME3258"
# 	desc = "flavor_swe.EVTDESC3258"
# 	picture = LIBERUM_VETO_eventPicture
# 	trigger = {
# 		has_country_flag = SWE_had_event_3246
# 		had_country_flag = {
# 			flag = SWE_had_event_3257
# 			days = 365
# 		}
# 		tag = SWE
# 		is_year = 1700
# 		NOT = {
# 			is_year = 1800
# 		}
# 		NOT = {
# 			has_country_flag = SWE_had_event_3258
# 		}
# 	}
# 	mean_time_to_happen = {
# 		months = 24
# 	}
# 	immediate = {
# 		set_country_flag = SWE_had_event_3258
# 	}
# 	option = {
# 		name = "flavor_swe.EVTOPTA3258"
# 		if = {
# 			limit = {
# 				has_country_flag = swedish_hats
# 			}
# 			add_adm_power = -25
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 		}
# 		if = {
# 			limit = {
# 				has_country_flag = swedish_caps
# 			}
# 			add_adm_power = -50
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 		}
# 		clr_country_flag = swedish_caps
# 		set_country_flag = swedish_hats
# 	}
# 	option = {
# 		name = "flavor_swe.EVTOPTB3258"
# 		if = {
# 			limit = {
# 				has_country_flag = swedish_caps
# 			}
# 			add_adm_power = -25
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 		}
# 		if = {
# 			limit = {
# 				has_country_flag = swedish_hats
# 			}
# 			add_adm_power = -50
# 			random_owned_province = {
# 				limit = {
# 					is_core = SWE
# 					is_capital = no
# 					NOT = {
# 						has_province_modifier = nobles_organizing
# 					}
# 				}
# 				add_province_modifier = {
# 					name = "nobles_organizing"
# 					duration = 1825
# 				}
# 				custom_tooltip = nobles_organizing_tt
# 				add_unrest = 5
# 			}
# 		}
# 		clr_country_flag = swedish_hats
# 		set_country_flag = swedish_caps
# 	}
# }
# country_event = {
# 	id = flavor_swe.3262
# 	title = "flavor_swe.EVTNAME3262"
# 	desc = "flavor_swe.EVTDESC3262"
# 	picture = COURT_eventPicture
# 	trigger = {
# 		had_country_flag = {
# 			flag = SWE_had_event_3246
# 			days = 3650
# 		}
# 		tag = SWE
# 		is_year = 1700
# 		NOT = {
# 			is_year = 1800
# 		}
# 		NOT = {
# 			has_country_flag = SWE_had_event_3262
# 		}
# 	}
# 	mean_time_to_happen = {
# 		months = 48
# 		modifier = {
# 			factor = 0.75
# 			has_country_flag = SWE_had_event_3254
# 		}
# 		modifier = {
# 			factor = 0.75
# 			has_country_flag = SWE_had_event_3255
# 		}
# 		modifier = {
# 			factor = 0.75
# 			has_country_flag = SWE_had_event_3257
# 		}
# 		modifier = {
# 			factor = 0.75
# 			has_country_flag = SWE_had_event_3258
# 		}
# 		modifier = {
# 			factor = 0.5
# 			has_country_flag = SWE_had_event_3256
# 			has_country_flag = more_royal_power
# 		}
# 		modifier = {
# 			factor = 0.75
# 			ADM = 4
# 		}
# 		modifier = {
# 			factor = 0.75
# 			ADM = 5
# 		}
# 		modifier = {
# 			factor = 0.75
# 			ADM = 6
# 		}
# 	}
# 	immediate = {
# 		set_country_flag = SWE_had_event_3262
# 		clr_country_flag = more_royal_power
# 		clr_country_flag = swedish_hats
# 		clr_country_flag = swedish_caps
# 	}
# 	option = {
# 		name = "flavor_swe.EVTOPTA3262"
# 		ai_chance = {
# 			factor = 50
# 			modifier = {
# 				factor = 0
# 				NOT = {
# 					stability = 1
# 				}
# 			}
# 		}
# 		Stab_Subtract3 = yes
# 		add_adm_power = 50
# 	}
# 	option = {
# 		name = "flavor_swe.EVTOPTB3262"
# 		ai_chance = {
# 			factor = 50
# 			modifier = {
# 				factor = 0
# 				stability = 2
# 			}
# 		}
# 		Stab_Add50Percent = yes
# 		add_adm_power = -50
# 	}
# }

#####################################
#
# 2011-sep-14 GG Swedish civil war ends when SWE and RSW are both at peace
#
#####################################
# 913303 - Erik's Rebellion, king Magnus wins the war
country_event = {
	id = flavor_swe.4303
	
	title = "flavor_swe.EVTNAME913303"
	desc = "flavor_swe.EVTDESC913303"
	picture = CIVIL_WAR_eventPicture
	major = yes
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		tag = SWE
		RSW = {
			OR = {
				NOT = { num_of_cities = 16 }
				NOT = { has_ruler = "Erik Magnusson" }
			}
			NOT = { war_with = SWE }
			has_country_flag = erik_s_rebellion
		}
		NOT = { war_with = RSW }
		NOT = { has_country_flag = magnus_wins }
	}
	
	mean_time_to_happen = { days = 1 }
	
	option = {
		name = "OPT.VICTORY1"
		log = "FE-SWE:[GetYear]:[Root.GetName]:wins the war against [RSW.GetName], Erik's Rebellion is over:flavor_swe.4303"
		RSW = {
			every_subject_country = {
				hidden_effect = {
					every_core_province = {
						limit = {
							owned_by = SWE
						}
						remove_core = PREV
						add_core = RSW
					}
					grant_independence = yes
					log = "FE-SWE:[GetYear]:[This.GetName]:got vassalised by [Root.GetName] during [RSW.GetName]'s integration:flavor_swe.4303"
				}
				ROOT = {
					create_subject = {
						subject_type = vassal #TODO: type of vassal
						subject = PREV
					}
				}
			}
			every_core_province = {
				limit = {
					owned_by = ROOT
				}
				add_core = ROOT
				hidden_effect = { add_nationalism = -50 }
			}
		}
		inherit = RSW
		set_country_flag = magnus_wins
		hidden_effect = {
			every_owned_province = {
				remove_core = RSW
			}
		}
		if = {
			limit = {
				exists = DEN
				OR = {
					owns = 6 # Skane
					owns = 18 # Blekyng
					owns = 26 # Halland
					owns = 2515 # Bornholm
				}
			}
			country_event = { id = flavor_swe.4306 days = 5 }
		}
	}
}

# 913304 - Erik's Rebellion, prince Erik wins the war
country_event = {
	id = flavor_swe.4304
	
	title = "flavor_swe.EVTNAME913304"
	desc = "flavor_swe.EVTDESC913304"
	picture = CIVIL_WAR_eventPicture
	major = yes
	fire_only_once = yes
	is_triggered_only = yes
	
	trigger = {
		tag = RSW
		has_country_flag = erik_s_rebellion
		SWE = { NOT = { war_with = RSW } }
		NOT = { war_with = SWE }
		OR = {
			num_of_cities = 16
			NOT = { SWE = { has_ruler = "Magnus IV Ericson" } }
		}
		is_at_war = no
	}
	
	mean_time_to_happen = { days = 1 }
	
	option = {
		name = "OPT.VICTORY1"
		log = "FE-SWE:[GetYear]:[Root.GetName]:wins the war against [SWE.GetName], Erik's Rebellion is over:flavor_swe.4304"
		SWE = {
			every_subject_country = {
				hidden_effect = {
					every_core_province = {
						limit = {
							owned_by = SWE
						}
						remove_core = PREV
						add_core = SWE
					}
					grant_independence = yes
					log = "FE-SWE:[GetYear]:[This.GetName]:got vassalised by [Root.GetName] during [SWE.GetName]'s integration:flavor_swe.4304"
				}
				ROOT = {
					create_subject = {
						subject_type = vassal
						subject = PREV
					}
				}
			}
			every_core_province = {
				limit = {
					owned_by = ROOT
				}
				add_core = ROOT
				hidden_effect = { add_nationalism = -50 }
			}
		}
		inherit = SWE
		hidden_effect = {
			every_owned_province = {
				remove_core = SWE
			}
		}
		ChangeTagEffect = { scope=SWE }
		custom_tooltip = scw_tagchange_tt #ChangeTagEffect = { scope=SWE }
		set_country_flag = erik_wins
	}
}

# 913305 - Erik's Rebellion, it's a tie
country_event = {
	id = flavor_swe.4305
	
	title = "flavor_swe.EVTNAME913305"
	desc = "flavor_swe.EVTDESC913305"
	picture = CIVIL_WAR_eventPicture
	major = yes
	is_triggered_only = yes
	
	trigger = {
		tag = SWE
		NOT = { war_with = RSW }
		num_of_cities = 16 #having less than 16 provinces should trigger end of war event
		RSW = {
			exists = yes
			num_of_cities = 16 #having less than 16 provinces should trigger end of war event
		}
	}
	
	mean_time_to_happen = {
		days = 1
	}
	
	option = {
		name = "OPT.SENDTROOPS"
		log = "FE-SWE:[GetYear]:[Root.GetName]:declared war on [RSW.GetName] to solve Erik's rebellion:flavor_swe.4305"
		declare_war_with_cb = {
			who = RSW
			casus_belli = cb_core #TODO: check if it causes stability hit from breaking truce
		}
	}
}

# 913306 - Agreement regarding the  Helsingborg Castle
country_event = {
	id = flavor_swe.4306
	
	title = "flavor_swe.EVTNAME913306"
	desc = "flavor_swe.EVTDESC913306"
	picture = CIVIL_WAR_eventPicture
	major = yes
	is_triggered_only = yes
	
	option = {
		name = "OPT.HONOUR1"
		log = "FE-SWE:[GetYear]:[Root.GetName]:honored the aggrement and passed Skaneland to [DEN.GetName]:flavor_swe.4306"
		ai_chance = {
			factor = 90
		}
		every_owned_province = {
			limit = {
				area = skaneland_area
			}
			cede_province = DEN
			remove_core = ROOT
		}
	}
	option = {
		name = "OPT.RENEGE1"
		ai_chance = {
			factor = 10
		}
		log = "FE-SWE:[GetYear]:[Root.GetName]:ignored the aggrement and refused to pass Skaneland to [DEN.GetName]:flavor_swe.4306"
		DEN = {
			country_event = { id = flavor_swe.4307 days = 5 }
		}
		every_neighbor_country = {
			add_opinion = {
				who = SWE
				modifier = swe_political_aggressions
			}
		}
		add_country_modifier = {
			name = ignored_aggrements
			duration = 7300 #20 years
		}
	}
}

# 913307 - Agreement regarding the  Helsingborg Castle
country_event = {
	id = flavor_swe.4307
	
	title = "flavor_swe.EVTNAME913307"
	desc = "flavor_swe.EVTDESC913307"
	picture = CIVIL_WAR_eventPicture
	major = yes
	is_triggered_only = yes

	immediate = { 
		add_opinion = { who = SWE modifier = swe_political_aggressions }
	}
	
	option = {
		name = "OPT.RETAKEN"
		ai_chance = {
			factor = 10
			modifier = {
				factor = 9 #makes it 50/50
				army_strength = {
					who = FROM
					value = 1.5
				}
				num_of_allies = FROM
			}
		}
		add_core = 6
		add_core = 18
		add_core = 26
		add_core = 2515
		add_casus_belli = { #to not wait for re-calculation event
			target = FROM
			type = cb_core
			months = 24
		}
		# declare_war_with_cb = {
		# 	who = SWE
		# 	casus_belli = cb_core
		# }
		log = "FE-SWE:[GetYear]:[Root.GetName]:claimed Skaneland from [From.GetName]:flavor_swe.4307"
	}
	option = {
		name = "OPT.ACCEPT2"
		log = "FE-SWE:[GetYear]:[Root.GetName]:accepted [From.GetName]'s refusal to pass Skaneland:flavor_swe.4307"
		ai_chance = {
			factor = 90
		}
	}
}

# 913308 - Removing RSW's cores
country_event = {
	id = flavor_swe.4308
	title = "flavor_swe.EVTNAME913308"
	desc = "flavor_swe.EVTDESC913308"
	picture = CIVIL_WAR_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = "OPT.VERYWELL"
		clr_country_flag = erik_s_rebellion
		every_core_province = {
			remove_core = ROOT
		}
	}
}
