############################################################
#      Seventeen Provinces and Estates-General Events      #
############################################################

# Author: Ekinda

namespace = flavor_svp

# Rebellion desire decay event, executed for REB tag
country_event = {
	id = flavor_svp.99
	title = "flavor_svp.99.title"
	desc = "EVT_AI"
	picture = CIVIL_WAR_eventPicture
	is_triggered_only = yes
	
	option = {
		name = "OPT.OK"
		
		subtract_variable = {
			which = dutch_rebellion_desire
			value = 1
		}
		
		country_event = { id = flavor_svp.99 days = 3650 }
	}
}

# Check rebellion desire event (for testing and debugging)
# TODO: move it to country modifier or decision tooltip so values can be seen, similar to Medici system.
country_event = {
	id = flavor_svp.0
	title = "flavor_svp.0.title"
	desc = {
		trigger = { check_variable = { which = dutch_rebellion_desire value = 0.001 } }
		desc = "flavor_svp.0.desca"
	}
	desc = {
		trigger = { NOT = { check_variable = { which = dutch_rebellion_desire value = 0.001 } } }
		desc = "flavor_svp.0.descb"
	}
	picture = CIVIL_WAR_eventPicture
	is_triggered_only = yes
	option = {
		name = OPT.OK
	}
}

# Estates-General of [GetYear] (1464)
# TODO: maybe move calling of this event to decisions?
country_event = {
	id = flavor_svp.1
	title = "flavor_svp.1.title"
	desc = "flavor_svp.1.desc" #TODO: better explanation of what is going to happen
	picture = LIBERUM_VETO_eventPicture
	fire_only_once = yes
	
	trigger = {
		NOT = { has_global_flag = dutch_rebellion_end }
		NOT = { tag = NED }
		NOT = { tag = SVP }
		NOT = { has_country_flag = svp_estates_general }
		NOT = { culture_group = low_frankish }
		is_subject = no
		check_variable = { which = "Cores_on_the_Netherlands" value = 13 } # This requires direct ownership. Ownership via vassals goes through decision.
	}
	mean_time_to_happen = {
		years = 5
	}
	option = {
		name = "flavor_svp.1.a" # Convene the Estates-General
		log = "FE-SVP:[GetYear]:[Root.GetName]:Estates-General convened:flavor_svp.1"
		ai_chance = { factor = 100 }
		hidden_effect = {
			set_global_flag = dutch_rebellion_start
			set_country_flag = svp_estates_general
			REB = {
				# needs balancing
				set_variable = { which = dutch_rebellion_desire value = 8 } #changed from 10
				country_event = { id = flavor_svp.99 days = 3650 }
			}
			#No requests right after setting up Estates General
			add_country_modifier = {
				name = svp_centralized_recently
				duration = 10950 #30 Years
			}
			add_country_modifier = {
				name = svp_demanded_tax_recently
				duration = 3650
			}
			add_country_modifier = {
				name = svp_demanded_manpower_recently
				duration = 3650
			}
		}
		##TODO: better explanation of what is going to happen custom tooltip
		every_owned_province = { #TODO: terrible display, may need custom tooltip
			limit = {
				OR = {
					region = low_countries_region
					region = belgii_region
				}
			}
			add_province_modifier = {
				name = estates_general_1
				duration = -1
			}
		}
	}
	option = {
		name = "flavor_svp.1.b" # Give local estates further privileges
		ai_chance = { factor = 0 }
		log = "FE-SVP:[GetYear]:[Root.GetName]:gave local estates further privileges:flavor_svp.1"
		every_owned_province = {
			limit = {
				OR = {
					province_id = 88 # Artoys
					province_id = 2307 # Guines
					province_id = 2353 # Cambresy
				}
				NOT = { has_province_modifier = county_of_artois }
			}
			add_permanent_province_modifier = {
				name = county_of_artois
				duration = -1
			}
			set_province_flag = svp_local_privileges
		}
		every_owned_province = { #TODO: terrible display, may need custom tooltip
			limit = {
				OR = {
					province_id = 87 # Flandres
					province_id = 90 # Brugge
					province_id = 2363 # Gent
				}
				NOT = { has_province_modifier = county_of_flanders }
			}
			add_permanent_province_modifier = {
				name = county_of_flanders
				duration = -1
			}
			set_province_flag = svp_local_privileges
		}
#		every_owned_province = {
#			limit = {
#				province_id = 2367 # Leuwen
#				NOT = { has_province_modifier = lordship_of_mechelen }
#			}
#			add_permanent_province_modifier = {
#				name = lordship_of_mechelen
#				duration = -1
#			}
#			set_province_flag = svp_local_privileges
#		}
		every_owned_province = {
			limit = {
				province_id = 2364 # Nameur
				NOT = { has_province_modifier = county_of_namur }
			}
			add_permanent_province_modifier = {
				name = county_of_namur
				duration = -1
			}
			set_province_flag = svp_local_privileges
		}
		every_owned_province = {
			limit = {
				province_id = 91 # Hennault
				NOT = { has_province_modifier = county_of_hainaut }
			}
			add_permanent_province_modifier = {
				name = county_of_hainaut
				duration = -1
			}
			set_province_flag = svp_local_privileges
		}
		every_owned_province = {
			limit = {
				province_id = 96 # Zeeland
				NOT = { has_province_modifier = county_of_zeeland }
			}
			add_permanent_province_modifier = {
				name = county_of_zeeland
				duration = -1
			}
			set_province_flag = svp_local_privileges
		}
		every_owned_province = {
			limit = {
				OR = {
					province_id = 97 # Amsterdam
					province_id = 2370 # 's-Gravenhage
				}
				NOT = { has_province_modifier = county_of_holland }
			}
			add_permanent_province_modifier = {
				name = county_of_holland
				duration = -1
			}
			set_province_flag = svp_local_privileges
		}
		every_owned_province = {
			limit = {
				OR = {
					province_id = 92 # Brussel
					province_id = 2367 # Leuwen
					province_id = 95 # Breda
					province_id = 2360 # Antwerpen
				}
				NOT = { has_province_modifier = duchy_of_brabant }
			}
			add_permanent_province_modifier = {
				name = duchy_of_brabant
				duration = -1
			}
			set_province_flag = svp_local_privileges
		}
		every_owned_province = {
			limit = {
				province_id = 2795 # Limburg
				NOT = { has_province_modifier = duchy_of_limburg }
			}
			add_permanent_province_modifier = {
				name = duchy_of_limburg
				duration = -1
			}
			set_province_flag = svp_local_privileges
		}
		every_owned_province = {
			limit = {
				OR = {
					province_id = 94 # Letzebuerg
					province_id = 1511 # Ardenne
				}
				NOT = { has_province_modifier = duchy_of_luxembourg }
			}
			add_permanent_province_modifier = {
				name = duchy_of_luxembourg
				duration = -1
			}
			set_province_flag = svp_local_privileges
		}
		every_owned_province = {
			limit = {
				province_id = 98 # Utrecht
				NOT = { has_province_modifier = lordship_of_utrecht }
			}
			add_permanent_province_modifier = {
				name = lordship_of_utrecht
				duration = -1
			}
			set_province_flag = svp_local_privileges
		}
		every_owned_province = {
			limit = {
				province_id = 1371 # Fryslan
				NOT = { has_province_modifier = lordship_of_frisia }
			}
			add_permanent_province_modifier = {
				name = lordship_of_frisia
				duration = -1
			}
			set_province_flag = svp_local_privileges
		}
		every_owned_province = {
			limit = {
				OR = {
					province_id = 99 # Gelre
					province_id = 2449 # Gelder
				}
				NOT = { has_province_modifier = duchy_of_guelders }
			}
			add_permanent_province_modifier = {
				name = duchy_of_guelders
				duration = -1
			}
			set_province_flag = svp_local_privileges
		}
#		every_owned_province = {
#			limit = {
#				province_id = 1371 # Fryslan
#				NOT = { has_province_modifier = lordship_of_groningen }
#			}
#			add_permanent_province_modifier = {
#				name = lordship_of_groningen
#				duration = -1
#			}
#			set_province_flag = svp_local_privileges
#		}
		every_owned_province = {
			limit = {
				OR = {
					province_id = 1372 # het Sticht
					province_id = 2450 # Groningen
				}
				NOT = { has_province_modifier = lordship_of_overijssel }
			}
			add_permanent_province_modifier = {
				name = lordship_of_overijssel
				duration = -1
			}
			set_province_flag = svp_local_privileges
		}
#		every_owned_province = {
#			limit = {
#				province_id = 99 # Gelre
#				NOT = { has_province_modifier = county_of_zutphen }
#			}
#			add_permanent_province_modifier = {
#				name = county_of_zutphen
#				duration = -1
#			}
#			set_province_flag = svp_local_privileges
#		}
#		every_owned_province = {
#			limit = {
#				province_id = 87 # Flandres
#				NOT = { has_province_modifier = bishopric_of_tournai }
#			}
#			add_permanent_province_modifier = {
#				name = bishopric_of_tournai
#				duration = -1
#			}
#			set_province_flag = svp_local_privileges
#		}
		every_owned_province = {
			limit = {
				OR = {
					province_id = 93 # Lidje
					province_id = 2451 # Loon
				}
				NOT = { has_province_modifier = bishopric_of_liege }
			}
			add_permanent_province_modifier = {
				name = bishopric_of_liege
				duration = -1
			}
			set_province_flag = svp_local_privileges
		}
	}
	option = {
		name = flavor_svp.1.c # Abolish the local estates
		ai_chance = { factor = 0 }
		log = "FE-SVP:[GetYear]:[Root.GetName]:abolished the local estates:flavor_svp.1"
		set_global_flag = dutch_rebellion_start
		hidden_effect = {
			REB = {
				set_variable = {
					which = dutch_rebellion_desire
					value = 25
				}
			}
			set_country_flag = svp_abolished_estates
		}
		every_owned_province = {
			limit = {
				OR = {
					region = belgii_region
					region = low_countries_region
				}
			}
			add_unrest = 15
			#TODO: local loyalty
		}
		custom_tooltip = flavor_svp_danger_tooltip
	}
}

# Demand taxes calculation event
country_event = {
	id = flavor_svp.2
	title = "flavor_svp.2.title"
	desc = EVT_AI
	picture = LIBERUM_VETO_eventPicture
	
	is_triggered_only = yes #from decision svp_demand_taxes

	option = {
		name = OPT.ACCEPT1
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.5
				REB = {
					check_variable = {
						which = dutch_rebellion_desire
						value = 10
					}
				}
			}
			modifier = {
				factor = 0.5
				REB = {
					check_variable = {
						which = dutch_rebellion_desire
						value = 12
					}
				}
			}
			modifier = {
				factor = 0.5
				REB = {
					check_variable = {
						which = dutch_rebellion_desire
						value = 14
					}
				}
			}
			modifier = {
				factor = 0.5
				REB = {
					check_variable = {
						which = dutch_rebellion_desire
						value = 16
					}
				}
			}
			modifier = {
				factor = 0
				REB = {
					check_variable = {
						which = dutch_rebellion_desire
						value = 18
					}
				}
			}
		}
		FROM = {
			country_event = { id = flavor_svp.3 }
		}
	}
	option = {
		name = OPT.DECLINE1
		ai_chance = {
			factor = 20
		}
		FROM = {
			country_event = { id = flavor_svp.4 }
		}
	}
}
# Estates-General accepts tax demand
country_event = {
	id = flavor_svp.3
	title = "flavor_svp.3.title"
	desc = "flavor_svp.3.desc"
	picture = LIBERUM_VETO_eventPicture
	
	is_triggered_only = yes

	option = {
		name = OPT.GOOD
		log = "FE-SVP:[GetYear]:[Root.GetName]:Estates General accepted tax demand:flavor_svp.3"
		if = {
			limit = {
				OR = {
					AND = {
						has_country_flag = svp_estates_general
						#TODO: can provinces have different levels of this modifier? 
						#If not, it should be a country modifier, if yes: this defaults to the lowest value from all owned provinces
						any_owned_province = {
							has_province_modifier = estates_general_1 
						}
					}
					AND = {
						has_country_flag = svp_creator
						SVP = {
							is_subject_of = ROOT
							any_owned_province = {
								has_province_modifier = estates_general_1
							}
						}
					}
				}
			}
			add_treasury = 100 #TODO: instead of that, take X ducats from each province and add to ROOT
		}
		else_if = {
			limit = {
				OR = {
					AND = {
						has_country_flag = svp_estates_general
						any_owned_province = {
							has_province_modifier = estates_general_2
						}
					}
					AND = {
						has_country_flag = svp_creator
						SVP = {
							is_subject_of = ROOT
							any_owned_province = {
								has_province_modifier = estates_general_2
							}
						}
					}
				}
			}
			add_treasury = 150
		}
		else_if = {
			limit = {
				OR = {
					AND = {
						has_country_flag = svp_estates_general
						any_owned_province = {
							has_province_modifier = estates_general_3
						}
					}
					AND = {
						has_country_flag = svp_creator
						SVP = {
							is_subject_of = ROOT
							any_owned_province = {
								has_province_modifier = estates_general_3
							}
						}
					}
				}
			}
			add_treasury = 200
		}
		else = {
			add_treasury = 100
		}
	}
}
# Estates-General rejects tax demand
country_event = {
	id = flavor_svp.4
	title = "flavor_svp.4.title"
	desc = "flavor_svp.4.desc"
	picture = LIBERUM_VETO_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavor_svp.4.a # Those pesky peasants...
		add_prestige = -5
		
		hidden_effect = {
			REB = {
				change_variable = {
					which = dutch_rebellion_desire
					value = 1
				}
			}
		}
		log = "FE-SVP:[GetYear]:[Root.GetName]:Estates General rejected tax demand:flavor_svp.3"
		log = "FE-SVP:[GetYear]:[Root.GetName]:dutch_rebellion_desire is [REB.dutch_rebellion_desire.GetValue]:flavor_svp.3"
	}
}
# New Bishoprics 1559
country_event = {
	id = flavor_svp.5
	title = "flavor_svp.5.title"
	desc = "flavor_svp.5.desc"
	picture = RELIGION_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		has_global_flag = dutch_rebellion_start
		OR = {
			AND = {
				has_country_flag = svp_creator
				SVP = {
					is_subject_of = ROOT
					any_owned_province = {
						OR = {
							religion = protestant
							religion = reformed
						}
					}
				}
			}
			AND = {
				has_country_flag = svp_estates_general
				any_owned_province = {
					OR = {
						has_province_modifier = estates_general_1
						has_province_modifier = estates_general_2
						has_province_modifier = estates_general_3
					}
					OR = {
						religion = protestant
						religion = reformed
					}
				}
			}
		}
	}
	mean_time_to_happen = {
		years = 5
	}
	option = {
		name = flavor_svp.5.a # Introduce the new bishoprics to fight more effectively against heresy
		ai_chance = {
			factor = 75
		}
		hidden_effect = {
			REB = {
				change_variable = {
					which = dutch_rebellion_desire
					value = 2
				}
			}
		}
		if = {
			limit = {
				has_country_flag = svp_estates_general
			}
			add_country_modifier = {
				name = svp_new_bishoprics
				duration = -1
			}
			every_owned_province = {
				limit = {
					OR = {
						region = low_countries_region
						region = belgii_region
					}
				}
				add_unrest = 2
			}
		}
		else = {
			SVP = {
				add_country_modifier = {
					name = svp_new_bishoprics
					duration = -1
				}
				every_owned_province = {
					add_unrest = 2
				}
			}
		}
		custom_tooltip = flavor_svp_danger_tooltip
		log = "FE-SVP:[GetYear]:[Root.GetName]:created new bishoprics in Low Countries to fight heresy:flavor_svp.5"
		log = "FE-SVP:[GetYear]:[Root.GetName]:dutch_rebellion_desire is [REB.dutch_rebellion_desire.GetValue]:flavor_svp.5"
	}
	option = {
		name = flavor_svp.5.b # We don't need a new system
		ai_chance = {
			factor = 25
		}
		log = "FE-SVP:[GetYear]:[Root.GetName]:have not created new bishoprics in Low Countries to fight heresy:flavor_svp.5"
	}
}

# Compromise of Nobles 1566
country_event = {
	id = flavor_svp.6
	title = "flavor_svp.6.title"
	desc = "flavor_svp.6.desc"
	picture = COURT_eventPicture
	
	fire_only_once = yes
	
	trigger = {
		has_global_flag = dutch_rebellion_start
		OR = {
			has_country_flag = svp_inquisition
			has_country_modifier = svp_new_bishoprics
		}
	}
	
	mean_time_to_happen = {
		years = 5
	}
	
	option = {
		name = OPT.COMPROMISE
		ai_chance = { factor = 60 }
		
		remove_country_modifier = svp_new_bishoprics
		clr_country_flag = svp_inquisition
		if = {
			limit = {
				has_country_flag = svp_estates_general
			}
			set_variable = {
				which = inquisition
				value = 0
			}
		}
		else = {
			set_variable = {
				which = inquisition
				value = 0
			}
			SVP = {
				set_variable = {
					which = inquisition
					value = 0
				}
			}
		}
		
		hidden_effect = {
			REB = {
				subtract_variable = {
					which = dutch_rebellion_desire
					value = 3
				}
			}
		}
		log = "FE-SVP:[GetYear]:[Root.GetName]:accepted petition to stop fighting heresy in Low Countries:flavor_svp.6"
		log = "FE-SVP:[GetYear]:[Root.GetName]:dutch_rebellion_desire is [REB.dutch_rebellion_desire.GetValue]:flavor_svp.6"
	}
	option = {
		name = OPT.REJECTPETITION
		ai_chance = { factor = 40 }
		if = {
			limit = {
				has_country_flag = svp_estates_general
			}
			every_owned_province = {
				limit = {
					OR = {
						region = low_countries_region
						region = belgii_region
					}
				}
				add_unrest = 2
			}
		}
		custom_tooltip = flavor_svp_danger_tooltip
		hidden_effect = {
			REB = {
				change_variable = {
					which = dutch_rebellion_desire
					value = 3
				}
			}
		}
		log = "FE-SVP:[GetYear]:[Root.GetName]:rejected petition to stop fighting heresy in Low Countries:flavor_svp.6"
		log = "FE-SVP:[GetYear]:[Root.GetName]:dutch_rebellion_desire is [REB.dutch_rebellion_desire.GetValue]:flavor_svp.6"
	}
}

# Province incorporated in the Estates-General
country_event = {
	id = flavor_svp.7
	title = "flavor_svp.7.title"
	desc = "flavor_svp.7.desc"
	picture = CONQUEST_eventPicture
	
	# Event fires if SVP or BUR obtains new provinces in the Low Countries and adds estates general to those provinces
	trigger = {
		any_owned_province = {
			OR = {
				has_province_modifier = estates_general_1
				has_province_modifier = estates_general_2
				has_province_modifier = estates_general_3
			}
		}
		any_owned_province = {
			OR = {
				region = low_countries_region
				region = belgii_region
			}
			is_core = ROOT
			NOT = {
				has_province_modifier = estates_general_1
				has_province_modifier = estates_general_2
				has_province_modifier = estates_general_3
			}
		}
	}
	
	mean_time_to_happen = {
		years = 5
	}
	
	option = {
		name = OPT.GOOD
		every_owned_province = {
			limit = {
				OR = {
					region = low_countries_region
					region = belgii_region
				}
				is_core = ROOT
				NOT = {
					has_province_modifier = estates_general_1
					has_province_modifier = estates_general_2
					has_province_modifier = estates_general_3
				}
			}
			if = {
				limit = {
					ROOT = {
						any_owned_province = {
							has_province_modifier = estates_general_1
						}
					}
				}
				add_province_modifier = {
					name = estates_general_1
					duration = -1
				}
			}
			else_if = {
				limit = {
					ROOT = {
						any_owned_province = {
							has_province_modifier = estates_general_2
						}
					}
				}
				add_province_modifier = {
					name = estates_general_2
					duration = -1
				}
			}
			else = {
				add_province_modifier = {
					name = estates_general_3
					duration = -1
				}
			}
		}
	}
}

# Demand manpower calculation event
country_event = {
	id = flavor_svp.9
	title = "flavor_svp.9.title"
	desc = EVT_AI
	picture = LIBERUM_VETO_eventPicture
	
	is_triggered_only = yes

	option = {
		name = OPT.ACCEPT1
		ai_chance = {
			factor = 80
			modifier = {
				factor = 0.5
				REB = {
					check_variable = {
						which = dutch_rebellion_desire
						value = 10
					}
				}
			}
			modifier = {
				factor = 0.5
				REB = {
					check_variable = {
						which = dutch_rebellion_desire
						value = 12
					}
				}
			}
			modifier = {
				factor = 0.5
				REB = {
					check_variable = {
						which = dutch_rebellion_desire
						value = 14
					}
				}
			}
			modifier = {
				factor = 0.5
				REB = {
					check_variable = {
						which = dutch_rebellion_desire
						value = 16
					}
				}
			}
			modifier = {
				factor = 0
				REB = {
					check_variable = {
						which = dutch_rebellion_desire
						value = 18
					}
				}
			}
		}
		FROM = {
			country_event = { id = flavor_svp.10 }
		}
	}
	option = {
		name = OPT.DECLINE1
		ai_chance = {
			factor = 20
		}
		FROM = {
			country_event = { id = flavor_svp.11 }
		}
	}
}
# Estates-General accepts manpower demand
country_event = {
	id = flavor_svp.10
	title = "flavor_svp.10.title"
	desc = "flavor_svp.10.desc"
	picture = LIBERUM_VETO_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavor_svp.3.a # Good.
		if = {
			limit = {
				OR = {
					AND = {
						has_country_flag = svp_estates_general
						any_owned_province = {
							has_province_modifier = estates_general_1
						}
					}
					AND = {
						has_country_flag = svp_creator
						SVP = {
							is_subject_of = ROOT
							any_owned_province = {
								has_province_modifier = estates_general_1
							}
						}
					}
				}
			}
			add_manpower = 3
		}
		else_if = {
			limit = {
				OR = {
					AND = {
						has_country_flag = svp_estates_general
						any_owned_province = {
							has_province_modifier = estates_general_2
						}
					}
					AND = {
						has_country_flag = svp_creator
						SVP = {
							is_subject_of = ROOT
							any_owned_province = {
								has_province_modifier = estates_general_2
							}
						}
					}
				}
			}
			add_manpower = 5
		}
		else_if = {
			limit = {
				OR = {
					AND = {
						has_country_flag = svp_estates_general
						any_owned_province = {
							has_province_modifier = estates_general_3
						}
					}
					AND = {
						has_country_flag = svp_creator
						SVP = {
							is_subject_of = ROOT
							any_owned_province = {
								has_province_modifier = estates_general_3
							}
						}
					}
				}
			}
			add_manpower = 7
		}
		else = {
			add_manpower = 3
		}
		log = "FE-SVP:[GetYear]:[Root.GetName]:Estates General accepted manpower demand:flavor_svp.10"
	}
}
# Estates-General rejects manpower demand
country_event = {
	id = flavor_svp.11
	title = "flavor_svp.11.title"
	desc = "flavor_svp.11.desc"
	picture = LIBERUM_VETO_eventPicture
	
	is_triggered_only = yes

	option = {
		name = flavor_svp.11.a # Those pesky peasants...
		add_prestige = -5
		
		hidden_effect = {
			REB = {
				change_variable = {
					which = dutch_rebellion_desire
					value = 1
				}
			}
		}
		log = "FE-SVP:[GetYear]:[Root.GetName]:Estates General rejected manpower demand:flavor_svp.11"
		log = "FE-SVP:[GetYear]:[Root.GetName]:dutch_rebellion_desire is [REB.dutch_rebellion_desire.GetValue]:flavor_svp.11"
	}
}
# Beeldenstorm disaster events
# On start
country_event = {
	id = flavor_svp.100
	title = "flavor_svp.100.title"
	desc = "flavor_svp.100.desc"
	picture = RELIGIOUS_TURMOIL_eventPicture

	major = yes
	is_triggered_only = yes
	
	immediate = {
		set_global_flag = beeldenstorm_happened
		log = "FE-SVP:[GetYear]:[Root.GetName]:Beeldenstorm revolt started:flavor_svp.100"
		# Spawn the rebels, hit 1 stab.
		if = {
			limit = {
				has_country_flag = svp_estates_general
			}
			Stab_Subtract1 = yes
			random_owned_province = {
				limit = {
					OR = {
						region = low_countries_region
						region = belgii_region
					}
					MN_CheckProp = { religion = 2 type = TotP prop = 20 }
					controlled_by = ROOT
				}
				spawn_rebels = {
					type = protestant_rebels
					size = 4
					unrest = 10
					win = yes
				}
			}
			random_owned_province = {
				limit = {
					OR = {
						region = low_countries_region
						region = belgii_region
					}
					MN_CheckProp = { religion = 2 type = TotP prop = 20 }
					controlled_by = ROOT
				}
				spawn_rebels = {
					type = protestant_rebels
					size = 4
					unrest = 10
					win = yes
				}
			}
			random_owned_province = {
				limit = {
					OR = {
						region = low_countries_region
						region = belgii_region
					}
					MN_CheckProp = { religion = 3 type = TotP prop = 20 }
					controlled_by = ROOT
				}
				spawn_rebels = {
					type = reformed_rebels
					size = 4
					unrest = 10
					win = yes
				}
			}
			random_owned_province = {
				limit = {
					OR = {
						region = low_countries_region
						region = belgii_region
					}
					MN_CheckProp = { religion = 3 type = TotP prop = 20 }
					controlled_by = ROOT
				}
				spawn_rebels = {
					type = reformed_rebels
					size = 4
					unrest = 10
					win = yes
				}
			}
		}
		else = {
			Stab_Subtract1 = yes
			SVP = {
				random_owned_province = {
					limit = {
						OR = {
							region = low_countries_region
							region = belgii_region
						}
						MN_CheckProp = { religion = 2 type = TotP prop = 20 }
						controlled_by = SVP
					}
					spawn_rebels = {
						type = protestant_rebels
						size = 4
						unrest = 10
						win = yes
					}
				}
				random_owned_province = {
					limit = {
						OR = {
							region = low_countries_region
							region = belgii_region
						}
						MN_CheckProp = { religion = 2 type = TotP prop = 20 }
						controlled_by = SVP
					}
					spawn_rebels = {
						type = protestant_rebels
						size = 3
						unrest = 10
						win = yes
					}
				}
				random_owned_province = {
					limit = {
						OR = {
							region = low_countries_region
							region = belgii_region
						}
						MN_CheckProp = { religion = 3 type = TotP prop = 20 }
						controlled_by = SVP
					}
					spawn_rebels = {
						type = reformed_rebels
						size = 4
						unrest = 10
						win = yes
					}
				}
				random_owned_province = {
					limit = {
						OR = {
							region = low_countries_region
							region = belgii_region
						}
						MN_CheckProp = { religion = 3 type = TotP prop = 20 }
						controlled_by = SVP
					}
					spawn_rebels = {
						type = reformed_rebels
						size = 3
						unrest = 10
						win = yes
					}
				}
			}
		}
	}
	option = {
		name = "flavor_svp.100.a" # Compromise with the rebels
		ai_chance = {
			factor = 25
		}
		log = "FE-SVP:[GetYear]:[Root.GetName]:compromised with rebels:flavor_svp.100"
		if = {
			limit = {
				has_country_flag = svp_estates_general
			}
			disband_rebels = protestant_rebels
			disband_rebels = reformed_rebels
			end_disaster = beeldenstorm
		}
		else = {
			SVP = {
				disband_rebels = protestant_rebels
				disband_rebels = reformed_rebels
			}
			end_disaster = beeldenstorm
		}
		if = {
			limit = {
				has_country_flag = svp_estates_general
			}
			every_owned_province = {
				limit = {
					OR = {
						region = low_countries_region
						region = belgii_region
					}
				}
				add_province_modifier = {
					name = beeldenstorm_compromise
					duration = 18250 # 50 years
				}
			}
		}
		else = {
			SVP = {
				every_owned_province = {
					add_province_modifier = {
						name = beeldenstorm_compromise
						duration = 18250 # 50 years
					}
				}
			}
		}
		# country_event = { id = flavor_svp.199 days = 5 } #no need for it, end_disaster = beeldenstorm triggers this event
	}
	option = {
		name = "flavor_svp.100.b" # Suppress the rebels
		ai_chance = {
			factor = 75
		}
		log = "FE-SVP:[GetYear]:[Root.GetName]:tried to suppress the rebels:flavor_svp.100"
		if = {
			limit = {
				culture_group = iberian
			}
			define_general = {
				fire = 5
				shock = 5
				manuever = 6
				siege = 0
				name = "Fernando Alvarez de Toledo"
				trait = ruthless_personality
			}
		}
		else = {
			create_general = { tradition = 100 }
		}
		custom_tooltip = flavor_svp_danger_tooltip
		hidden_effect = {
			REB = {
				change_variable = {
					which = dutch_rebellion_desire
					value = 3
				}
			}
		}
	}
	after = {
		log = "FE-SVP:[GetYear]:[Root.GetName]:dutch_rebellion_desire is [REB.dutch_rebellion_desire.GetValue]:flavor_svp.100"
	}
}

# Tenth Penny
country_event = {
	id = flavor_svp.101
	title = "flavor_svp.101.title"
	desc = "flavor_svp.101.desc"
	picture = ECONOMY_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = flavor_svp.101.a # Demand the Tenth Penny
		ai_chance = {
			factor = 25
		}
		add_treasury = 500 #TODO: take it from province wealth
		Stab_Subtract1 = yes		
		custom_tooltip = flavor_svp_danger_tooltip
		hidden_effect = {
			REB = {
				change_variable = {
					which = dutch_rebellion_desire
					value = 4
				}
			}
		}
		log = "FE-SVP:[GetYear]:[Root.GetName]:demanded tenth penny tax from Low Countries:flavor_svp.101"
		log = "FE-SVP:[GetYear]:[Root.GetName]:dutch_rebellion_desire is [REB.dutch_rebellion_desire.GetValue]:flavor_svp.101"
	}
	option = {
		name = flavor_svp.101.b # Let us not burden the people with additional taxes
		ai_chance = {
			factor = 75
		}
		add_legitimacy = 10
		log = "FE-SVP:[GetYear]:[Root.GetName]:skipped tenth penny tax from Low Countries:flavor_svp.101"
	}
}

# Council of Troubles
country_event = {
	id = flavor_svp.102
	title = "flavor_svp.102.title"
	desc = "flavor_svp.102.desc"
	picture = COURT_eventPicture
	
	is_triggered_only = yes
	fire_only_once = yes
	
	option = {
		name = flavor_svp.102.a # Set it up and execute the leaders of the revolt
		ai_chance = {
			factor = 25
		}
		Stab_Subtract1 = yes
		if = {
			limit = {
				has_country_flag = svp_estates_general
			}
			every_owned_province = {
				limit = {
					OR = {
						region = low_countries_region
						region = belgii_region
					}
				}
				add_unrest = -10
			}
		}
		else = {
			SVP = {
				every_owned_province = {
					add_unrest = -10
				}
			}
		}
		custom_tooltip = flavor_svp_danger_tooltip
		hidden_effect = {
			REB = {
				change_variable = {
					which = dutch_rebellion_desire
					value = 5
				}
			}
		}
		log = "FE-SVP:[GetYear]:[Root.GetName]:executed the leaders of the revolt:flavor_svp.102"
		log = "FE-SVP:[GetYear]:[Root.GetName]:dutch_rebellion_desire is [REB.dutch_rebellion_desire.GetValue]:flavor_svp.102"
	}
	option = {
		name = flavor_svp.102.b # Don't set it up
		ai_chance = {
			factor = 75
		}
		add_legitimacy = 10
		log = "FE-SVP:[GetYear]:[Root.GetName]:not executed the leaders of the revolt:flavor_svp.102"
	}
}
# Disaster end
country_event = {
	id = flavor_svp.199
	title = "flavor_svp.199.title"
	desc = "flavor_svp.199.desc"
	picture = COURT_eventPicture

	is_triggered_only = yes
	
	option = {
		name = flavor_svp.199.a # Finally
		Stab_Add1 = yes
		log = "FE-SVP:[GetYear]:[Root.GetName]:Beeldenstorm revolt ended:flavor_svp.199"
	}
}
# Information on the new mechanics
country_event = {
	id = flavor_svp.200
	title = "flavor_svp.200.title"
	desc = "flavor_svp.200.desc" #TODO: different description for SVP and for direct control over the region
	picture = BURGUNDY_COURT_eventPicture
	is_triggered_only = yes
	
	option = {
		name = "flavor_svp.200.a"
	}
}
# Centralisation information
country_event = {
	id = flavor_svp.201
	title = "flavor_svp.201.title"
	desc = "flavor_svp.201.desc"
	picture = BURGUNDY_COURT_eventPicture
	is_triggered_only = yes
	
	option = {
		name = "OPT.OK"
	}
}


# Events 301 and 302 removed as a temporary fix until 3.0. -ekinda

# Provinces want more freedom event
# country_event = {
	# id = flavor_svp.301
	# title = "flavor_svp.301.title"
	# desc = "flavor_svp.301.desc"
	# picture = ANGRY_MOB_eventPicture

	# is_triggered_only = yes
	
	# option = {
		# name = "flavor_svp.301.a" # Ok, revert the changes
		# ai_chance = { factor = 40 }
		
		# if = {
			# limit = {
				# SVP = {
					# is_subject_of_type = subjugated_vassal
				# }
			# }
			# create_subject = {
				# subject_type = rebellious_subjugated_vassal
				# subject = SVP
			# }
		# }
		# else_if = {
			# limit = {
				# SVP = {
					# is_subject_of_type = vassal
				# }
			# }
			# create_subject = {
				# subject_type = subjugated_vassal
				# subject = SVP
			# }
		# }
		# else = {
			# create_subject = {
				# subject_type = rebellious_subjugated_vassal
				# subject = SVP
			# }
		# }
	# }
	# option = {
		# name = OPT.NEVER
		# ai_chance = { factor = 60 }
		# add_prestige = 10
		# SVP = {
			# add_liberty_desire = 25
		# }
		# custom_tooltip = flavor_svp_danger_tooltip
		# hidden_effect = {
			# REB = {
				# change_variable = {
					# which = dutch_rebellion_desire
					# value = 10
				# }
			# }
		# }
	# }
# }
#Provinces generally accept subjugation
# country_event = {
	# id = flavor_svp.302
	# title = "flavor_svp.302.title"
	# desc = "flavor_svp.302.desc"
	# picture = BURGUNDY_COURT_eventPicture

	# is_triggered_only = yes
	
	# option = {
		# name = "flavor_svp.302.a"
		# add_prestige = 10
		# hidden_effect = {
			# REB = {
				# change_variable = {
					# which = dutch_rebellion_desire
					# value = 1
				# }
			# }
		# }
	# }
# }

#############################################
###### NETHERLANDS INDEPENDENCE EVENTS ######
#############################################

# Netherlands declare independence!
country_event = {
	id = flavor_svp.1001
	title = "flavor_svp.1001.title"
	desc = "flavor_svp.1001.desc"
	picture = ANGRY_MOB_eventPicture
	
	major = yes
	fire_only_once = yes
	
	trigger = {
		has_global_flag = dutch_rebellion_start
		OR = {
			AND = {
				has_country_flag = svp_creator
				SVP = {
					is_subject_of = ROOT
					check_variable = { which = "Cores_on_the_Netherlands" value = 10 }
				}
			}
			AND = {
				OR = {
					has_country_flag = svp_estates_general
					has_country_flag = svp_abolished_estates
				}
				NOT = { exists = SVP }
				check_variable = { which = "Demesne_in_the_Netherlands" value = 10 }
			}
		}
		NOT = { exists = NED }
		REB = {
			check_variable = {
				which = dutch_rebellion_desire
				
				# needs balancing
				value = 22 # changed from 20
			}
		}
	}
	
	mean_time_to_happen = {
		years = 20
		
		modifier = {
			factor = 0.75
			REB = {
				check_variable = {
					which = dutch_rebellion_desire
					value = 23
				}
			}
		}
		modifier = {
			factor = 0.75
			REB = {
				check_variable = {
					which = dutch_rebellion_desire
					value = 25
				}
			}
		}
		modifier = {
			factor = 0.50
			REB = {
				check_variable = {
					which = dutch_rebellion_desire
					value = 30
				}
			}
		}
		modifier = {
			factor = 0.1
			REB = {
				check_variable = {
					which = dutch_rebellion_desire
					value = 40
				}
			}
		}
	}

	immediate = {
		if = {
			limit = {
				NOT = { exists = NED }
			}
			NED = { clr_country_flag = POP_Init }
		}
		hidden_effect = {
			# Flag NED provinces and count the number. Also reset the rebellion desire.
			REB = {
				set_variable = {
					which = ned_core_count
					value = 0
				}
				set_variable = {
					which = dutch_rebellion_desire
					value = 0
				}
			}
			
			holland_area = {
				if = {
					limit = {
						OR = {
							owned_by = SVP
							owned_by = ROOT
						}
						NOT = {
							REB = {
								check_variable = { which = ned_core_count value = 11 } #TUNING
							}
						}
					}
					set_province_flag = ned_core
					REB = {
						change_variable = {
							which = ned_core_count
							value = 1
						}
					}
				}
			}
			gelderland_area = {
				if = {
					limit = {
						NOT = { province_id = 2449 } #Opper-Gelre?
						OR = {
							owned_by = SVP
							owned_by = ROOT
						}
						NOT = {
							REB = {
								check_variable = { which = ned_core_count value = 11 }
							}
						}
					}
					set_province_flag = ned_core
					REB = {
						change_variable = {
							which = ned_core_count
							value = 1
						}
					}
				}
			}
			frisia_area = {
				if = {
					limit = {
						OR = {
							owned_by = SVP
							owned_by = ROOT
						}
						NOT = {
							REB = {
								check_variable = { which = ned_core_count value = 11 }
							}
						}
					}
					set_province_flag = ned_core
					REB = {
						change_variable = {
							which = ned_core_count
							value = 1
						}
					}
				}
			}
			flanders_area = {
				if = {
					limit = {
						NOT = { province_id = 87 } #Flinde Lilos
						NOT = { province_id = 90 } #Brugge
						OR = {
							owned_by = SVP
							owned_by = ROOT
						}
						NOT = {
							REB = {
								check_variable = { which = ned_core_count value = 11 }
							}
						}
					}
					set_province_flag = ned_core
					REB = {
						change_variable = {
							which = ned_core_count
							value = 1
						}
					}
				}
			}
			95 = { #Noord Brabant
				if = {
					limit = {
						OR = {
							owned_by = SVP
							owned_by = ROOT
						}
						NOT = {
							REB = {
								check_variable = { which = ned_core_count value = 11 }
							}
						}
					}
					set_province_flag = ned_core
					REB = {
						change_variable = {
							which = ned_core_count
							value = 1
						}
					}
				}
			}
			if = {
				limit = {
					NOT = {
						REB = {
							check_variable = {
								which = ned_core_count
								value = 11
							}
						}
					}
				}
				south_brabant_area = {
					if = {
						limit = {
							NOT = { has_province_flag = ned_core }
							NOT = { province_id = 92 } #Brussels
							OR = {
								owned_by = SVP
								owned_by = ROOT
							}
							NOT = {
								REB = {
									check_variable = {
										which = ned_core_count
										value = 11
									}
								}
							}
						}
						set_province_flag = ned_core
						REB = {
							change_variable = {
								which = ned_core_count
								value = 1
							}
						}
					}
				}
			}
			if = {
				limit = {
					NOT = {
						REB = {
							check_variable = {
								which = ned_core_count
								value = 11
							}
						}
					}
				}
				north_brabant_area = {
					if = {
						limit = {
							NOT = { has_province_flag = ned_core }
							OR = {
								owned_by = SVP
								owned_by = ROOT
							}
							NOT = {
								REB = {
									check_variable = {
										which = ned_core_count
										value = 11
									}
								}
							}
						}
						set_province_flag = ned_core
						REB = {
							change_variable = {
								which = ned_core_count
								value = 1
							}
						}
					}
				}
			}
			# Escape clauses in the rare case NED core count has not reached 10 by now.
			if = {
				limit = {
					NOT = {
						REB = {
							check_variable = {
								which = ned_core_count
								value = 10
							}
						}
					}
				}
				SVP = {
					random_owned_province = {
						limit = {
							NOT = { has_province_flag = ned_core }
						}
						set_province_flag = ned_core
						REB = {
							change_variable = {
								which = ned_core_count
								value = 1
							}
						}
					}
				}
			}
			if = {
				limit = {
					NOT = {
						REB = {
							check_variable = {
								which = ned_core_count
								value = 10
							}
						}
					}
				}
				SVP = {
					random_owned_province = {
						limit = {
							NOT = { has_province_flag = ned_core }
						}
						set_province_flag = ned_core
						REB = {
							change_variable = {
								which = ned_core_count
								value = 1
							}
						}
					}
				}
			}
			if = {
				limit = {
					NOT = {
						REB = {
							check_variable = {
								which = ned_core_count
								value = 10
							}
						}
					}
				}
				SVP = {
					random_owned_province = {
						limit = {
							NOT = { has_province_flag = ned_core }
						}
						set_province_flag = ned_core
						REB = {
							change_variable = {
								which = ned_core_count
								value = 1
							}
						}
					}
				}
			}
			if = {
				limit = {
					NOT = {
						REB = {
							check_variable = {
								which = ned_core_count
								value = 10
							}
						}
					}
				}
				ROOT = {
					random_owned_province = {
						limit = {
							OR = {
								region = low_countries_region
								region = belgii_region
							}
							NOT = { has_province_flag = ned_core }
						}
						set_province_flag = ned_core
						REB = {
							change_variable = {
								which = ned_core_count
								value = 1
							}
						}
					}
				}
			}
			if = {
				limit = {
					NOT = {
						REB = {
							check_variable = {
								which = ned_core_count
								value = 10
							}
						}
					}
				}
				ROOT = {
					random_owned_province = {
						limit = {
							OR = {
								region = low_countries_region
								region = belgii_region
							}
							NOT = { has_province_flag = ned_core }
						}
						set_province_flag = ned_core
						REB = {
							change_variable = {
								which = ned_core_count
								value = 1
							}
						}
					}
				}
			}
			if = {
				limit = {
					NOT = {
						REB = {
							check_variable = {
								which = ned_core_count
								value = 10
							}
						}
					}
				}
				ROOT = {
					random_owned_province = {
						limit = {
							OR = {
								region = low_countries_region
								region = belgii_region
							}
							NOT = { has_province_flag = ned_core }
						}
						set_province_flag = ned_core
						REB = {
							change_variable = {
								which = ned_core_count
								value = 1
							}
						}
					}
				}
			}
			
			# Add NED cores, remove SVP/overlord cores, cede to NED
			low_countries_region = {
				if = {
					limit = {
						has_province_flag = ned_core
					}
					add_core = NED
				   #remove_core = SVP
				   #remove_core = ROOT
					cede_province = NED
				}
			}
			belgii_region = {
				if = {
					limit = {
						has_province_flag = ned_core
					}
					add_core = NED
				   #remove_core = SVP
				   #remove_core = ROOT
					cede_province = NED
				}
			}
			# Change NED capital to Zuyd Holland
			NED = {
				if = {
					limit = {
						owns = 2370 # Zuyd Holland
					}
					Effect_set_capital = { target = 2370 }
				}
			}
			# Give permanent claims to all over Low Countries to both NED and SVP
			low_countries_region = {
				if = {
					limit = {
						NOT = { is_core = NED }
					}
					add_permanent_claim = NED
				}
			}
			belgii_region = {
				if = {
					limit = {
						NOT = { is_core = NED }
					}
					add_permanent_claim = NED
				}
			}
			if = {
				limit = {
					SVP = { exists = yes }
				}
				low_countries_region = {
					if = {
						limit = {
							NOT = { is_core = SVP }
						}
						add_permanent_claim = SVP
					}
				}
				belgii_region = {
					if = {
						limit = {
							NOT = { is_core = SVP }
						}
						add_permanent_claim = SVP
					}
				}
			}
			# If SVP doesn't exist, give the claims to ROOT
			else = {
				low_countries_region = {
					if = {
						limit = {
							NOT = { is_core = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
				belgii_region = {
					if = {
						limit = {
							NOT = { is_core = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
			
			# Give money
			NED = {
				add_treasury = 200
			}
			
			# Build army and navy
			NED = {
				capital_scope = {				
					# Should we/can we easily make the unit numbers dynamic?
					infantry = NED
					infantry = NED
					infantry = NED
					infantry = NED
					infantry = NED
					infantry = NED
					infantry = NED
					infantry = NED
					cavalry = NED
					cavalry = NED
					artillery = NED
					artillery = NED
				}

				random_owned_province = {
					limit = {
						has_port = yes
					}
					# 5 heavies, 15 lights
					heavy_ship = NED
					heavy_ship = NED
					heavy_ship = NED
					heavy_ship = NED
					heavy_ship = NED
					light_ship = NED
					light_ship = NED
					light_ship = NED
					light_ship = NED
					light_ship = NED
					light_ship = NED
					light_ship = NED
					light_ship = NED
					light_ship = NED
					light_ship = NED
					light_ship = NED
					light_ship = NED
					light_ship = NED
					light_ship = NED
					light_ship = NED
				}
			}
			# Change national ideas
			NED = {
				swap_national_ideas_effect = yes
				swap_non_generic_missions = yes
			}
			#NED Spawns late, gives it two ideas that work well for it
			#TODO: maybe we should fill those groups as vanilla does not do it?
			NED = {
				add_idea_group = naval_ideas
				add_idea_group = economic_ideas
			}
			# Send event to rivals and possible enemies
			every_known_country = {
				limit = {
					#OR = {
					#	AND = {
					#		NOT = { has_opinion = { who = ROOT value = 0 } }
					#		is_great_power = yes
					#		capital_scope = {
					#			continent = europe
					#		}
					#	}
						is_rival = ROOT
					#}
				}
				country_event = { id = flavor_svp.1002 days = 10 }
			}
			# Leave the Empire if fighting emperor or HRE member
			if = {
				limit = {
					OR = {
						is_emperor = yes
						is_part_of_hre = yes
					}
				}
				NED = { leave_the_hre = yes }
			}

			# SVP should now be a personal union. The rebelling parts have seceded.
			if = {
				limit = {
					SVP = {
						exists = yes
					}
				}
				create_union = SVP
			}
			
			# Remove the estates general modifiers
			NED = {
				every_owned_province = {
					remove_province_modifier = estates_general_1
					remove_province_modifier = estates_general_2
					remove_province_modifier = estates_general_3
				}
			}
			NED = {
				if = {
					limit = {
						NOT = { has_country_flag = POP_Init }
					}
					country_event = { id = Init.1 }
				}
			}
			
			# Flags
			clr_global_flag = dutch_rebellion_start
			set_global_flag = dutch_rebellion_end
		}
	}
	option = {
		name = OPT.CRUSHREBELS
		ROOT = {
			declare_war_with_cb = {
				who = NED
				casus_belli = cb_overlord_attacking_independence_war
			}
		}
	}
	#TODO: option to let it slide and accept?
}

# Netherlands calls allies
country_event = {
	id = flavor_svp.1002
	title = "flavor_svp.1002.title"
	desc = "flavor_svp.1002.desc"
	picture = ANGRY_MOB_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = "flavor_svp.1002.a" # Intervene in the war
		ai_chance = { factor = 60 }
		trigger = {
			NOT = { war_exhaustion = 10 }
		}
		create_alliance = NED #TODO: maybe better use join_all_defensive_wars_of = NED and delay war declaration from previous overlord?
		hidden_effect = {
			NED = {
				country_event = { id = flavor_svp.1004 }
			}
		}
	}
	option = {
		name = "flavor_svp.1002.b" # Send money and troops
		trigger = {
			treasury = 200
			manpower = 5000
		}
		ai_chance = { factor = 40 }
		
		add_treasury = -200
		add_manpower = -5000
		
		hidden_effect = {
			NED = {
				country_event = { id = flavor_svp.1005 }
			}
		}
	}
	option = {
		name = "OPT.DONOTHING"
		ai_chance = { factor = 0 }
		add_prestige = -10
	}
}

# If independent, SVP changes to NED - in BYOA Calculations event
#country_event = {
#	id = flavor_svp.1003
#	title = "flavor_svp.1003.title"
#	desc = "flavor_svp.1003.desc"
#	picture = ANGRY_MOB_eventPicture
#	
#	trigger = {
#		ai = yes
#		tag = SVP
#		is_free_or_tributary_trigger = yes
#		NOT = { exists = NED }
#	}
#	
#	mean_time_to_happen = {
#		months = 1
#	}
#	
#	option = {
#		name = OPT.GOOD
#		ChangeTagEffect = { scope=NED }
#		swap_national_ideas_effect = yes
#		swap_non_generic_missions = yes
#		clr_global_flag = dutch_rebellion_start
#		set_global_flag = dutch_rebellion_end
#	}
#}

# Country intervenes in our side
country_event = {
	id = flavor_svp.1004
	title = "flavor_svp.1004.title"
	desc = "flavor_svp.1004.desc"
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = OPT.GOOD
		
		# TODO: A custom tooltip would be nice to have.
	}
}

# Country sends money and troops
country_event = {
	id = flavor_svp.1005
	title = "flavor_svp.1005.title"
	desc = "flavor_svp.1005.desc"
	picture = BATTLE_eventPicture
	
	is_triggered_only = yes
	
	option = {
		name = OPT.GOOD
		
		add_treasury = 200
		add_manpower = 5000
		
		# TODO Maybe an opinion modifier?
	}
}

# Dutch state joins the Netherlands
country_event = {
	id = flavor_svp.16
	title = "flavor_svp.EVTNAME16"
	desc = "flavor_svp.EVTDESC16"
	picture = DIPLOMACY_eventPicture
	
	major = yes
	
	trigger = {
		#is_year = 1550
		#NOT = { is_year = 1650 }
		culture_group = low_frankish
		NOT = { num_of_cities = 3 }
		NOT = { tag = NED }
		NED = {
			exists = yes
			ai = yes
			is_free_or_tributary_trigger = yes
		}
		is_free_or_tributary_trigger = yes
		is_at_war = no
		all_owned_province = {
			OR = {
				region = belgii_region
				region = low_countries_region
			}
		}
		ai = yes
	}
	
	mean_time_to_happen = {
		years = 50
		modifier = {
			factor = 0.75
			primary_culture = dutch
		}
		modifier = {
			factor = 1.25
			primary_culture = flemish
		}
		modifier = {
			factor = 1.25
			primary_culture = brabantian
		}
		modifier = {
			factor = 0.9
			has_opinion = {
				who = NED
				value = 50
			}
		}
		modifier = {
			factor = 0.9
			has_opinion = {
				who = NED
				value = 100
			}
		}
		modifier = {
			factor = 0.9
			has_opinion = {
				who = NED
				value = 150
			}
		}
		modifier = {
			factor = 1.1
			NOT = {
				has_opinion = {
					who = NED
					value = -50
				}
			}
		}
		modifier = {
			factor = 1.1
			NOT = {
				has_opinion = {
					who = NED
					value = -100
				}
			}
		}
		modifier = {
			factor = 1.1
			NOT = {
				has_opinion = {
					who = NED
					value = -150
				}
			}
		}
	}
	
	option = {
		name = "flavor_svp.EVTOPTA16"
		every_owned_province = {
			add_core = NED
		}
		NED = {
			inherit = PREV
		}
	}
}

# Abrogate the Local Estates
country_event = {
	id = flavor_svp.519
	title = flavor_svp.519.name
	desc = flavor_svp.519.desc
	picture = DIPLOMACY_eventPicture
	is_triggered_only = yes #from decision to remove local privileges

	option = {
		name = "flavor_svp.abr.cart"

		trigger = {
			any_owned_province = {
				has_province_modifier = county_of_artois
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = county_of_artois }
			remove_province_modifier = county_of_artois
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_cart_tt
	}


	option = {
		name = "flavor_svp.abr.cfla"

		trigger = {
			any_owned_province = {
				has_province_modifier = county_of_flanders
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = county_of_flanders }
			remove_province_modifier = county_of_flanders
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_cfla_tt
	}

	option = {
		name = "flavor_svp.abr.lmec"

		trigger = {
			any_owned_province = {
				has_province_modifier = lordship_of_mechelen
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = lordship_of_mechelen }
			remove_province_modifier = lordship_of_mechelen
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_lmec_tt
	}

	option = {
		name = "flavor_svp.abr.cnam"

		trigger = {
			any_owned_province = {
				has_province_modifier = county_of_namur
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = county_of_namur }
			remove_province_modifier = county_of_namur
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_cnam_tt
	}

	option = {
		name = "flavor_svp.abr.chai"

		trigger = {
			any_owned_province = {
				has_province_modifier = county_of_hainaut
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = county_of_hainaut }
			remove_province_modifier = county_of_hainaut
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_chai_tt
	}

	option = {
		name = "flavor_svp.abr.czee"

		trigger = {
			any_owned_province = {
				has_province_modifier = county_of_zeeland
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = county_of_zeeland }
			remove_province_modifier = county_of_zeeland
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_czee_tt
	}

	option = {
		name = "flavor_svp.abr.chol"

		trigger = {
			any_owned_province = {
				has_province_modifier = county_of_holland
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = county_of_holland }
			remove_province_modifier = county_of_holland
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_chol_tt
	}

	option = {
		name = "flavor_svp.abr.dbrb"

		trigger = {
			any_owned_province = {
				has_province_modifier = duchy_of_brabant
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = duchy_of_brabant }
			remove_province_modifier = duchy_of_brabant
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_dbrb_tt
	}

	option = {
		name = "flavor_svp.abr.dlim"

		trigger = {
			any_owned_province = {
				has_province_modifier = duchy_of_limburg
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = duchy_of_limburg }
			remove_province_modifier = duchy_of_limburg
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_dlim_tt
	}

	option = {
		name = "flavor_svp.abr.dlux"

		trigger = {
			any_owned_province = {
				has_province_modifier = duchy_of_luxembourg
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = duchy_of_luxembourg }
			remove_province_modifier = duchy_of_luxembourg
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_dlux_tt
	}

	option = {
		name = "flavor_svp.abr.lutr"

		trigger = {
			any_owned_province = {
				has_province_modifier = lordship_of_utrecht
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = lordship_of_utrecht }
			remove_province_modifier = lordship_of_utrecht
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_lutr_tt
	}

	option = {
		name = "flavor_svp.abr.lfri"

		trigger = {
			any_owned_province = {
				has_province_modifier = lordship_of_frisia
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = lordship_of_frisia }
			remove_province_modifier = lordship_of_frisia
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_lfri_tt
	}

	option = {
		name = "flavor_svp.abr.dgel"

		trigger = {
			any_owned_province = {
				has_province_modifier = duchy_of_guelders
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = duchy_of_guelders }
			remove_province_modifier = duchy_of_guelders
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_dgel_tt
	}

	option = {
		name = "flavor_svp.abr.lgro"

		trigger = {
			any_owned_province = {
				has_province_modifier = lordship_of_groningen
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = lordship_of_groningen }
			remove_province_modifier = lordship_of_groningen
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_lgro_tt
	}

	option = {
		name = "flavor_svp.abr.love"

		trigger = {
			any_owned_province = {
				has_province_modifier = lordship_of_overijssel
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = lordship_of_overijssel }
			remove_province_modifier = lordship_of_overijssel
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_love_tt
	}

	option = {
		name = "flavor_svp.abr.czut"

		trigger = {
			any_owned_province = {
				has_province_modifier = county_of_zutphen
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = county_of_zutphen }
			remove_province_modifier = county_of_zutphen
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_czut_tt
	}

	option = {
		name = "flavor_svp.abr.btou"

		trigger = {
			any_owned_province = {
				has_province_modifier = bishopric_of_tournai
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = bishopric_of_tournai }
			remove_province_modifier = bishopric_of_tournai
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_btou_tt
	}

	option = {
		name = "flavor_svp.abr.blie"

		trigger = {
			any_owned_province = {
				has_province_modifier = bishopric_of_liege
			}
		}
		
		every_owned_province = {
			limit = { has_province_modifier = bishopric_of_liege }
			remove_province_modifier = bishopric_of_liege
			clr_province_flag = svp_local_privileges
		}
		custom_tooltip = abrogate_blie_tt
	}

	option = {
		name = exit
		highlight = yes
	}
}