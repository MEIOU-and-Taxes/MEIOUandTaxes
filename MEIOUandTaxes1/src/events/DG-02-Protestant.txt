namespace = DG_Protestant

# 001     - Starting the heresy
# 002-099 - 
# 100-200 - Spreading heresy
# 201-300 - Inquisition results
# 301-400 - Unrest events
# 901     - Protestants become Protestant

#Birth of the Heresy
province_event = {
	id = DG_Protestant.001
	title = "DG_Protestant.001.title"
	desc = "DG_Protestant.001.desc"
	picture = protestant_reformation

	fire_only_once = yes
	
	trigger = {
		owner = { adm_tech = 25 }
		NOT = { is_religion_enabled = protestant }
		can_be_religious_craddle = yes
		owner = {
			reform_desire = 1.00
			religion = catholic
			is_emperor = no
			capital_scope = {
				OR = {
					superregion = france_superregion
					superregion = germany_superregion
					AND = {
						owner = {
							government = theocracy
							culture_group = low_germanic
						}
						superregion = commonwealth_superregion
					}
				}
			}
		}
		western_christian = yes
	}
	
	mean_time_to_happen = {
		years = 20
		
		modifier = {
			factor = 0.50
			owner = { capital_scope = { is_part_of_hre = yes } }
		}
		modifier = {
			factor = 0.90
			owner = { reform_desire = 1.10 }
		}
		modifier = {
			factor = 0.90
			owner = { reform_desire = 1.20 }
		}
		modifier = {
			factor = 0.90
			owner = { reform_desire = 1.30 }
		}
		modifier = {
			factor = 0.90
			owner = { reform_desire = 1.40 }
		}
		modifier = {
			factor = 0.90
			owner = { reform_desire = 1.50 }
		}
		modifier = {
			factor = 0.90
			owner = { reform_desire = 1.60 }
		}
		modifier = {
			factor = 0.90
			owner = { reform_desire = 1.70 }
		}
		modifier = {
			factor = 0.90
			owner = { reform_desire = 1.80 }
		}
		modifier = {
			factor = 0.90
			owner = { reform_desire = 1.90 }
		}
		modifier = {
			factor = 0.90
			owner = { reform_desire = 2.00 }
		}
		modifier = {
			factor = 0.90
			owner = {
				is_elector = yes
			}
		}
		modifier = {
			factor = 1.25
			has_cardinal = yes
		}
		modifier = {
			factor = 1.10
			is_capital = yes
		}
		modifier = {
			factor = 0.90
			owner = { is_year = 1515 }
		}
		modifier = {
			factor = 0.75
			owner = { is_year = 1525 }
		}
		modifier = {
			factor = 0.50
			owner = { is_year = 1530 }
		}
		modifier = {
			owner = { NOT = { capital_distance = { who = PAP distance = 130 } } }
			factor = 3.00
		}
		modifier = {
			owner = { NOT = { capital_distance = { who = PAP distance = 260 } } }
			factor = 3.00
		}
		modifier = {
			owner = { NOT = { capital_distance = { who = PAP distance = 390 } } }
			factor = 3.00
		}
		modifier = {
			factor = 0.90
			owner = { is_religion_enabled = lollard }
		}
		modifier = {
			factor = 0.90
			owner = { is_religion_enabled = hussite }
		}
		modifier = {
			factor = 3.00
			owner = { capital_scope = { superregion = france_superregion } }
		}
		modifier = {
			factor = 5.00
			owner = { capital_scope = { superregion = italy_superregion } }
		}
		modifier = {
			factor = 4.00
			owner = { capital_scope = { superregion = iberia_superregion } }
		}
		modifier = {
			factor = 0.75
			owner = { capital_scope = { superregion = germany_superregion } }
		}
		modifier = {
			factor = 3.00
			owner = { capital_scope = { superregion = greater_austrian_circle_superregion } }
		}
		modifier = {
			factor = 2.00
			owner = { capital_scope = { superregion = balkan_superregion } }
		}
		modifier = {
			factor = 3.00
			owner = { capital_scope = { superregion = commonwealth_superregion } }
		}
		modifier = {
			factor = 0.75
			owner = { capital_scope = { superregion = scandinavian_superregion } }
		}
	}
	
	immediate = {
		enable_religion = protestant
		hidden_effect = {
			set_global_flag = DG_Lutheran_Spawn
			random_list = {
				10 = { set_global_flag = DG_Small_Lutheranism }
				80 = { set_global_flag = DG_Mild_Lutheranism }
				10 = { set_global_flag = DG_Large_Lutheranism }
			}
		}
		log = "DG:[GetYear]:[This.aab.GetValue]:Lutheran:Birth:[This.GetName]:[This.Owner.GetName]"
		hidden_effect = {
			set_province_flag = pro_craddle
			save_global_event_target_as = pro_origins
			owner = { set_country_flag = DG_Lutheran_Spread }
			if = {
				limit = { owner = { is_part_of_hre = yes } }
				owner = { set_country_flag = imperial_protestantism }
			}
			else_if = {
				limit = { owner = { is_part_of_hre = no capital_scope = { superregion = france_superregion } } }
				owner = { set_country_flag = french_protestantism }
			}
			else_if = {
				limit = { owner = { is_part_of_hre = no capital_scope = { superregion = iberia_superregion } } }
				owner = { set_country_flag = iberian_protestantism }
			}
			else_if = {
				limit = { owner = { is_part_of_hre = no capital_scope = { superregion = germany_superregion } } }
				owner = { set_country_flag = german_protestantism }
			}
			else_if = {
				limit = { owner = { is_part_of_hre = no capital_scope = { superregion = greater_austrian_circle_superregion } } }
				owner = { set_country_flag = german_protestantism }
			}
			else_if = {
				limit = { owner = { is_part_of_hre = no capital_scope = { superregion = balkan_superregion } } }
				owner = { set_country_flag = balkan_protestantism }
			}
			else_if = {
				limit = { owner = { is_part_of_hre = no capital_scope = { superregion = commonwealth_superregion } } }
				owner = { set_country_flag = eastern_protestantism }
			}
			else_if = {
				limit = { owner = { is_part_of_hre = no capital_scope = { superregion = scandinavian_superregion } } }
				owner = { set_country_flag = scandinavian_protestantism }
			}
			MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.10 typeIncr = value }
			MN_Attribute_Effect = { reltype = value religion = 2 typeEffect = Preach typeStrength = value strength = 5 }
			MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
			#MN_RlgConv = yes
			every_neighbor_province = {
				MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.05 typeIncr = value }
				MN_Attribute_Effect = { reltype = value religion = 2 typeEffect = Preach typeStrength = value strength = 3 }
				MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
			}
		}
		hidden_effect = {
		    if = {
			    limit = {
				    any_province = {
					    culture = ROOT
						continent = europe
						has_province_flag = catholic_archbishopric
					}
				}
				random_province = {
				    limit = {
					    culture = ROOT
						continent = europe
						has_province_flag = catholic_archbishopric
				    }
					set_province_flag = reformation_origins_archbishop
				    save_event_target_as = reformation_origins_archbishop
			    }
			}
			else_if = {
			    limit = {
				    any_province = {
					    culture_group = ROOT
						continent = europe
						has_province_flag = catholic_archbishopric
					}
				}
				random_province = {
				    limit = {
					    culture_group = ROOT
						continent = europe
						has_province_flag = catholic_archbishopric
				    }
					set_province_flag = reformation_origins_archbishop
				    save_event_target_as = reformation_origins_archbishop
			    }
			}
			else = {
				random_province = {
				    limit = {
					    continent = europe
						has_province_flag = catholic_archbishopric
				    }
					set_province_flag = reformation_origins_archbishop
				    save_event_target_as = reformation_origins_archbishop
			    }
			}
		}
		hidden_effect = {
		    every_country = {
				limit = {
				    OR = {
					    western_christian = yes
						capital_scope = { continent = europe }
					}
				}
				country_event = { id = DG_Protestant.099 days = 1 }
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.opta" #Support him
		trigger = { NOT = { owned_by = PAP } }
		ai_chance = {
			factor = 40
			modifier = {
				owner = { capital_distance = { who = PAP distance = 260 } }
				factor = 2
			}
			modifier = {
				owner = { capital_distance = { who = PAP distance = 390 } }
				factor = 2
			}
			modifier = {
				owner = { NOT = { capital_distance = { who = PAP distance = 130 } } }
				factor = 0.5
			}
			modifier = {
				owner = { 
					OR = {
						is_emperor = yes
						any_known_country = { is_elector = yes preferred_emperor = PREV }
					}
					NOT = { any_known_country = { is_elector = yes religion = protestant } }
				}
				factor = 0.2
			}
			modifier = {
				owner = { is_papal_controller = yes}
				factor = 0.5
			}
			modifier = {
				owner = { num_of_loans = 1 }
				factor = 1.4
			}
			modifier = {
				owner = { num_of_loans = 2 }
				factor = 1.4
			}
			modifier = {
				owner = { any_neighbor_country = { NOT = { religion_group = christian } } }
				factor = 0.5
			}
			modifier = {
				owner = { any_neighbor_country = { NOT = { religion = catholic } NOT = { religion = protestant religion = reformed } } }
				factor = 0.5
			}
			modifier = {
				owner = { any_known_country = { OR = { religion = hussite religion = gnostic religion = protestant religion = reformed } } }
				factor = 1.4
			}
			modifier = {
				owner = { dominant_religion = protestant }
				factor = 2
			}
			modifier = {
				owner = { government = republic }
				factor = 0.5
			}
			modifier = {
				factor = 0.1
				owner = { capital_scope = { superregion = france_superregion } }
			}
			modifier = {
				factor = 0
				owner = { capital_scope = { superregion = italy_superregion } }
			}
			modifier = {
				factor = 0
				owner = { capital_scope = { superregion = iberia_superregion } }
			}
			modifier = {
				factor = 2.75
				owner = { capital_scope = { superregion = germany_superregion } }
			}
			modifier = {
				factor = 2.75
				owner = { capital_scope = { superregion = british_isles_superregion NOT = { region = ireland_region } } }
			}
			modifier = {
				factor = 0.05
				owner = { capital_scope = { region = ireland_region } }
			}
			modifier = {
				factor = 2.75
				capital_scope = { region = bohemia_region }
			}
			modifier = {
				factor = 1.4
				capital_scope = { region = switzerland_region }
			}
			modifier = {
				factor = 0
				capital_scope = { region = austrian_circle_region }
			}
			modifier = {
				factor = 0
				capital_scope = { region = swabia_bavarian_region }
			}
			modifier = {
				factor = 1.1
				owner = { capital_scope = { superregion = balkan_superregion } }
			}
			modifier = {
				factor = 3.00
				owner = { government = theocracy capital_scope = { superregion = commonwealth_superregion } }
			}
			modifier = {
				factor = 0.5
				owner = { NOT = { government = theocracy  } capital_scope = { superregion = commonwealth_superregion } }
			}
			modifier = {
				factor = 2.75
				owner = { capital_scope = { superregion = scandinavian_superregion } }
			}
		}
		hidden_effect = {
			owner = {
				change_religion = protestant
				force_converted = yes
				set_country_flag = support_02
				add_ruler_modifier = { name = "heretic_tolerance" }
				MN_conv_resist_c = { strength = -10 }
				reverse_add_opinion = { who = PAP modifier = opinion_pope_religious_tolerance }
				every_owned_province = {
					set_key = { lhs = Heresy_Scalar value = 0 }
					if = {
						limit = {
							culture_group = owner
						}
						random_list = {
							40 = { set_key = { lhs = Heresy_Scalar value = 0.50 } }
							30 = { set_key = { lhs = Heresy_Scalar value = 0.40 } }
							20 = { set_key = { lhs = Heresy_Scalar value = 0.30 } }
							10 = { set_key = { lhs = Heresy_Scalar value = 0.20 } }
							1 = { set_key = { lhs = Heresy_Scalar value = 0.10 } }
						}
					}
					else = {
						random_list = {
							40 = { set_key = { lhs = Heresy_Scalar value = 0.05 } }
							30 = { set_key = { lhs = Heresy_Scalar value = 0.10 } }
							20 = { set_key = { lhs = Heresy_Scalar value = 0.15 } }
							10 = { set_key = { lhs = Heresy_Scalar value = 0.20 } }
							1 = { set_key = { lhs = Heresy_Scalar value = 0.25 } }
						}
					}
					if = {
						limit = {
							check_key = { lhs = Heresy_Scalar value = 0.05 }
						}
						MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = Heresy_Scalar typeIncr = which }
					}
					set_key = { lhs = Heresy_Scalar value = 0 }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.optb" #Let him speak
		trigger = { NOT = { owned_by = PAP } }
		ai_chance = {
			factor = 20
			modifier = {
				owner = { capital_distance = { who = PAP distance = 260 } }
				factor = 1.4
			}
			modifier = {
				owner = { capital_distance = { who = PAP distance = 390 } }
				factor = 1.4
			}
			modifier = {
				owner = { NOT = { capital_distance = { who = PAP distance = 130 } } }
				factor = 0.7
			}
			modifier = {
				owner = { num_of_cities = 5 }
				factor = 0.7
			}
			modifier = {
				owner = { num_of_cities = 10 }
				factor = 0.7
			}
			modifier = {
				owner = { num_of_cities = 20 }
				factor = 0.7
			}
			modifier = {
				owner = { num_of_cities = 40 }
				factor = 0.7
			}
			modifier = {
				owner = { num_of_cities = 80 }
				factor = 0.7
			}
			modifier = {
				owner = { 
					any_known_country = {
						junior_union_with = PREV
						religion = catholic
						NOT = { has_country_flag = humanism }
					}
				}
				factor = 0.5
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = accept_02
				add_ruler_modifier = { name = "tolerant_society" }
				MN_conv_resist_c = { strength = -5 }
				every_owned_province = {
					set_key = { lhs = Heresy_Scalar value = 0 }
					random_list = {
						40 = { set_key = { lhs = Heresy_Scalar value = 0.50 } }
						30 = { set_key = { lhs = Heresy_Scalar value = 0.40 } }
						20 = { set_key = { lhs = Heresy_Scalar value = 0.30 } }
						10 = { set_key = { lhs = Heresy_Scalar value = 0.20 } }
						1 = { set_key = { lhs = Heresy_Scalar value = 0.10 } }
					}
					if = {
						limit = {
							check_key = { lhs = Heresy_Scalar value = 0.05 }
						}
						MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = Heresy_Scalar typeIncr = which }
						MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
					}
					set_key = { lhs = Heresy_Scalar value = 0 }
				}
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.optc" #Silence him
		ai_chance = {
			factor = 30
			modifier = {
				owner = { has_global_flag = reformation_luther_martyred }
				factor = 1.4
			}
			modifier = {
				owner = { government = republic }
				factor = 2
			}
			modifier = {
				owner = { capital_distance = { who = PAP distance = 260 } }
				factor = 0.7
			}
			modifier = {
				owner = { capital_distance = { who = PAP distance = 390 } }
				factor = 0.7
			}
			modifier = {
				owner = { NOT = { capital_distance = { who = PAP distance = 130 } } }
				factor = 1.4
			}
			modifier = {
				owner = { 
					exists = AVI
					AVI = { papal_trigger = yes }
				}
				factor = 0.5
			}
			modifier = {
				owner = { is_papal_controller = yes }
				factor = 2
			}
			modifier = {
				owner = { any_neighbor_country = { NOT = { religion_group = christian } } }
				factor = 2
			}
			modifier = {
				owner = { 
					any_neighbor_country = {
						NOT = {
							OR = {
								religion = catholic
								religion = reformed
								religion = protestant
							}
						}
					}
				}
				factor = 2
			}
			modifier = {
				owner = { 
					OR = {
						is_elector = yes
						is_emperor = yes
					}
				}
				factor = 2
			}
			modifier = {
				factor = 2.00
				owner = { capital_scope = { superregion = france_superregion } }
			}
			modifier = {
				factor = 5.00
				owner = { capital_scope = { superregion = italy_superregion } }
			}
			modifier = {
				factor = 4.00
				owner = { capital_scope = { superregion = iberia_superregion } }
			}
			modifier = {
				factor = 0.75
				owner = { capital_scope = { superregion = germany_superregion } }
			}
			modifier = {
				factor = 0.05
				capital_scope = { region = bohemia_region }
			}
			modifier = {
				factor = 0.25
				capital_scope = { region = switzerland_region }
			}
			modifier = {
				factor = 5.00
				capital_scope = { region = austrian_circle_region }
			}
			modifier = {
				factor = 5.00
				capital_scope = { region = swabia_bavarian_region }
			}
			modifier = {
				factor = 2.00
				owner = { capital_scope = { superregion = balkan_superregion } }
			}
			modifier = {
				factor = 0.05
				owner = { capital_scope = { superregion = british_isles_superregion NOT = { region = ireland_region } } }
			}
			modifier = {
				factor = 2.75
				owner = { capital_scope = { region = ireland_region } }
			}
			modifier = {
				factor = 0.50
				owner = { government = theocracy capital_scope = { superregion = commonwealth_superregion } }
			}
			modifier = {
				factor = 3.00
				owner = { NOT = { government = theocracy  } capital_scope = { superregion = commonwealth_superregion } }
			}
			modifier = {
				factor = 0.75
				owner = { capital_scope = { superregion = scandinavian_superregion } }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = silence_02
				add_ruler_modifier = { name = "religious_intolerance" }
				MN_conv_resist_c = { strength = 10 }
				every_owned_province = {
					set_key = { lhs = Heresy_Scalar value = 0 }
					if = {
						limit = { culture_group = owner }
						random_list = {
							40 = { set_key = { lhs = Heresy_Scalar value = 0.05 } }
							30 = { set_key = { lhs = Heresy_Scalar value = 0.10 } }
							20 = { set_key = { lhs = Heresy_Scalar value = 0.15 } }
							10 = { set_key = { lhs = Heresy_Scalar value = 0.20 } }
							1 = { set_key = { lhs = Heresy_Scalar value = 0.25 } }
						}
					}
					else = {
						random_list = {
							40 = { set_key = { lhs = Heresy_Scalar value = 0.10 } }
							30 = { set_key = { lhs = Heresy_Scalar value = 0.20 } }
							20 = { set_key = { lhs = Heresy_Scalar value = 0.30 } }
							10 = { set_key = { lhs = Heresy_Scalar value = 0.40 } }
							1 = { set_key = { lhs = Heresy_Scalar value = 0.50 } }
						}
					}
					if = {
						limit = {
							check_key = { lhs = Heresy_Scalar value = 0.05 }
						}
						MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = Heresy_Scalar typeIncr = which }
						MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 75 }
					}
					set_key = { lhs = Heresy_Scalar value = 0 }
				}
			}
		}
	}
	
	after = {
		hidden_effect = {
			owner = {
				country_event = { id = DG_Protestant.002 }
			}
#			owner = {
#				random_neighbor_country = {
#					limit = { western_christian = yes NOT = { has_country_flag = DG_Lutheran_Spread } }
#					country_event = { id = DG_Protestant.003 days = 60 random = 15 }
#				}
#				random_neighbor_country = {
#					limit = { western_christian = yes NOT = { has_country_flag = DG_Lutheran_Spread } }
#					country_event = { id = DG_Protestant.003 days = 120 random = 15 }
#				}
#				random_neighbor_country = {
#					limit = { western_christian = yes NOT = { has_country_flag = DG_Lutheran_Spread } }
#					country_event = { id = DG_Protestant.003 days = 180 random = 15 }
#				}
#			}
			3723 = {
				province_event = { id = DG_Protestant.004 days = 1825 random = 120 }
			}
		}
	}
}

#Choice of Notifications
country_event = {
	id = DG_Protestant.002
	title = "DG_Protestant.002.title"
	desc = "DG_Protestant.002.desc"
	picture = all_church_state
	
	trigger = {
		NOT = { has_country_flag = protestant_presence }
		ai = no
	}

	is_triggered_only = yes

	option = {
		name = "DG_Protestant.002.opta"
		trigger = { ai = no }
		hidden_effect = {
			set_country_flag = pro_spread_info
			set_country_flag = pro_inquis_info
			set_country_flag = pro_convert_info
			set_country_flag = pro_unrest_info
			set_country_flag = pro_end_info
		}
	}

	option = {
		name = "DG_Protestant.002.optb"
		trigger = { ai = no }
		hidden_effect = {
			clr_country_flag = pro_spread_info
			clr_country_flag = pro_inquis_info
			clr_country_flag = pro_convert_info
			clr_country_flag = pro_unrest_info
			clr_country_flag = pro_end_info
		}
	}

	option = {
		name = "DG_Protestant.002.optc"
		trigger = { ai = no }
		country_event = { id = DG_Notification.021 }
	}

	option = {
		name = "EVT_AI"
		trigger = { ai = yes }
	}
	
	after = {
		if = {
			limit = { NOT = { has_country_flag = protestant_presence } }
			hidden_effect = {
				set_country_flag = protestant_presence
			}
		}
	}
}

#Spread of the Heresy
country_event = {
	id = DG_Protestant.003
	title = "DG_Protestant.003.title"
	desc = "DG_Protestant.003.desc"
	picture = protestant_reformation

	is_triggered_only	= yes

	trigger = {
		NOT = { has_country_flag = DG_Lutheran_Spread }  
	}
	
	immediate = {
		hidden_effect = {
			set_country_flag = DG_Lutheran_Spread
			set_saved_name = {
				type = advisor
				key = heretic_preacher
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.opta" #Support him
		trigger = { NOT = { tag = PAP } }
		ai_chance = {
			factor = 30
			modifier = {
				capital_distance = { who = PAP distance = 260 }
				factor = 2
			}
			modifier = {
				capital_distance = { who = PAP distance = 390 }
				factor = 2
			}
			modifier = {
				NOT = { capital_distance = { who = PAP distance = 130 } }
				factor = 0.5
			}
			modifier = {
				OR = {
					is_emperor = yes
					any_known_country = { is_elector = yes preferred_emperor = ROOT }
				}
				NOT = { any_known_country = { is_elector = yes religion = protestant } }
				factor = 0.2
			}
			modifier = {
			    AND = { is_part_of_hre = yes government = theocracy }
				factor = 0.25
			}
			modifier = {
			    AND = { is_elector = yes government = theocracy }
				factor = 0.1
			}
			modifier = {
			    AND = { is_elector = yes government = monarchy }
				factor = 2.5
			}
			modifier = {
				is_papal_controller = yes
				factor = 0.5
			}
			modifier = {
				num_of_loans = 1
				factor = 1.4
			}
			modifier = {
				num_of_loans = 2
				factor = 1.4
			}
			modifier = {
				any_neighbor_country = { NOT = { religion_group = christian } }
				factor = 0.5
			}
			modifier = {
				any_neighbor_country = { NOT = { religion = catholic } NOT = { religion = protestant religion = reformed } }
				factor = 0.5
			}
			modifier = {
				any_known_country = { OR = { religion = lollard religion = hussite religion = gnostic religion = protestant religion = reformed } }
				factor = 1.4
			}
			modifier = {
				OR = { religion = lollard religion = hussite religion = waldensian }
				factor = 3.0
			}
			modifier = {
				dominant_religion = protestant
				factor = 2
			}
			modifier = {
				government = republic
				factor = 0.5
			}
			modifier = {
				factor = 0.1
				capital_scope = { superregion = france_superregion }
			}
			modifier = {
				factor = 0
				capital_scope = { superregion = italy_superregion }
			}
			modifier = {
				factor = 0
				capital_scope = { superregion = iberia_superregion }
			}
			modifier = {
				factor = 4.75
				capital_scope = { superregion = germany_superregion }
			}
			modifier = {
				factor = 2.75
				capital_scope = { superregion = british_isles_superregion NOT = { region = ireland_region } }
			}
			modifier = {
				factor = 0.05
				capital_scope = { region = ireland_region }
			}
			modifier = {
				factor = 2.75
				capital_scope = { region = bohemia_region }
			}
			modifier = {
				factor = 1.4
				capital_scope = { region = switzerland_region }
			}
			modifier = {
				factor = 0
				capital_scope = { region = austrian_circle_region }
			}
			modifier = {
				factor = 0
				capital_scope = { region = swabia_bavarian_region }
			}
			modifier = {
				factor = 1.1
				capital_scope = { superregion = balkan_superregion }
			}
			modifier = {
				factor = 3.00
				government = theocracy capital_scope = { superregion = commonwealth_superregion }
			}
			modifier = {
				factor = 0.5
				NOT = { government = theocracy  } capital_scope = { superregion = commonwealth_superregion }
			}
			modifier = {
				factor = 6
				capital_scope = { superregion = scandinavian_superregion }
			}
		}
		log = "DG:[GetYear]:[This.GetName]:Lutheran:Choose:Support:"
		hidden_effect = {
			change_religion = protestant
			force_converted = yes
			set_country_flag = support_02
			add_ruler_modifier = { name = "heretic_tolerance" }
			MN_conv_resist_c = { strength = -10 }
			reverse_add_opinion = { who = PAP modifier = opinion_pope_religious_tolerance }
            every_owned_province = {
				if = {
					limit = { MN_CheckRelSlot = { Type = value Religion = 4 } }
					MN_RlgChange = { from = 4 to = 2 }
				}
				else_if = {
					limit = { MN_CheckRelSlot = { Type = value Religion = 6 } }
					MN_RlgChange = { from = 6 to = 2 }
				}
				else = {
					set_key = { lhs = Heresy_Scalar value = 0 }
					if = {
						limit = { culture_group = owner }
						random_list = {
							40 = { set_key = { lhs = Heresy_Scalar value = 0.60 } }
							30 = { set_key = { lhs = Heresy_Scalar value = 0.50 } }
							20 = { set_key = { lhs = Heresy_Scalar value = 0.40 } }
							10 = { set_key = { lhs = Heresy_Scalar value = 0.30 } }
							1 = { set_key = { lhs = Heresy_Scalar value = 0.20 } }
						}
					}
					else = {
						random_list = {
							40 = { set_key = { lhs = Heresy_Scalar value = 0.05 } }
							30 = { set_key = { lhs = Heresy_Scalar value = 0.10 } }
							20 = { set_key = { lhs = Heresy_Scalar value = 0.15 } }
							10 = { set_key = { lhs = Heresy_Scalar value = 0.20 } }
							1 = { set_key = { lhs = Heresy_Scalar value = 0.25 } }
						}
					}
					if = {
						limit = {
							check_key = { lhs = Heresy_Scalar value = 0.05 }
						}
						MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = Heresy_Scalar typeIncr = which }
					}
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
					set_key = { lhs = Heresy_Scalar value = 0 }
				}
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.optb" #Let him speak
		trigger = { NOT = { tag = PAP } }
		ai_chance = {
			factor = 30
			modifier = {
				capital_distance = { who = PAP distance = 260 }
				factor = 1.4
			}
			modifier = {
				capital_distance = { who = PAP distance = 390 }
				factor = 1.4
			}
			modifier = {
				NOT = { capital_distance = { who = PAP distance = 130 } }
				factor = 0.7
			}
			modifier = {
				num_of_cities = 5
				factor = 0.7
			}
			modifier = {
				num_of_cities = 10
				factor = 0.7
			}
			modifier = {
				num_of_cities = 20
				factor = 0.7
			}
			modifier = {
				num_of_cities = 40
				factor = 0.7
			}
			modifier = {
				num_of_cities = 80
				factor = 0.7
			}
			modifier = {
				OR = { religion = lollard religion = hussite religion = waldensian }
				factor = 1.5
			}
			modifier = {
				any_known_country = {
					junior_union_with = ROOT
					religion = catholic
					NOT = { has_country_flag = humanism }
				}
				factor = 0.5
			}
		}
		log = "DG:[GetYear]:[This.GetName]:Lutheran:Choose:Accept:"
		hidden_effect = {
			set_country_flag = accept_02
			add_ruler_modifier = { name = "tolerant_society" }
			MN_conv_resist_c = { strength = -5 }
			every_owned_province = {
				if = {
					limit = { MN_CheckRelSlot = { Type = value Religion = 4 } }
					random_list = {
						10 = { MN_RlgChange = { from = 4 to = 2 } }
						10 = { MN_RlgChange = { from = 4 to = 1 } }
					}
				}
				else_if = {
					limit = { MN_CheckRelSlot = { Type = value Religion = 6 } }
					random_list = {
						10 = { MN_RlgChange = { from = 6 to = 2 } }
						10 = { MN_RlgChange = { from = 6 to = 1 } }
					}
				}
				else = {
					set_key = { lhs = Heresy_Scalar value = 0 }
					if = {
						limit = { culture_group = owner }
						random_list = {
							10 = { set_key = { lhs = Heresy_Scalar value = 0.20 } }
							30 = { set_key = { lhs = Heresy_Scalar value = 0.30 } }
							20 = { set_key = { lhs = Heresy_Scalar value = 0.40 } }
							10 = { set_key = { lhs = Heresy_Scalar value = 0.50 } }
							1 = { set_key = { lhs = Heresy_Scalar value = 0.60 } }
						}
					}
					else = {
						random_list = {
							40 = { set_key = { lhs = Heresy_Scalar value = 0.20 } }
							30 = { set_key = { lhs = Heresy_Scalar value = 0.30 } }
							20 = { set_key = { lhs = Heresy_Scalar value = 0.40 } }
							10 = { set_key = { lhs = Heresy_Scalar value = 0.50 } }
							1 = { set_key = { lhs = Heresy_Scalar value = 0.60 } }
						}
					}
					if = {
						limit = {
							check_key = { lhs = Heresy_Scalar value = 0.05 }
						}
						MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = Heresy_Scalar typeIncr = which }
					}
					set_key = { lhs = Heresy_Scalar value = 0 }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.optc" #Silence him
		ai_chance = {
			factor = 30
			modifier = {
				has_global_flag = reformation_luther_martyred
				factor = 1.4
			}
			modifier = {
				government = republic
				factor = 2
			}
			modifier = {
				capital_distance = { who = PAP distance = 260 }
				factor = 0.7
			}
			modifier = {
				capital_distance = { who = PAP distance = 390 }
				factor = 0.7
			}
			modifier = {
				NOT = { capital_distance = { who = PAP distance = 130 } }
				factor = 1.4
			}
			modifier = {
				exists = AVI
				AVI = { papal_trigger = yes }
				factor = 0.5
			}
			modifier = {
				is_papal_controller = yes
				factor = 2
			}
			modifier = {
				any_neighbor_country = { NOT = { religion_group = christian } }
				factor = 2
			}
			modifier = {
				any_neighbor_country = {
					NOT = {
						OR = {
							religion = catholic
							religion = reformed
							religion = protestant
						}
					}
				}
				factor = 2
			}
			modifier = {
				OR = { religion = lollard religion = hussite religion = waldensian }
				factor = 0.0
			}
			modifier = {
			    AND = {
				    is_elector = yes
					government = monarchy
				}
				factor = 0.5
			}
			modifier = {
			    AND = { is_part_of_hre = yes government = theocracy }
				factor = 1.5
			}
			modifier = {
			    AND = { is_elector = yes government = theocracy }
				factor = 2
			}
			modifier = {
				is_emperor = yes
				factor = 2
			}
			modifier = {
				factor = 2.00
				capital_scope = { superregion = france_superregion }
			}
			modifier = {
				factor = 5.00
				capital_scope = { superregion = italy_superregion }
			}
			modifier = {
				factor = 4.00
				capital_scope = { superregion = iberia_superregion }
			}
			modifier = {
				factor = 0.75
				capital_scope = { superregion = germany_superregion }
			}
			modifier = {
				factor = 0.05
				capital_scope = { region = bohemia_region }
			}
			modifier = {
				factor = 0.25
				capital_scope = { region = switzerland_region }
			}
			modifier = {
				factor = 5.00
				capital_scope = { region = austrian_circle_region }
			}
			modifier = {
				factor = 5.00
				capital_scope = { region = swabia_bavarian_region }
			}
			modifier = {
				factor = 0.05
				capital_scope = { superregion = british_isles_superregion NOT = { region = ireland_region } }
			}
			modifier = {
				factor = 2.75
				capital_scope = { region = ireland_region }
			}
			modifier = {
				factor = 2.00
				capital_scope = { superregion = balkan_superregion }
			}
			modifier = {
				factor = 0.50
				government = theocracy capital_scope = { superregion = commonwealth_superregion }
			}
			modifier = {
				factor = 3.00
				NOT = { government = theocracy  } capital_scope = { superregion = commonwealth_superregion }
			}
			modifier = {
				factor = 0.5
				capital_scope = { superregion = scandinavian_superregion }
			}
		}
		log = "DG:[GetYear]:[This.GetName]:Lutheran:Choose:Silence:"
		hidden_effect = {
			set_country_flag = silence_02
			add_ruler_modifier = { name = "religious_intolerance" }
			MN_conv_resist_c = { strength = 10 }
			every_owned_province = {
				if = {
					limit = { MN_CheckRelSlot = { Type = value Religion = 4 } }
					if = {
						limit = { culture_group = owner }
						MN_RlgChange = { from = 4 to = 1 }
					}
					else = {
						MN_RlgChange = { from = 4 to = 2 }
					}
				}
				else_if = {
					limit = { MN_CheckRelSlot = { Type = value Religion = 6 } }
					if = {
						limit = { culture_group = owner }
						MN_RlgChange = { from = 6 to = 1 }
					}
					else = {
						MN_RlgChange = { from = 6 to = 2 }
					}
				}
				else = {
					set_key = { lhs = Heresy_Scalar value = 0 }
					if = {
						limit = { culture_group = owner }
						random_list = {
							40 = { set_key = { lhs = Heresy_Scalar value = 0.05 } }
							30 = { set_key = { lhs = Heresy_Scalar value = 0.10 } }
							20 = { set_key = { lhs = Heresy_Scalar value = 0.15 } }
							10 = { set_key = { lhs = Heresy_Scalar value = 0.20 } }
							1 = { set_key = { lhs = Heresy_Scalar value = 0.25 } }
						}
					}
					else = {
						random_list = {
							40 = { set_key = { lhs = Heresy_Scalar value = 0.20 } }
							30 = { set_key = { lhs = Heresy_Scalar value = 0.30 } }
							20 = { set_key = { lhs = Heresy_Scalar value = 0.40 } }
							10 = { set_key = { lhs = Heresy_Scalar value = 0.50 } }
							1 = { set_key = { lhs = Heresy_Scalar value = 0.60 } }
						}
					}
					if = {
						limit = {
							check_key = { lhs = Heresy_Scalar value = 0.05 }
						}
						MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = Heresy_Scalar typeIncr = which }
					}
					set_key = { lhs = Heresy_Scalar value = 0 }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
		}
	}
	
	after = {
		hidden_effect = {
			country_event = { id = DG_Protestant.002 }
			clear_saved_name = heretic_preacher
#			random_neighbor_country = {
#				limit = { western_christian = yes NOT = { has_country_flag = DG_Lutheran_Spread } }
#				country_event = { id = DG_Protestant.003 days = 60 random = 15 }
#			}
#			random_neighbor_country = {
#				limit = { western_christian = yes NOT = { has_country_flag = DG_Lutheran_Spread } }
#				country_event = { id = DG_Protestant.003 days = 120 random = 15 }
#			}
#			random_neighbor_country = {
#				limit = { western_christian = yes NOT = { has_country_flag = DG_Lutheran_Spread } }
#				country_event = { id = DG_Protestant.003 days = 180 random = 15 }
#			}
		}
	}
}

#004 - Diet of Worms
province_event = {
	id = DG_Protestant.004
	title = "AI_Event"
	desc = "AI_Event"
	picture = all_church_state

	hidden = yes
	is_triggered_only = yes

	option = { 
		name = "AI_Event"
		save_global_event_target_as = worms_diet_site
		set_global_flag = DG_Diet_of_Worms
		PAP = {
			export_to_variable = { which = worms_diet_year value = trigger_value:is_year }
		}
		emperor = {
			country_event = { id = DG_Protestant.005 days = 1825 random = 120 }
		}
	}
}

country_event = {
	id = DG_Protestant.005
	title = "DG_Protestant.005.title"
	desc = "DG_Protestant.005.desc"
	picture = protestant_diet
	
	major = yes
	is_triggered_only = yes
	
	immediate = {
		hidden_effect = {
			every_country = {
				limit = { is_elector = yes }
				if = {
					limit = { religion = ROOT }
					ROOT = { change_variable = { which = heretic_electors value = -1 } }
				}
				if = {
					limit = { NOT = { religion = ROOT } }
					ROOT = { change_variable = { which = heretic_electors value = 1 } }
				}
			}
		}
	}
	
	option = {
		name = "DG_Protestant.005.opta" #Remain Catholic
		ai_chance = {
			factor = 50
			modifier = {
				factor = 10
				religion = catholic
			}
			modifier = {
				factor = 0.1
				NOT = { religion = catholic }
			}
			modifier = {
				capital_scope = { superregion = greater_austrian_circle_superregion }
				factor = 2.0
			}
			modifier = {
				capital_scope = { superregion = germany_superregion }
				factor = 0.1
			}
			modifier = {
				check_variable = { which = heretic_electors value = 1 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 2 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 3 }
				factor = 0.7
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = 0 } }
				factor = 1.4
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -1 } }
				factor = 1.4
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -2 } }
				factor = 1.4
			}
		}
		add_imperial_influence = -25
		set_hre_religion = catholic
		every_country = {
			limit = {
				NOT = { religion = ROOT }
			}
			if = {
				limit = {
					is_elector = yes
					NOT = { overlord = { religion = ROOT } }
				}
				add_opinion = { who = ROOT modifier = mistreated_coreligionists_fanatical }
			}
			else_if = {
				limit = {
					capital_scope = { is_part_of_hre = yes }
					OR = {
						is_elector = no
						overlord = { religion = ROOT }
					}
				}
				add_opinion = { who = ROOT modifier = mistreated_coreligionists_pious }
			}
		}
	}
	option = {
		name = "DG_Protestant.005.optb" #A Lutheran Empire
		ai_chance = {
			factor = 30
			modifier = {
				factor = 10
				religion = protestant
			}
			modifier = {
				factor = 0.1
				NOT = { religion = protestant }
			}
			modifier = {
				capital_scope = { superregion = greater_austrian_circle_superregion }
				factor = 3.0
			}
			modifier = {
				capital_scope = { superregion = germany_superregion }
				factor = 0.1
			}
			modifier = {
				check_variable = { which = heretic_electors value = 1 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 2 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 3 }
				factor = 0.7
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = 0 } }
				factor = 1.4
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -1 } }
				factor = 1.4
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -2 } }
				factor = 1.4
			}
		}
		change_religion = protestant
		force_converted = yes
		set_hre_religion = protestant
		set_hre_heretic_religion = catholic
		add_imperial_influence = -50
		every_country = {
			limit = {
				NOT = { religion = ROOT }
			}
			if = {
				limit = {
					is_elector = yes
					NOT = { overlord = { religion = ROOT } }
				}
				add_opinion = { who = ROOT modifier = mistreated_coreligionists_fanatical }
			}
			else_if = {
				limit = {
					capital_scope = { is_part_of_hre = yes }
					OR = {
						is_elector = no
						overlord = { religion = ROOT }
					}
				}
				add_opinion = { who = ROOT modifier = mistreated_coreligionists_pious }
			}
		}
		hidden_effect = {
			MN_conv_resist_c = { strength = -10 }
			reverse_add_opinion = { who = PAP modifier = opinion_pope_religious_tolerance }
			every_owned_province = {
				if = {
					limit = { culture_group = owner }
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.50 typeIncr = value }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
				else = {
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.10 typeIncr = value }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
		}
	}
	option = {
		name = "DG_Protestant.005.optc" #Religious tolerance
		ai_chance = {
			factor = 20
			modifier = {
				factor = 10
				NOT = {
					religion = catholic
					religion = protestant
				}
			}
			modifier = {
				capital_scope = { superregion = greater_austrian_circle_superregion }
				factor = 0.1
			}
			modifier = {
				capital_scope = { superregion = germany_superregion }
				factor = 0.1
			}
			modifier = {
				NOT = { manpower_percentage = 0.50 }
				factor = 1.4
			}
			modifier = {
				NOT = { manpower_percentage = 0.25 }
				factor = 1.4
			}
			modifier = {
				num_of_loans = 1
				factor = 1.4
			}
			modifier = {
				NOT = { years_of_income = 0.25 }
				factor = 1.4
			}
			modifier = {
				at_war_with_religious_enemy = yes
				factor = 1.4
			}
			modifier = {
				any_neighbor_country = { NOT = { religion_group = ROOT } }
				factor = 1.4
			}
			modifier = {
				check_variable = { which = heretic_electors value = 3 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 2 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 0 }
				NOT = { check_variable = { which = heretic_electors value = 1 } }
				factor = 1.4
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -1 } }
				factor = 0.7
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -2 } }
				factor = 0.7
			}
		}
		set_hre_religion_treaty = yes
	}
	
	after = {
		hidden_effect = {
			set_variable = { which = heretic_electors value = 0 }
			3654 = {
				province_event = { id = DG_Protestant.006 days = 1825 random = 120 }
			}
		}
	}
}

#006 - First Diet of Speyer
province_event = {
	id = DG_Protestant.006
	title = "AI_Event"
	desc = "AI_Event"
	picture = all_church_state

	fire_only_once = yes
	hidden = yes
	is_triggered_only = yes

	option = { 
		name = "AI_Event"
		save_global_event_target_as = speyer_diet_site
		set_global_flag = DG_First_Diet_of_Speyer
		PAP = {
			export_to_variable = { which = first_speyer_year value = trigger_value:is_year }
		}
		set_global_flag = DG_You_Can_1st_Speyer_Now
	}
}

country_event = {		#Diet of Speyer
	id = DG_Protestant.007
	title = "DG_Protestant.007.title"
	desc = {
		trigger = { hre_religion_treaty = no }
		desc = "DG_Protestant.007.des1"
	}
	desc = {
		trigger = { hre_religion_treaty = yes }
		desc = "DG_Protestant.007.des2"
	}
	picture = protestant_diet
	
	fire_only_once = yes
	major = yes
	is_triggered_only = yes

	trigger = {			#Triggered on_four_year_pulse to prevent old Emperor getting the event in case Emperorship passes to another nation
		has_global_flag = DG_You_Can_1st_Speyer_Now
		is_emperor = yes
	}

	immediate = {
		clr_global_flag = DG_You_Can_1st_Speyer_Now
	}
	
	option = {
		name = "DG_Protestant.007.opta"
		trigger = { hre_religion_treaty = no }
		set_hre_religion_treaty = yes
	}
	
	option = {
		name = "DG_Protestant.007.optb"
		trigger = { hre_religion_treaty = yes }
	}
	
	after = {
		hidden_effect = {
			3654 = {
				province_event = { id = DG_Protestant.008 days = 925 random = 120 }
			}
		}
	}
}

#008 - Second Diet of Speyer
province_event = {
	id = DG_Protestant.008
	title = "AI_Event"
	desc = "AI_Event"
	picture = all_church_state

	fire_only_once = yes
	hidden = yes
	is_triggered_only = yes

	option = { 
		name = "AI_Event"
		save_global_event_target_as = speyer_diet_site
		set_global_flag = DG_Second_Diet_of_Speyer
		PAP = {
			export_to_variable = { which = second_speyer_year value = trigger_value:is_year }
		}
		set_global_flag = DG_You_Can_2nd_Speyer_Now
	}
}

country_event = {
	id = DG_Protestant.009
	title = "DG_Protestant.009.title"
	desc = "DG_Protestant.009.desc"
	picture = protestant_diet
	
	major = yes
	is_triggered_only = yes
	fire_only_once = yes
	trigger = {		#Triggered on_four_year_pulse to prevent old Emperor getting the event in case Emperorship passes to another nation
		has_global_flag = DG_You_Can_2nd_Speyer_Now
		is_emperor = yes
	}
	
	immediate = {
		hidden_effect = {
			clr_global_flag = DG_You_Can_2nd_Speyer_Now
			every_country = {
				limit = { is_elector = yes }
				if = {
					limit = { religion = ROOT }
					ROOT = { change_variable = { which = heretic_electors value = -1 } }
				}
				if = {
					limit = { NOT = { religion = ROOT } }
					ROOT = { change_variable = { which = heretic_electors value = 1 } }
				}
			}
		}
	}
	
	option = {
		name = "DG_Protestant.009.opta" #Remain Catholic
		trigger = { religion = catholic }
		ai_chance = {
			factor = 70
			modifier = {
				factor = 10
				religion = catholic
			}
			modifier = {
				factor = 0.1
				NOT = { religion = catholic }
			}
			modifier = {
				capital_scope = { superregion = greater_austrian_circle_superregion }
				factor = 2.0
			}
			modifier = {
				capital_scope = { superregion = germany_superregion }
				factor = 0.1
			}
			modifier = {
				check_variable = { which = heretic_electors value = 1 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 2 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 3 }
				factor = 0.7
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = 0 } }
				factor = 1.4
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -1 } }
				factor = 1.4
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -2 } }
				factor = 1.4
			}
		}
		add_imperial_influence = -25
		set_hre_religion_treaty = no
		set_hre_religion = catholic
		set_hre_heretic_religion = protestant
		every_country = {
			limit = {
				NOT = { religion = ROOT }
			}
			if = {
				limit = {
					is_elector = yes
					NOT = { overlord = { religion = ROOT } }
				}
				add_opinion = { who = ROOT modifier = mistreated_coreligionists_fanatical }
			}
			else_if = {
				limit = {
					capital_scope = { is_part_of_hre = yes }
					OR = {
						is_elector = no
						overlord = { religion = ROOT }
					}
				}
				add_opinion = { who = ROOT modifier = mistreated_coreligionists_pious }
			}
		}
	}
	option = {
		name = "DG_Protestant.009.optb" #Remain Lutheran
		trigger = { religion = protestant }
		ai_chance = {
			factor = 70
			modifier = {
				factor = 10
				religion = protestant
			}
			modifier = {
				factor = 0.1
				NOT = { religion = protestant }
			}
			modifier = {
				capital_scope = { superregion = iberia_superregion }
				factor = 2.0
			}
			modifier = {
				capital_scope = { superregion = italy_superregion }
				factor = 0.1
			}
			modifier = {
				check_variable = { which = heretic_electors value = 1 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 2 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 3 }
				factor = 0.7
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = 0 } }
				factor = 1.4
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -1 } }
				factor = 1.4
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -2 } }
				factor = 1.4
			}
		}
		add_imperial_influence = -25
		set_hre_religion_treaty = no
		set_hre_religion = protestant
		set_hre_heretic_religion = catholic
		every_country = {
			limit = {
				NOT = { religion = ROOT }
			}
			if = {
				limit = {
					is_elector = yes
					NOT = { overlord = { religion = ROOT } }
				}
				add_opinion = { who = ROOT modifier = mistreated_coreligionists_fanatical }
			}
			else_if = {
				limit = {
					capital_scope = { is_part_of_hre = yes }
					OR = {
						is_elector = no
						overlord = { religion = ROOT }
					}
				}
				add_opinion = { who = ROOT modifier = mistreated_coreligionists_pious }
			}
		}
	}
	option = {
		name = "DG_Protestant.009.optc" #Remain Calvinist
		trigger = { religion = reformed }
		ai_chance = {
			factor = 70
			modifier = {
				factor = 10
				religion = reformed
			}
			modifier = {
				factor = 0.1
				NOT = { religion = reformed }
			}
			# modifier = {
			# 	capital_scope = { superregion = lower }
			# 	factor = 2.0
			# }
			modifier = {
				capital_scope = { superregion = germany_superregion }
				factor = 0.1
			}
			modifier = {
				check_variable = { which = heretic_electors value = 1 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 2 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 3 }
				factor = 0.7
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = 0 } }
				factor = 1.4
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -1 } }
				factor = 1.4
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -2 } }
				factor = 1.4
			}
		}
		add_imperial_influence = -25
		set_hre_religion_treaty = no
		set_hre_religion = reformed
		set_hre_heretic_religion = catholic
		every_country = {
			limit = {
				NOT = { religion = ROOT }
			}
			if = {
				limit = {
					is_elector = yes
					NOT = { overlord = { religion = ROOT } }
				}
				add_opinion = { who = ROOT modifier = mistreated_coreligionists_fanatical }
			}
			else_if = {
				limit = {
					capital_scope = { is_part_of_hre = yes }
					OR = {
						is_elector = no
						overlord = { religion = ROOT }
					}
				}
				add_opinion = { who = ROOT modifier = mistreated_coreligionists_pious }
			}
		}
	}
	option = {
		name = "DG_Protestant.009.optd" #A Lutheran Empire
		trigger = { religion = catholic }
		ai_chance = {
			factor = 0 	#Just don't for now
			modifier = {
				capital_scope = { superregion = greater_austrian_circle_superregion }
				factor = 0.1
			}
			modifier = {
				capital_scope = { superregion = germany_superregion }
				factor = 5.0
			}
			modifier = {
				check_variable = { which = heretic_electors value = 1 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 2 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 3 }
				factor = 0.7
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = 0 } }
				factor = 1.4
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -1 } }
				factor = 1.4
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -2 } }
				factor = 1.4
			}
		}
		add_imperial_influence = -50
		change_religion = protestant
		force_converted = yes
		set_hre_religion = protestant
		set_hre_heretic_religion = catholic
		set_hre_religion_treaty = no
		every_country = {
			limit = {
				NOT = { religion = ROOT }
			}
			if = {
				limit = {
					is_elector = yes
					NOT = { overlord = { religion = ROOT } }
				}
				add_opinion = { who = ROOT modifier = mistreated_coreligionists_fanatical }
			}
			else_if = {
				limit = {
					capital_scope = { is_part_of_hre = yes }
					OR = {
						is_elector = no
						overlord = { religion = ROOT }
					}
				}
				add_opinion = { who = ROOT modifier = mistreated_coreligionists_pious }
			}
		}
		hidden_effect = {
			MN_conv_resist_c = { strength = -10 }
			reverse_add_opinion = { who = PAP modifier = opinion_pope_religious_tolerance }
			every_owned_province = {
				limit = { culture_group = owner }
				MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.50 typeIncr = value }
				MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
			}
			every_owned_province = {
				limit = { NOT = { culture_group = owner } }
				MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.10 typeIncr = value }
				MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
			}
		}
	}
	option = {
		name = "DG_Protestant.009.opte" #A Catholic Empire
		trigger = { NOT = { religion = catholic } }
		ai_chance = {
			factor = 0 	#Just don't for now
			modifier = {
				capital_scope = { superregion = iberia_superregion }
				factor = 0.1
			}
			modifier = {
				capital_scope = { superregion = italy_superregion }
				factor = 5.0
			}
			modifier = {
				check_variable = { which = heretic_electors value = 1 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 2 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 3 }
				factor = 0.7
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = 0 } }
				factor = 1.4
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -1 } }
				factor = 1.4
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -2 } }
				factor = 1.4
			}
		}
		add_imperial_influence = -50
		change_religion = catholic
		force_converted = yes
		set_hre_religion = catholic
		set_hre_heretic_religion = protestant
		set_hre_religion_treaty = no
		every_country = {
			limit = {
				NOT = { religion = ROOT }
			}
			if = {
				limit = {
					is_elector = yes
					NOT = { overlord = { religion = ROOT } }
				}
				add_opinion = { who = ROOT modifier = mistreated_coreligionists_fanatical }
			}
			else_if = {
				limit = {
					capital_scope = { is_part_of_hre = yes }
					OR = {
						is_elector = no
						overlord = { religion = ROOT }
					}
				}
				add_opinion = { who = ROOT modifier = mistreated_coreligionists_pious }
			}
		}
		hidden_effect = {
			MN_conv_resist_c = { strength = -10 }
			reverse_add_opinion = { who = PAP modifier = opinion_pope_religious_tolerance }
			every_owned_province = {
				limit = { culture_group = owner }
				MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.50 typeIncr = value }
				MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
			}
			every_owned_province = {
				limit = { NOT = { culture_group = owner } }
				MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.10 typeIncr = value }
				MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
			}
		}
	}
	option = {
		name = "DG_Protestant.009.optf" #Confirm Religious tolerance
		ai_chance = {
			factor = 0
			modifier = {
				NOT = { manpower_percentage = 0.50 }
				factor = 1.4
			}
			modifier = {
				NOT = { manpower_percentage = 0.25 }
				factor = 1.4
			}
			modifier = {
				num_of_loans = 1
				factor = 1.4
			}
			modifier = {
				NOT = { years_of_income = 0.25 }
				factor = 1.4
			}
			modifier = {
				at_war_with_religious_enemy = yes
				factor = 1.4
			}
			modifier = {
				any_neighbor_country = { NOT = { religion_group = ROOT } }
				factor = 1.4
			}
			modifier = {
				check_variable = { which = heretic_electors value = 3 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 2 }
				factor = 0.7
			}
			modifier = {
				check_variable = { which = heretic_electors value = 0 }
				NOT = { check_variable = { which = heretic_electors value = 1 } }
				factor = 1.4
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -1 } }
				factor = 0.7
			}
			modifier = {
				NOT = { check_variable = { which = heretic_electors value = -2 } }
				factor = 0.7
			}
		}
	}
	
	after = {
		hidden_effect = {
			set_variable = { which = heretic_electors value = 0 }
			set_global_flag = DG_Test
			if = {
			    limit = {
				    any_country = {
					    is_elector = yes
						government = monarchy
					    capital_scope = { is_part_of_hre = yes }
					    is_free_or_tributary_trigger = yes
			    		OR = {
				    		AND = { religion = catholic emperor = { NOT = { religion = catholic } } }
				    		AND = { religion = protestant emperor = { NOT = { religion = protestant } } }
				    		AND = { religion = reformed emperor = { NOT = { religion = reformed } } }
				    		AND = { religion = hussite emperor = { NOT = { religion = reformed } } }
					     }
			    		hre_religion_treaty = no
			    		is_emperor = no
			    		NOT = { is_in_league_war = yes }
			     	}
				}
			    random_country = {
				    limit = {
					    is_elector = yes
						government = monarchy
			     		capital_scope = { is_part_of_hre = yes }
		     			is_free_or_tributary_trigger = yes
		    			OR = {
		     				AND = { religion = catholic emperor = { NOT = { religion = catholic } } }
		    				AND = { religion = protestant emperor = { NOT = { religion = protestant } } }
		     				AND = { religion = reformed emperor = { NOT = { religion = reformed } } }
		    				AND = { religion = hussite emperor = { NOT = { religion = reformed } } }
		 			    }
			     		hre_religion_treaty = no
				    	is_emperor = no
				    	NOT = { is_in_league_war = yes }
				    }
				    country_event = { id = DG_Protestant.010 days = 10 random = 2 }
			    }
			}
			else_if = {
			    limit = {
				    any_country = {
					    num_of_cities = 5
						government = monarchy
					    capital_scope = { is_part_of_hre = yes }
					    is_free_or_tributary_trigger = yes
			    		OR = {
				    		AND = { religion = catholic emperor = { NOT = { religion = catholic } } }
				    		AND = { religion = protestant emperor = { NOT = { religion = protestant } } }
				    		AND = { religion = reformed emperor = { NOT = { religion = reformed } } }
				    		AND = { religion = hussite emperor = { NOT = { religion = reformed } } }
					     }
			    		hre_religion_treaty = no
			    		is_emperor = no
			    		NOT = { is_in_league_war = yes }
			     	}
				}
			    random_country = {
				    limit = {
					    num_of_cities = 5
						government = monarchy
			     		capital_scope = { is_part_of_hre = yes }
		     			is_free_or_tributary_trigger = yes
		    			OR = {
		     				AND = { religion = catholic emperor = { NOT = { religion = catholic } } }
		    				AND = { religion = protestant emperor = { NOT = { religion = protestant } } }
		     				AND = { religion = reformed emperor = { NOT = { religion = reformed } } }
		    				AND = { religion = hussite emperor = { NOT = { religion = reformed } } }
		 			    }
			     		hre_religion_treaty = no
				    	is_emperor = no
				    	NOT = { is_in_league_war = yes }
				    }
				    country_event = { id = DG_Protestant.010 days = 10 random = 2 }
			    }
			}
			else = {
			    random_country = {
				    limit = {
						government = monarchy
			     		capital_scope = { is_part_of_hre = yes }
		     			is_free_or_tributary_trigger = yes
		    			OR = {
		     				AND = { religion = catholic emperor = { NOT = { religion = catholic } } }
		    				AND = { religion = protestant emperor = { NOT = { religion = protestant } } }
		     				AND = { religion = reformed emperor = { NOT = { religion = reformed } } }
		    				AND = { religion = hussite emperor = { NOT = { religion = reformed } } }
		 			    }
			     		hre_religion_treaty = no
				    	is_emperor = no
				    	NOT = { is_in_league_war = yes }
				    }
				    country_event = { id = DG_Protestant.010 days = 10 random = 2 }
			    }
			}
		}
	}
}

#010 - Protestation at Root.Capital.Getname
country_event = {
	id = DG_Protestant.010
	title = "DG_Protestant.010.title"
	desc = "DG_Protestant.010.desc"
	picture = protestant_league_peace
	
	major = yes
	is_triggered_only = yes

	trigger = {
	    government = monarchy
		capital_scope = { is_part_of_hre = yes }
		is_free_or_tributary_trigger = yes
		#hre_heretic_religion = ROOT
		hre_religion_treaty = no
		is_emperor = no
		NOT = { is_in_league_war = yes }
		NOT = { has_global_flag = DG_Peace_of_Westphalia }
	}
	
	option = {
		name = "DG_Protestant.010.opta" #Join the League
		ai_chance = {
			factor = 90
			modifier = {
				overlord = { is_emperor = yes }
				factor = 0
			}
			modifier = {
				overlord = { NOT = { religion = ROOT } }
				factor = 0
			}
			modifier = {
				emperor = { is_rival = ROOT }
				factor = 4
			}
			modifier = {
				emperor = { is_enemy = ROOT }
				factor = 4
			}
			modifier = {
				emperor = { truce_with = ROOT }
				factor = 4
			}
			modifier = {
				emperor = { war_with = ROOT }
				factor = 4
			}
			modifier = {
				emperor = { marriage_with = ROOT }
				factor = 0.25
			}
			modifier = {
				emperor = { alliance_with = ROOT }
				factor = 0.25
			}
			modifier = {
				emperor = { dynasty = ROOT }
				factor = 0.25
			}
		}
		emperor = { 
			add_opinion = { 
				who = ROOT 
				modifier = holy_league_reaction 
			}
			set_global_flag = DG_Religious_League		#Used in trigger for Reformed faith
			set_global_flag = DG_Leagues_Active			#Used in Trigger for Scripted War Declaration
		}
		if = {
			limit = { religion = protestant }
			emperor = { 
				enable_hre_leagues = yes
				set_hre_heretic_religion = protestant
			}
			join_league = protestant
			every_known_country = {
				limit = { in_league = protestant religion = protestant }
				if = {
					limit = { ROOT = { piety = 0.60 } }
					reverse_add_opinion = { who = ROOT modifier = holy_league_fanatical }
				}
				if = {
					limit = { ROOT = { piety = 0.20 NOT = { piety = 0.60 } } }
					reverse_add_opinion = { who = ROOT modifier = holy_league_pious }
				}
				if = {
					limit = { ROOT = { piety = -0.20 NOT = { piety = 0.20 } } }
					reverse_add_opinion = { who = ROOT modifier = holy_league_observant }
				}
				if = {
					limit = { ROOT = { piety = -0.60 NOT = { piety = -0.20 } } }
					reverse_add_opinion = { who = ROOT modifier = holy_league_decadent }
				}
			}
		}
		else_if = {
			limit = { religion = hussite }
			emperor = {
				enable_hre_leagues = yes
				set_hre_heretic_religion = hussite
			}
			join_league = hussite
			every_known_country = {
				limit = { in_league = hussite religion = hussite }
				if = {
					limit = { ROOT = { piety = 0.60 } }
					reverse_add_opinion = { who = ROOT modifier = holy_league_fanatical }
				}
				if = {
					limit = { ROOT = { piety = 0.20 NOT = { piety = 0.60 } } }
					reverse_add_opinion = { who = ROOT modifier = holy_league_pious }
				}
				if = {
					limit = { ROOT = { piety = -0.20 NOT = { piety = 0.20 } } }
					reverse_add_opinion = { who = ROOT modifier = holy_league_observant }
				}
				if = {
					limit = { ROOT = { piety = -0.60 NOT = { piety = -0.20 } } }
					reverse_add_opinion = { who = ROOT modifier = holy_league_decadent }
				}
			}
		}
		else_if = {
			limit = { religion = reformed }
			emperor = {
				enable_hre_leagues = yes
				set_hre_heretic_religion = reformed
			}
			join_league = reformed
			every_known_country = {
				limit = { in_league = reformed religion = reformed }
				if = {
					limit = { ROOT = { piety = 0.60 } }
					reverse_add_opinion = { who = ROOT modifier = holy_league_fanatical }
				}
				if = {
					limit = { ROOT = { piety = 0.20 NOT = { piety = 0.60 } } }
					reverse_add_opinion = { who = ROOT modifier = holy_league_pious }
				}
				if = {
					limit = { ROOT = { piety = -0.20 NOT = { piety = 0.20 } } }
					reverse_add_opinion = { who = ROOT modifier = holy_league_observant }
				}
				if = {
					limit = { ROOT = { piety = -0.60 NOT = { piety = -0.20 } } }
					reverse_add_opinion = { who = ROOT modifier = holy_league_decadent }
				}
			}
		}
		else_if = {
			limit = { religion = catholic }
			emperor = {
				enable_hre_leagues = yes
				set_hre_heretic_religion = catholic
			}
			join_league = catholic
			every_known_country = {
				limit = { in_league = catholic religion = catholic }
				if = {
					limit = { ROOT = { piety = 0.60 } }
					reverse_add_opinion = { who = ROOT modifier = holy_league_fanatical }
				}
				if = {
					limit = { ROOT = { piety = 0.20 NOT = { piety = 0.60 } } }
					reverse_add_opinion = { who = ROOT modifier = holy_league_pious }
				}
				if = {
					limit = { ROOT = { piety = -0.20 NOT = { piety = 0.20 } } }
					reverse_add_opinion = { who = ROOT modifier = holy_league_observant }
				}
				if = {
					limit = { ROOT = { piety = -0.60 NOT = { piety = -0.20 } } }
					reverse_add_opinion = { who = ROOT modifier = holy_league_decadent }
				}
			}
		}
		add_dip_power = -25
		add_prestige = 10
		if = {
			limit = { is_elector = yes }
			add_imperial_influence = -10
		}
	}
	#option = {
	#	name = "DG_Protestant.010.optb" #Don't join
	#	ai_chance = { factor = 10 }
	#	add_prestige = -5
	#	hidden_effect = {
	#		random_country = {
	#			limit = {
	#				capital_scope = { is_part_of_hre = yes }
	#				is_free_or_tributary_trigger = yes
	#				#hre_heretic_religion = ROOT
	#				OR = {
	#					AND = { religion = catholic emperor = { NOT = { religion = catholic } } }
	#					AND = { religion = protestant emperor = { NOT = { religion = protestant } } }
	#					AND = { religion = reformed emperor = { NOT = { religion = reformed } } }
	#					AND = { religion = hussite emperor = { NOT = { religion = hussite } } }
	#				}
	#				hre_religion_treaty = no
	#				is_emperor = no
	#			}
	#			country_event = { id = DG_Protestant.010 days = 30 random = 15 }
	#		}
	#	}
	#}
	
	after = {
		if = {
			limit = { hre_religion_locked = yes }
			every_known_country = {
				limit = { government = theocracy capital_scope = { is_part_of_hre = yes is_core = owner } NOT = { hre_religion = ROOT } }
				country_event = { id = DG_Protestant.011 days = 90 random = 15 }
			}
			every_known_country = {
				limit = { government = republic capital_scope = { is_part_of_hre = yes is_core = owner } NOT = { hre_religion = ROOT } }
				country_event = { id = DG_Protestant.012 days = 90 random = 15 }
			}
			every_known_country = {
				limit = { government = monarchy capital_scope = { is_part_of_hre = yes is_core = owner } NOT = { hre_religion = ROOT } }
				country_event = { id = DG_Protestant.013 days = 90 random = 15 }
			}
		}
		if = {
			limit = {
				hre_leagues_enabled = yes
				any_province = {
				    is_part_of_hre = yes
				    check_key = { lhs = Class_Urban value = 10 }
					owner = {
					    government = monarchy
						religion = protestant
					}
				}
			}
			random_province = {
				limit = {
				    is_part_of_hre = yes
				    check_key = { lhs = Class_Urban value = 10 }
					owner = {
					    government = monarchy
						religion = protestant
					}
				}
				province_event = { id = DG_Protestant.021 days = 365 random = 30 }
			}
		}
		else_if = {
			limit = {
				hre_leagues_enabled = yes
			}
			random_province = {
				limit = {
				    is_part_of_hre = yes
				}
				province_event = { id = DG_Protestant.021 days = 365 random = 30 }
			}
		}
	}
}

#011 - Reservatum Ecclesiasticum - archbishopric that converts must obey the law or lose capital core
country_event = {
	id = DG_Protestant.011
	title = "DG_Protestant.011.title"
	desc = "DG_Protestant.011.desc"
	picture = catholic_ducal_decree_saffron
	
	is_triggered_only = yes
	
	option = {
		name = "DG_Protestant.011.opta" #Submit to the Emperor
		ai_chance = {
			factor = 75
			modifier = {
				ADM = 5
				factor = 0.7
			}
			modifier = {
				DIP = 5
				factor = 0.7
			}
			modifier = {
				MIL = 5
				factor = 0.7
			}
			modifier = {
				NOT = { ADM = 3 }
				factor = 1.4
			}
			modifier = {
				NOT = { DIP = 3 }
				factor = 1.4
			}
			modifier = {
				NOT = { MIL = 3 }
				factor = 1.4
			}
			modifier = {
				piety = 0.60
				factor = 0.7
			}
			modifier = {
				piety = 0.20
				factor = 0.7
			}
			modifier = {
				NOT = { piety = -0.20 }
				factor = 1.4
			}
			modifier = {
				NOT = { piety = -0.60 }
				factor = 1.4
			}
			modifier = {
				emperor = { army_size = ROOT }
				factor = 1.4
			}
			modifier = {
				emperor = { num_of_cities = ROOT }
				factor = 1.4
			}
			modifier = {
				emperor = { alliance_with = ROOT }
				factor = 1.4
			}
			modifier = {
				emperor = { overlord_of = ROOT }
				factor = 2
			}
			modifier = {
				emperor = { marriage_with = ROOT }
				factor = 1.4
			}
			modifier = {
				emperor = { is_rival = ROOT }
				factor = 0.7
			}
			modifier = {
				emperor = { is_enemy = ROOT }
				factor = 0.7
			}
			modifier = {
				is_elector = yes
				factor = 0.7
			}
			modifier = {
				hre_heretic_religion = ROOT
				western_christian = yes
				factor = 0
			}
		}
		kill_ruler = yes
		if = {
			limit = { piety = 0.60 }
			add_prestige = -40
			add_devotion = -80
		}
		else_if = {
			limit = { piety = 0.20 }
			add_prestige = -30
			add_devotion = -60
		}
		else_if = {
			limit = { piety = -0.20 }
			add_prestige = -20
			add_devotion = -40
		}
		else = {
			add_prestige = -10
			add_devotion = -20
		}
		if = {
			limit = { is_force_converted = no }
			trigger_switch = {
				on_trigger = hre_religion
				catholic = { change_religion = catholic }
				protestant = { change_religion = protestant }
				reformed = { change_religion = reformed }
				lollard = { change_religion = lollard }
				hussite = { change_religion = hussite }
			}
			force_converted = yes
		}
	}
	option = {
		name = "DG_Protestant.011.optb" #Nope
		ai_chance = { factor = 25 }
		capital_scope = { remove_core = ROOT }
		set_country_flag = reservatum_rejected
	}
}

#012 - Reservatum Urbanum - imperial cities that convert must obey the law or lose capital core
country_event = {
	id = DG_Protestant.012
	title = "DG_Protestant.012.title"
	desc = "DG_Protestant.012.desc"
	picture = catholic_ducal_decree_saffron
	
	is_triggered_only = yes
	
	option = {
		name = "DG_Protestant.012.opta" #Submit to the Emperor
		ai_chance = {
			factor = 50
			modifier = {
				ADM = 5
				factor = 0.7
			}
			modifier = {
				DIP = 5
				factor = 0.7
			}
			modifier = {
				MIL = 5
				factor = 0.7
			}
			modifier = {
				NOT = { ADM = 3 }
				factor = 1.4
			}
			modifier = {
				NOT = { DIP = 3 }
				factor = 1.4
			}
			modifier = {
				NOT = { MIL = 3 }
				factor = 1.4
			}
			modifier = {
				piety = 0.60
				factor = 0.7
			}
			modifier = {
				piety = 0.20
				factor = 0.7
			}
			modifier = {
				NOT = { piety = -0.20 }
				factor = 1.4
			}
			modifier = {
				NOT = { piety = -0.60 }
				factor = 1.4
			}
			modifier = {
				emperor = { army_size = ROOT }
				factor = 1.4
			}
			modifier = {
				emperor = { num_of_cities = ROOT }
				factor = 1.4
			}
			modifier = {
				emperor = { alliance_with = ROOT }
				factor = 1.4
			}
			modifier = {
				emperor = { overlord_of = ROOT }
				factor = 2
			}
			modifier = {
				emperor = { marriage_with = ROOT }
				factor = 1.4
			}
			modifier = {
				emperor = { is_rival = ROOT }
				factor = 0.7
			}
			modifier = {
				emperor = { is_enemy = ROOT }
				factor = 0.7
			}
			modifier = {
				is_elector = yes
				factor = 0.7
			}
			modifier = {
				hre_heretic_religion = ROOT
				western_christian = yes
				factor = 0
			}
		}
		kill_ruler = yes
		if = {
			limit = { piety = 0.60 }
			add_prestige = -40
			add_republican_tradition = -20
		}
		else_if = {
			limit = { piety = 0.20 }
			add_prestige = -30
			add_republican_tradition = -15
		}
		else_if = {
			limit = { piety = -0.20 }
			add_prestige = -20
			add_republican_tradition = -10
		}
		else = {
			add_prestige = -10
			add_republican_tradition = -5
		}
		if = {
			limit = { is_force_converted = no }
			trigger_switch = {
				on_trigger = hre_religion
				catholic = { change_religion = catholic }
				protestant = { change_religion = protestant }
				reformed = { change_religion = reformed }
				lollard = { change_religion = lollard }
				hussite = { change_religion = hussite }
			}
			force_converted = yes
		}
	}
	option = {
		name = "DG_Protestant.012.optb" #Nope
		ai_chance = { factor = 50 }
		capital_scope = { remove_core = ROOT }
		set_country_flag = reservatum_rejected
	}
}

#013 - Reservatum Regium - realms that convert must obey the law or lose capital core
country_event = {
	id = DG_Protestant.013
	title = "DG_Protestant.013.title"
	desc = "DG_Protestant.013.desc"
	picture = catholic_ducal_decree_saffron
	
	is_triggered_only = yes
	
	option = {
		name = "DG_Protestant.013.opta" #Submit to the Emperor
		ai_chance = {
			factor = 50
			modifier = {
				ADM = 5
				factor = 0.7
			}
			modifier = {
				DIP = 5
				factor = 0.7
			}
			modifier = {
				MIL = 5
				factor = 0.7
			}
			modifier = {
				NOT = { ADM = 3 }
				factor = 1.4
			}
			modifier = {
				NOT = { DIP = 3 }
				factor = 1.4
			}
			modifier = {
				NOT = { MIL = 3 }
				factor = 1.4
			}
			modifier = {
				piety = 0.60
				factor = 0.7
			}
			modifier = {
				piety = 0.20
				factor = 0.7
			}
			modifier = {
				NOT = { piety = -0.20 }
				factor = 1.4
			}
			modifier = {
				NOT = { piety = -0.60 }
				factor = 1.4
			}
			modifier = {
				emperor = { army_size = ROOT }
				factor = 1.4
			}
			modifier = {
				emperor = { num_of_cities = ROOT }
				factor = 1.4
			}
			modifier = {
				emperor = { alliance_with = ROOT }
				factor = 1.4
			}
			modifier = {
				emperor = { overlord_of = ROOT }
				factor = 2
			}
			modifier = {
				emperor = { marriage_with = ROOT }
				factor = 1.4
			}
			modifier = {
				emperor = { is_rival = ROOT }
				factor = 0.7
			}
			modifier = {
				emperor = { is_enemy = ROOT }
				factor = 0.7
			}
			modifier = {
				is_elector = yes
				factor = 0.7
			}
			modifier = {
				hre_heretic_religion = ROOT
				OR = {
					in_league = protestant
					in_league = catholic
					in_league = reformed
					in_league = hussite
				}
				factor = 0
			}
		}
		kill_ruler = yes
		if = {
			limit = { piety = 0.60 }
			add_prestige = -40
			add_legitimacy = -40
		}
		else_if = {
			limit = { piety = 0.20 }
			add_prestige = -30
			add_legitimacy = -30
		}
		else_if = {
			limit = { piety = -0.20 }
			add_prestige = -20
			add_legitimacy = -20
		}
		else = {
			add_prestige = -10
			add_legitimacy = -10
		}
		if = {
			limit = { is_force_converted = no }
			trigger_switch = {
				on_trigger = hre_religion
				catholic = { change_religion = catholic }
				protestant = { change_religion = protestant }
				reformed = { change_religion = reformed }
				lollard = { change_religion = lollard }
				hussite = { change_religion = hussite }
			}
			force_converted = yes
		}
	}
	option = {
		name = "DG_Protestant.013.optb" #Nope
		ai_chance = { factor = 50 }
		capital_scope = { remove_core = ROOT }
		set_country_flag = reservatum_rejected
	}
}

#021 - Site of the Establishment of the League of Schmalkalden
province_event = {
	id = DG_Protestant.021
	title = "AI_Event"
	desc = "AI_Event"
	picture = all_church_state
	
	fire_only_once = yes
	hidden = yes
	is_triggered_only = yes
	
	# immediate = {
	# 	hidden_effect = {
	# 		if = {
	# 			limit = { hre_religion_treaty = yes }
	# 			enable_hre_leagues = yes
	# 			set_hre_religion_treaty = no
	# 			if = {
	# 				limit = { emperor = { religion = catholic } }
	# 				set_hre_religion = catholic
	# 				set_hre_heretic_religion = protestant
	# 			}
	# 			else_if = {
	# 				limit = { emperor = { religion = protestant } }
	# 				set_hre_religion = protestant
	# 				set_hre_heretic_religion = catholic
	# 			}
	# 			else_if = {
	# 				limit = { emperor = { religion = reformed } }
	# 				set_hre_religion = reformed
	# 				set_hre_heretic_religion = catholic
	# 			}
	# 			else_if = {
	# 				limit = { emperor = { religion = hussite } }
	# 				set_hre_religion = hussite
	# 				set_hre_heretic_religion = catholic
	# 			}
	# 		}
	# 	}
	# }
	
	option = {
		name = "AI_Event"
		save_global_event_target_as = league_establishment_site
		set_global_flag = DG_League_of_Schmalkalden
		PAP = {
			export_to_variable = { which = league_establishment_year value = trigger_value:is_year }
		}
		hidden_effect = {
			every_country = {
				limit = {
					capital_scope = { continent = europe }
					western_christian = yes
				}
				country_event = { id = DG_Protestant.022 days = 60 }
			}
		}
	}
}

#022 - The League of Schmalkalden
country_event = {
	id = DG_Protestant.022 #DG_Catholics.021
	title = "DG_Protestant.022.title"
	desc = "DG_Protestant.022.desc"
	picture = protestant_league
	
	is_triggered_only = yes
	
	trigger = {
	    emperor = { is_in_league_war = no }
	}
	
	immediate = {
		if = {
			limit = {
				capital_scope = { is_part_of_hre = yes }
				OR = {
					in_league = catholic
					in_league = protestant
					in_league = reformed
					in_league = hussite
					is_emperor = yes
				}
			}
			custom_tooltip = DG_Protestant.022.member
		}
		if = {
			limit = {
				capital_scope = { is_part_of_hre = yes }
				NOT = { in_league = catholic }
				NOT = { in_league = protestant }
				NOT = { in_league = reformed }
				NOT = { in_league = hussite }
				is_emperor = no
			}
			custom_tooltip = DG_Protestant.022.hre
		}
		if = {
			limit = { NOT = { capital_scope = { is_part_of_hre = yes } } }
			custom_tooltip = DG_Protestant.022.outsider
		}
	}
	
	option = {
		name = "DG_Protestant.022.opta" #Look on with interest
		ai_chance = {
			factor = 75
			modifier = {
				OR = {
					religion = catholic
					religion = reformed
					religion = protestant
					religion = hussite
				}
				piety = 0.60
				factor = 0.5
			}
			modifier = {
				OR = {
					religion = catholic
					religion = reformed
					religion = protestant
					religion = hussite
				}
				piety = 0.20
				factor = 0.5
			}
		}
		trigger = {
			NOT = { in_league = protestant }
			NOT = { in_league = reformed }
			NOT = { in_league = catholic }
			NOT = { in_league = hussite }
			NOT = { is_emperor = yes }
		}
	}
	option = {
		name = "DG_Protestant.022.optb" #Onwards to victory!
		ai_chance = { factor = 10 }
		trigger = {
			OR = {
				in_league = protestant
				in_league = reformed
				in_league = catholic
				in_league = hussite
				is_emperor = yes
			}
		}
		add_prestige = 10
	}
	option = {
		name = "DG_Protestant.022.optc" #Join the rebels	
		ai_chance = {
			factor = 10
			modifier = {
				emperor = { alliance_with = ROOT }
				factor = 0
			}
			modifier = {
				emperor = { marriage_with = ROOT }
				factor = 0.5
			}
			modifier = {
				emperor = { dynasty = ROOT }
				factor = 0.5
			}
			modifier = {
				emperor = { is_rival = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { is_enemy = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { religion = ROOT }
				factor = 0.5
			}
			modifier = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = ROOT
				}
				factor = 2
			}
		}
		trigger = {
			NOT = { in_league = protestant }
			NOT = { in_league = reformed }
			NOT = { in_league = catholic }
			NOT = { in_league = hussite }
			NOT = { is_emperor = yes }
			capital_scope = { is_part_of_hre = yes }
		}
		if = {
			limit = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = catholic
				}
			}
			join_league = catholic
		}
		else_if = {
			limit = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = protestant
				}
			}
			join_league = protestant
		}
		else_if = {
			limit = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = reformed
				}
			}
			join_league = reformed
		}
		else_if = {
			limit = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = hussite
				}
			}
			join_league = hussite
		}
		add_prestige = 5
	}
	option = {
		name = "DG_Protestant.022.optd" #Join the Emperor
		ai_chance = {
			factor = 5
			modifier = {
				emperor = { alliance_with = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { marriage_with = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { dynasty = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { is_rival = ROOT }
				factor = 0.5
			}
			modifier = {
				emperor = { is_enemy = ROOT }
				factor = 0.5
			}
			modifier = {
				emperor = { religion = ROOT }
				factor = 3
			}
			modifier = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = ROOT
				}
				factor = 0.5
			}
		}
		trigger = {
			NOT = { in_league = protestant }
			NOT = { in_league = reformed }
			NOT = { in_league = catholic }
			NOT = { in_league = hussite }
			NOT = { is_emperor = yes }
			capital_scope = { is_part_of_hre = yes }
		}
		if = {
			limit = { hre_religion = protestant }
			join_league = protestant
		}
		else_if = {
			limit = { hre_religion = reformed }
			join_league = reformed
		}
		else_if = {
			limit = { hre_religion = catholic }
			join_league = catholic
		}
		else_if = {
			limit = { hre_religion = hussite }
			join_league = hussite
		}
		else = {
			if = {
				limit = { emperor = { religion = protestant } }
				join_league = protestant
			}
			else_if = {
				limit = { emperor = { religion = reformed } }
				join_league = reformed
			}
			else_if = {
				limit = { emperor = { religion = catholic } }
				join_league = catholic
			}
			else_if = {
				limit = { emperor = { religion = hussite } }
				join_league = hussite
			}
		}
		add_prestige = 5
	}
}

#023 - The Protestant League (1608)
country_event = {
	
	id = DG_Protestant.023 #DG_Catholics.022
	title = "DG_Protestant.023.title"
	desc = "DG_Protestant.023.desc"
	picture = protestant_league
	
	trigger = {
		has_global_flag = DG_First_League_War
		hre_leagues_enabled = yes
		OR = {
			capital_scope = { is_part_of_hre = yes }
			AND = {
			    has_global_flag = DG_Second_League_War
				western_christian = yes
				num_of_cities = 30
			}
		}
		any_known_country = {
			religion = protestant
			hre_heretic_religion = PREV
		}
		NOT = { in_league = protestant }
		NOT = { in_league = catholic }
		NOT = { in_league = reformed }
		NOT = { in_league = hussite }
		NOT = { hre_religion_treaty = yes }
		is_colonial_nation = no
	}
	
	mean_time_to_happen = {
		
		years = 10
		
		modifier = {
			capital_scope = { is_part_of_hre = yes }
			factor = 0.7
		}
		modifier = {
			any_owned_province = { is_part_of_hre = yes }
			factor = 0.7
		}
		modifier = {
			is_great_power = yes
			factor = 0.7
		}
		modifier = {
			emperor = {
				OR = {
					is_rival = ROOT
					is_enemy = ROOT
					truce_with = ROOT
					war_with = ROOT
					NOT = { religion = ROOT }
				}
				war_score = 10
			}
			NOT = { has_country_flag = league_support }
			factor = 0.3
		}
		modifier = {
			emperor = {
				OR = {
					is_rival = ROOT
					is_enemy = ROOT
					truce_with = ROOT
					war_with = ROOT
					NOT = { religion = ROOT }
				}
				war_score = 50
			}
			NOT = { has_country_flag = league_support_again }
			factor = 0.3
		}
		modifier = {
			emperor = {
				OR = {
					alliance_with = ROOT
					marriage_with = ROOT
					overlord_of = ROOT
					is_subject_of = ROOT
					AND = {
						religion = ROOT
						ROOT = { government = theocracy }
					}
				}
				NOT = { war_score = -9 }
			}
			NOT = { has_country_flag = league_support }
			factor = 0.3
		}
		modifier = {
			emperor = {
				OR = {
					alliance_with = ROOT
					marriage_with = ROOT
					overlord_of = ROOT
					is_subject_of = ROOT
					AND = {
						religion = ROOT
						ROOT = { government = theocracy }
					}
				}
				NOT = { war_score = -49 }
			}
			NOT = { has_country_flag = league_support_again }
			factor = 0.3
		}
	}
	
	immediate = {
		if = {
			limit = { has_country_flag = league_support }
			set_country_flag = league_support_again
		}
		else = {
			set_country_flag = league_support
		}
		if = {
			limit = { capital_scope = { is_part_of_hre = yes } }
			custom_tooltip = DG_Protestant.023.hre
		}
		else = {
			custom_tooltip = DG_Protestant.023.outsider
		}
	}
	
	option = {
		name = "DG_Protestant.023.opta" #Look on with interest
		ai_chance = {
			factor = 55
			modifier = {
				OR = {
					religion = catholic
					religion = reformed
					religion = protestant
					religion = hussite
				}
				piety = 0.60
				factor = 0.5
			}
			modifier = {
				OR = {
					religion = catholic
					religion = reformed
					religion = protestant
					religion = hussite
				}
				piety = 0.20
				factor = 0.5
			}
			modifier = {
				NOT = { religion = catholic }
				NOT = { religion = reformed }
				NOT = { religion = protestant }
				NOT = { religion = hussite }
				factor = 2
			}
			modifier = {
				is_at_war = yes
				factor = 2
			}
			modifier = {
				war_exhaustion = 4
				factor = 1.4
			}
			modifier = {
				war_exhaustion = 8
				factor = 1.4
			}
			modifier = {
				NOT = { manpower_percentage = 0.50 }
				factor = 1.4
			}
			modifier = {
				NOT = { manpower_percentage = 0.25 }
				factor = 1.4
			}
			modifier = {
				NOT = { manpower_percentage = 0.10 }
				factor = 1.4
			}
			modifier = {
				num_of_loans = 2
				factor = 1.4
			}
			modifier = {
				num_of_loans = 4
				factor = 1.4
			}
			modifier = {
				num_of_loans = 6
				factor = 1.4
			}
			modifier = {
				is_bankrupt = yes
				factor = 2
			}
		}
		add_prestige = -5
	}
	option = {
		name = "DG_Protestant.023.optb" #Onwards to victory!
		ai_chance = { factor = 10 }
		trigger = {
			OR = {
				in_league = protestant
				in_league = reformed
				in_league = catholic
				in_league = hussite
				is_emperor = yes
			}
		}
		add_prestige = 10
	}
	option = {
		name = "DG_Protestant.023.optc" #Send support to the rebels	#always = no
		ai_chance = {
			factor = 20
			modifier = {
				emperor = { alliance_with = ROOT }
				factor = 0
			}
			modifier = {
				emperor = { marriage_with = ROOT }
				factor = 0.5
			}
			modifier = {
				emperor = { dynasty = ROOT }
				factor = 0.5
			}
			modifier = {
				emperor = { is_rival = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { is_enemy = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { religion = ROOT }
				factor = 0.5
			}
			modifier = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = ROOT
				}
				factor = 3
			}
			modifier = {
				emperor = { war_score = 10 }
				factor = 2
			}
			modifier = {
				emperor = { war_score = 50 }
				factor = 2
			}
		}
		trigger = { always = no }
		support_rebels_effect = yes
	}
	option = {	#always = no
		name = "DG_Protestant.023.optd" #Send support to the Emperor
		ai_chance = {
			factor = 10
			modifier = {
				emperor = { alliance_with = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { marriage_with = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { dynasty = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { is_rival = ROOT }
				factor = 0.5
			}
			modifier = {
				emperor = { is_enemy = ROOT }
				factor = 0.5
			}
			modifier = {
				emperor = { religion = ROOT }
				factor = 3
			}
			modifier = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = ROOT
				}
				factor = 0.5
			}
			modifier = {
				emperor = { NOT = { war_score = -9 } }
				factor = 2
			}
			modifier = {
				emperor = { NOT = { war_score = -49 } }
				factor = 2
			}
		}
		trigger = { always = no }
		support_emperor_effect = yes
	}
	option = {
		name = "DG_Protestant.023.opte" #Join the League against the Emperor
		trigger = {
			emperor = {
				OR = {
					NOT = { religion = ROOT }
					is_rival = ROOT
					is_enemy = ROOT
					war_with = ROOT
					truce_with = ROOT
				}
			}
			is_subject_other_than_tributary_trigger = no
			is_at_war = no
		}
		ai_chance = {
			factor = 10
			modifier = {
				is_part_of_hre = yes
				factor = 2
			}
			modifier = {
				emperor = { NOT = { army_size = ROOT } }
				factor = 2
			}
			modifier = {
				NOT = { manpower_percentage = 0.50 }
				factor = 0.5
			}
			modifier = {
				NOT = { manpower_percentage = 0.25 }
				factor = 0
			}
			modifier = {
				num_of_loans = 2
				factor = 0.5
			}
			modifier = {
				num_of_loans = 4
				factor = 0
			}
			modifier = {
				emperor = { war_score = 10 }
				factor = 2
			}
			modifier = {
				emperor = { war_score = 50 }
				factor = 2
			}
		}
		if = {
			limit = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = catholic
				}
			}
			join_league = catholic
		}
		else_if = {
			limit = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = protestant
				}
			}
			join_league = protestant
		}
		else_if = {
			limit = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = reformed
				}
			}
			join_league = reformed
		}
		else_if = {
			limit = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = hussite
				}
			}
			join_league = hussite
		}
		add_prestige = 5
	}
	option = {
		name = "DG_Protestant.023.optf" #Join the Emperor against the League
		trigger = {
			OR = {
				hre_religion = ROOT
				emperor = {
					OR = {
						alliance_with = ROOT
						marriage_with = ROOT
						dynasty = ROOT
					}
				}
			}
			is_subject_other_than_tributary_trigger = no
			is_at_war = no
		}
		ai_chance = {
			factor = 5
			modifier = {
				is_part_of_hre = yes
				factor = 2
			}
			modifier = {
				emperor = { NOT = { army_size = ROOT } }
				factor = 2
			}
			modifier = {
				NOT = { manpower_percentage = 0.50 }
				factor = 0.5
			}
			modifier = {
				NOT = { manpower_percentage = 0.25 }
				factor = 0
			}
			modifier = {
				num_of_loans = 2
				factor = 0.5
			}
			modifier = {
				num_of_loans = 4
				factor = 0
			}
			modifier = {
				emperor = { NOT = { war_score = -9 } }
				factor = 2
			}
			modifier = {
				emperor = { NOT = { war_score = -49 } }
				factor = 2
			}
		}
		if = {
			limit = { hre_religion = protestant }
			join_league = protestant
		}
		else_if = {
			limit = { hre_religion = reformed }
			join_league = reformed
		}
		else_if = {
			limit = { hre_religion = catholic }
			join_league = catholic
		}
		else_if = {
			limit = { hre_religion = hussite }
			join_league = hussite
		}
		else = {
			if = {
				limit = { emperor = { religion = protestant } }
				join_league = protestant
			}
			else_if = {
				limit = { emperor = { religion = reformed } }
				join_league = reformed
			}
			else_if = {
				limit = { emperor = { religion = catholic } }
				join_league = catholic
			}
			else_if = {
				limit = { emperor = { religion = hussite } }
				join_league = hussite
			}
		}
		add_prestige = 5
	}
	option = {
		name = "DG_Protestant.023.optg" #We have to follow our overlord
		trigger = {
			is_subject_other_than_tributary_trigger = yes
		}
		# if = {
		# 	limit = { overlord = { in_league = catholic } }
		# 	join_league = catholic
		# }
		# else_if = {
		# 	limit = { overlord = { in_league = protestant } }
		# 	join_league = protestant
		# }
		# else_if = {
		# 	limit = { overlord = { in_league = reformed } }
		# 	join_league = reformed
		# }
		# else_if = {
		# 	limit = { overlord = { in_league = hussite } }
		# 	join_league = hussite
		# }
	}
}

#024 - The Reformed League (ahistorical)
country_event = {
	
	id = DG_Protestant.024 #DG_Catholics.023
	title = "DG_Protestant.024.title"
	desc = "DG_Protestant.024.desc"
	picture = protestant_league
	
	trigger = {
		has_global_flag = DG_First_League_War
		hre_leagues_enabled = yes
		OR = {
			capital_scope = { is_part_of_hre = yes }
			emperor = { is_in_league_war = yes }
		}
		any_known_country = {
			religion = reformed
			hre_heretic_religion = PREV
		}
		NOT = { in_league = protestant }
		NOT = { in_league = catholic }
		NOT = { in_league = reformed }
		NOT = { in_league = hussite }
		NOT = { hre_religion_treaty = yes }
		is_colonial_nation = no
	}
	
	mean_time_to_happen = {
		
		years = 10
		
		modifier = {
			capital_scope = { is_part_of_hre = yes }
			factor = 0.7
		}
		modifier = {
			any_owned_province = { is_part_of_hre = yes }
			factor = 0.7
		}
		modifier = {
			emperor = {
				OR = {
					is_rival = ROOT
					is_enemy = ROOT
					truce_with = ROOT
					war_with = ROOT
					NOT = { religion = ROOT }
				}
				war_score = 10
			}
			NOT = { has_country_flag = league_support }
			factor = 0.3
		}
		modifier = {
			emperor = {
				OR = {
					is_rival = ROOT
					is_enemy = ROOT
					truce_with = ROOT
					war_with = ROOT
					NOT = { religion = ROOT }
				}
				war_score = 50
			}
			NOT = { has_country_flag = league_support_again }
			factor = 0.3
		}
		modifier = {
			emperor = {
				OR = {
					alliance_with = ROOT
					marriage_with = ROOT
					overlord_of = ROOT
					is_subject_of = ROOT
					AND = {
						religion = ROOT
						ROOT = { government = theocracy }
					}
				}
				NOT = { war_score = -9 }
			}
			NOT = { has_country_flag = league_support }
			factor = 0.3
		}
		modifier = {
			emperor = {
				OR = {
					alliance_with = ROOT
					marriage_with = ROOT
					overlord_of = ROOT
					is_subject_of = ROOT
					AND = {
						religion = ROOT
						ROOT = { government = theocracy }
					}
				}
				NOT = { war_score = -49 }
			}
			NOT = { has_country_flag = league_support_again }
			factor = 0.3
		}
	}
	
	immediate = {
		if = {
			limit = { has_country_flag = league_support }
			set_country_flag = league_support_again
		}
		set_country_flag = league_support
		if = {
			limit = { capital_scope = { is_part_of_hre = yes } }
			custom_tooltip = DG_Protestant.017.hre
		}
		if = {
			limit = { NOT = { capital_scope = { is_part_of_hre = yes } } }
			custom_tooltip = DG_Protestant.017.outsider
		}
	}
	
	option = {
		name = "DG_Protestant.024.opta" #Look on with interest
		ai_chance = {
			factor = 55
			modifier = {
				OR = {
					religion = catholic
					religion = reformed
					religion = protestant
					religion = hussite
				}
				piety = 0.60
				factor = 0.5
			}
			modifier = {
				OR = {
					religion = catholic
					religion = reformed
					religion = protestant
					religion = hussite
				}
				piety = 0.20
				factor = 0.5
			}
			modifier = {
				NOT = { religion = catholic }
				NOT = { religion = reformed }
				NOT = { religion = protestant }
				NOT = { religion = hussite }
				factor = 2
			}
			modifier = {
				is_at_war = yes
				factor = 2
			}
			modifier = {
				war_exhaustion = 4
				factor = 1.4
			}
			modifier = {
				war_exhaustion = 8
				factor = 1.4
			}
			modifier = {
				NOT = { manpower_percentage = 0.50 }
				factor = 1.4
			}
			modifier = {
				NOT = { manpower_percentage = 0.25 }
				factor = 1.4
			}
			modifier = {
				NOT = { manpower_percentage = 0.10 }
				factor = 1.4
			}
			modifier = {
				num_of_loans = 2
				factor = 1.4
			}
			modifier = {
				num_of_loans = 4
				factor = 1.4
			}
			modifier = {
				num_of_loans = 6
				factor = 1.4
			}
			modifier = {
				is_bankrupt = yes
				factor = 2
			}
		}
		add_prestige = -5
	}
	option = {
		name = "DG_Protestant.023.optb" #Onwards to victory!
		ai_chance = { factor = 10 }
		trigger = {
			OR = {
				in_league = protestant
				in_league = reformed
				in_league = catholic
				in_league = hussite
				is_emperor = yes
			}
		}
		add_prestige = 10
	}
	option = {	#always = no
		name = "DG_Protestant.024.optc" #Send support to the rebels
		ai_chance = {
			factor = 20
			modifier = {
				emperor = { alliance_with = ROOT }
				factor = 0
			}
			modifier = {
				emperor = { marriage_with = ROOT }
				factor = 0.5
			}
			modifier = {
				emperor = { dynasty = ROOT }
				factor = 0.5
			}
			modifier = {
				emperor = { is_rival = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { is_enemy = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { religion = ROOT }
				factor = 0.5
			}
			modifier = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = ROOT
				}
				factor = 3
			}
			modifier = {
				emperor = { war_score = 10 }
				factor = 2
			}
			modifier = {
				emperor = { war_score = 50 }
				factor = 2
			}
		}
		trigger = { always = no }
		support_rebels_effect = yes
	}
	option = {	#always = no
		name = "DG_Protestant.024.optd" #Send support to the Emperor
		ai_chance = {
			factor = 10
			modifier = {
				emperor = { alliance_with = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { marriage_with = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { dynasty = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { is_rival = ROOT }
				factor = 0.5
			}
			modifier = {
				emperor = { is_enemy = ROOT }
				factor = 0.5
			}
			modifier = {
				emperor = { religion = ROOT }
				factor = 3
			}
			modifier = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = ROOT
				}
				factor = 0.5
			}
			modifier = {
				emperor = { NOT = { war_score = -9 } }
				factor = 2
			}
			modifier = {
				emperor = { NOT = { war_score = -49 } }
				factor = 2
			}
		}
		trigger = { always = no }
		support_emperor_effect = yes
	}
	option = {
		name = "DG_Protestant.024.opte" #Join the League against the Emperor
		trigger = {
			emperor = {
				OR = {
					NOT = { religion = ROOT }
					is_rival = ROOT
					is_enemy = ROOT
					war_with = ROOT
					truce_with = ROOT
				}
			}
			is_subject_other_than_tributary_trigger = no
			is_at_war = no
		}
		ai_chance = {
			factor = 10
			modifier = {
				is_part_of_hre = yes
				factor = 2
			}
			modifier = {
				emperor = { NOT = { army_size = ROOT } }
				factor = 2
			}
			modifier = {
				NOT = { manpower_percentage = 0.50 }
				factor = 0.5
			}
			modifier = {
				NOT = { manpower_percentage = 0.25 }
				factor = 0
			}
			modifier = {
				num_of_loans = 2
				factor = 0.5
			}
			modifier = {
				num_of_loans = 4
				factor = 0
			}
			modifier = {
				emperor = { war_score = 10 }
				factor = 2
			}
			modifier = {
				emperor = { war_score = 50 }
				factor = 2
			}
		}
		if = {
			limit = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = catholic
				}
			}
			join_league = catholic
		}
		else_if = {
			limit = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = protestant
				}
			}
			join_league = protestant
		}
		else_if = {
			limit = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = reformed
				}
			}
			join_league = reformed
		}
		else_if = {
			limit = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = hussite
				}
			}
			join_league = hussite
		}
		add_prestige = 5
	}
	option = {
		name = "DG_Protestant.024.optf" #Join the Emperor against the League
		trigger = {
			OR = {
				hre_religion = ROOT
				emperor = {
					OR = {
						alliance_with = ROOT
						marriage_with = ROOT
						dynasty = ROOT
					}
				}
			}
			is_subject_other_than_tributary_trigger = no
			is_at_war = no
		}
		ai_chance = {
			factor = 5
			modifier = {
				is_part_of_hre = yes
				factor = 2
			}
			modifier = {
				emperor = { NOT = { army_size = ROOT } }
				factor = 2
			}
			modifier = {
				NOT = { manpower_percentage = 0.50 }
				factor = 0.5
			}
			modifier = {
				NOT = { manpower_percentage = 0.25 }
				factor = 0
			}
			modifier = {
				num_of_loans = 2
				factor = 0.5
			}
			modifier = {
				num_of_loans = 4
				factor = 0
			}
			modifier = {
				emperor = { NOT = { war_score = -9 } }
				factor = 2
			}
			modifier = {
				emperor = { NOT = { war_score = -49 } }
				factor = 2
			}
		}
		if = {
			limit = { hre_religion = protestant }
			join_league = protestant
		}
		else_if = {
			limit = { hre_religion = hussite }
			join_league = hussite
		}
		else_if = {
			limit = { hre_religion = reformed }
			join_league = reformed
		}
		else_if = {
			limit = { hre_religion = catholic }
			join_league = catholic
		}
		else = {
			if = {
				limit = { emperor = { religion = protestant } }
				join_league = protestant
			}
			else_if = {
				limit = { emperor = { religion = hussite } }
				join_league = hussite
			}
			else_if = {
				limit = { emperor = { religion = reformed } }
				join_league = reformed
			}
			else_if = {
				limit = { emperor = { religion = catholic } }
				join_league = catholic
			}
		}
		add_prestige = 5
	}
	option = {
		name = "DG_Protestant.024.optg" #We have to follow our overlord
		trigger = {
			is_subject_other_than_tributary_trigger = yes
		}
		# if = {
		# 	limit = { overlord = { in_league = catholic } }
		# 	join_league = catholic
		# }
		# else_if = {
		# 	limit = { overlord = { in_league = protestant } }
		# 	join_league = protestant
		# }
		# else_if = {
		# 	limit = { overlord = { in_league = hussite } }
		# 	join_league = hussite
		# }
		# else_if = {
		# 	limit = { overlord = { in_league = reformed } }
		# 	join_league = reformed
		# }
	}
}

#025 - The Catholic League (ahistorical)
country_event = {
	
	id = DG_Protestant.025 #DG_Catholics.024
	title = "DG_Protestant.025.title"
	desc = "DG_Protestant.025.desc"
	picture = protestant_league
	
	trigger = {
		has_global_flag = DG_First_League_War
		hre_leagues_enabled = yes
		OR = {
			capital_scope = { is_part_of_hre = yes }
			emperor = { is_in_league_war = yes }
		}
		any_known_country = {
			religion = catholic
			hre_heretic_religion = PREV
		}
		NOT = { in_league = protestant }
		NOT = { in_league = catholic }
		NOT = { in_league = reformed }
		NOT = { hre_religion_treaty = yes }
		is_colonial_nation = no
	}
	
	mean_time_to_happen = {
		
		years = 10
		
		modifier = {
			capital_scope = { is_part_of_hre = yes }
			factor = 0.7
		}
		modifier = {
			any_owned_province = { is_part_of_hre = yes }
			factor = 0.7
		}
		modifier = {
			emperor = {
				OR = {
					is_rival = ROOT
					is_enemy = ROOT
					truce_with = ROOT
					war_with = ROOT
					NOT = { religion = ROOT }
				}
				war_score = 10
			}
			NOT = { has_country_flag = league_support }
			factor = 0.3
		}
		modifier = {
			emperor = {
				OR = {
					is_rival = ROOT
					is_enemy = ROOT
					truce_with = ROOT
					war_with = ROOT
					NOT = { religion = ROOT }
				}
				war_score = 50
			}
			NOT = { has_country_flag = league_support_again }
			factor = 0.3
		}
		modifier = {
			emperor = {
				OR = {
					alliance_with = ROOT
					marriage_with = ROOT
					overlord_of = ROOT
					is_subject_of = ROOT
					AND = {
						religion = ROOT
						ROOT = { government = theocracy }
					}
				}
				NOT = { war_score = -9 }
			}
			NOT = { has_country_flag = league_support }
			factor = 0.3
		}
		modifier = {
			emperor = {
				OR = {
					alliance_with = ROOT
					marriage_with = ROOT
					overlord_of = ROOT
					is_subject_of = ROOT
					AND = {
						religion = ROOT
						ROOT = { government = theocracy }
					}
				}
				NOT = { war_score = -49 }
			}
			NOT = { has_country_flag = league_support_again }
			factor = 0.3
		}
	}
	
	immediate = {
		if = {
			limit = { has_country_flag = league_support }
			set_country_flag = league_support_again
		}
		set_country_flag = league_support
		if = {
			limit = { capital_scope = { is_part_of_hre = yes } }
			custom_tooltip = DG_Protestant.025.hre
		}
		if = {
			limit = { NOT = { capital_scope = { is_part_of_hre = yes } } }
			custom_tooltip = DG_Protestant.025.outsider
		}
	}
	
	option = {
		name = "DG_Protestant.025.opta" #Look on with interest
		ai_chance = {
			factor = 55
			modifier = {
				OR = {
					religion = catholic
					religion = reformed
					religion = protestant
					religion = hussite
				}
				piety = 0.60
				factor = 0.5
			}
			modifier = {
				OR = {
					religion = catholic
					religion = reformed
					religion = protestant
					religion = hussite
				}
				piety = 0.20
				factor = 0.5
			}
			modifier = {
				NOT = { religion = catholic }
				NOT = { religion = reformed }
				NOT = { religion = protestant }
				NOT = { religion = hussite }
				factor = 2
			}
			modifier = {
				is_at_war = yes
				factor = 2
			}
			modifier = {
				war_exhaustion = 4
				factor = 1.4
			}
			modifier = {
				war_exhaustion = 8
				factor = 1.4
			}
			modifier = {
				NOT = { manpower_percentage = 0.50 }
				factor = 1.4
			}
			modifier = {
				NOT = { manpower_percentage = 0.25 }
				factor = 1.4
			}
			modifier = {
				NOT = { manpower_percentage = 0.10 }
				factor = 1.4
			}
			modifier = {
				num_of_loans = 2
				factor = 1.4
			}
			modifier = {
				num_of_loans = 4
				factor = 1.4
			}
			modifier = {
				num_of_loans = 6
				factor = 1.4
			}
			modifier = {
				is_bankrupt = yes
				factor = 2
			}
		}
		add_prestige = -5
	}
	option = {
		name = "DG_Protestant.025.optc" #Send support to the rebels
		ai_chance = {
			factor = 20
			modifier = {
				emperor = { alliance_with = ROOT }
				factor = 0
			}
			modifier = {
				emperor = { marriage_with = ROOT }
				factor = 0.5
			}
			modifier = {
				emperor = { dynasty = ROOT }
				factor = 0.5
			}
			modifier = {
				emperor = { is_rival = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { is_enemy = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { religion = ROOT }
				factor = 0.5
			}
			modifier = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = ROOT
				}
				factor = 3
			}
			modifier = {
				emperor = { war_score = 10 }
				factor = 2
			}
			modifier = {
				emperor = { war_score = 50 }
				factor = 2
			}
		}
		trigger = { always = no }
		support_rebels_effect = yes
	}
	option = {
		name = "DG_Protestant.025.optd" #Send support to the Emperor
		ai_chance = {
			factor = 10
			modifier = {
				emperor = { alliance_with = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { marriage_with = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { dynasty = ROOT }
				factor = 3
			}
			modifier = {
				emperor = { is_rival = ROOT }
				factor = 0.5
			}
			modifier = {
				emperor = { is_enemy = ROOT }
				factor = 0.5
			}
			modifier = {
				emperor = { religion = ROOT }
				factor = 3
			}
			modifier = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = ROOT
				}
				factor = 0.5
			}
			modifier = {
				emperor = { NOT = { war_score = -9 } }
				factor = 2
			}
			modifier = {
				emperor = { NOT = { war_score = -49 } }
				factor = 2
			}
		}
		trigger = { always = no }
		support_emperor_effect = yes
	}
	option = {
		name = "DG_Protestant.025.opte" #Join the League against the Emperor
		trigger = {
			emperor = {
				OR = {
					NOT = { religion = ROOT }
					is_rival = ROOT
					is_enemy = ROOT
					war_with = ROOT
					truce_with = ROOT
				}
			}
			is_subject_other_than_tributary_trigger = no
			is_at_war = no
		}
		ai_chance = {
			factor = 10
			modifier = {
				is_part_of_hre = yes
				factor = 2
			}
			modifier = {
				emperor = { NOT = { army_size = ROOT } }
				factor = 2
			}
			modifier = {
				NOT = { manpower_percentage = 0.50 }
				factor = 0.5
			}
			modifier = {
				NOT = { manpower_percentage = 0.25 }
				factor = 0
			}
			modifier = {
				num_of_loans = 2
				factor = 0.5
			}
			modifier = {
				num_of_loans = 4
				factor = 0
			}
			modifier = {
				emperor = { war_score = 10 }
				factor = 2
			}
			modifier = {
				emperor = { war_score = 50 }
				factor = 2
			}
		}
		if = {
			limit = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = catholic
				}
			}
			join_league = catholic
		}
		else_if = {
			limit = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = protestant
				}
			}
			join_league = protestant
		}
		else_if = {
			limit = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = hussite
				}
			}
			join_league = hussite
		}
		else_if = {
			limit = {
				any_country = {
					is_league_leader = yes
					is_emperor = no
					religion = reformed
				}
			}
			join_league = reformed
		}
	}
	option = {
		name = "DG_Protestant.025.optf" #Join the Emperor against the League
		trigger = {
			OR = {
				hre_religion = ROOT
				emperor = {
					OR = {
						alliance_with = ROOT
						marriage_with = ROOT
						dynasty = ROOT
					}
				}
			}
			is_subject_other_than_tributary_trigger = no
			is_at_war = no
		}
		ai_chance = {
			factor = 5
			modifier = {
				is_part_of_hre = yes
				factor = 2
			}
			modifier = {
				emperor = { NOT = { army_size = ROOT } }
				factor = 2
			}
			modifier = {
				NOT = { manpower_percentage = 0.50 }
				factor = 0.5
			}
			modifier = {
				NOT = { manpower_percentage = 0.25 }
				factor = 0
			}
			modifier = {
				num_of_loans = 2
				factor = 0.5
			}
			modifier = {
				num_of_loans = 4
				factor = 0
			}
			modifier = {
				emperor = { NOT = { war_score = -9 } }
				factor = 2
			}
			modifier = {
				emperor = { NOT = { war_score = -49 } }
				factor = 2
			}
		}
		if = {
			limit = { hre_religion = protestant }
			join_league = protestant
		}
		else_if = {
			limit = { hre_religion = hussite }
			join_league = hussite
		}
		else_if = {
			limit = { hre_religion = reformed }
			join_league = reformed
		}
		else_if = {
			limit = { hre_religion = catholic }
			join_league = catholic
		}
		else = {
			if = {
				limit = { emperor = { religion = protestant } }
				join_league = protestant
			}
			else_if = {
				limit = { emperor = { religion = hussite } }
				join_league = hussite
			}
			else_if = {
				limit = { emperor = { religion = reformed } }
				join_league = reformed
			}
			else_if = {
				limit = { emperor = { religion = catholic } }
				join_league = catholic
			}
		}
	}
	option = {
		name = "DG_Protestant.025.optg" #We have to follow our overlord
		trigger = {
			is_subject_other_than_tributary_trigger = yes
		}
		# if = {
		# 	limit = { overlord = { in_league = catholic } }
		# 	join_league = catholic
		# }
		# else_if = {
		# 	limit = { overlord = { in_league = protestant } }
		# 	join_league = protestant
		# }
		# else_if = {
		# 	limit = { overlord = { in_league = hussite } }
		# 	join_league = hussite
		# }
		# else_if = {
		# 	limit = { overlord = { in_league = reformed } }
		# 	join_league = reformed
		# }
	}
}

#026 - Support for the War
country_event = {
	
	id = DG_Protestant.026
	title = "DG_Protestant.026.title"
	desc = "DG_Protestant.026.desc"
	picture = christian_league_reinforcements_saffron
	
	trigger = {
		OR = {
			is_league_leader = yes
			is_emperor = yes
		}
		is_in_league_war = yes
		OR = {
			check_variable = { which = crusade_funding value = 1 }
			check_variable = { which = crusade_manpower value = 1 }
		}
	}
	
	is_triggered_only = yes
	
	option = {
		name = "DG_Protestant.026.opta" #We are doing God's work
		if = {
			limit = {
				check_variable = { which = crusade_manpower value = 1 }
				NOT = { check_variable = { which = crusade_manpower value = 2 } }
			}
			mercenary_infantry = capital
			add_war_exhaustion = -0.10
			hidden_effect = { change_variable = { which = crusade_manpower value = -1 } }
		}
		if = {
			limit = {
				check_variable = { which = crusade_manpower value = 2 }
				NOT = { check_variable = { which = crusade_manpower value = 4 } }
			}
			capital_scope = { mercenary_infantry = ROOT }
			add_manpower = 1
			add_war_exhaustion = -0.25
			hidden_effect = { change_variable = { which = crusade_manpower value = -2 } }
		}
		if = {
			limit = {
				check_variable = { which = crusade_manpower value = 4 }
				NOT = { check_variable = { which = crusade_manpower value = 8 } }
			}
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_cavalry = ROOT }
			add_manpower = 2
			add_war_exhaustion = -0.5
			hidden_effect = { change_variable = { which = crusade_manpower value = -4 } }
		}
		if = {
			limit = {
				check_variable = { which = crusade_manpower value = 8 }
				NOT = { check_variable = { which = crusade_manpower value = 16 } }
			}
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_cavalry = ROOT }
			add_manpower = 4
			add_war_exhaustion = -1
			hidden_effect = { change_variable = { which = crusade_manpower value = -8 } }
		}
		if = {
			limit = {
				check_variable = { which = crusade_manpower value = 16 }
				NOT = { check_variable = { which = crusade_manpower value = 32 } }
			}
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_cavalry = ROOT }
			capital_scope = { mercenary_cavalry = ROOT }
			add_manpower = 8
			add_war_exhaustion = -2
			hidden_effect = { change_variable = { which = crusade_manpower value = -16 } }
		}
		if = {
			limit = {
				check_variable = { which = crusade_manpower value = 32 }
				NOT = { check_variable = { which = crusade_manpower value = 64 } }
			}
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_cavalry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_cavalry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_cavalry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_cavalry = ROOT }
			add_manpower = 16
			add_war_exhaustion = -4
			hidden_effect = { change_variable = { which = crusade_manpower value = -32 } }
		}
		if = {
			limit = {
				check_variable = { which = crusade_manpower value = 64 }
			}
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_cavalry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_cavalry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_cavalry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_cavalry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_cavalry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_cavalry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_cavalry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_infantry = ROOT }
			capital_scope = { mercenary_cavalry = ROOT }
			add_manpower = 32
			add_war_exhaustion = -8
			hidden_effect = { change_variable = { which = crusade_manpower value = -64 } }
		}
		if = {
			limit = { check_variable = { which = crusade_funding value = 512 } }
			add_treasury = 512
			hidden_effect = { change_variable = { which = crusade_funding value = -512 } }
		}
		else_if = {
			limit = { check_variable = { which = crusade_funding value = 256 } }
			add_treasury = 256
			hidden_effect = { change_variable = { which = crusade_funding value = -256 } }
		}
		else_if = {
			limit = { check_variable = { which = crusade_funding value = 128 } }
			add_treasury = 128
			hidden_effect = { change_variable = { which = crusade_funding value = -128 } }
		}
		else_if = {
			limit = { check_variable = { which = crusade_funding value = 64 } }
			add_treasury = 64
			hidden_effect = { change_variable = { which = crusade_funding value = -64 } }
		}
		else_if = {
			limit = { check_variable = { which = crusade_funding value = 32 } }
			add_treasury = 32
			hidden_effect = { change_variable = { which = crusade_funding value = -32 } }
		}
		else_if = {
			limit = { check_variable = { which = crusade_funding value = 16 } }
			add_treasury = 16
			hidden_effect = { change_variable = { which = crusade_funding value = -16 } }
		}
		else_if = {
			limit = { check_variable = { which = crusade_funding value = 8 } }
			add_treasury = 8
			hidden_effect = { change_variable = { which = crusade_funding value = -8 } }
		}
		else_if = {
			limit = { check_variable = { which = crusade_funding value = 4 } }
			add_treasury = 4
			hidden_effect = { change_variable = { which = crusade_funding value = -4 } }
		}
		else_if = {
			limit = { check_variable = { which = crusade_funding value = 2 } }
			add_treasury = 2
			hidden_effect = { change_variable = { which = crusade_funding value = -2 } }
		}
		else_if = {
			limit = { check_variable = { which = crusade_funding value = 1 } }
			add_treasury = 1
			hidden_effect = { change_variable = { which = crusade_funding value = -1 } }
		}
	}
}


#027 - The [Schmalkaldic] War
country_event = {				#War event
	
	id = DG_Protestant.027
	title = "DG_Protestant.027.title"
	desc = "DG_Protestant.027.desc"
	picture = protestant_league_war
	
	trigger = {
		is_emperor = yes
		is_in_league_war = yes
		NOT = { has_global_flag = DG_League_War }
	}
	
	mean_time_to_happen = {
		days = 5
	}

	immediate = {
		set_global_flag = DG_League_War
		if = {
			limit = {
				NOT = {
					has_global_flag = DG_First_League_War
				}
			}		
			set_global_flag = DG_First_League_War
		}
		else_if = {
			limit = {
				NOT = {
					has_global_flag = DG_Second_League_War
				}
			}
			set_global_flag = DG_Second_League_War
		}
		else_if = {
			limit = {
				NOT = {
					has_global_flag = DG_Third_Leage_War
				}
			}
			set_global_flag = DG_Third_League_War
		}
		hidden_effect = {
			# trigger_switch = {
			# 	on_trigger = hre_religion
			# 	catholic = { set_global_flag = DG_HRE_Catholic_League }
			# 	protestant = { set_global_flag = DG_HRE_Lutheran_League }
			# 	hussite = { set_global_flag = DG_HRE_Hussite_League }
			# 	reformed = { set_global_flag = DG_HRE_Calvinist_League }
			# }
			if = {
				limit = { any_country = { in_league = protestant } }
				set_global_flag = DG_HRE_Lutheran_League
			}
			else_if = {
				limit = { any_country = { in_league = hussite } }
				set_global_flag = DG_HRE_Hussite_League
			}
			else_if = {
				limit = { any_country = { in_league = reformed } }
				set_global_flag = DG_HRE_Calvinist_League
			}
			else_if = {
				limit = { any_country = { in_league = catholic } }
				set_global_flag = DG_HRE_Catholic_League
			}
			# if = {
			# 	limit = {
			# 		any_known_country = {
			# 			capital_scope = { is_part_of_hre = yes }
			# 			NOT = { num_of_cities = 2 }
			# 			is_emperor = no
			# 			is_elector = no
			# 		}
			# 	}
			# 	random_country = {
			# 		limit = {
			# 			capital_scope = { is_part_of_hre = yes }
			# 			NOT = { num_of_cities = 2 }
			# 			is_emperor = no
			# 			is_elector = no
			# 		}
			# 		capital_scope = { save_global_event_target_as = DG_Augsburg_Diet }
			# 	}
			# }
			# else = {
			# 	emperor = { capital_scope = { save_global_event_target_as = DG_Augsburg_Diet } }
			# }
		}
	}
	
	option = {
		name = "DG_Protestant.027.opta" #Let us decide the fate of the empire
	}
}

#028 - The League Wars (1618)
country_event = {			#Peace event
	
	id = DG_Protestant.028 #DG_Catholics.027
	title = "DG_Protestant.028.title"
	desc = "DG_Protestant.028.desc"
	picture = protestant_league_war
	
	major = yes

	trigger = {
		emperor = { is_in_league_war = no }
		is_emperor = yes
		has_global_flag = DG_League_War
		NOT = { has_global_flag = DG_Leage_Peace_Talks_Ongoing }
	}
	
	mean_time_to_happen = { days = 10 }
	
	immediate = {
		hidden_effect = {
			# emperor = { set_country_flag = league_war_emperor }
			set_global_flag = DG_Leage_Peace_Talks_Ongoing
			# if = {
			# 	limit = {
			# 		hre_religion = catholic
			# 	}
			# 	set_global_flag = DG_Catholic_Won_War
			# }
			# else_if = {
			# 	limit = {
			# 		hre_religion = protestant
			# 	}
			# 	set_global_flag = DG_Protestant_Won_War
			# }
			# else_if = {
			# 	limit = {
			# 		hre_religion = reformed
			# 	}
			# 	set_global_flag = DG_Reformed_Won_War
			# }
			# else_if = {
			# 	limit = {
			# 		hre_religion = hussite
			# 	}
			# 	set_global_flag = DG_Hussite_Won_War
			# }
			# if = {
			# 	limit = { any_country = { in_league = protestant } }
			# 	set_global_flag = DG_HRE_Lutheran_League
			# }
			# else_if = {
			# 	limit = { any_country = { in_league = hussite } }
			# 	set_global_flag = DG_HRE_Hussite_League
			# }
			# else_if = {
			# 	limit = { any_country = { in_league = reformed } }
			# 	set_global_flag = DG_HRE_Calvinist_League
			# }
			# else_if = {
			# 	limit = { any_country = { in_league = catholic } }
			# 	set_global_flag = DG_HRE_Catholic_League
			# }
			if = {
				limit = {
					any_known_country = {
						capital_scope = { 
						    is_part_of_hre = yes 
							check_key = { lhs = Class_Urban value = 20 }
						}
						NOT = { num_of_cities = 2 }
						is_emperor = no
						is_elector = no
					}
				}
				random_country = {
					limit = {
						capital_scope = { 
						    is_part_of_hre = yes 
							check_key = { lhs = Class_Urban value = 20 }
						}
						NOT = { num_of_cities = 2 }
						is_emperor = no
						is_elector = no
					}
					capital_scope = { save_global_event_target_as = DG_Augsburg_Diet }
				}
			}
			else = {
				emperor = { capital_scope = { save_global_event_target_as = DG_Augsburg_Diet } }
			}
		}
	}
	
	option = {
		name = "DG_Protestant.028.opta" #Let us decide the fate of the empire

		event_target:DG_Augsburg_Diet = {		#Just vote if no 3 wars yet
			province_event = { id = DG_Protestant.031 days = 4 }
		}
	}
}

#029 - The Divided Empire
country_event = {
	id = DG_Protestant.029 #DG_Catholics.028
	title = "DG_Protestant.029.title"
	desc = "DG_Protestant.029.desc"
	picture = protestant_league_war
	
	major = yes

	trigger = {
		is_emperor = yes
		had_global_flag = {
			flag = DG_Leagues_Active
			days = 90								#Only allow for war Declaration after 3 months, use to give nations time to join the Leagues if they want to
		}
		hre_leagues_enabled = yes
		is_in_league_war = no
		is_at_war = no	#don't declare a League War when you're at war
		NOT = { has_global_flag = DG_Third_League_War }
		NOT = { has_global_flag = DG_Peace_of_Westphalia }
		NOT = { has_global_flag = DG_League_War }
		NOT = { has_global_flag = DG_Leage_Peace_Talks_Ongoing }
	}
	
	mean_time_to_happen = { months = 120 } 	#Force League war after 10 years of Leagues
	
	option = {
		name = "DG_Protestant.029.opta" #Start a league war
		ai_chance = {
			factor = 50
			# modifier = {
			# 	is_at_war = yes
			# 	factor = 0.5
			# }
			# modifier = {
			# 	NOT = { manpower_percentage = 0.50 }
			# 	factor = 0.7
			# }
			# modifier = {
			# 	NOT = { manpower_percentage = 0.25 }
			# 	factor = 0.7
			# }
			# modifier = {
			# 	NOT = { manpower_percentage = 0.10 }
			# 	factor = 0
			# }
			# modifier = {
			# 	war_exhaustion = 4
			# 	factor = 0.7
			# }
			# modifier = {
			# 	war_exhaustion = 8
			# 	factor = 0.7
			# }
			# modifier = {
			# 	war_exhaustion = 12
			# 	factor = 0
			# }
			# modifier = {
			# 	any_ally = { is_league_leader = yes }
			# 	factor = 0
			# }
		}
		# hidden_effect = {
		# 	if = {
		# 		limit = { ROOT = { religion = catholic } }
		# 		every_country = {
		# 			limit = {
		# 				in_league = catholic
		# 				NOT = { tag = ROOT }
		# 				NOT = { war_with = ROOT }
		# 			}
		# 			create_guarantee = ROOT
		# 		}
		# 	}
		# 	else_if = {
		# 		limit = { ROOT = { religion = protestant } }
		# 		every_country = {
		# 			limit = {
		# 				in_league = protestant
		# 				NOT = { tag = ROOT }
		# 				NOT = { war_with = ROOT }
		# 			}
		# 			create_guarantee = ROOT
		# 		}
		# 	}
		# 	else_if = {
		# 		limit = { ROOT = { religion = hussite } }
		# 		every_country = {
		# 			limit = {
		# 				in_league = hussite
		# 				NOT = { tag = ROOT }
		# 				NOT = { war_with = ROOT }
		# 			}
		# 			create_guarantee = ROOT
		# 		}
		# 	}
		# 	else_if = {
		# 		limit = { ROOT = { religion = reformed } }
		# 		every_country = {
		# 			limit = {
		# 				in_league = reformed
		# 				NOT = { tag = ROOT }
		# 				NOT = { war_with = ROOT }
		# 			}
		# 			create_guarantee = ROOT
		# 		}
		# 	}
		# }
		random_country = {
			limit = { is_league_leader = yes is_emperor = no }
			save_event_target_as = League_Leader_GetAttack
		}
		declare_war_with_cb = {
			who = event_target:League_Leader_GetAttack
			casus_belli = cb_religious_league
		}
		hidden_effect = {
			if = {
				limit = {
					emperor = {
						religion = catholic
					}
				}
				every_known_country = {
					limit = {
						in_league = catholic 
					}
					join_all_offensive_wars_of = emperor
				}
			}
			if = {
				limit = {
					emperor = {
						religion = protestant
					}
				}
				every_known_country = {
					limit = {
						in_league = protestant 
					}
					join_all_offensive_wars_of = emperor
				}
			}
			if = {
				limit = {
					emperor = {
						religion = reformed
					}
				}
				every_known_country = {
					limit = {
						in_league = reformed 
					}
					join_all_offensive_wars_of = emperor
				}
			}
			if = {
				limit = {
					emperor = {
						religion = hussite
					}
				}
				every_known_country = {
					limit = {
						in_league = hussite 
					}
					join_all_offensive_wars_of = emperor
				}
			}
		}
	}
	# option = {
	# 	name = "DG_Protestant.029.optb" #Call a diet
	# 	ai_chance = { factor = 30 }
	# 	if = {
	# 		limit = { ROOT = { piety = 0.60 } }
	# 		add_prestige = -20
	# 	}
	# 	else_if = {
	# 		limit = { ROOT = { piety = 0.20 } }
	# 		add_prestige = -15
	# 	}
	# 	else_if = {
	# 		limit = { ROOT = { piety = -0.20 } }
	# 		add_prestige = -10
	# 	}
	# 	else_if = {
	# 		limit = { ROOT = { piety = -0.60 } }
	# 		add_prestige = -5
	# 	}
	# 	#set_global_flag = DG_League_War
	# 	hidden_effect = {
	# 		if = {
	# 			limit = {
	# 				any_known_country = {
	# 					capital_scope = { is_part_of_hre = yes }
	# 					NOT = { num_of_cities = 2 }
	# 					is_emperor = no
	# 					is_elector = no
	# 				}
	# 			}
	# 			random_country = {
	# 				limit = {
	# 					capital_scope = { is_part_of_hre = yes }
	# 					NOT = { num_of_cities = 2 }
	# 					is_emperor = no
	# 					is_elector = no
	# 				}
	# 				capital_scope = { save_global_event_target_as = DG_Augsburg_Diet }
	# 			}
	# 		}
	# 		else = {
	# 			emperor = { capital_scope = { save_global_event_target_as = DG_Augsburg_Diet } }
	# 		}
	# 	}
	# }
	option = {
	 	name = "DG_Protestant.029.optc" #Delay
		ai_chance = { factor = 0 }
		trigger = {
			ai = no
		}
		Stab_Subtract2 = yes
		add_prestige = -25
		hidden_effect = {
			event_target:League_Leader_GetAttack = {
				country_event = {
					id = DG_Protestant.030
					days = 50 
					random = 20
				}
			}
		}
	}
}

#030 - League War Declared
country_event = {
	id = DG_Protestant.030 #DG_Catholics.029
	title = "DG_Protestant.030.title"
	desc = "DG_Protestant.030.desc"
	picture = protestant_league_war
	
	is_triggered_only = yes

	immediate = {
		every_known_country = {
			limit = {
				war_with = ROOT
			}
			white_peace = ROOT
		}
	}
	
	option = {
		name = "DG_Protestant.030.opta"
		declare_war_with_cb = {
			who = FROM
			casus_belli = cb_religious_league
		}
		hidden_effect = {
			if = {
				limit = {
					ROOT = {
						religion = catholic
					}
				}
				every_known_country = {
					limit = {
						in_league = catholic 
					}
					join_all_offensive_wars_of = ROOT
				}
			}
			if = {
				limit = {
					ROOT = {
						religion = protestant
					}
				}
				every_known_country = {
					limit = {
						in_league = protestant 
					}
					join_all_offensive_wars_of = ROOT
				}
			}
			if = {
				limit = {
					ROOT = {
						religion = reformed
					}
				}
				every_known_country = {
					limit = {
						in_league = reformed 
					}
					join_all_offensive_wars_of = ROOT
				}
			}
			if = {
				limit = {
					ROOT = {
						religion = hussite
					}
				}
				every_known_country = {
					limit = {
						in_league = hussite 
					}
					join_all_offensive_wars_of = ROOT
				}
			}
		}
	}
}

#########
# Peace #
#########
#31 - The Diet of [Augsburg]
province_event = {
	
	id = DG_Protestant.031
	title = "DG_Protestant.031.title"
	desc = "DG_Protestant.031.desc"
	picture = protestant_league_surrender
	
	major = yes

	is_triggered_only = yes

	immediate = {
		hidden_effect = {
			if = {
				limit = { any_country = { in_league = protestant } }
				set_global_flag = DG_HRE_Lutheran_League
			}
			else_if = {
				limit = { any_country = { in_league = hussite } }
				set_global_flag = DG_HRE_Hussite_League
			}
			else_if = {
				limit = { any_country = { in_league = reformed } }
				set_global_flag = DG_HRE_Calvinist_League
			}
			else_if = {
				limit = { any_country = { in_league = catholic } }
				set_global_flag = DG_HRE_Catholic_League
			}
			#emperor = { set_hre_religion_treaty = yes }
			set_key = {
				lhs = VoteCount1
				value = 0
			}
			set_key = {
				lhs = VoteCount2
				value = 0
			}
			set_key = {
				lhs = VoteCount3
				value = 0
			}
			set_key = {
				lhs = VoteCount4
				value = 0
			}
			set_key = {
				lhs = VoteCount5
				value = 0
			}
			set_key = {
				lhs = VoteCountW
				value = 0
			}
		}
	}

	option = {
		name = "DG_Protestant.031.opta"		#Ask each prince to vote
		hidden_effect = {
			owner = {
				every_known_country = {
					limit = {
						is_part_of_hre = yes
					}
					country_event = {
						id = DG_Protestant.032
						days = 5
					}
				}
				country_event = {
					id = DG_Protestant.032
					days = 5
				}
			}
			province_event = {
				id = DG_Protestant.033	#Counting the Votes
				days = 40
				random = 5
			}
		}
	}	
}

country_event = { #22 - Vote in the Diet
	id = DG_Protestant.032
	title = "DG_Protestant.031.title"
	desc = "DG_Protestant.031.desc"
	picture = protestant_league_surrender
	
	is_triggered_only = yes

	
	option = {
		name = "DG_Protestant.032.opta" #Catholic
		trigger = {
			OR = {
				hre_religion = catholic
				any_known_country = {
					religion = catholic
					hre_heretic_religion = PREV
				}
			}
		}
		ai_chance = {
			factor = 30
			modifier = {
				emperor = {
					religion = catholic
					truce_with = ROOT
					NOT = { religion = ROOT }
					NOT = { overlord_of = ROOT }
				}
				factor = 0
			}
			modifier = {
				in_league = catholic
				factor = 2
			}
			modifier = {
				NOT = { religion = catholic }
				factor = 0.25
			}
			modifier = {
				overlord = { OR = { religion = protestant religion = reformed religion = hussite } }
				factor = 0
			}
			modifier = {
				overlord = { religion = catholic }
				factor = 2
			}
			modifier = {
				is_force_converted = yes
				NOT = { religion = catholic }
				is_free_or_tributary_trigger = yes
				factor = 0
			}
			modifier = {
				factor = 0.75
				has_global_flag = DG_Second_League_War
			}
			modifier = {
				factor = 0.5
				has_global_flag = DG_Third_League_War
			}
		}
		Cast_Vote_HRE = { Ballot = 1 }
	}
	option = {
		name = "DG_Protestant.032.optb" #Protestant
		trigger = {
			OR = {
				hre_religion = protestant
				any_known_country = {
					religion = protestant
					hre_heretic_religion = PREV
				}
			}
		}
		ai_chance = {
			factor = 30
			modifier = {
				emperor = {
					religion = protestant
					truce_with = ROOT
					NOT = { religion = ROOT }
					NOT = { overlord_of = ROOT }
				}
				factor = 0
			}
			modifier = {
				in_league = protestant
				factor = 2
			}
			modifier = {
				NOT = { religion = protestant }
				factor = 0.25
			}
			modifier = {
				overlord = { OR = { religion = catholic religion = reformed religion = hussite } }
				factor = 0
			}
			modifier = {
				overlord = { religion = protestant }
				factor = 2
			}
			modifier = {
				is_force_converted = yes
				NOT = { religion = protestant }
				is_free_or_tributary_trigger = yes
				factor = 0
			}
			modifier = {
				factor = 0.75
				has_global_flag = DG_Second_League_War
			}
			modifier = {
				factor = 0.5
				has_global_flag = DG_Third_League_War
			}
		}
		Cast_Vote_HRE = { Ballot = 2 }
	}
	option = {
		name = "DG_Protestant.032.optc" #Reformed
		trigger = {
			OR = {
				hre_religion = reformed
				any_known_country = {
					religion = reformed
					hre_heretic_religion = PREV
				}
			}
		}
		ai_chance = {
			factor = 30
			modifier = {
				emperor = {
					religion = reformed
					truce_with = ROOT
					NOT = { religion = ROOT }
					NOT = { overlord_of = ROOT }
				}
				factor = 0
			}
			modifier = {
				in_league = reformed
				factor = 2
			}
			modifier = {
				NOT = { religion = reformed }
				factor = 0.25
			}
			modifier = {
				overlord = { OR = { religion = protestant religion = catholic religion = hussite } }
				factor = 0
			}
			modifier = {
				overlord = { religion = reformed }
				factor = 2
			}
			modifier = {
				is_force_converted = yes
				NOT = { religion = reformed }
				is_free_or_tributary_trigger = yes
				factor = 0
			}
			modifier = {
				factor = 0.75
				has_global_flag = DG_Second_League_War
			}
			modifier = {
				factor = 0.5
				has_global_flag = DG_Third_League_War
			}
		}
		Cast_Vote_HRE = { Ballot = 3 }
	}
	option = {
		name = "DG_Protestant.032.optd" #Hussite
		trigger = {
			OR = {
				hre_religion = hussite
				any_known_country = {
					religion = hussite
					hre_heretic_religion = PREV
				}
			}
		}
		ai_chance = {
			factor = 30
			modifier = {
				emperor = {
					religion = hussite
					truce_with = ROOT
					NOT = { religion = ROOT }
					NOT = { overlord_of = ROOT }
				}
				factor = 0
			}
			modifier = {
				in_league = hussite
				factor = 2
			}
			modifier = {
				NOT = { religion = hussite }
				factor = 0.25
			}
			modifier = {
				overlord = { OR = { religion = protestant religion = catholic religion = reformed } }
				factor = 0
			}
			modifier = {
				overlord = { religion = hussite }
				factor = 2
			}
			modifier = {
				is_force_converted = yes
				NOT = { religion = reformed }
				is_free_or_tributary_trigger = yes
				factor = 0
			}
			modifier = {
				factor = 0.75
				has_global_flag = DG_Second_League_War
			}
			modifier = {
				factor = 0.5
				has_global_flag = DG_Third_League_War
			}
		}
		Cast_Vote_HRE = { Ballot = 4 }
	}
	option = {
		name = "DG_Protestant.032.opte" #Toleration
		ai_chance = {
			factor = 10
			# modifier = {
			# 	has_global_flag = DG_Fifth_League_War
			# 	factor = 2
			# }
			# modifier = {
			# 	has_global_flag = DG_Fourth_League_War
			# 	factor = 2
			# }
			modifier = {
				has_global_flag = DG_Third_League_War
				factor = 2
			}
			modifier = {
				NOT = { has_global_flag = DG_Second_League_War }
				OR = {
					hre_religion = ROOT
					hre_heretic_religion = ROOT
				}
				factor = 0
			}
			modifier = {
				overlord = { OR = { religion = catholic religion = protestant religion = reformed religion = hussite } }
				factor = 0.2
			}
			modifier = {
				is_force_converted = yes
				OR = {
					AND = {
						religion = protestant
						OR = {
							hre_religion = ROOT
							hre_heretic_religion = ROOT
						}
					}
					AND = {
						religion = catholic
						OR = {
							hre_religion = ROOT
							hre_heretic_religion = ROOT
						}
					}
					AND = {
						religion = hussite
						OR = {
							hre_religion = ROOT
							hre_heretic_religion = ROOT
						}
					}
					AND = {
						religion = reformed
						OR = {
							hre_religion = ROOT
							hre_heretic_religion = ROOT
						}
					}
				}
				is_free_or_tributary_trigger = yes
				factor = 0.8
			}
			modifier = {
				factor = 1.5
				has_global_flag = DG_Second_League_War
			}
			modifier = {
				factor = 3
				has_global_flag = DG_Third_League_War
			}
		}
		Cast_Vote_HRE = { Ballot = 5 }
	}
}

province_event = {
	id = DG_Protestant.033	#Tallying the votes
	title = "AI_EVENT"
	desc = "AI_EVENT"
	picture = protestant_league_surrender
	
	is_triggered_only = yes

	hidden = yes

	immediate = {
		Tally_Vote_HRE = yes
	}

	option = {
		province_event = { id = DG_Protestant.035 days = 5 }		#Results in location
	}
}

province_event = {
	id = DG_Protestant.034	#Cleanup
	title = "AI_EVENT"
	desc = "AI_EVENT"
	picture = protestant_league_surrender
	
	is_triggered_only = yes

	hidden = yes

	immediate = {
		set_key = { lhs = VoteCount1 value = 0 }
		set_key = { lhs = VoteCount2 value = 0 }
		set_key = { lhs = VoteCount3 value = 0 }
		set_key = { lhs = VoteCount4 value = 0 }
		set_key = { lhs = VoteCount5 value = 0 }
		set_key = { lhs = VoteCountW value = 0 }
		set_key = { lhs = VoteCountT value = 0 }
		if = {
			limit = {
				has_province_flag = Inconclusive_Vote
			}
			clr_province_flag = Inconclusive_Vote
		}
	}

	option = {
		name = "AI_Event"
		clear_global_event_target = DG_Augsburg_Diet
		clr_global_flag = DG_Leage_Peace_Talks_Ongoing
	}
}



province_event = { #26 - Treaty of [Westphalia]
	id = DG_Protestant.035
	title = "DG_Protestant.035.title"
	desc = "DG_Protestant.035.desc"
	picture = protestant_league_peace
	
	is_triggered_only = yes
	major = yes
	
	immediate = {
		hidden_effect = {
			if = {
				limit = {
					NOT = { has_province_flag = Inconclusive_Vote }
				}
				emperor = {
					enable_hre_leagues = no	#Dissolves the Leagues and allows for new ones to form
				}	
			}
			clr_global_flag = DG_League_War #Removed upon peace
			clr_global_flag = DG_Leagues_Active		#Track with this whether the Leagues are active, use to space out the time until war declaration
		}
	}

	option = {
		name = "DG_Protestant.035.opta"
		trigger = {
			event_target:DG_Augsburg_Diet = {
				is_key_equal = {
					lhs = VoteCountW
					value = 1
				}
			}
			NOT = { has_province_flag = Inconclusive_Vote }
		}
		owner = {
			emperor = { set_hre_religion = catholic }
		}
		if = {
			limit = {
				has_global_flag = DG_Third_League_War
			}
			owner = { set_hre_religion_locked = yes }
			set_global_flag = DG_Peace_of_Westphalia
		}
		else = {
		    set_global_flag = DG_Augsburg_Interim
		}
	}
	option = {
		name = "DG_Protestant.035.optb"
		trigger = {
			event_target:DG_Augsburg_Diet = {
				is_key_equal = {	
					lhs = VoteCountW
					value = 2
				}
			}
			NOT = { has_province_flag = Inconclusive_Vote }
		}
		owner = {
			emperor = { set_hre_religion = protestant }
		}
		if = {
			limit = {
				has_global_flag = DG_Third_League_War
			}
			owner = { set_hre_religion_locked = yes }
			set_global_flag = DG_Peace_of_Westphalia
		}
		else = {
		    set_global_flag = DG_Augsburg_Interim
		}
	}
	option = {
		name = "DG_Protestant.035.optc"
		trigger = {
			is_key_equal = {	
				lhs = VoteCountW
				value = 3
			}
			NOT = { has_province_flag = Inconclusive_Vote }
		}
		owner = {
			emperor = { set_hre_religion = reformed }
		}
		if = {
			limit = {
				has_global_flag = DG_Third_League_War
			}
			owner = { set_hre_religion_locked = yes }
			set_global_flag = DG_Peace_of_Westphalia
		}
		else = {
		    set_global_flag = DG_Augsburg_Interim
		}
	}
	option = {
		name = "DG_Protestant.035.optd"
		trigger = {
			is_key_equal = {	
				lhs = VoteCountW
				value = 4
			}
			NOT = { has_province_flag = Inconclusive_Vote }
		}	
		owner = {
			emperor = { set_hre_religion = hussite }
		}
		if = {
			limit = {
				has_global_flag = DG_Third_League_War
			}
			owner = { 
				set_hre_religion_locked = yes
				set_global_flag = DG_Peace_of_Westphalia
			}
		}
		else = {
		    set_global_flag = DG_Augsburg_Interim
		}
	}
	option = {
		name = "DG_Protestant.035.opte"
		trigger = {
			OR = {
				event_target:DG_Augsburg_Diet = {
					is_key_equal = {
						lhs = VoteCountW
						value = 5
					}
				}
				AND = {
					has_province_flag = Inconclusive_Vote
					has_global_flag = DG_Third_League_War
				}
			}
		}
		owner = {
		    emperor = { set_hre_religion_treaty = yes }
		}
		if = {
			limit = {
				has_global_flag = DG_Third_League_War
			}
			owner = { 
				set_hre_religion_locked = yes
				set_global_flag = DG_Peace_of_Westphalia
			}
		}
		else = {
		    set_global_flag = DG_Augsburg_Interim
		}
	}
	option = {
		name = "DG_Prestestant.035.optf"
		trigger = {
			has_province_flag = Inconclusive_Vote
			NOT = { has_global_flag = DG_Third_League_War }
		}
		#No effect but League Wars will still be active. Just fight again
	}

	after = {
		owner = {
			every_known_country = {
				limit = {
					ai = no
				}
				country_event = {
					id = DG_Protestant.036
					days = 2
				}
			}
		}
		province_event = { id = DG_Protestant.034 days = 10 }	#Cleanup
	}	
}

country_event = {
	id = DG_Protestant.036		#Notification event for the player. For now all non-AI nations to help with debugging process
	title = "DG_Protestant.036.title"
	desc = "DG_Protestant.036.desc"
	picture = protestant_league_peace
	
	is_triggered_only = yes

	option = {
		name = "DG_Protestant.036.opta"
	}
}

########
# News #
########

country_event = { #41 - Will of the Emperor (news)
	
	id = DG_Protestant.041
	title = "DG_Protestant.041.title"
	desc = "DG_Protestant.041.desc"
	picture = protestant_league_surrender
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				has_global_flag = DG_HRE_Catholic_League
				has_global_flag = DG_HRE_Lutheran_League
			}
			if = {
				limit = { 82 = { check_variable = { which = imperial_vote_tolerance value = 1 } } }
				custom_tooltip = vote_results_cath_prot
			}
			else = {
				custom_tooltip = vote_results_cath_prot_only
			}
		}
		else_if = {
			limit = {
				has_global_flag = DG_HRE_Catholic_League
				has_global_flag = DG_HRE_Calvinist_League
			}
			if = {
				limit = { 82 = { check_variable = { which = imperial_vote_tolerance value = 1 } } }
				custom_tooltip = vote_results_cath_ref
			}
			else = {
				custom_tooltip = vote_results_cath_ref_only
			}
		}
		else_if = {
			limit = {
				has_global_flag = DG_HRE_Calvinist_League
				has_global_flag = DG_HRE_Lutheran_League
			}
			if = {
				limit = { 82 = { check_variable = { which = imperial_vote_tolerance value = 1 } } }
				custom_tooltip = vote_results_ref_prot
			}
			else = {
				custom_tooltip = vote_results_ref_prot_only
			}
		}
		custom_tooltip = DG_Protestant.041.not_over_yet
		hidden_effect = {
			set_variable = { which = imperial_votes value = 0 }
			clr_country_flag = imperial_diet_voted_religion
			country_event = { id = DG_Protestant.045 days = 180 } #enough time to see the results
		}
		if = {
			limit = {
				hre_religion = catholic
				hre_religion_locked = yes
			}
			tooltip = {
				set_hre_religion = catholic
				set_hre_religion_locked = yes
			}
		}
		else_if = {
			limit = {
				hre_religion = protestant
				hre_religion_locked = yes
			}
			tooltip = {
				set_hre_religion = protestant
				set_hre_religion_locked = yes
			}
		}
		else_if = {
			limit = {
				hre_religion = hussite
				hre_religion_locked = yes
			}
			tooltip = {
				set_hre_religion = hussite
				set_hre_religion_locked = yes
			}
		}
		else_if = {
			limit = {
				hre_religion = reformed
				hre_religion_locked = yes
			}
			tooltip = {
				set_hre_religion = reformed
				set_hre_religion_locked = yes
			}
		}
	}
	
	option = {
		name = "DG_Protestant.041.good"
		trigger = { hre_religion = ROOT }
		if = {
			limit = { is_emperor = yes }
			add_imperial_influence = 100
			if = {
				limit = { ROOT = { piety = 0.60 } }
				add_prestige = 40
			}
			else_if = {
				limit = { ROOT = { piety = 0.20 } }
				add_prestige = 30
			}
			else_if = {
				limit = { ROOT = { piety = -0.20 } }
				add_prestige = 20
			}
			else_if = {
				limit = { ROOT = { piety = -0.60 } }
				add_prestige = 10
			}
		}
		else_if = {
			limit = {
				is_emperor = no
				capital_scope = { is_part_of_hre = yes }
			}
			if = {
				limit = { ROOT = { piety = 0.60 } }
				add_prestige = 20
			}
			else_if = {
				limit = { ROOT = { piety = 0.20 } }
				add_prestige = 15
			}
			else_if = {
				limit = { ROOT = { piety = -0.20 } }
				add_prestige = 10
			}
			else_if = {
				limit = { ROOT = { piety = -0.60 } }
				add_prestige = 5
			}
		}
	}
	option = {
		name = "DG_Protestant.041.bad"
		trigger = {
			NOT = { hre_religion = ROOT }
			OR = {
				AND = {
					religion = catholic
					has_global_flag = DG_HRE_Catholic_League
				}
				AND = {
					religion = protestant
					has_global_flag = DG_HRE_Lutheran_League
				}
				AND = {
					religion = reformed
					has_global_flag = DG_HRE_Calvinist_League
				}
			}
		}
		if = {
			limit = { is_emperor = yes }
			add_imperial_influence = -100
			if = {
				limit = { ROOT = { piety = 0.60 } }
				add_prestige = -40
			}
			else_if = {
				limit = { ROOT = { piety = 0.20 } }
				add_prestige = -30
			}
			else_if = {
				limit = { ROOT = { piety = -0.20 } }
				add_prestige = -20
			}
			else_if = {
				limit = { ROOT = { piety = -0.60 } }
				add_prestige = -10
			}
		}
		else_if = {
			limit = {
				is_emperor = no
				capital_scope = { is_part_of_hre = yes }
			}
			if = {
				limit = { ROOT = { piety = 0.60 } }
				add_prestige = -20
			}
			else_if = {
				limit = { ROOT = { piety = 0.20 } }
				add_prestige = -15
			}
			else_if = {
				limit = { ROOT = { piety = -0.20 } }
				add_prestige = -10
			}
			else_if = {
				limit = { ROOT = { piety = -0.60 } }
				add_prestige = -5
			}
		}
	}
	option = {
		name = "DG_Protestant.041.neutral"
		trigger = {
			NOT = { hre_religion = ROOT }
			NOT = {
				OR = {
					AND = {
						religion = catholic
						has_global_flag = DG_HRE_Catholic_League
					}
					AND = {
						religion = protestant
						has_global_flag = DG_HRE_Lutheran_League
					}
					AND = {
						religion = reformed
						has_global_flag = DG_HRE_Calvinist_League
					}
				}
			}
		}
	}
}

country_event = { #42 - Status Quo
	
	id = DG_Protestant.042
	title = "DG_Protestant.042.title"
	desc = "DG_Protestant.042.desc"
	picture = protestant_league_peace
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				has_global_flag = DG_HRE_Catholic_League
				has_global_flag = DG_HRE_Lutheran_League
			}
			if = {
				limit = { 82 = { check_variable = { which = imperial_vote_tolerance value = 1 } } }
				custom_tooltip = vote_results_cath_prot
			}
			else = {
				custom_tooltip = vote_results_cath_prot_only
			}
		}
		else_if = {
			limit = {
				has_global_flag = DG_HRE_Catholic_League
				has_global_flag = DG_HRE_Calvinist_League
			}
			if = {
				limit = { 82 = { check_variable = { which = imperial_vote_tolerance value = 1 } } }
				custom_tooltip = vote_results_cath_ref
			}
			else = {
				custom_tooltip = vote_results_cath_ref_only
			}
		}
		else_if = {
			limit = {
				has_global_flag = DG_HRE_Calvinist_League
				has_global_flag = DG_HRE_Lutheran_League
			}
			if = {
				limit = { 82 = { check_variable = { which = imperial_vote_tolerance value = 1 } } }
				custom_tooltip = vote_results_ref_prot
			}
			else = {
				custom_tooltip = vote_results_ref_prot_only
			}
		}
		custom_tooltip = DG_Protestant.041.not_over_yet
		hidden_effect = {
			set_variable = { which = imperial_votes value = 0 }
			clr_country_flag = imperial_diet_voted_religion
			country_event = { id = DG_Protestant.045 days = 180 } #enough time to see the results
		}
		if = {
			limit = {
				hre_religion = catholic
				hre_religion_locked = yes
			}
			tooltip = {
				set_hre_religion = catholic
				set_hre_religion_locked = yes
			}
		}
		else_if = {
			limit = {
				hre_religion = protestant
				hre_religion_locked = yes
			}
			tooltip = {
				set_hre_religion = protestant
				set_hre_religion_locked = yes
			}
		}
		else_if = {
			limit = {
				hre_religion = hussite
				hre_religion_locked = yes
			}
			tooltip = {
				set_hre_religion = hussite
				set_hre_religion_locked = yes
			}
		}
		else_if = {
			limit = {
				hre_religion = reformed
				hre_religion_locked = yes
			}
			tooltip = {
				set_hre_religion = reformed
				set_hre_religion_locked = yes
			}
		}
	}
	
	option = {
		name = "DG_Protestant.041.good"
		trigger = { hre_religion = ROOT }
		if = {
			limit = { is_emperor = yes }
			add_imperial_influence = 50
			if = {
				limit = { ROOT = { piety = 0.60 } }
				add_prestige = 20
			}
			else_if = {
				limit = { ROOT = { piety = 0.20 } }
				add_prestige = 15
			}
			else_if = {
				limit = { ROOT = { piety = -0.20 } }
				add_prestige = 10
			}
			else_if = {
				limit = { ROOT = { piety = -0.60 } }
				add_prestige = 5
			}
		}
		else_if = {
			limit = {
				is_emperor = no
				capital_scope = { is_part_of_hre = yes }
			}
			if = {
				limit = { ROOT = { piety = 0.60 } }
				add_prestige = 10
			}
			else_if = {
				limit = { ROOT = { piety = 0.20 } }
				add_prestige = 7.5
			}
			else_if = {
				limit = { ROOT = { piety = -0.20 } }
				add_prestige = 5
			}
			else_if = {
				limit = { ROOT = { piety = -0.60 } }
				add_prestige = 2.5
			}
		}
	}
	option = {
		name = "DG_Protestant.041.bad"
		trigger = {
			NOT = { hre_religion = ROOT }
			OR = {
				AND = {
					religion = catholic
					has_global_flag = DG_HRE_Catholic_League
				}
				AND = {
					religion = protestant
					has_global_flag = DG_HRE_Lutheran_League
				}
				AND = {
					religion = reformed
					has_global_flag = DG_HRE_Calvinist_League
				}
			}
		}
		if = {
			limit = { is_emperor = yes }
			add_imperial_influence = -50
			if = {
				limit = { ROOT = { piety = 0.60 } }
				add_prestige = -20
			}
			else_if = {
				limit = { ROOT = { piety = 0.20 } }
				add_prestige = -15
			}
			else_if = {
				limit = { ROOT = { piety = -0.20 } }
				add_prestige = -10
			}
			else_if = {
				limit = { ROOT = { piety = -0.60 } }
				add_prestige = -5
			}
		}
		else_if = {
			limit = {
				is_emperor = no
				capital_scope = { is_part_of_hre = yes }
			}
			if = {
				limit = { ROOT = { piety = 0.60 } }
				add_prestige = -20
			}
			else_if = {
				limit = { ROOT = { piety = 0.20 } }
				add_prestige = -15
			}
			else_if = {
				limit = { ROOT = { piety = -0.20 } }
				add_prestige = -10
			}
			else_if = {
				limit = { ROOT = { piety = -0.60 } }
				add_prestige = -5
			}
		}
	}
	option = {
		name = "DG_Protestant.041.neutral"
		trigger = {
			NOT = { hre_religion = ROOT }
			NOT = {
				OR = {
					AND = {
						religion = catholic
						has_global_flag = DG_HRE_Catholic_League
					}
					AND = {
						religion = protestant
						has_global_flag = DG_HRE_Lutheran_League
					}
					AND = {
						religion = reformed
						has_global_flag = DG_HRE_Calvinist_League
					}
				}
			}
		}
	}
}

country_event = { #43 - League Triumphant
	
	id = DG_Protestant.043
	title = "DG_Protestant.043.title"
	desc = "DG_Protestant.043.desc"
	picture = protestant_league_peace
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				has_global_flag = DG_HRE_Catholic_League
				has_global_flag = DG_HRE_Lutheran_League
			}
			if = {
				limit = {
					82 = { check_variable = { which = imperial_vote_tolerance value = 1 } }
				}
				custom_tooltip = vote_results_cath_prot
			}
			if = {
				limit = {
					NOT = { 82 = { check_variable = { which = imperial_vote_tolerance value = 1 } } }
				}
				custom_tooltip = vote_results_cath_prot_only
			}
		}
		else_if = {
			limit = {
				has_global_flag = DG_HRE_Catholic_League
				has_global_flag = DG_HRE_Calvinist_League
			}
			if = {
				limit = {
					82 = { check_variable = { which = imperial_vote_tolerance value = 1 } }
				}
				custom_tooltip = vote_results_cath_ref
			}
			if = {
				limit = {
					NOT = { 82 = { check_variable = { which = imperial_vote_tolerance value = 1 } } }
				}
				custom_tooltip = vote_results_cath_ref_only
			}
		}
		else_if = {
			limit = {
				has_global_flag = DG_HRE_Calvinist_League
				has_global_flag = DG_HRE_Lutheran_League
			}
			if = {
				limit = {
					82 = { check_variable = { which = imperial_vote_tolerance value = 1 } }
				}
				custom_tooltip = vote_results_ref_prot
			}
			if = {
				limit = {
					NOT = { 82 = { check_variable = { which = imperial_vote_tolerance value = 1 } } }
				}
				custom_tooltip = vote_results_ref_prot_only
			}
		}
		custom_tooltip = DG_Protestant.041.not_over_yet
		hidden_effect = {
			set_variable = { which = imperial_votes value = 0 }
			clr_country_flag = imperial_diet_voted_religion
			country_event = { id = DG_Protestant.045 days = 180 } #enough time to see the results
		}
		if = {
			limit = { hre_religion = catholic }
			tooltip = { set_hre_religion = catholic }
		}
		else_if = {
			limit = { hre_religion = protestant }
			tooltip = { set_hre_religion = protestant }
		}
		else_if = {
			limit = { hre_religion = reformed }
			tooltip = { set_hre_religion = reformed }
		}
	}
	
	option = {
		name = "DG_Protestant.041.good"
		trigger = { hre_religion = ROOT }
		if = {
			limit = { is_emperor = yes }
			add_imperial_influence = 100
			if = {
				limit = { ROOT = { piety = 0.60 } }
				add_prestige = 40
			}
			else_if = {
				limit = { ROOT = { piety = 0.20 } }
				add_prestige = 30
			}
			else_if = {
				limit = { ROOT = { piety = -0.20 } }
				add_prestige = 20
			}
			else_if = {
				limit = { ROOT = { piety = -0.60 } }
				add_prestige = 10
			}
		}
		else_if = {
			limit = {
				is_emperor = no
				capital_scope = { is_part_of_hre = yes }
			}
			if = {
				limit = { ROOT = { piety = 0.60 } }
				add_prestige = 20
			}
			else_if = {
				limit = { ROOT = { piety = 0.20 } }
				add_prestige = 15
			}
			else_if = {
				limit = { ROOT = { piety = -0.20 } }
				add_prestige = 10
			}
			else_if = {
				limit = { ROOT = { piety = -0.60 } }
				add_prestige = 5
			}
		}
	}
	option = {
		name = "DG_Protestant.041.bad"
		trigger = {
			NOT = { hre_religion = ROOT }
			OR = {
				AND = {
					religion = catholic
					has_global_flag = DG_HRE_Catholic_League
				}
				AND = {
					religion = protestant
					has_global_flag = DG_HRE_Lutheran_League
				}
				AND = {
					religion = reformed
					has_global_flag = DG_HRE_Calvinist_League
				}
			}
		}
		if = {
			limit = { is_emperor = yes }
			add_imperial_influence = -100
			if = {
				limit = { ROOT = { piety = 0.60 } }
				add_prestige = -40
			}
			else_if = {
				limit = { ROOT = { piety = 0.20 } }
				add_prestige = -30
			}
			else_if = {
				limit = { ROOT = { piety = -0.20 } }
				add_prestige = -20
			}
			else_if = {
				limit = { ROOT = { piety = -0.60 } }
				add_prestige = -10
			}
		}
		else_if = {
			limit = {
				is_emperor = no
				capital_scope = { is_part_of_hre = yes }
			}
			if = {
				limit = { ROOT = { piety = 0.60 } }
				add_prestige = -20
			}
			else_if = {
				limit = { ROOT = { piety = 0.20 } }
				add_prestige = -15
			}
			else_if = {
				limit = { ROOT = { piety = -0.20 } }
				add_prestige = -10
			}
			else_if = {
				limit = { ROOT = { piety = -0.60 } }
				add_prestige = -5
			}
		}
	}
	option = {
		name = "DG_Protestant.041.neutral"
		trigger = {
			NOT = { hre_religion = ROOT }
			NOT = {
				OR = {
					AND = {
						religion = catholic
						has_global_flag = DG_HRE_Catholic_League
					}
					AND = {
						religion = protestant
						has_global_flag = DG_HRE_Lutheran_League
					}
					AND = {
						religion = reformed
						has_global_flag = DG_HRE_Calvinist_League
					}
				}
			}
		}
	}
}

country_event = { #44 - Cuius Regio, Eius Religio
	
	id = DG_Protestant.044
	title = "DG_Protestant.044.title"
	desc = "DG_Protestant.044.desc"
	picture = protestant_league_peace
	
	is_triggered_only = yes
	
	immediate = {
		if = {
			limit = {
				has_global_flag = DG_HRE_Catholic_League
				has_global_flag = DG_HRE_Lutheran_League
			}
			if = {
				limit = {
					82 = { check_variable = { which = imperial_vote_tolerance value = 1 } }
				}
				custom_tooltip = vote_results_cath_prot
			}
			if = {
				limit = {
					NOT = { 82 = { check_variable = { which = imperial_vote_tolerance value = 1 } } }
				}
				custom_tooltip = vote_results_cath_prot_only
			}
		}
		else_if = {
			limit = {
				has_global_flag = DG_HRE_Catholic_League
				has_global_flag = DG_HRE_Calvinist_League
			}
			if = {
				limit = {
					82 = { check_variable = { which = imperial_vote_tolerance value = 1 } }
				}
				custom_tooltip = vote_results_cath_ref
			}
			if = {
				limit = {
					NOT = { 82 = { check_variable = { which = imperial_vote_tolerance value = 1 } } }
				}
				custom_tooltip = vote_results_cath_ref_only
			}
		}
		else_if = {
			limit = {
				has_global_flag = DG_HRE_Calvinist_League
				has_global_flag = DG_HRE_Lutheran_League
			}
			if = {
				limit = {
					82 = { check_variable = { which = imperial_vote_tolerance value = 1 } }
				}
				custom_tooltip = vote_results_ref_prot
			}
			if = {
				limit = {
					NOT = { 82 = { check_variable = { which = imperial_vote_tolerance value = 1 } } }
				}
				custom_tooltip = vote_results_ref_prot_only
			}
		}
		hidden_effect = {
			set_variable = { which = imperial_votes value = 0 }
			clr_country_flag = imperial_diet_voted_religion
			country_event = { id = DG_Protestant.045 days = 180 } #enough time to see the results
		}
		tooltip = { set_hre_religion_treaty = yes }
	}
	
	option = {
		name = "DG_Protestant.044.bad"
		trigger = {
			is_emperor = yes
		}
	}
	option = {
		name = "DG_Protestant.044.good"
		trigger = {
			NOT = { is_emperor = yes }
		}
	}
}

country_event = { #45 - Cleanup (hidden)
	
	id = DG_Protestant.045
	title = "AI_Event"
	desc = "AI_Event"
	picture = ai_only
	
	hidden = yes
	
	is_triggered_only = yes
	
	option = {
		name = "AI_Event"
		82 = {
			set_variable = { which = imperial_vote_religion value = 0 }
			set_variable = { which = imperial_vote_religion_catholic value = 0 }
			set_variable = { which = imperial_vote_religion_protestant value = 0 }
			set_variable = { which = imperial_vote_religion_reformed value = 0 }
			set_variable = { which = imperial_vote_religion_tolerance value = 0 }
			set_variable = { which = imperial_vote_catholic value = 0 }
			set_variable = { which = imperial_vote_protestant value = 0 }
			set_variable = { which = imperial_vote_reformed value = 0 }
			set_variable = { which = imperial_vote_tolerance value = 0 }
		}
	}
}


country_event = { #50 - Knights Revolt (1522)
	id = DG_Protestant.050
	title = DG_Protestant.050.title
	desc = DG_Protestant.050.desc
	picture = reformed_rebellion
	is_triggered_only = yes #from on_yearly_pulse_2 on_actions
	fire_only_once = yes
	major = yes
	
	trigger = {
		has_global_flag = DG_Diet_of_Worms
		NOT = { has_global_flag = DG_Second_Diet_of_Speyer }
		government = theocracy
		religion = catholic
		any_neighbor_country = {
			religion = protestant
		}
	}
	
	immediate = {
		set_global_flag = reformation_knights_revolt
	}
	
	option = {
		name = DG_Protestant.050.a #He is mistaken
		capital_scope = {
			spawn_rebels = {
				type = warlord_rebels
				size = 2
			}
		}
	}
}

country_event = { #51 - Peasants War (Harvest 1524)
	
	id = DG_Protestant.051
	title = DG_Protestant.051.title
	desc = DG_Protestant.051.desc
	picture = protestant_massacre
	goto = reformation_peasants_revolt
	
	is_triggered_only = yes #from on_bi_yearly_pulse_5 on_actions
	
	immediate = {
		Stab_Subtract1 = yes
		random_owned_province = {
		    limit = {
			    OR = { 
		        	region = swabia_bavarian_region
					region = switzerland_region
					region = upper_saxon_circle_region
					region = westphalian_circle_region
					region = upper_rhenish_circle_region
	    		}
			}
			save_event_target_as = reformation_peasants_revolt
		}
		set_country_flag = reformation_peasants_war
	}
	
	option = {
		name = DG_Protestant.051.a #Cut them down
		ai_chance = { factor = 70 }
		random_list = {
		    75 = {
	    	    event_target:reformation_peasants_revolt = {
	    		    spawn_rebels = {
	    		        type = mob_rebels
	    		        size = 3
	    	        }
	    	    }
			}
			25 = {
	    	    event_target:reformation_peasants_revolt = {
	    		    spawn_rebels = {
	    		        type = mob_rebels
	    		        size = 3
						win = yes
	    	        }
	    	    }
			}
		}
		every_owned_province = {
		    limit = { is_part_of_hre = yes religion = protestant }
			add_unrest = 10
		}
	}
	option = {
		name = DG_Protestant.051.b #Negotiate
		ai_chance = {
			factor = 30
			modifier = {
				factor = 0.1
				NOT = { treasury = 75 }
			}
		}
		add_prestige = -20
		add_treasury = -75
		event_target:reformation_peasants_revolt = {
			Public_ChangeClassWealthVal = { class=SF type=value inp=75 }
		}
		every_owned_province = {
		    limit = { is_part_of_hre = yes religion = protestant }
			add_unrest = 5
		}
	}
}

country_event = { #52 - Admonition to Peace (May 1525)
	
	id = DG_Protestant.052
	title = DG_Protestant.052.title
	desc = DG_Protestant.052.desc
	picture = catholic_monks_preaching
	
	trigger = {
		has_global_flag = reformation_peasants_war
		had_global_flag = { flag = reformation_peasants_war days = 120 }
		is_elector = yes
		religion = protestant
	}
	
	mean_time_to_happen = { months = 3 }
	
	immediate = {
		hidden_effect = {
		    clr_global_flag = reformation_peasants_war
			every_country = {
				limit = {
					OR = {
						AND = {
						    ai = no
							western_christian = yes
						}
						has_country_flag = reformation_peasants_war
					}
					NOT = { tag = ROOT }
				}
				country_event = { id = DG_Protestant.053 days = 30 random = 10 }
			}
		}
	}
	
	option = {
		name = dg_reformation.033.a
		if = {
			limit = { has_country_flag = reformation_peasants_war }
			clr_country_flag = reformation_peasants_war
			if = {
				limit = { has_disaster = peasant_war }
				end_disaster = peasant_war
			}
			disband_rebels = mob_rebels
		    Stab_Add50Percent = yes
		}
	}
}

country_event = { #53 - Admonition to Peace (news)
	
	id = DG_Protestant.053
	title = DG_Protestant.052.title
	desc = DG_Protestant.052.desc
	picture = catholic_monks_preaching
	
	is_triggered_only = yes #from DG_Protestant.052
	
	immediate = {
		if = {
			limit = { has_country_flag = reformation_peasants_war }
			clr_country_flag = reformation_peasants_war
			if = {
				limit = { has_disaster = peasant_war }
				end_disaster = peasant_war
			}
		}
	}
	
	option = {
		name = DG_Protestant.052.a
		if = {
			limit = { has_country_flag = reformation_peasants_war }
			clr_country_flag = reformation_peasants_war
			if = {
				limit = { has_disaster = peasant_war }
				end_disaster = peasant_war
			}
			disband_rebels = mob_rebels
		    Stab_Add50Percent = yes
		}
	}
}

country_event = { #99 - Ninety-Five Theses (news)
	id = DG_Protestant.099
	title = DG_Protestant.099.title
	desc = DG_Protestant.099.desc
	picture = protestant_reformation
	
	is_triggered_only = yes #By DG_Protestant.001
	
	immediate = {
	    hidden_effect = {
	        random_province = {
		        limit = {
		    		has_province_flag = reformation_origins_archbishop
		        }
	     	    save_event_target_as = reformation_origins_archbishop
	        }
		}
	}
	option = {
		name = DG_Protestant.099.opta
	}
}

#Spread of the Heresy
country_event = {
	id = DG_Protestant.100
	title = "DG_Protestant.100.title"
	desc = "DG_Protestant.100.desc"
	picture = all_church_state

	hidden = yes
	is_triggered_only = yes #triggered by bi_year_pulse_4
	
	trigger = { is_religion_enabled = protestant }
	
	option = {
		if = {
			limit = { NOT = { has_country_flag = protestant_presence } }
			country_event = { id = DG_Protestant.101 }
			set_country_flag = protestant_presence
		}
		else_if = {
			limit = { had_country_flag = { flag = protestant_presence days = 16425 } }
			random_list = {
				1 = { country_event = { id = DG_Protestant.101 } }
				99 = {}
			}
		}
		else_if = {
			limit = { had_country_flag = { flag = protestant_presence days = 14600 } }
			random_list = {
				5 = { country_event = { id = DG_Protestant.101 } }
				95 = {}
			}
		}
		else_if = {
			limit = { had_country_flag = { flag = protestant_presence days = 12775 } }
			random_list = {
				10 = { country_event = { id = DG_Protestant.101 } }
				90 = {}
			}
		}
		else_if = {
			limit = { had_country_flag = { flag = protestant_presence days = 10950 } }
			random_list = {
				25 = { country_event = { id = DG_Protestant.101 } }
				75 = {}
			}
		}
		else_if = {
			limit = { had_country_flag = { flag = protestant_presence days = 9125 } }
			random_list = {
				50 = { country_event = { id = DG_Protestant.101 } }
				50 = {}
			}
		}
		else_if = {
			limit = { had_country_flag = { flag = protestant_presence days = 7300 } }
			random_list = {
				75 = { country_event = { id = DG_Protestant.101 } }
				25 = {}
			}
		}
		else_if = {
			limit = { had_country_flag = { flag = protestant_presence days = 5475 } }
			random_list = {
				90 = { country_event = { id = DG_Protestant.101 } }
				10 = {}
			}
		}
		else_if = {
			limit = { had_country_flag = { flag = protestant_presence days = 3650 } }
			random_list = {
				95 = { country_event = { id = DG_Protestant.101 } }
				5 = {}
			}
		}
		else_if = {
			limit = { had_country_flag = { flag = protestant_presence days = 1825 } }
			random_list = {
				99 = { country_event = { id = DG_Protestant.101 } }
				1 = {}
			}
		}
		else = {
			country_event = { id = DG_Protestant.101 }
		}
	}
}

country_event = {
	id = DG_Protestant.101
	title = "DG_Protestant.101.title"
	desc = "DG_Protestant.101.desc"
	picture = all_church_state

	hidden = yes
	is_triggered_only = yes 
	
	trigger = { is_religion_enabled = protestant }

	option = {
		name = "EVT_AI"
		random_list = {
			1 = {
				random_province = {
					limit = {
						western_christian = yes
						#NOT = { MN_CheckRelSlot = { Type = value Religion = 2 } }
						OR = {
							any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } }
							any_neighbor_province = { any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } } }
						}
						superregion = iberia_superregion
						OR = {
							NOT = { owner = { num_of_cities = 10 } }
							AND = { owner = { num_of_cities = 10 } NOT = { culture_group = owner } owner = { NOT = { religion = protestant } } }
							AND = { owner = { num_of_cities = 10 } culture_group = owner owner = { religion = protestant } }
						}
					}
					province_event = { id = DG_Protestant.102 }
				}
			}
			1 = {
				random_province = {
					limit = {
						western_christian = yes
						#NOT = { MN_CheckRelSlot = { Type = value Religion = 2 } }
						OR = {
							any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } }
							any_neighbor_province = { any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } } }
						}
						superregion = italy_superregion
						OR = {
							NOT = { owner = { num_of_cities = 10 } }
							AND = { owner = { num_of_cities = 10 } NOT = { culture_group = owner } owner = { NOT = { religion = protestant } } }
							AND = { owner = { num_of_cities = 10 } culture_group = owner owner = { religion = protestant } }
						}
					}
					province_event = { id = DG_Protestant.102 }
				}
			}
			5 = {
				random_province = {
					limit = {
						western_christian = yes
						#NOT = { MN_CheckRelSlot = { Type = value Religion = 2 } }
						OR = {
							any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } }
							any_neighbor_province = { any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } } }
						}
						superregion = france_superregion
						OR = {
							NOT = { owner = { num_of_cities = 10 } }
							AND = { owner = { num_of_cities = 10 } NOT = { culture_group = owner } owner = { NOT = { religion = protestant } } }
							AND = { owner = { num_of_cities = 10 } culture_group = owner owner = { religion = protestant } }
						}
					}
					province_event = { id = DG_Protestant.102 }
				}
			}
			5 = {
				random_province = {
					limit = {
						western_christian = yes
						#NOT = { MN_CheckRelSlot = { Type = value Religion = 2 } }
						OR = {
							any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } }
							any_neighbor_province = { any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } } }
						}
						superregion = greater_austrian_circle_superregion
						owner = { NOT = { is_emperor = yes } }
						OR = {
							NOT = { owner = { num_of_cities = 10 } }
							AND = { owner = { num_of_cities = 10 } NOT = { culture_group = owner } owner = { NOT = { religion = protestant } } }
							AND = { owner = { num_of_cities = 10 } culture_group = owner owner = { religion = protestant } }
						}
					}
					province_event = { id = DG_Protestant.102 }
				}
			}
			1 = {
				random_province = {
					limit = {
						western_christian = yes
						#NOT = { MN_CheckRelSlot = { Type = value Religion = 2 } }
						OR = {
							any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } }
							any_neighbor_province = { any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } } }
						}
						superregion = greater_austrian_circle_superregion
						owner = { is_emperor = yes }
						OR = {
							NOT = { owner = { num_of_cities = 10 } }
							AND = { owner = { num_of_cities = 10 } NOT = { culture_group = owner } owner = { NOT = { religion = protestant } } }
							AND = { owner = { num_of_cities = 10 } culture_group = owner owner = { religion = protestant } }
						}
					}
					province_event = { id = DG_Protestant.102 }
				}
			}
			30 = {
				random_province = {
					limit = {
						western_christian = yes
						#NOT = { MN_CheckRelSlot = { Type = value Religion = 2 } }
						OR = {
							any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } }
							any_neighbor_province = { any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } } }
						}
						superregion = british_isles_superregion NOT = { region = ireland_region }
						OR = {
							NOT = { owner = { num_of_cities = 10 } }
							AND = { owner = { num_of_cities = 10 } NOT = { culture_group = owner } owner = { NOT = { religion = protestant } } }
							AND = { owner = { num_of_cities = 10 } culture_group = owner owner = { religion = protestant } }
						}
					}
					province_event = { id = DG_Protestant.102 }
				}
			}
			 5 = {
				random_province = {
					limit = {
						western_christian = yes
						#NOT = { MN_CheckRelSlot = { Type = value Religion = 2 } }
						OR = {
							any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } }
							any_neighbor_province = { any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } } }
						}
						region = ireland_region
						OR = {
							NOT = { owner = { num_of_cities = 10 } }
							AND = { owner = { num_of_cities = 10 } NOT = { culture_group = owner } owner = { NOT = { religion = protestant } } }
							AND = { owner = { num_of_cities = 10 } culture_group = owner owner = { religion = protestant } }
						}
					}
					province_event = { id = DG_Protestant.102 }
				}
			}
			50 = {
				random_province = {
					limit = {
						western_christian = yes
						#NOT = { MN_CheckRelSlot = { Type = value Religion = 2 } }
						OR = {
							any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } }
							any_neighbor_province = { any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } } }
						}
						superregion = germany_superregion
						owner = { NOT = { is_emperor = yes } }
						OR = {
							NOT = { owner = { num_of_cities = 10 } }
							AND = { owner = { num_of_cities = 10 } NOT = { culture_group = owner } owner = { NOT = { religion = protestant } } }
							AND = { owner = { num_of_cities = 10 } culture_group = owner owner = { religion = protestant } }
						}
					}
					province_event = { id = DG_Protestant.102 }
				}
			}
			10 = {
				random_province = {
					limit = {
						western_christian = yes
						#NOT = { MN_CheckRelSlot = { Type = value Religion = 2 } }
						OR = {
							any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } }
							any_neighbor_province = { any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } } }
						}
						superregion = germany_superregion
						owner = { is_emperor = yes }
						OR = {
							NOT = { owner = { num_of_cities = 10 } }
							AND = { owner = { num_of_cities = 10 } NOT = { culture_group = owner } owner = { NOT = { religion = protestant } } }
							AND = { owner = { num_of_cities = 10 } culture_group = owner owner = { religion = protestant } }
						}
					}
					province_event = { id = DG_Protestant.102 }
				}
			}
			50 = {
				random_province = {
					limit = {
						western_christian = yes
						#NOT = { MN_CheckRelSlot = { Type = value Religion = 2 } }
						OR = {
							any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } }
							any_neighbor_province = { any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } } }
						}
						superregion = germany_superregion
						OR = {
							NOT = { owner = { num_of_cities = 10 } }
							AND = { owner = { num_of_cities = 10 } NOT = { culture_group = owner } owner = { NOT = { religion = protestant } } }
							AND = { owner = { num_of_cities = 10 } culture_group = owner owner = { religion = protestant } }
						}
					}
					province_event = { id = DG_Protestant.102 }
				}
			}
			50 = {
				random_province = {
					limit = {
						western_christian = yes
						#NOT = { MN_CheckRelSlot = { Type = value Religion = 2 } }
						OR = {
							any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } }
							any_neighbor_province = { any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } } }
						}
						superregion = scandinavian_superregion
						OR = {
							NOT = { owner = { num_of_cities = 10 } }
							AND = { owner = { num_of_cities = 10 } NOT = { culture_group = owner } owner = { NOT = { religion = protestant } } }
							AND = { owner = { num_of_cities = 10 } culture_group = owner owner = { religion = protestant } }
						}
					}
					province_event = { id = DG_Protestant.102 }
				}
			}
			30 = {
				random_province = {
					limit = {
						western_christian = yes
						#NOT = { MN_CheckRelSlot = { Type = value Religion = 2 } }
						OR = {
							any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } }
							any_neighbor_province = { any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } } }
						}
						superregion = commonwealth_superregion
						owner = { government = theocracy }
						OR = {
							NOT = { owner = { num_of_cities = 10 } }
							AND = { owner = { num_of_cities = 10 } NOT = { culture_group = owner } owner = { NOT = { religion = protestant } } }
							AND = { owner = { num_of_cities = 10 } culture_group = owner owner = { religion = protestant } }
						}
					}
					province_event = { id = DG_Protestant.102 }
				}
			}
			10 = {
				random_province = {
					limit = {
						western_christian = yes
						#NOT = { MN_CheckRelSlot = { Type = value Religion = 2 } }
						OR = {
							any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } }
							any_neighbor_province = { any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } } }
						}
						superregion = balkan_superregion
						OR = {
							NOT = { owner = { num_of_cities = 10 } }
							AND = { owner = { num_of_cities = 10 } NOT = { culture_group = owner } owner = { NOT = { religion = protestant } } }
							AND = { owner = { num_of_cities = 10 } culture_group = owner owner = { religion = protestant } }
						}
					}
					province_event = { id = DG_Protestant.102 }
				}
			}
			1 = {
				random_province = {
					limit = {
						western_christian = yes
						#NOT = { MN_CheckRelSlot = { Type = value Religion = 2 } }
						OR = {
							any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } }
							any_neighbor_province = { any_neighbor_province = { MN_CheckRelSlot = { Type = value Religion = 2 } } }
						}
						superregion = commonwealth_superregion
						owner = { NOT = { government = theocracy } }
						OR = {
							NOT = { owner = { num_of_cities = 10 } }
							AND = { owner = { num_of_cities = 10 } NOT = { culture_group = owner } owner = { NOT = { religion = protestant } } }
							AND = { owner = { num_of_cities = 10 } culture_group = owner owner = { religion = protestant } }
						}
					}
					province_event = { id = DG_Protestant.102 }
				}
			}
		}
	}
}

province_event = {
	id = DG_Protestant.102
	title = "DG_Protestant.101.title"
	desc = "DG_Protestant.101.desc"
	picture = all_church_state

	hidden = yes
	is_triggered_only = yes #triggered by DG_Protestant.101
	
	trigger = { is_religion_enabled = protestant }
	
	immediate = {
		log = "DG:[GetYear]:[This.aab.GetValue]:Lutheran:Spread:[This.GetName]:[This.Owner.GetName]"
	}

	option = {
		name = "EVT_AI"
		hidden_effect = {
			random_list = {
				10 = {
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.50 typeIncr = value }
					if = {
						limit = {
							owner = {
								OR = {
									NOT = { has_country_flag = protestant_presence }
									AND = {
										has_country_flag = protestant_presence
										has_country_flag = pro_spread_info
									}
								}
							}
						}
						province_event = { id = DG_Protestant.103 }
					}
				}
				10 = {
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.25 typeIncr = value }
					if = {
						limit = {
							owner = {
								OR = {
									NOT = { has_country_flag = protestant_presence }
									AND = {
										has_country_flag = protestant_presence
										has_country_flag = pro_spread_info
									}
								}
							}
						}
						province_event = { id = DG_Protestant.103 }
					}
				}
				10 = {
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.10 typeIncr = value }
					if = {
						limit = {
							owner = {
								OR = {
									NOT = { has_country_flag = protestant_presence }
									AND = {
										has_country_flag = protestant_presence
										has_country_flag = pro_spread_info
									}
								}
							}
						}
						province_event = { id = DG_Protestant.104 }
					}
				}
				10 = {
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.05 typeIncr = value }
					MN_HeresyGrowth = { from = 1 to = 2 RuralShift = 500 UrbanShift = 1000 NotableShift = 500 }
					if = {
						limit = {
							owner = {
								OR = {
									NOT = { has_country_flag = protestant_presence }
									AND = {
										has_country_flag = protestant_presence
										has_country_flag = pro_spread_info
									}
								}
							}
						}
						province_event = { id = DG_Protestant.105 }
					}
				}
				 5 = {
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.50 typeIncr = value }
					MN_Attribute_Effect = { reltype = value religion = 2 typeEffect = Preach typeStrength = value strength = 1 }
					if = {
						limit = {
							owner = {
								OR = {
									NOT = { has_country_flag = protestant_presence }
									AND = {
										has_country_flag = protestant_presence
										has_country_flag = pro_spread_info
									}
								}
							}
						}
						province_event = { id = DG_Protestant.106 }
					}
				}
				 5 = {
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.25 typeIncr = value }
					MN_Attribute_Effect = { reltype = value religion = 2 typeEffect = Preach typeStrength = value strength = 1 }
					if = {
						limit = {
							owner = {
								OR = {
									NOT = { has_country_flag = protestant_presence }
									AND = {
										has_country_flag = protestant_presence
										has_country_flag = pro_spread_info
									}
								}
							}
						}
						province_event = { id = DG_Protestant.106 }
					}
				}
				 5 = {
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.10 typeIncr = value }
					MN_Attribute_Effect = { reltype = value religion = 2 typeEffect = Preach typeStrength = value strength = 1 }
					if = {
						limit = {
							owner = {
								OR = {
									NOT = { has_country_flag = protestant_presence }
									AND = {
										has_country_flag = protestant_presence
										has_country_flag = pro_spread_info
									}
								}
							}
						}
						province_event = { id = DG_Protestant.107 }
					}
				}
				 5 = {
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.05 typeIncr = value }
					MN_Attribute_Effect = { reltype = value religion = 2 typeEffect = Preach typeStrength = value strength = 1 }
					if = {
						limit = {
							owner = {
								OR = {
									NOT = { has_country_flag = protestant_presence }
									AND = {
										has_country_flag = protestant_presence
										has_country_flag = pro_spread_info
									}
								}
							}
						}
						province_event = { id = DG_Protestant.108 }
					}
				}
			}
			MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
		}
	}
}

province_event = {
	id = DG_Protestant.103
	title = "DG_Protestant.101.title"
	desc = {
		trigger = {
			NOT = { owner = { has_country_flag = protestant_presence } }
			NOT = { PAP = { has_country_flag = PAP_condemn_02 } }
		}
		desc = "DG_Protestant.103.des1"
	}
	desc = {
		trigger = {
			NOT = { owner = { has_country_flag = protestant_presence } }
			PAP = { has_country_flag = PAP_condemn_02 }
		}
		desc = "DG_Protestant.103.des2"
	}
	desc = {
		trigger = {
			owner = { has_country_flag = protestant_presence }
		}
		desc = "DG_Protestant.103.des3"
	}
	picture = all_church_state

	is_triggered_only = yes #triggered by DG_Protestant.101
	
	immediate = {
	}
	
	option = {
		name = "DG_Protestant.001.opta" #Support him
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = support_02
				add_opinion = { who = PAP modifier = papacy_bad }
				MN_conv_resist_c = { strength = -10 }
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.optb" #Let him speak
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = accept_02
				MN_conv_resist_c = { strength = -5 }
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.optc" #Silence him
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = silence_02
				add_opinion = { who = PAP modifier = papacy_good }
				MN_conv_resist_c = { strength = 10 }
			}
		}
	}
	
	option = {
		name = "OPT.ISEE"
		trigger = {
			owner = { has_country_flag = protestant_presence }
		}
	}
	
	after = {
		owner = {
			if = {
				limit = { NOT = { has_country_flag = protestant_presence } }
				hidden_effect = {
					country_event = { id = DG_Protestant.002 }
				}
			}
		}
	}
}

province_event = {
	id = DG_Protestant.104
	title = "DG_Protestant.101.title"
	desc = {
		trigger = {
			NOT = { owner = { has_country_flag = protestant_presence } }
			NOT = { owner = { has_country_flag = PAP_condemn_02 } }
		}
		desc = "DG_Protestant.104.des1"
	}
	desc = {
		trigger = {
			NOT = { owner = { has_country_flag = protestant_presence } }
			owner = { has_country_flag = PAP_condemn_02 }
		}
		desc = "DG_Protestant.104.des2"
	}
	desc = {
		trigger = {
			owner = { has_country_flag = protestant_presence }
		}
		desc = "DG_Protestant.104.des3"
	}
	picture = all_church_state

	is_triggered_only = yes #triggered by DG_Protestant.101
	trigger = { is_religion_enabled = protestant }

	immediate = {
	}
	
	option = {
		name = "DG_Protestant.001.opta" #Support him
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = support_02
				add_opinion = { who = PAP modifier = papacy_bad }
				MN_conv_resist_c = { strength = -10 }
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.optb" #Let him speak
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = accept_02
				MN_conv_resist_c = { strength = -5 }
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.optc" #Silence him
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = silence_02
				add_opinion = { who = PAP modifier = papacy_good }
				MN_conv_resist_c = { strength = 10 }
			}
		}
	}
	
	option = {
		name = "OPT.ISEE"
		trigger = {
			owner = { has_country_flag = protestant_presence }
		}
	}
	
	after = {
		owner = {
			if = {
				limit = { NOT = { has_country_flag = protestant_presence } }
				hidden_effect = {
					country_event = { id = DG_Protestant.002 }
				}
			}
		}
	}
}

province_event = {
	id = DG_Protestant.105
	title = "DG_Protestant.101.title"
	desc = {
		trigger = {
			NOT = { owner = { has_country_flag = protestant_presence } }
			NOT = { owner = { has_country_flag = PAP_condemn_02 } }
		}
		desc = "DG_Protestant.105.des1"
	}
	desc = {
		trigger = {
			NOT = { owner = { has_country_flag = protestant_presence } }
			owner = { has_country_flag = PAP_condemn_02 }
		}
		desc = "DG_Protestant.105.des2"
	}
	desc = {
		trigger = {
			owner = { has_country_flag = protestant_presence }
		}
		desc = "DG_Protestant.105.des3"
	}
	picture = all_church_state

	is_triggered_only = yes #triggered by DG_Protestant.101
	
	trigger = { is_religion_enabled = protestant }
	
	immediate = {
	}
	
	option = {
		name = "DG_Protestant.001.opta" #Support him
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = support_02
				add_opinion = { who = PAP modifier = papacy_bad }
				MN_conv_resist_c = { strength = -10 }
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.optb" #Let him speak
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = accept_02
				MN_conv_resist_c = { strength = -5 }
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.optc" #Silence him
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = silence_02
				add_opinion = { who = PAP modifier = papacy_good }
				MN_conv_resist_c = { strength = 10 }
			}
		}
	}
	
	option = {
		name = "OPT.ISEE"
		trigger = {
			owner = { has_country_flag = protestant_presence }
		}
	}
	
	after = {
		owner = {
			if = {
				limit = { NOT = { has_country_flag = protestant_presence } }
				hidden_effect = {
					country_event = { id = DG_Protestant.002 }
				}
			}
		}
	}
}

province_event = {
	id = DG_Protestant.106
	title = "DG_Protestant.101.title"
	desc = {
		trigger = {
			NOT = { owner = { has_country_flag = protestant_presence } }
			NOT = { owner = { has_country_flag = PAP_condemn_02 } }
		}
		desc = "DG_Protestant.106.des1"
	}
	desc = {
		trigger = {
			NOT = { owner = { has_country_flag = protestant_presence } }
			owner = { has_country_flag = PAP_condemn_02 }
		}
		desc = "DG_Protestant.106.des2"
	}
	desc = {
		trigger = {
			owner = { has_country_flag = protestant_presence }
		}
		desc = "DG_Protestant.106.des3"
	}
	picture = all_church_state

	is_triggered_only = yes #triggered by DG_Protestant.101
	
	immediate = {
	}
	
	option = {
		name = "DG_Protestant.001.opta" #Support him
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = support_02
				add_opinion = { who = PAP modifier = papacy_bad }
				MN_conv_resist_c = { strength = -10 }
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.optb" #Let him speak
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = accept_02
				MN_conv_resist_c = { strength = -5 }
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.optc" #Silence him
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = silence_02
				add_opinion = { who = PAP modifier = papacy_good }
				MN_conv_resist_c = { strength = 10 }
			}
		}
	}
	
	option = {
		name = "OPT.ISEE"
		trigger = {
			owner = { has_country_flag = protestant_presence }
		}
	}
	
	after = {
		owner = {
			if = {
				limit = { NOT = { has_country_flag = protestant_presence } }
				hidden_effect = {
					country_event = { id = DG_Protestant.002 }
				}
			}
		}
	}
}

province_event = {
	id = DG_Protestant.107
	title = "DG_Protestant.101.title"
	desc = {
		trigger = {
			NOT = { owner = { has_country_flag = protestant_presence } }
			NOT = { owner = { has_country_flag = PAP_condemn_02 } }
		}
		desc = "DG_Protestant.107.des1"
	}
	desc = {
		trigger = {
			NOT = { owner = { has_country_flag = protestant_presence } }
			owner = { has_country_flag = PAP_condemn_02 }
		}
		desc = "DG_Protestant.107.des2"
	}
	desc = {
		trigger = {
			owner = { has_country_flag = protestant_presence }
		}
		desc = "DG_Protestant.107.des3"
	}
	picture = all_church_state

	is_triggered_only = yes #triggered by DG_Protestant.101
	
	immediate = {
	}
	
	option = {
		name = "DG_Protestant.001.opta" #Support him
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = support_02
				add_opinion = { who = PAP modifier = papacy_bad }
				MN_conv_resist_c = { strength = -10 }
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.optb" #Let him speak
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = accept_02
				MN_conv_resist_c = { strength = -5 }
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.optc" #Silence him
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = silence_02
				add_opinion = { who = PAP modifier = papacy_good }
				MN_conv_resist_c = { strength = 10 }
			}
		}
	}
	
	option = {
		name = "OPT.ISEE"
		trigger = {
			owner = { has_country_flag = protestant_presence }
		}
	}
	
	after = {
		owner = {
			if = {
				limit = { NOT = { has_country_flag = protestant_presence } }
				hidden_effect = {
					country_event = { id = DG_Protestant.002 }
				}
			}
		}
	}
}

province_event = {
	id = DG_Protestant.108
	title = "DG_Protestant.101.title"
	desc = {
		trigger = {
			NOT = { owner = { has_country_flag = protestant_presence } }
			NOT = { owner = { has_country_flag = PAP_condemn_02 } }
		}
		desc = "DG_Protestant.108.des1"
	}
	desc = {
		trigger = {
			NOT = { owner = { has_country_flag = protestant_presence } }
			owner = { has_country_flag = PAP_condemn_02 }
		}
		desc = "DG_Protestant.108.des2"
	}
	desc = {
		trigger = {
			owner = { has_country_flag = protestant_presence }
		}
		desc = "DG_Protestant.108.des3"
	}
	picture = all_church_state

	is_triggered_only = yes #triggered by DG_Protestant.101
	
	immediate = {
	}
	
	option = {
		name = "DG_Protestant.001.opta" #Support him
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = support_02
				add_opinion = { who = PAP modifier = papacy_bad }
				MN_conv_resist_c = { strength = -10 }
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.optb" #Let him speak
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = accept_02
				MN_conv_resist_c = { strength = -5 }
			}
		}
	}
	
	option = {
		name = "DG_Protestant.001.optc" #Silence him
		trigger = {
			NOT = {
				owner = { has_country_flag = protestant_presence }
			}
		}
		hidden_effect = {
			owner = {
				set_country_flag = silence_02
				add_opinion = { who = PAP modifier = papacy_good }
				MN_conv_resist_c = { strength = 10 }
			}
		}
	}
	
	option = {
		name = "OPT.ISEE"
		trigger = {
			owner = { has_country_flag = protestant_presence }
		}
	}
	
	after = {
		owner = {
			if = {
				limit = { NOT = { has_country_flag = protestant_presence } }
				hidden_effect = {
					country_event = { id = DG_Protestant.002 }
				}
			}
		}
	}
}

country_event = {
	id = DG_Protestant.111
	title = "DG_Protestant.111.title"
	desc = "DG_Protestant.111.desc"
	picture = all_church_state

	hidden = yes
	
	trigger = {
		has_global_flag = DG_Lutheran_Spawn
		NOT = { has_global_flag = DG_Small_Lutheranism }
		NOT = { religion_years = { protestant = 50 } }
		western_christian = yes
	}

	mean_time_to_happen = {
		years = 25
		modifier = {
			factor = 0.20
			has_global_flag = DG_Large_Lutheranism
		}
		modifier = {
			factor = 0.75
			NOT = { stability = -2 }
		}
		modifier = {
			factor = 0.75
			NOT = { stability = -1 }
		}
		modifier = {
			factor = 0.75
			NOT = { stability = 0 }
		}
		modifier = {
			factor = 1.50
			stability = 1
		}
		modifier = {
			factor = 1.50
			stability = 2
		}
		modifier = {
			factor = 1.50
			stability = 3
		}
		modifier = {
			factor = 0.75
			has_country_flag = support_02
		}
		modifier = {
			factor = 1.25
			has_country_flag = silence_02
		}
		modifier = {
			factor = 1.50
			had_country_flag = { flag = protestant_presence days = 3650 }
		}
		modifier = {
			factor = 2.00
			had_country_flag = { flag = protestant_presence days = 7300 }
		}
		modifier = {
			factor = 3.00
			had_country_flag = { flag = protestant_presence days = 18250 }
		}
		modifier = {
			factor = 5.00
			had_country_flag = { flag = protestant_presence days = 36500 }
		}
	}
	
	immediate = {
		#log = "DG:[GetYear]:[This.aab.GetValue]:Lutheran:Spread:[This.GetName]:[This.Owner.GetName]"
	}

	option = {
		name = "EVT_AI"
		hidden_effect = {
			if = {
				limit = { has_country_flag = support_02 }
				every_owned_province = {
					set_key = { lhs = Heresy_Scalar value = 0 }
					if = {
						limit = { culture_group = owner }
						random_list = {
							40 = { set_key = { lhs = Heresy_Scalar value = 0.10 } }
							30 = { set_key = { lhs = Heresy_Scalar value = 0.15 } }
							20 = { set_key = { lhs = Heresy_Scalar value = 0.20 } }
							10 = { set_key = { lhs = Heresy_Scalar value = 0.25 } }
							1 = { set_key = { lhs = Heresy_Scalar value = 0.30 } }
						}
					}
					else = {
						random_list = {
							40 = { }
							30 = { set_key = { lhs = Heresy_Scalar value = 0.05 } }
							20 = { set_key = { lhs = Heresy_Scalar value = 0.10 } }
							10 = { set_key = { lhs = Heresy_Scalar value = 0.15 } }
							1 = { set_key = { lhs = Heresy_Scalar value = 0.20 } }
						}
					}
					if = {
						limit = {
							check_key = { lhs = Heresy_Scalar value = 0.05 }
						}
						MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = Heresy_Scalar typeIncr = which }
					}
					set_key = { lhs = Heresy_Scalar value = 0 }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
			else_if = {
				limit = { has_country_flag = accept_02 }
				every_owned_province = {
					set_key = { lhs = Heresy_Scalar value = 0 }
					random_list = {
						40 = { set_key = { lhs = Heresy_Scalar value = 0.05 } }
						30 = { set_key = { lhs = Heresy_Scalar value = 0.10 } }
						20 = { set_key = { lhs = Heresy_Scalar value = 0.15 } }
						10 = { set_key = { lhs = Heresy_Scalar value = 0.20 } }
						1 = { set_key = { lhs = Heresy_Scalar value = 0.25 } }
					}
					if = {
						limit = {
							check_key = { lhs = Heresy_Scalar value = 0.05 }
						}
						MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = Heresy_Scalar typeIncr = which }
					}
					set_key = { lhs = Heresy_Scalar value = 0 }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
			else_if = {
				limit = { has_country_flag = silence_02 }
				every_owned_province = {
					set_key = { lhs = Heresy_Scalar value = 0 }
					if = {
						limit = { culture_group = owner }
						random_list = {
							40 = { }
							30 = { set_key = { lhs = Heresy_Scalar value = 0.05 } }
							20 = { set_key = { lhs = Heresy_Scalar value = 0.10 } }
							10 = { set_key = { lhs = Heresy_Scalar value = 0.15 } }
							1 = { set_key = { lhs = Heresy_Scalar value = 0.20 } }
						}
					}
					else = {
						random_list = {
							40 = { set_key = { lhs = Heresy_Scalar value = 0.10 } }
							30 = { set_key = { lhs = Heresy_Scalar value = 0.15 } }
							20 = { set_key = { lhs = Heresy_Scalar value = 0.20 } }
							10 = { set_key = { lhs = Heresy_Scalar value = 0.25 } }
							1 = { set_key = { lhs = Heresy_Scalar value = 0.30 } }
						}
					}
					if = {
						limit = {
							check_key = { lhs = Heresy_Scalar value = 0.05 }
						}
						MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = Heresy_Scalar typeIncr = which }
					}
					set_key = { lhs = Heresy_Scalar value = 0 }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
		}
	}
#	after = {
#		province_event = { id = DG_Protestant.112 }
#	}
}

province_event = {
	id = DG_Protestant.112
	title = "DG_Protestant.111.title"
	desc = {
		trigger = {
			has_province_flag = ConversionNotification05perc
		}
		desc = DG_Protestant.112.desc05
	}
	desc = {
		trigger = {
			has_province_flag = ConversionNotification10perc
		}
		desc = DG_Protestant.112.desc10
	}
	desc = {
		trigger = {
			has_province_flag = ConversionNotification15perc
		}
		desc = DG_Protestant.112.desc15
	}
	desc = {
		trigger = {
			has_province_flag = ConversionNotification20perc
		}
		desc = DG_Protestant.112.desc20
	}
	desc = {
		trigger = {
			has_province_flag = ConversionNotification25perc
		}
		desc = DG_Protestant.112.desc25
	}
	desc = {
		trigger = {
			has_province_flag = ConversionNotification30perc
		}
		desc = DG_Protestant.112.desc30
	}

	picture = all_church_state

	is_triggered_only = yes #triggered by DG_Protestant.101
	
	immediate = {
	}

	option = {
		name = "OPT.HERETICSCUM"
		goto = ROOT
	}

	after = {
		ConversionNotificationCleanup = yes
	}
}

#Spawn a center of reformation
province_event = {
	id = DG_Protestant.118
	title = "DG_Protestant.118.title"
	desc = "DG_Protestant.118.desc"
	picture = ANGLICAN_SERMON_eventPicture
	
	#major = yes
	
	trigger = {
		#always = no
		#has_province_flag = pro_craddle
		is_religion_enabled = protestant
		has_province_flag = printing_press_p
		owner = { reform_desire = 1.00 }
		NOT = { religion_years = { protestant = 50 } }
		can_have_center_of_reformation_trigger = {
			CenterReligion = protestant
		}
	}
	mean_time_to_happen = {
		years = 5
		modifier = {
			factor = 0.5
			has_province_flag = pro_craddle
		}
		modifier = {
			factor = 1.75
			superregion = france_superregion
		}
		modifier = {
			factor = 2.50
			superregion = italy_superregion
		}
		modifier = {
			factor = 2.50
			superregion = iberia_superregion
		}
		modifier = {
			factor = 0.75
			superregion = germany_superregion
		}
		modifier = {
			factor = 2.70
			superregion = greater_austrian_circle_superregion
		}
		modifier = {
			factor = 2.00
			superregion = balkan_superregion
		}
		modifier = {
			factor = 1.80
			superregion = commonwealth_superregion
		}
		modifier = {
			factor = 0.75
			superregion = scandinavian_superregion
		}
		modifier = {
			factor = 5.0
			owner = { has_country_flag = accept_02 }
		}
		modifier = {
			factor = 10.0
			owner = { has_country_flag = silence_02 }
		}
	}
	
	option = {
		name = "OPT.GOOD"
		trigger = { owner = { religion = protestant } }
		add_reform_center = protestant
		add_or_extend_province_modifier_hidden_effect = { NAME = religious_enthusiasm DURATION = 3650 }
	}
	
	option = {
		name = "OPT.DAMN"
		trigger = { owner = { NOT = { religion = protestant } } }
		add_reform_center = protestant
		add_or_extend_province_modifier_hidden_effect = { NAME = heretic_centre DURATION = 3650 }
	}
}

#Removes center of reformation
province_event = {
	id = DG_Protestant.119
	title = "DG_Protestant.119.title"
	desc = "DG_Protestant.119.desc"
	picture = ANGLICAN_SERMON_eventPicture
	
	mean_time_to_happen = {
		months = 1
	}
	
	trigger = {
		religion = protestant
		is_reformation_center = yes
		Academia = 100
	}
	
	option = {
		name = "OPT.NOTED"
		remove_reform_center = protestant
	}
}

#Church of $COUNTRY$
country_event = { 
	
	id = DG_Protestant.120
	title = DG_Protestant.120.title
	desc = DG_Protestant.120.desc
	picture = protestant_state_church
	
	trigger = {
		is_religion_enabled = protestant
		religion_years = { protestant = 5 }
		NOT = { religion_years = { protestant = 60 } }
		NOT = { has_country_flag = reaction_to_reformation }
		is_colonial_nation = no
		religion = catholic
		NOT = { tag = PAP }
		OR = {
			#Spreads from one country to another
			any_neighbor_country = {
				OR = {
					religion = lollard
					religion = hussite
					religion = protestant
					religion = reformed
				}
			}
			#If the first country with the reformation is conquered immediately, it will still continue (more slowly)
			any_owned_province = { has_province_flag = lol_craddle }
			any_owned_province = { has_province_flag = hus_craddle }
			any_owned_province = { has_province_flag = pro_craddle }
			#To allow the Reformation to spread to and from islands (Britain, Ireland, Majorica, Cyprus, etc.)
			any_active_trade_node = {
				strongest_trade_power = {
					OR = {
						religion = lollard
						religion = hussite
						religion = protestant
						religion = reformed
					}
				}
			}
		}
	}
	
	mean_time_to_happen = {
		
		months = 120
		
		modifier = {
			any_owned_province = { has_province_flag = pro_craddle }
			factor = 0.10
		}
		modifier = {
			any_owned_province = { has_province_flag = hus_craddle }
			factor = 0.75
		}
		modifier = {
			any_owned_province = { has_province_flag = lol_craddle }
			factor = 0.90
		}
		modifier = {
			any_known_country = { religion = hussite }
			factor = 0.7
		}
		modifier = {
			any_known_country = { religion = lollard }
			factor = 0.7
		}
		modifier = {
			any_known_country = { religion = protestant }
			factor = 0.7
		}
		modifier = {
			any_known_country = { religion = reformed }
			factor = 0.7
		}
		modifier = {
			NOT = {
				any_neighbor_country = {
					OR = {
						religion = lollard
						religion = hussite
						religion = protestant
						religion = reformed
					}
				}
			}
			factor = 3
		}
	}
	
	immediate = {
		set_country_flag = reaction_to_reformation
	}
	
	option = {
		name = "DG_Protestant.120.opta" #Ban reformer propaganda from $COUNTRY$
		ai_chance = {
			factor = 25
			modifier = {
				has_global_flag = reformation_luther_martyred
				factor = 1.4
			}
			modifier = {
				government = republic
				factor = 2
			}
			modifier = {
				capital_distance = { who = PAP distance = 260 }
				factor = 0.7
			}
			modifier = {
				capital_distance = { who = PAP distance = 390 }
				factor = 0.7
			}
			modifier = {
				NOT = { capital_distance = { who = PAP distance = 130 } }
				factor = 1.4
			}
			modifier = {
				is_excommunicated = yes
				factor = 0.5
			}
			modifier = {
				exists = AVI
				AVI = { papal_trigger = yes }
				factor = 0.5
			}
			modifier = {
				is_papal_controller = yes
				factor = 2
			}
			modifier = {
				any_neighbor_country = { NOT = { religion_group = christian } }
				factor = 2
			}
			#modifier = {
			#	any_neighbor_country = { MN_CheckRelSlot = { Type = value Religion = orthodox } }
			#	factor = 1.4
			#}
			modifier = {
				any_neighbor_country = { MN_CheckRelSlot = { Type = value Religion = 2 } }
				factor = 1.4
			}
			modifier = {
				any_neighbor_country = { MN_CheckRelSlot = { Type = value Religion = 3 } }
				factor = 1.4
			}
			modifier = {
				any_neighbor_country = { MN_CheckRelSlot = { Type = value Religion = 4 } }
				factor = 1.4
			}
			modifier = {
				any_neighbor_country = { MN_CheckRelSlot = { Type = value Religion = 5 } }
				factor = 1.4
			}
			modifier = {
				any_neighbor_country = { MN_CheckRelSlot = { Type = value Religion = 6 } }
				factor = 1.4
			}
			modifier = {
				NOT = { capital_distance = { who = PAP distance = 130 } }
				factor = 2
			}
			modifier = {
				capital_distance = { who = PAP distance = 230 }
				factor = 0.7
			}
			modifier = {
				capital_distance = { who = PAP distance = 390 }
				factor = 0.7
			}
			modifier = {
				num_of_owned_provinces_with = {
					has_cardinal = yes
					value = 3
				}
				factor = 1.4
			}
			modifier = {
				num_of_owned_provinces_with = {
					has_cardinal = yes
					value = 6
				}
				factor = 1.4
			}
			modifier = {
				OR = {
					is_elector = yes
					is_emperor = yes
				}
				factor = 2
			}
		}
		#custom_tooltip = reformed_10
		hidden_effect = {
			every_owned_province = {
				limit = { religion = catholic }
				random = {
					chance = 70
					MN_HeresySpread = { typefrom = which from = MN_S0 to = 2 incr = 0.05 typeIncr = value }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
			every_owned_province = {
				limit = { event_target:pro_origins = { culture_group = PREV } religion = catholic }
				random = {
					chance = 30
					MN_HeresySpread = { typefrom = which from = MN_S0 to = 2 incr = 0.05 typeIncr = value }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
		}
		if = {
			limit = {
				piety = 0.60
				stability = 3
			}
			add_prestige = 12
		}
		else_if = {
			limit = { piety = 0.20 }
			add_prestige = 9
		}
		else_if = {
			limit = { piety = -0.20 }
			add_prestige = 6
		}
		else_if = {
			limit = { piety = -0.60 }
			add_prestige = 3
		}
		add_country_modifier = { name = religious_intolerance duration = 6000 }
	}
	option = {
		name = "DG_Protestant.120.optb" #Demand concessions from the church
		trigger = {
			ADM = 4
			government = monarchy
		}
		ai_chance = {
			factor = 20
			#big countries should choose extreme options to avoid the AI changing its mind
			modifier = {
				capital_distance = { who = PAP distance = 260 }
				factor = 0.7
			}
			modifier = {
				capital_distance = { who = PAP distance = 390 }
				factor = 0.7
			}
			modifier = {
				NOT = { capital_distance = { who = PAP distance = 130 } }
				factor = 1.4
			}
			modifier = {
				num_of_cities = 5
				factor = 0.7
			}
			modifier = {
				num_of_cities = 10
				factor = 0.7
			}
			modifier = {
				num_of_cities = 20
				factor = 0.7
			}
			modifier = {
				num_of_cities = 40
				factor = 0.7
			}
			modifier = {
				num_of_cities = 80
				factor = 0.7
			}
			modifier = {
				num_of_loans = 1
				factor = 1.4
			}
			modifier = {
				num_of_loans = 2
				factor = 1.4
			}
			modifier = {
				any_neighbor_country = { NOT = { religion_group = christian } }
				factor = 2
			}
			modifier = {
				any_neighbor_country = { NOT = { western_christian = yes } }
				factor = 2
			}
			modifier = {
				any_known_country = { western_christian = yes NOT = { religion = catholic } }
				factor = 1.4
			}
			modifier = {
				NOT = { capital_distance = { who = PAP distance = 130 } }
				factor = 0.5
			}
			modifier = {
				capital_distance = { who = PAP distance = 230 }
				factor = 1.4
			}
			modifier = {
				capital_distance = { who = PAP distance = 390 }
				factor = 1.4
			}
		}
		custom_tooltip = protestant_10
		hidden_effect = {
			every_owned_province = {
				limit = { religion = catholic }
				random = {
					chance = 70
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.05 typeIncr = value }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
			every_owned_province = {
				limit = { event_target:pro_origins = { culture_group = PREV } religion = catholic }
				random = {
					chance = 30
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.05 typeIncr = value }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
		}
	}
	option = {
		name = DG_Protestant.120.optc #Allow nobles to choose their own faith
		trigger = {
			NOT = { ADM = 4 }
			NOT = { government = theocracy }
		}
		ai_chance = {
			factor = 10
			modifier = {
				capital_distance = { who = PAP distance = 260 }
				factor = 1.4
			}
			modifier = {
				capital_distance = { who = PAP distance = 390 }
				factor = 1.4
			}
			modifier = {
				NOT = { capital_distance = { who = PAP distance = 130 } }
				factor = 0.7
			}
			#big countries should choose extreme options to avoid the AI changing its mind
			modifier = {
				num_of_cities = 5
				factor = 0.7
			}
			modifier = {
				num_of_cities = 10
				factor = 0.7
			}
			modifier = {
				num_of_cities = 20
				factor = 0.7
			}
			modifier = {
				num_of_cities = 40
				factor = 0.7
			}
			modifier = {
				num_of_cities = 80
				factor = 0.7
			}
			modifier = {
				any_neighbor_country = { NOT = { religion_group = christian } }
				factor = 2
			}
			modifier = {
				any_neighbor_country = { NOT = { western_christian = yes } }
				factor = 2
			}
			modifier = {
				any_known_country = { western_christian = yes NOT = { religion = catholic } }
				factor = 1.4
			}
			modifier = {
				factor = 0
				is_elector = yes
				government = theocracy
			}
			#modifier = {
			#	any_neighbor_country = { MN_CheckRelSlot = { Type = value Religion = orthodox } }
			#	factor = 1.4
			#}
			modifier = {
				any_neighbor_country = { MN_CheckRelSlot = { Type = value Religion = 2 } }
				factor = 1.4
			}
			modifier = {
				any_neighbor_country = { MN_CheckRelSlot = { Type = value Religion = 3 } }
				factor = 1.4
			}
			modifier = {
				any_neighbor_country = { MN_CheckRelSlot = { Type = value Religion = 4 } }
				factor = 1.4
			}
			modifier = {
				any_neighbor_country = { MN_CheckRelSlot = { Type = value Religion = 5 } }
				factor = 1.4
			}
			modifier = {
				any_neighbor_country = { MN_CheckRelSlot = { Type = value Religion = 6 } }
				factor = 1.4
			}
			modifier = {
				NOT = { religious_unity = 0.80 }
				factor = 1.4
			}
			modifier = {
				NOT = { religious_unity = 0.60 }
				factor = 1.4
			}
			modifier = {
				NOT = { religious_unity = 0.40 }
				factor = 1.4
			}
			modifier = {
				NOT = { religious_unity = 0.20 }
				factor = 1.4
			}
			modifier = {
				any_neighbor_country = { NOT = { religion = catholic } }
				factor = 1.4
			}
		}
		#custom_tooltip = reformed_20
		#custom_tooltip = protestant_20
		hidden_effect = {
			every_owned_province = {
				limit = { religion = catholic }
				random = {
					chance = 70
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.15 typeIncr = value }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
			every_owned_province = {
				limit = { event_target:pro_origins = { culture_group = PREV } religion = catholic }
				random = {
					chance = 30
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.10 typeIncr = value }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
			custom_tooltip = cannot_expel
			add_country_modifier = { name = religious_tolerance duration = 6000 }
			if = {
				limit = { piety = 0.20 }
				Stab_Add2 = yes
			}
		}
	}
	option = {
		name = "DG_Protestant.120.optd" #Allow the heresy to be openly taught
		ai_chance = {
			factor = 25
			modifier = {
				capital_distance = { who = PAP distance = 260 }
				factor = 2
			}
			modifier = {
				capital_distance = { who = PAP distance = 390 }
				factor = 2
			}
			modifier = {
				NOT = { capital_distance = { who = PAP distance = 130 } }
				factor = 0.5
			}
			modifier = {
				is_lesser_in_union = yes
				any_country = {
					overlord_of = ROOT
					religion = catholic
					OR = {
						has_country_flag = renaissance
						has_country_flag = refused_reformation
					}
				}
				factor = 0
			}
			#big countries should choose extreme options to avoid the AI changing its mind
			modifier = {
				num_of_cities = 5
				factor = 0.7
			}
			modifier = {
				num_of_cities = 10
				factor = 0.7
			}
			modifier = {
				num_of_cities = 20
				factor = 0.7
			}
			modifier = {
				num_of_cities = 40
				factor = 0.7
			}
			modifier = {
				num_of_cities = 80
				factor = 0.7
			}
			modifier = {
				any_known_country = {
					junior_union_with = ROOT
					religion = catholic
				}
				factor = 0.5
			}
			modifier = {
				is_excommunicated = yes
				factor = 0.5
			}
			modifier = {
				exists = AVI
				factor = 2
			}
			modifier = {
				factor = 2
				government = theocracy
			}
			modifier = {
				any_neighbor_country = { NOT = { religion_group = christian } }
				factor = 0.5
			}
			modifier = {
				any_neighbor_country = { NOT = { western_christian = yes } }
				factor = 0.5
			}
			#HRE members who are likely to be elected emperor will not openly convert unless there are Protestant electors
			modifier = {
				OR = {
					is_emperor = yes
					any_known_country = { is_elector = yes preferred_emperor = ROOT }
				}
				NOT = { any_known_country = { is_elector = yes religion = protestant } }
				factor = 0.7
			}
			modifier = {
				OR = {
					culture_group = west_slavic
					primary_culture = polish #M&T not included in west_slavic
					primary_culture = hungarian
				}
				factor = 2
			}
		}
		#custom_tooltip = protestant_20
		hidden_effect = {
			every_owned_province = {
				limit = { religion = catholic }
				random = {
					chance = 70
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.10 typeIncr = value }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
			every_owned_province = {
				limit = { event_target:pro_origins = { culture_group = PREV } religion = catholic }
				random = {
					chance = 30
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.10 typeIncr = value }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
			add_country_modifier = { name = religious_tolerance duration = 6000 }
			Stab_Subtract1 = yes
			custom_tooltip = cannot_expel
		}
	}
	option = {
		name = "DG_Protestant.120.opte" #Take control of the church of $COUNTRY$
		trigger = {
			ADM = 3
			NOT = { num_of_cities = 35 }
			NOT = { government = republic }
			NOT = { is_force_converted = yes }
			is_religion_enabled = protestant
		}
		ai_chance = {
			factor = 15
			modifier = {
				capital_distance = { who = PAP distance = 260 }
				factor = 2
			}
			modifier = {
				capital_distance = { who = PAP distance = 390 }
				factor = 2
			}
			modifier = {
				NOT = { capital_distance = { who = PAP distance = 130 } }
				factor = 0.5
			}
			modifier = {
				is_lesser_in_union = yes
				any_country = {
					overlord_of = ROOT
					religion = catholic
				}
				factor = 0
			}
			modifier = {
				any_neighbor_country = {
					culture_group = ROOT
					religion = protestant
				}
				factor = 1.4
			}
			modifier = {
				NOT = { any_known_country = { religion = protestant } }
				factor = 0.5
			}
			modifier = {
				any_known_country = {
					junior_union_with = ROOT
					religion = catholic
				}
				factor = 0.5
			}
			#HRE members who are likely to be elected emperor will not openly convert unless there are Protestant electors
			modifier = {
				OR = {
					is_emperor = yes
					any_known_country = { is_elector = yes preferred_emperor = ROOT }
				}
				NOT = { any_known_country = { is_elector = yes religion = protestant } }
				factor = 0.2
			}
			modifier = {
				is_excommunicated = yes
				factor = 2
			}
			modifier = {
				exists = AVI
				factor = 2
			}
			modifier = {
				is_papal_controller = yes
				factor = 0.5
			}
			modifier = {
				num_of_loans = 1
				factor = 1.4
			}
			modifier = {
				num_of_loans = 2
				factor = 1.4
			}
			modifier = {
				any_neighbor_country = { NOT = { religion_group = christian } }
				factor = 0.5
			}
			modifier = {
				any_neighbor_country = { NOT = { western_christian = yes } }
				factor = 0.5
			}
			modifier = {
				any_known_country = { western_christian = yes NOT = { religion = catholic } }
				factor = 1.4
			}
			modifier = {
				factor = 0.5
				NOT = { capital_distance = { who = PAP distance = 130 } }
			}
			modifier = {
				factor = 1.4
				capital_distance = { who = PAP distance = 260 }
			}
			modifier = {
				factor = 1.4
				capital_distance = { who = PAP distance = 390 }
			}
			modifier = {
				advisor = theologian_CL
				factor = 1.4
			}
			modifier = {
				ADM = 5
				factor = 1.4
			}
			modifier = {
				dominant_religion = protestant
				factor = 2
			}
			modifier = {
				factor = 0.1
				capital_scope = { superregion = france_superregion } 
			}
			modifier = {
				factor = 0
				capital_scope = { superregion = italy_superregion } 
			}
			modifier = {
				factor = 0
				capital_scope = { superregion = iberia_superregion } 
			}
			modifier = {
				factor = 2.75
				capital_scope = { superregion = germany_superregion }
			}
			modifier = {
				factor = 0
				capital_scope = { superregion = greater_austrian_circle_superregion }
			}
			modifier = {
				factor = 1.1
				capital_scope = { superregion = balkan_superregion }
			}
			modifier = {
				factor = 3.00
				government = theocracy capital_scope = { superregion = commonwealth_superregion }
			}
			modifier = {
				factor = 0.5
				NOT = { government = theocracy  } capital_scope = { superregion = commonwealth_superregion }
			}
			modifier = {
				factor = 2.75
				capital_scope = { superregion = scandinavian_superregion }
			}
		}
		#custom_tooltip = protestant_20
		hidden_effect = {
			every_owned_province = {
				limit = { religion = catholic }
				random = {
					chance = 70
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.10 typeIncr = value }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
			every_owned_province = {
				limit = { event_target:pro_origins = { culture_group = PREV } religion = catholic }
				random = {
					chance = 30
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.10 typeIncr = value }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
			add_country_modifier = { name = religious_intolerance duration = 6000 }
			custom_tooltip = cannot_expel
			capital_scope = {
				custom_tooltip = protestant_50
				MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.10 typeIncr = value }
				MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				add_province_modifier = { name = conversion_tensions duration = 1825 }
			}
			set_country_flag = voluntary_conversion
			if = {
				limit = { NOT = { is_religion_enabled = protestant } }
				custom_tooltip = convert_dangerous_religion
				Stab_Subtract1 = yes
			}
			if = {
				limit = { patriarch_authority = 0.75 }
				custom_tooltip = convert_church_strong
				Stab_Subtract2 = yes
			}
			else_if = {
				limit = { patriarch_authority = 0.50 }
				custom_tooltip = convert_piety_moderate
				Stab_Subtract1 = yes
			}
			else_if = {
				limit = { patriarch_authority = 0.25 }
				custom_tooltip = convert_church_weak
			}
			else = {
				custom_tooltip = convert_church_insignificant
			}
			if = {
				limit = { ADM = 5 }
				if = {
					limit = {
						capital_scope = { religion = protestant }
					}
					custom_tooltip = convert_ruler_strong
					Stab_Add3 = yes
				}
				else = {
					custom_tooltip = convert_ruler_moderate
					Stab_Add2 = yes
				}
			}
			else_if = {
				limit = { ADM = 3 }
				if = {
					limit = {
						capital_scope = { religion = protestant }
					}
					custom_tooltip = convert_ruler_moderate
					Stab_Add2 = yes
				}
				else = {
					custom_tooltip = convert_ruler_weak
					Stab_Add1 = yes
				}
			}
			else = {
				if = {
					limit = {
						capital_scope = { religion = protestant }
					}
					custom_tooltip = convert_ruler_weak
					Stab_Add1 = yes
				}
				else = {
					custom_tooltip = convert_ruler_incompetent
				}
			}
		}
		if = {
			limit = { is_force_converted = no }
			change_religion = protestant
			force_converted = yes
		}
	}
	option = {
		name = "DG_Protestant.120.optf" #Invite a reformer to come to $COUNTRY$
		trigger = {
			NOT = { ADM = 3 }
			is_religion_enabled = protestant
		}
		ai_chance = {
			factor = 20
			modifier = {
				capital_distance = { who = PAP distance = 260 }
				factor = 2
			}
			modifier = {
				capital_distance = { who = PAP distance = 390 }
				factor = 2
			}
			modifier = {
				NOT = { capital_distance = { who = PAP distance = 130 } }
				factor = 0.5
			}
			modifier = {
				is_lesser_in_union = yes
				any_country = {
					overlord_of = ROOT
					religion = catholic
					OR = {
						has_country_flag = renaissance
						has_country_flag = refused_reformation
					}
				}
				factor = 0
			}
			modifier = {
				government = republic #Prefers Reformed
				factor = 0.5
			}
			modifier = {
				any_neighbor_country = {
					culture_group = ROOT
					religion = protestant
				}
				factor = 1.4
			}
			modifier = {
				NOT = { any_known_country = { religion = protestant } }
				factor = 0.5
			}
			modifier = {
				any_known_country = {
					junior_union_with = ROOT
					religion = catholic
				}
				factor = 0.5
			}
			#HRE members who are likely to be elected emperor will not openly convert unless there are Protestant electors
			modifier = {
				OR = {
					is_emperor = yes
					any_known_country = { is_elector = yes preferred_emperor = ROOT }
				}
				NOT = { any_known_country = { is_elector = yes religion = protestant } }
				factor = 0.2
			}
			modifier = {
				is_excommunicated = yes
				factor = 2
			}
			modifier = {
				exists = AVI
				factor = 2
			}
			modifier = {
				is_papal_controller = yes
				factor = 0.5
			}
			modifier = {
				num_of_loans = 1
				factor = 1.4
			}
			modifier = {
				num_of_loans = 2
				factor = 1.4
			}
			modifier = {
				any_neighbor_country = { NOT = { religion_group = christian } }
				factor = 0.5
			}
			modifier = {
				any_neighbor_country = { NOT = { western_christian = yes } }
				factor = 0.5
			}
			modifier = {
				any_known_country = { western_christian = yes NOT = { religion = catholic } }
				factor = 1.4
			}
		}
		custom_tooltip = protestant_20
		hidden_effect = {
			every_owned_province = {
				limit = { religion = catholic }
				random = {
					chance = 70
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.10 typeIncr = value }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
			every_owned_province = {
				limit = { event_target:pro_origins = { culture_group = PREV } religion = catholic }
				random = {
					chance = 30
					MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.20 typeIncr = value }
					MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
				}
			}
			capital_scope = {
				MN_HeresySpread = { typefrom = value from = 1 to = 2 incr = 0.10 typeIncr = value }
				MN_Attribute_Reset = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 100 }
			}
			custom_tooltip = cannot_expel
			Stab_Subtract2 = yes
			define_advisor = { religion = protestant type = theologian_CL discount = yes }
		}
	}
}

province_event = {
	id = DG_Protestant.201
	title = "DG_Protestant.201.title"
	desc = "DG_Protestant.201.desc"
	picture = all_church_state
	
	hidden = yes
	
	trigger = {
		is_religion_enabled = protestant
		owner = { NOT = { religion = protestant } }
		MN_CheckProp = { religion = 2 type = Preach prop = 1 }
	}
	
	mean_time_to_happen = {
		years = 20
		
		modifier = {
			factor = 0.20
			MN_CheckProp = { religion = 2 type = Inquis prop = 0.1 }
		}
	}
		
	option = {
		name = "OPT.EXCELLENT"
		custom_tooltip = protestant_inquisition_tt
		MN_Attribute_Effect = { reltype = value religion = 2 typeEffect = Preach typeStrength = value strength = -1 }
		if = {
			limit = {
				owner = { has_country_flag = pro_inquis_info }
			}
			province_event = { id = DG_Protestant.202 }
		}
	}
}

province_event = {
	id = DG_Protestant.202
	title = "DG_Protestant.201.title"
	desc = "DG_Protestant.201.desc"
	picture = all_church_state
	
	is_triggered_only = yes
		
	option = {
		name = "OPT.EXCELLENT"
	}
}

province_event = {
	id = DG_Protestant.203
	title = "DG_Protestant.203.title"
	desc = "DG_Protestant.203.desc"
	picture = all_church_state

	hidden = yes
	
	trigger = {
		is_religion_enabled = protestant
		owner = { NOT = { religion = protestant } }
		MN_CheckProp = { religion = 2 type = ENT prop = 0.1 }
	}
	
	mean_time_to_happen = {
		years = 50
		
		modifier = {
			factor = 0.20
			MN_CheckProp = { religion = 2 type = Inquis prop = 0.1 }
		}
	}
		
	option = {
		name = "OPT.EXCELLENT"
		MN_Attribute_Effect = { reltype = value religion = 2 typeEffect = ENT typeStrength = value strength = 5 }
		if = {
			limit = {
				owner = { has_country_flag = pro_inquis_info }
			}
			province_event = { id = DG_Protestant.204 }
		}
	}
}

province_event = {
	id = DG_Protestant.204
	title = "DG_Protestant.203.title"
	desc = "DG_Protestant.203.desc"
	picture = all_church_state

	is_triggered_only = yes
		
	option = {
		name = "OPT.EXCELLENT"
	}
}

province_event = {
	id = DG_Protestant.205
	title = "DG_Protestant.205.title"
	desc = "DG_Protestant.205.desc"
	picture = all_church_state

	hidden = yes
	
	trigger = {
		is_religion_enabled = protestant
		owner = { NOT = { religion = protestant } }
		MN_CheckProp = { religion = 2 type = INF prop = 2 }
	}
	
	mean_time_to_happen = {
		years = 25
		
		modifier = {
			factor = 0.20
			MN_CheckProp = { religion = 2 type = Inquis prop = 0.1 }
		}
	}
		
	option = {
		name = "DG_Protestant.205.opta"
		MN_Attribute_Effect = { reltype = value religion = 2 typeEffect = INF typeStrength = value strength = -2 }
		if = {
			limit = {
				owner = { has_country_flag = pro_inquis_info }
			}
			province_event = { id = DG_Protestant.206 }
		}
	}
}

province_event = {
	id = DG_Protestant.206
	title = "DG_Protestant.205.title"
	desc = "DG_Protestant.205.desc"
	picture = all_church_state

	is_triggered_only = yes
		
	option = {
		name = "OPT.EXCELLENT"
	}
}

#Unrest Events
province_event = {
	id = DG_Protestant.301
	title = "DG_Protestant.301.title"
	desc = "DG_Protestant.301.desc"
	picture = all_church_state
	
	hidden = yes
	
	trigger = {
		is_religion_enabled = protestant
		owner = { NOT = { religion = protestant } }
		MN_CheckProp = { religion = 2 type = TotP prop = 10 }
	}
	
	mean_time_to_happen = {
		months = 300
		modifier = {
			factor = 0.90
			MN_CheckProp = { religion = 2 type = TotP prop = 20 }
		}
		modifier = {
			factor = 0.90
			MN_CheckProp = { religion = 2 type = TotP prop = 30 }
		}
		modifier = {
			factor = 0.90
			MN_CheckProp = { religion = 2 type = TotP prop = 40 }
		}
		modifier = {
			factor = 0.90
			MN_CheckProp = { religion = 2 type = TotP prop = 50 }
		}
		modifier = {
			factor = 0.90
			MN_CheckProp = { religion = 2 type = TotP prop = 60 }
		}
		modifier = {
			factor = 0.90
			MN_CheckProp = { religion = 2 type = TotP prop = 70 }
		}
		modifier = {
			factor = 0.90
			MN_CheckProp = { religion = 2 type = TotP prop = 80 }
		}
		modifier = {
			factor = 0.90
			MN_CheckProp = { religion = 2 type = TotP prop = 90 }
		}
		modifier = {
			factor = 2.00
			owner = { has_country_flag = support_02 }
		}
		modifier = {
			factor = 0.75
			owner = { has_country_flag = silence_02 }
		}
	}
	
	immediate = {
		#log = "DG:[GetYear]:[This.aab.GetValue]:Lutheran:Uprising:[This.GetName]:[This.Owner.GetName]"
	}
	
	option = {
		random_list = {
			10 = {
				MinorityTrauma = { religion = 2 strength = 0.10 }
				if = {
					limit = {
						owner = { has_country_flag = pro_unrest_info }
					}
					set_province_flag = mn_trauma_10 
				}
			}
			10 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 15 }
					}
					MinorityTrauma = { religion = 2 strength = 0.20 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_trauma_20 
					}
				}
			}
			10 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 30 }
					}
					MinorityTrauma = { religion = 2 strength = 0.30 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_trauma_30 
					}
				}
			}
			10 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 40 }
					}
					MinorityTrauma = { religion = 2 strength = 0.40 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_trauma_40 
					}
				}
			}
			20 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 50 }
					}
					MinorityTrauma = { religion = 2 strength = 0.50 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_trauma_50 
					}
				}
			}
			10 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 60 }
					}
					MinorityTrauma = { religion = 2 strength = 0.60 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_trauma_60 
					}
				}
			}
			10 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 70 }
					}
					MinorityTrauma = { religion = 2 strength = 0.70 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_trauma_70 
					}
				}
			}
			10 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 80 }
					}
					MinorityTrauma = { religion = 2 strength = 0.80 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_trauma_80 
					}
				}
			}
			10 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 90 }
					}
					MinorityTrauma = { religion = 2 strength = 0.90 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_trauma_90 
					}
				}
			}
		}
		if = {
			limit = {
				owner = { has_country_flag = pro_unrest_info }
			}
			province_event = { id = DG_Protestant.302 }
		}
	}
}

province_event = {
	id = DG_Protestant.302
	title = "DG_Protestant.301.title"
	desc = "DG_Protestant.301.desc"
	picture = all_church_state
	
	is_triggered_only = yes
	
	option = {
		name = "OPT.OHNO"
		trigger_switch = {
			on_trigger = has_province_flag

			mn_trauma_10 =	{ custom_tooltip = mn_trauma_10_tt }
			mn_trauma_20 =	{ custom_tooltip = mn_trauma_20_tt }
			mn_trauma_30 =	{ custom_tooltip = mn_trauma_30_tt }
			mn_trauma_40 =	{ custom_tooltip = mn_trauma_40_tt }
			mn_trauma_50 =	{ custom_tooltip = mn_trauma_50_tt }
			mn_trauma_60 =	{ custom_tooltip = mn_trauma_60_tt } 
			mn_trauma_70 =	{ custom_tooltip = mn_trauma_70_tt }
			mn_trauma_80 =	{ custom_tooltip = mn_trauma_80_tt }
			mn_trauma_90 =	{ custom_tooltip = mn_trauma_90_tt }
		}
	}
	after = {
		hidden_effect = {
			TraumaNotificationCleanup = yes
		}
	}
}

province_event = {
	id = DG_Protestant.311
	title = "DG_Protestant.311.title"
	desc = "DG_Protestant.311.desc"
	picture = all_church_state
	
	hidden = yes
	
	trigger = {
		is_religion_enabled = protestant
		owner = { NOT = { religion = protestant } }
		MN_CheckProp = { religion = 2 type = TotP prop = 10 }
	}
	
	mean_time_to_happen = {
		months = 300
		modifier = {
			factor = 0.90
			MN_CheckProp = { religion = 2 type = TotP prop = 20 }
		}
		modifier = {
			factor = 0.90
			MN_CheckProp = { religion = 2 type = TotP prop = 30 }
		}
		modifier = {
			factor = 0.90
			MN_CheckProp = { religion = 2 type = TotP prop = 40 }
		}
		modifier = {
			factor = 0.90
			MN_CheckProp = { religion = 2 type = TotP prop = 50 }
		}
		modifier = {
			factor = 0.90
			MN_CheckProp = { religion = 2 type = TotP prop = 60 }
		}
		modifier = {
			factor = 0.90
			MN_CheckProp = { religion = 2 type = TotP prop = 70 }
		}
		modifier = {
			factor = 0.90
			MN_CheckProp = { religion = 2 type = TotP prop = 80 }
		}
		modifier = {
			factor = 0.90
			MN_CheckProp = { religion = 2 type = TotP prop = 90 }
		}
		modifier = {
			factor = 2.00
			owner = { has_country_flag = support_02 }
		}
		modifier = {
			factor = 0.75
			owner = { has_country_flag = silence_02 }
		}
	}
	
	immediate = {
		#log = "DG:[GetYear]:[This.aab.GetValue]:Lutheran:Unrest:[This.GetName]:[This.Owner.GetName]"
	}
	
	option = {
		random_list = {
			5 = {
				add_or_extend_province_modifier_hidden_effect = { NAME = MN_min_U.16 DURATION = 365 }
				if = {
					limit = {
						owner = { has_country_flag = pro_unrest_info }
					}
					set_province_flag = mn_unrest_min_1
				}
			}
			10 = {
				add_or_extend_province_modifier_hidden_effect = { NAME = MN_min_U.16 DURATION = 1825 }
				if = {
					limit = {
						owner = { has_country_flag = pro_unrest_info }
					}
					set_province_flag = mn_unrest_min_5
				}
			}
			5 = {
				add_or_extend_province_modifier_hidden_effect = { NAME = MN_min_U.16 DURATION = 3650 }
				if = {
					limit = {
						owner = { has_country_flag = pro_unrest_info }
					}
					set_province_flag = mn_unrest_min_10
				}
			}
			10 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 20 }
					}
					add_or_extend_province_modifier_hidden_effect = { NAME = MN_low_U.16 DURATION = 365 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_unrest_low_1
					}
				}
			}
			15 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 20 }
					}
					add_or_extend_province_modifier_hidden_effect = { NAME = MN_low_U.16 DURATION = 1825 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_unrest_low_5
					}
				}
			}
			10 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 20 }
					}
					add_or_extend_province_modifier_hidden_effect = { NAME = MN_low_U.16 DURATION = 3650 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_unrest_low_10
					}
				}
			}
			15 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 40 }
					}
					add_or_extend_province_modifier_hidden_effect = { NAME = MN_mid_U.16 DURATION = 365 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_unrest_mid_1
					}
				}
			}
			20 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 40 }
					}
					add_or_extend_province_modifier_hidden_effect = { NAME = MN_mid_U.16 DURATION = 1825 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_unrest_mid_5
					}
				}
			}
			15 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 40 }
					}
					add_or_extend_province_modifier_hidden_effect = { NAME = MN_mid_U.16 DURATION = 3650 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_unrest_mid_10
					}
				}
			}
			10 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 60 }
					}
					add_or_extend_province_modifier_hidden_effect = { NAME = MN_imp_U.02 DURATION = 365 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_unrest_imp_1
					}
				}
			}
			15 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 60 }
					}
					add_or_extend_province_modifier_hidden_effect = { NAME = MN_imp_U.02 DURATION = 1825 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_unrest_imp_5
					}
				}
			}
			10 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 60 }
					}
					add_or_extend_province_modifier_hidden_effect = { NAME = MN_imp_U.02 DURATION = 3650 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_unrest_imp_10
					}
				}
			}
			5 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 80 }
					}
					add_or_extend_province_modifier_hidden_effect = { NAME = MN_max_U.16 DURATION = 365 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_unrest_max_1
					}
				}
			}
			10 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 80 }
					}
					add_or_extend_province_modifier_hidden_effect = { NAME = MN_max_U.16 DURATION = 1825 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_unrest_max_5
					}
				}
			}
			5 = {
				if = {
					limit = {
						MN_CheckProp = { religion = 2 type = TotP prop = 80 }
					}
					add_or_extend_province_modifier_hidden_effect = { NAME = MN_max_U.16 DURATION = 3650 }
					if = {
						limit = {
							owner = { has_country_flag = pro_unrest_info }
						}
						set_province_flag = mn_unrest_max_10
					}
				}
			}
		}
		if = {
			limit = {
				owner = { has_country_flag = pro_unrest_info }
			}
			province_event = { id = DG_Protestant.312 }
		}
	}
}

province_event = {
	id = DG_Protestant.312
	title = "DG_Protestant.311.title"
	desc = "DG_Protestant.311.desc"
	picture = all_church_state
	
	is_triggered_only = yes
	
	option = {
		name = "OPT.OHNO"
		trigger_switch = {
			on_trigger = has_province_flag

			mn_unrest_min_1 =	{ custom_tooltip = mn_unrest_min_1_tt }
			mn_unrest_min_5 =	{ custom_tooltip = mn_unrest_min_2_tt }
			mn_unrest_min_10 =	{ custom_tooltip = mn_unrest_min_3_tt }
			mn_unrest_low_1 =	{ custom_tooltip = mn_unrest_low_1_tt }
			mn_unrest_low_5 =	{ custom_tooltip = mn_unrest_low_2_tt }
			mn_unrest_low_10 =	{ custom_tooltip = mn_unrest_low_3_tt } 
			mn_unrest_mid_1 =	{ custom_tooltip = mn_unrest_mid_1_tt }
			mn_unrest_mid_5 =	{ custom_tooltip = mn_unrest_mid_2_tt }
			mn_unrest_mid_10 =	{ custom_tooltip = mn_unrest_mid_3_tt }
			mn_unrest_imp_1 =	{ custom_tooltip = mn_unrest_imp_1_tt }
			mn_unrest_imp_5 =	{ custom_tooltip = mn_unrest_imp_2_tt }
			mn_unrest_imp_10 =	{ custom_tooltip = mn_unrest_imp_3_tt } 
			mn_unrest_max_1 =	{ custom_tooltip = mn_unrest_max_1_tt }
			mn_unrest_max_5 =	{ custom_tooltip = mn_unrest_max_2_tt }
			mn_unrest_max_10 =	{ custom_tooltip = mn_unrest_max_3_tt } 
		}
	}
	after = {
		hidden_effect = {
			UnrestNofificationCleanup = yes
		}
	}
}