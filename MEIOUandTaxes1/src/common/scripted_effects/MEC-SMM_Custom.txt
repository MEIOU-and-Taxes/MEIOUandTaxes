smm_recalc_mapmode_1 = { ## %%% 32-choice ## resets mapmode according to smm_scope variable - part 1 of 4: Finding the scope
	every_province = { ## make sure the entire map is properly reset
		limit = {
			isValidEmpty = yes
		}
		clr_province_flag = smm
		set_variable = { which = calcvar_L value = 0 }
	}	
	if = {  ## set smm province flag in all affected provinces
		limit = {
			check_variable = { which = smm_scope value = 16 }
		}
		if = {
			limit = {
				check_variable = { which = smm_scope value = 24 }
			}
			if = {
				limit = {
					check_variable = { which = smm_scope value = 28 }
				}
				if = {
					limit = {
						check_variable = { which = smm_scope value = 30 }
					}
					if = {
						limit = {
							check_variable = { which = smm_scope value = 31 }
						}
						#31
					}
					else = {
						#30
					}
				}
				else_if = {
					limit = {
						check_variable = { which = smm_scope value = 29 }
					}
					#29
				}
				else = {
					#28
				}
			}
			else_if = {
				limit = {
					check_variable = { which = smm_scope value = 26 }
				}
				if = {
					limit = {
						check_variable = { which = smm_scope value = 27 }
					}
					#27
				}
				else = {
					#26
				}
			}
			else_if = {
				limit = {
					check_variable = { which = smm_scope value = 25 }
				}
				#25
			}
			else = {
				#24
			}
		}
		else_if = {
			limit = {
				check_variable = { which = smm_scope value = 20 }
			}
			if = {
				limit = {
					check_variable = { which = smm_scope value = 22 }
				}
				if = {
					limit = {
						check_variable = { which = smm_scope value = 23 }
					}
					#23
				}
				else = {
					#22
				}
			}
			else_if = {
				limit = {
					check_variable = { which = smm_scope value = 21 }
				}
				#21
			}
			else = {
				#20
			}
		}
		else_if = {
			limit = {
				check_variable = { which = smm_scope value = 18 }
			}
			if = {
				limit = {
					check_variable = { which = smm_scope value = 19 }
				}
				#19
			}
			else = {
				#18
			}
		}
		else_if = {
			limit = {
				check_variable = { which = smm_scope value = 17 }
			}
			#17
			every_province = {
				limit = {
					isValidEmpty = yes
				}
				set_province_flag = smm
			}
		}
		else = {
			#16
			every_province = {
				limit = {
					isValidEmpty = yes
					NOT = {
						continent = north_america
						continent = south_america
						continent = oceania
					}
				}
				set_province_flag = smm
			}
		}
	}
	else_if = {
		limit = {
			check_variable = { which = smm_scope value = 8 }
		}
		if = {
			limit = {
				check_variable = { which = smm_scope value = 12 }
			}
			if = {
				limit = {
					check_variable = { which = smm_scope value = 14 }
				}
				if = {
					limit = {
						check_variable = { which = smm_scope value = 15 }
					}
					#15
					every_province = {
						limit = {
							isValidEmpty = yes
							OR = {
								continent = north_america
								continent = south_america
								continent = oceania
							}
						}
						set_province_flag = smm
					}
				}
				else = {
					#14
				}
			}
			else_if = {
				limit = {
					check_variable = { which = smm_scope value = 13 }
				}
				#13
			}
			else = {
				#12
			}
		}
		else_if = {
			limit = {
				check_variable = { which = smm_scope value = 10 }
			}
			if = {
				limit = {
					check_variable = { which = smm_scope value = 11 }
				}
				#11
				every_province = {
					limit = {
						isValidEmpty = yes
						NOT = {
							has_province_flag = UI_Select
						}
					}
					set_province_flag = smm
				}
			}
			else = {
				#10
				every_province = {
					limit = {
						isValidEmpty = yes
						has_province_flag = UI_Select
					}
					set_province_flag = smm
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = smm_scope value = 9 }
			}
			#9
			every_province = {
				limit = {
					isValidEmpty = yes
				}
				set_province_flag = smm
			}
		}
		else = {
			#8
			north_america = {
					limit = {
						isValidEmpty = yes
					}
				set_province_flag = smm
			}
			south_america = {
					limit = {
						isValidEmpty = yes
					}
				set_province_flag = smm
			}
		}
	}
	else_if = {
		limit = {
			check_variable = { which = smm_scope value = 4 }
		}
		if = {
			limit = {
				check_variable = { which = smm_scope value = 6 }
			}
			if = {
				limit = {
					check_variable = { which = smm_scope value = 7 }
				}
				#7
				every_province = {
					limit = {
						isValidEmpty = yes
						africa_continent_trigger = yes
					}
					set_province_flag = smm
				}
			}
			else = {
				#6
				mena = {
					limit = {
						isValidEmpty = yes
					}
					set_province_flag = smm
				}
				central_asia = {
					limit = {
						isValidEmpty = yes
					}
					set_province_flag = smm
				}
			}
		}
		else_if = {
			limit = {
				check_variable = { which = smm_scope value = 5 }
			}
			#5
			oceania = {
				limit = {
					isValidEmpty = yes
				}
				set_province_flag = smm
			}
			southeast_asia = {
				limit = {
					isValidEmpty = yes
				}
				set_province_flag = smm
			}
		}
		else = {
			#4
			indian_continent = {
				limit = {
					isValidEmpty = yes
				}
				set_province_flag = smm
			}
		}
	}
	else_if = {
		limit = {
			check_variable = { which = smm_scope value = 2 }
		}
		if = {
			limit = {
				check_variable = { which = smm_scope value = 3 }
			}
			#3
			asia = {
				limit = {
					isValidEmpty = yes
				}
				set_province_flag = smm
			}
			japan_superregion = {
				limit = {
					isValidEmpty = yes
				}
				set_province_flag = smm
			}
			north_asia = {
				limit = {
					isValidEmpty = yes
				}
				set_province_flag = smm
			}
		}
		else = {
			#2
			europe = {
				limit = {
					isValidEmpty = yes
				}
				set_province_flag = smm
			}
		}
	}
	else_if = {
		limit = {
			check_variable = { which = smm_scope value = 1 }
		}
		#1
		FROM = {
			every_owned_province = {
				limit = {
					isValidEmpty = yes
				}
				set_province_flag = smm
			}
		}
	}
	else = {
		#0
		every_province = {
			limit = {
				isValidEmpty = yes
				NOT = {
					owned_by = FROM
				}
			}
			set_province_flag = smm
		}
	}
}
smm_recalc_mapmode_2 = { ## %%% 512-choice ## resets mapmode according to smm_type variable - part 2 of 4: Getting the value
	if = {
		limit = {
			check_variable = { which = smm_type value = 256 }
		}
		if = {
			limit = {
				check_variable = { which = smm_type value = 384 }
			}
			if = {
				limit = {
					check_variable = { which = smm_type value = 448 }
				}
				if = {
					limit = {
						check_variable = { which = smm_type value = 480 }
					}
					if = {
						limit = {
							check_variable = { which = smm_type value = 496 }
						}
						if = {
							limit = {
								check_variable = { which = smm_type value = 504 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 508 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 510 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 511 }
										}
										#511
									}
									else = {
										#510
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 509 }
										}
										#509
									}
									else = {
										#508
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 506 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 507 }
										}
										#507
									}
									else = {
										#506
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 505 }
										}
										#505
									}
									else = {
										#504
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 500 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 502 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 503 }
										}
										#503
									}
									else = {
										#502
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 501 }
										}
										#501
									}
									else = {
										#500
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 498 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 499 }
										}
										#499
									}
									else = {
										#498
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 497 }
										}
										#497
									}
									else = {
										#496
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = { which = smm_type value = 488 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 492 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 494 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 495 }
										}
										#495
									}
									else = {
										#494
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 493 }
										}
										#493
									}
									else = {
										#492
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 490 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 491 }
										}
										#491
									}
									else = {
										#490
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 489 }
										}
										#489
									}
									else = {
										#488
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 484 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 486 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 487 }
										}
										#487
									}
									else = {
										#486
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 485 }
										}
										#485
									}
									else = {
										#484
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 482 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 483 }
										}
										#483
									}
									else = {
										#482
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 481 }
										}
										#481
									}
									else = {
										#480
									}
								}
							}
						}
					}
				}
				else = {
					if = {
						limit = {
							check_variable = { which = smm_type value = 464 }
						}
						if = {
							limit = {
								check_variable = { which = smm_type value = 472 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 476 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 478 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 479 }
										}
										#479
									}
									else = {
										#478
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 477 }
										}
										#477
									}
									else = {
										#476
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 474 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 475 }
										}
										#475
									}
									else = {
										#474
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 473 }
										}
										#473
									}
									else = {
										#472
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 468 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 470 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 471 }
										}
										#471
									}
									else = {
										#470
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 469 }
										}
										#469
									}
									else = {
										#468
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 466 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 467 }
										}
										#467
									}
									else = {
										#466
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 465 }
										}
										#465
									}
									else = {
										#464
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = { which = smm_type value = 456 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 460 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 462 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 463 }
										}
										#463
									}
									else = {
										#462
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 461 }
										}
										#461
									}
									else = {
										#460
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 458 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 459 }
										}
										#459
									}
									else = {
										#458
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 457 }
										}
										#457
									}
									else = {
										#456
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 452 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 454 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 455 }
										}
										#455
									}
									else = {
										#454
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 453 }
										}
										#453
									}
									else = {
										#452
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 450 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 451 }
										}
										#451
									}
									else = {
										#450
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 449 }
										}
										#449
									}
									else = {
										#448
									}
								}
							}
						}
					}
				}
			}
			else = {
				if = {
					limit = {
						check_variable = { which = smm_type value = 416 }
					}
					if = {
						limit = {
							check_variable = { which = smm_type value = 432 }
						}
						if = {
							limit = {
								check_variable = { which = smm_type value = 440 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 444 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 446 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 447 }
										}
										#447
									}
									else = {
										#446
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 445 }
										}
										#445
									}
									else = {
										#444
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 442 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 443 }
										}
										#443
									}
									else = {
										#442
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 441 }
										}
										#441
									}
									else = {
										#440
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 436 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 438 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 439 }
										}
										#439
									}
									else = {
										#438
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 437 }
										}
										#437
									}
									else = {
										#436
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 434 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 435 }
										}
										#435
									}
									else = {
										#434
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 433 }
										}
										#433
									}
									else = {
										#432
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = { which = smm_type value = 424 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 428 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 430 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 431 }
										}
										#431
									}
									else = {
										#430
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 429 }
										}
										#429
									}
									else = {
										#428
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 426 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 427 }
										}
										#427
									}
									else = {
										#426
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 425 }
										}
										#425
									}
									else = {
										#424
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 420 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 422 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 423 }
										}
										#423
									}
									else = {
										#422
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 421 }
										}
										#421
									}
									else = {
										#420
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 418 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 419 }
										}
										#419
									}
									else = {
										#418
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 417 }
										}
										#417
									}
									else = {
										#416
									}
								}
							}
						}
					}
				}
				else = {
					if = {
						limit = {
							check_variable = { which = smm_type value = 400 }
						}
						if = {
							limit = {
								check_variable = { which = smm_type value = 408 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 412 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 414 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 415 }
										}
										#415
									}
									else = {
										#414
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 413 }
										}
										#413
									}
									else = {
										#412
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 410 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 411 }
										}
										#411
									}
									else = {
										#410
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 409 }
										}
										#409
									}
									else = {
										#408
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 404 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 406 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 407 }
										}
										#407
									}
									else = {
										#406
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 405 }
										}
										#405
									}
									else = {
										#404
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 402 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 403 }
										}
										#403
									}
									else = {
										#402
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 401 }
										}
										#401
									}
									else = {
										#400
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = { which = smm_type value = 392 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 396 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 398 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 399 }
										}
										#399
									}
									else = {
										#398
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 397 }
										}
										#397
									}
									else = {
										#396
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 394 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 395 }
										}
										#395
									}
									else = {
										#394
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 393 }
										}
										#393
									}
									else = {
										#392
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 388 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 390 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 391 }
										}
										#391
									}
									else = {
										#390
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 389 }
										}
										#389
									}
									else = {
										#388
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 386 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 387 }
										}
										#387
									}
									else = {
										#386
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 385 }
										}
										#385
									}
									else = {
										#384
									}
								}
							}
						}
					}
				}
			}
		}
		else = {
			if = {
				limit = {
					check_variable = { which = smm_type value = 320 }
				}
				if = {
					limit = {
						check_variable = { which = smm_type value = 352 }
					}
					if = {
						limit = {
							check_variable = { which = smm_type value = 368 }
						}
						if = {
							limit = {
								check_variable = { which = smm_type value = 376 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 380 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 382 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 383 }
										}
										#383
									}
									else = {
										#382
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 381 }
										}
										#381
									}
									else = {
										#380
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 378 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 379 }
										}
										#379
									}
									else = {
										#378
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 377 }
										}
										#377
									}
									else = {
										#376
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 372 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 374 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 375 }
										}
										#375
									}
									else = {
										#374
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 373 }
										}
										#373
									}
									else = {
										#372
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 370 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 371 }
										}
										#371
									}
									else = {
										#370
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 369 }
										}
										#369
									}
									else = {
										#368
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = { which = smm_type value = 360 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 364 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 366 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 367 }
										}
										#367
									}
									else = {
										#366
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 365 }
										}
										#365
									}
									else = {
										#364
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 362 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 363 }
										}
										#363
									}
									else = {
										#362
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 361 }
										}
										#361
									}
									else = {
										#360
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 356 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 358 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 359 }
										}
										#359
									}
									else = {
										#358
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 357 }
										}
										#357
									}
									else = {
										#356
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 354 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 355 }
										}
										#355
									}
									else = {
										#354
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 353 }
										}
										#353
									}
									else = {
										#352
									}
								}
							}
						}
					}
				}
				else = {
					if = {
						limit = {
							check_variable = { which = smm_type value = 336 }
						}
						if = {
							limit = {
								check_variable = { which = smm_type value = 344 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 348 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 350 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 351 }
										}
										#351
									}
									else = {
										#350
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 349 }
										}
										#349
									}
									else = {
										#348
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 346 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 347 }
										}
										#347
									}
									else = {
										#346
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 345 }
										}
										#345
									}
									else = {
										#344
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 340 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 342 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 343 }
										}
										#343
									}
									else = {
										#342
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 341 }
										}
										#341
									}
									else = {
										#340
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 338 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 339 }
										}
										#339
									}
									else = {
										#338
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 337 }
										}
										#337
									}
									else = {
										#336
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = { which = smm_type value = 328 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 332 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 334 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 335 }
										}
										#335
									}
									else = {
										#334
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 333 }
										}
										#333
									}
									else = {
										#332
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 330 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 331 }
										}
										#331 - Knowledge Fulfillment
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}									
											set_key = { lhs = Tmp_0 which = SF_FillKnowledge }
											multiply_key = { lhs = Tmp_0 which = SF_Total }

											#set_key = { lhs = Tmp_1 which = NM_FillKnowledge }
											#multiply_key = { lhs = Tmp_1 which = NM_Total }

											set_key = { lhs = Tmp_2 which = RE_FillKnowledge }
											multiply_key = { lhs = Tmp_2 which = RE_Total }

											#set_key = { lhs = Tmp_3 which = NO_FillKnowledge }
											#multiply_key = { lhs = Tmp_3 which = NO_Total }

											#set_key = { lhs = Tmp_4 which = BG_FillKnowledge }
											#multiply_key = { lhs = Tmp_4 which = BG_Total }

											#set_key = { lhs = Tmp_5 which = CL_FillKnowledge }
											#multiply_key = { lhs = Tmp_5 which = Cl_Total }											

											#change_key = { lhs = Tmp_0 which = Tmp_1 }
											change_key = { lhs = Tmp_0 which = Tmp_2 }
											#change_key = { lhs = Tmp_0 which = Tmp_3 }
											#change_key = { lhs = Tmp_0 which = Tmp_4 }
											#change_key = { lhs = Tmp_0 which = Tmp_5 }

								
											set_key = { lhs = Tmp_1 which = SF_Total }
											#change_key = { lhs = Tmp_1 which = NM_Total }
											change_key = { lhs = Tmp_1 which = RE_Total }
											#change_key = { lhs = Tmp_1 which = NO_Total }
											#change_key = { lhs = Tmp_1 which = BG_Total }
											#change_key = { lhs = Tmp_1 which = CL_Total }

											divide_key = { lhs = Tmp_0 which = Tmp_1 }
											multiply_key = { lhs = Tmp_0 value = 100 }
											
											set_var_from_key = { var=calcvar_L key=Tmp_0  }	
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }
											set_key = { lhs = Tmp_0 value = 0 }											
											set_variable = { which = calcvar_L value = 0 }
										}											
									}
									else = {
										#330 - Per Capita Knowledge Output
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}									
											set_key = { lhs = Tmp_0 which = TN_ProvSply41 }
											set_key = { lhs = Tmp_1 which = Class_Rural }
											change_key = { lhs = Tmp_1 which = Class_Urban }
											change_key = { lhs = Tmp_1 which = Class_Notables }

											divide_key = { lhs = Tmp_0 which = Tmp_1 }
											
											set_var_from_key = { var=calcvar_L key=Tmp_0  }	
											
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }
											set_key = { lhs = Tmp_0 value = 0 }
											set_variable = { which = calcvar_L value = 0 }
										}										
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 329 }
										}
										#329 - Inuuk_Pagan
										smm_mapmode_type_religion_total = { rel=90 }
									}
									else = {
										#328 - Shamanism
										smm_mapmode_type_religion_total = { rel=89 }
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 324 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 326 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 327 }
										}
										#327 - Tengri_Pagan
										smm_mapmode_type_religion_total = { rel=88 }
									}
									else = {
										#326 - Daojiao
										smm_mapmode_type_religion_total = { rel=87 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 325 }
										}
										#325 - Kev_Dab
										smm_mapmode_type_religion_total = { rel=86 }
									}
									else = {
										#324 - Moism
										smm_mapmode_type_religion_total = { rel=85 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 322 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 323 }
										}
										#323 - Ba_Wuxiang
										smm_mapmode_type_religion_total = { rel=84 }
									}
									else = {
										#322 - Bimoism
										smm_mapmode_type_religion_total = { rel=83 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 321 }
										}
										#321 - Shendao
										smm_mapmode_type_religion_total = { rel=82 }
									}
									else = {
										#320 - Muism
										smm_mapmode_type_religion_total = { rel=81 }
									}
								}
							}
						}
					}
				}
			}
			else = {
				if = {
					limit = {
						check_variable = { which = smm_type value = 288 }
					}
					if = {
						limit = {
							check_variable = { which = smm_type value = 304 }
						}
						if = {
							limit = {
								check_variable = { which = smm_type value = 312 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 316 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 318 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 319 }
										}
										#319 - Tibetan_Bon
										smm_mapmode_type_religion_total = { rel=80 }
									}
									else = {
										#318 - Shinto
										smm_mapmode_type_religion_total = { rel=79 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 317 }
										}
										#317 - Imunu
										smm_mapmode_type_religion_total = { rel=78 }
									}
									else = {
										#316 - Hantu
										smm_mapmode_type_religion_total = { rel=77 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 314 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 315 }
										}
										#315 - Anito
										smm_mapmode_type_religion_total = { rel=76 }
									}
									else = {
										#314 - Polynesian_Pagan (Atua)
										smm_mapmode_type_religion_total = { rel=75 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 313 }
										}
										#313
										smm_mapmode_type_religion_total = { rel=74 }
									}
									else = {
										#312 - Australian_Pagan (Jukurrpan)
										smm_mapmode_type_religion_total = { rel=73 }
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 308 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 310 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 311 }
										}
										#311 - Adi_Dharam
										smm_mapmode_type_religion_total = { rel=72 }
									}
									else = {
										#310 - Nummo
										smm_mapmode_type_religion_total = { rel=71 }

									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 309 }
										}
										#309 - Egbesu
										smm_mapmode_type_religion_total = { rel=70 }
									}
									else = {
										#308 - Isese
										smm_mapmode_type_religion_total = { rel=69 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 306 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 307 }
										}
										#307
										smm_mapmode_type_religion_total = { rel=68 }
									}
									else = {
										#306 - Fomba_Gasy
										smm_mapmode_type_religion_total = { rel=67 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 305 }
										}
										#305 - Lotuko_Pagan (Ajokist)
										smm_mapmode_type_religion_total = { rel=66 }
									}
									else = {
										#304 - San_Pagan (IXam)
										smm_mapmode_type_religion_total = { rel=65 }
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = { which = smm_type value = 296 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 300 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 302 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 303 }
										}
										#303 - Bantu_Pagan (Munyambe)
										smm_mapmode_type_religion_total = { rel=64 }
									}
									else = {
										#302 - Roogan
										smm_mapmode_type_religion_total = { rel=63 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 301 }
										}
										#301 - Waaq
										smm_mapmode_type_religion_total = { rel=62 }
									}
									else = {
										#300 - Odinala
										smm_mapmode_type_religion_total = { rel=61 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 298 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 299 }
										}
										#299 - Osanobua
										smm_mapmode_type_religion_total = { rel=60 }
									}
									else = {
										#298 - Abasi
										smm_mapmode_type_religion_total = { rel=59 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 297 }
										}
										#297 - Nana_Buluku
										smm_mapmode_type_religion_total = { rel=58 }
									}
									else = {
										#296 - Akom
										smm_mapmode_type_religion_total = { rel=57 }
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 292 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 294 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 295 }
										}
										#295 - Abwoi
										smm_mapmode_type_religion_total = { rel=56 }
									}
									else = {
										#294 - Maguzanci
										smm_mapmode_type_religion_total = { rel=55 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 293 }
										}
										#293 - Finnish_Pagan (Ukkousko)
										smm_mapmode_type_religion_total = { rel=54 }
									}
									else = {
										#292 - Baltic_Pagan (Romuva)
										smm_mapmode_type_religion_total = { rel=53 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 290 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 291 }
										}
										#291 - Hellenic_pagan
										smm_mapmode_type_religion_total = { rel=52 }
									}
									else = {
										#290 - Norse_Pagan
										smm_mapmode_type_religion_total = { rel=51 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 289 }
										}
										#289 - Khabzeism
										smm_mapmode_type_religion_total = { rel=50 }
									}
									else = {
										#288 - Ngenechen
										smm_mapmode_type_religion_total = { rel=49 }
									}
								}
							}
						}
					}
				}
				else = {
					if = {
						limit = {
							check_variable = { which = smm_type value = 272 }
						}
						if = {
							limit = {
								check_variable = { which = smm_type value = 280 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 284 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 286 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 287 }
										}
										#287 - South_Cone
										smm_mapmode_type_religion_total = { rel=48 }
									}
									else = {
										#286 - Jungle_Spiritism
										smm_mapmode_type_religion_total = { rel=47 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 285 }
										}
										#285 - Iocauna
										smm_mapmode_type_religion_total = { rel=46 }
									}
									else = {
										#284 - Chiminigagua
										smm_mapmode_type_religion_total = { rel=45 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 282 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 283 }
										}
										#283 - Northwestern
										smm_mapmode_type_religion_total = { rel=44 }
									}
									else = {
										#282 - Kachina
										smm_mapmode_type_religion_total = { rel=43 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 281 }
										}
										#281 - Sun_Dance
										smm_mapmode_type_religion_total = { rel=42 }
									}
									else = {
										#280 - Mississippian
										smm_mapmode_type_religion_total = { rel=41 }
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 276 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 278 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 279 }
										}
										#279 - Midewiwin
										smm_mapmode_type_religion_total = { rel=40 }
									}
									else = {
										#278 - Inti (Camaquen)
										smm_mapmode_type_religion_total = { rel=39 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 277 }
										}
										#277 - Inca_Reformed
										smm_mapmode_type_religion_total = { rel=38 }
									}
									else = {
										#276 - Kurikaweri
										smm_mapmode_type_religion_total = { rel=37 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 274 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 275 }
										}
										#275 - Mayan
										smm_mapmode_type_religion_total = { rel=36 }
									}
									else = {
										#274 - Cocijo
										smm_mapmode_type_religion_total = { rel=35 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 273 }
										}
										#273 - Nahuatl
										smm_mapmode_type_religion_total = { rel=34 }
									}
									else = {
										#272
										smm_mapmode_type_trade = { type = Out prod = 10 }
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = { which = smm_type value = 264 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 268 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 270 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 271 }
										}
										#271
										smm_mapmode_type_trade = { type = In prod = 10 }
									}
									else = {
										#270
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvSply10 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 269 }
										}
										#269
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }

											set_key = { lhs = Tmp_1 which = TN_ProvSply10 }
											change_key = { lhs = Tmp_1 which = TN_ProvSubsistSply10 }

											change_key = { lhs = Tmp_0 which = Tmp_1 }

											set_key = { lhs = Tmp_1 which = TN_ProvDmnd10 }

											subtract_key = { lhs = Tmp_0 which = Tmp_1 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
											set_key = { lhs = Tmp_1 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#268
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = TN_SectorStockpileIn10 }
											subtract_key = { lhs = Tmp_0 which = TN_SectorStockpileOut10 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 266 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 267 }
										}
										#267
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvPrc10 }


										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#266
										#Maximum Fishery
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var = calcvar_L key = Building_FisheryMax }
										}
										smm_scale_get_maxmin = { var = calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 265 }
										}
										#265
										#Current Fishery
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var = calcvar_L key = Building_Fishery }
										}
										smm_scale_get_maxmin = { var = calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#264
										#Maximum Mine
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var = calcvar_L key = Building_ExtractionMax }
										}
										smm_scale_get_maxmin = { var = calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 260 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 262 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 263 }
										}
										#263
										#Current Mine
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var = calcvar_L key = Building_Extraction }
										}
										smm_scale_get_maxmin = { var = calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#262
										#Maximum Forestry
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var = calcvar_L key = Building_ForestryMax }
										}
										smm_scale_get_maxmin = { var = calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 261 }
										}
										#261
										#Current Forestry
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var = calcvar_L key = Building_Forestry }
										}
										smm_scale_get_maxmin = { var = calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#260
										#Maximum Farmland
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var = calcvar_L key = Building_AgricultureMax }
										}
										smm_scale_get_maxmin = { var = calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 258 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 259 }
										}
										#259
										#Current Farmland

										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var = calcvar_L key = Building_Agriculture }
										}
										smm_scale_get_maxmin = { var = calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#258
										#Amenities surplus
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											if = {
												limit = {
													check_key = { lhs = RE_Total value = 0.001 }
												}
												Infra_GetAmenities_Cap = { return = Tmp_0 }
												subtract_key = { lhs = Tmp_0 which = RE_Total }
												set_var_from_key = { var = calcvar_L key=Tmp_0 }
												set_key = { lhs = Tmp_0 value = 0 }
											} else = {
												# Remove provinces with no residents from the scope
												clr_province_flag = smm
											}
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else_if = {
									limit = {
										check_variable = { which = smm_type value = 257 }
									}
									#257
									#Urban throughput
									every_province = {
										limit = {
											isValidEmpty = yes
											has_province_flag = smm
										}
										set_var_from_key = { var=calcvar_L key=ProdU_Throughput }
									}
									smm_scale_get_maxmin = { var=calcvar_L }
									every_province = {
										limit = {
											isValidEmpty = yes
											has_province_flag = smm
										}
										set_variable = { which = calcvar_L value = 0 }
									}
								}
								else = {
									#256
									#Rural throughput
									every_province = {
										limit = {
											isValidEmpty = yes
											has_province_flag = smm
										}
										set_var_from_key = { var=calcvar_L key=ProdR_Throughput }
									}
									smm_scale_get_maxmin = { var=calcvar_L }
									every_province = {
										limit = {
											isValidEmpty = yes
											has_province_flag = smm
										}
										set_variable = { which = calcvar_L value = 0 }
									}
								}
							}
						}
					}
				}
			}
		}
	} else = {
		if = {
			limit = {
				check_variable = { which = smm_type value = 128 }
			}
			if = {
				limit = {
					check_variable = { which = smm_type value = 192 }
				}
				if = {
					limit = {
						check_variable = { which = smm_type value = 224 }
					}
					if = {
						limit = {
							check_variable = { which = smm_type value = 240 }
						}
						if = {
							limit = {
								check_variable = { which = smm_type value = 248 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 252 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 254 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 255 }
										}
										#255
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											if = {
												limit = {
													check_key = { lhs = TN_River value = 1 }
												}
												set_var_from_key = { var=calcvar_L key=TN_River }
												while = {
													limit = {
														check_variable = { which = calcvar_L value = 33 }
													}
													subtract_variable = { which = calcvar_L value = 33 }
												}
											}
											else = {
												clr_province_flag = smm
											}
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#254
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = Building_FisheryMax }
											subtract_key = { lhs = Tmp_0 which = Building_Fishery }
											set_var_from_key = { var=calcvar_L key=Tmp_0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 253 }
										}
										#253
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = Building_ExtractionMax }
											subtract_key = { lhs = Tmp_0 which = Building_Extraction }
											set_var_from_key = { var=calcvar_L key=Tmp_0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#252
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = Building_ForestryMax }
											subtract_key = { lhs = Tmp_0 which = Building_Forestry }
											set_var_from_key = { var=calcvar_L key=Tmp_0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 250 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 251 }
										}
										#251
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = Building_AgricultureMax }
											subtract_key = { lhs = Tmp_0 which = Building_Agriculture }
											set_var_from_key = { var=calcvar_L key=Tmp_0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#250
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Land_AvgTemp }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 249 }
										}
										#249
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=NO_FillLuxury }
											multiply_variable = { which = calcvar_L value = 100 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#248
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=NO_FillComfort }
											multiply_variable = { which = calcvar_L value = 100 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 244 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 246 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 247 }
										}
										#247
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=NO_FillLife }
											multiply_variable = { which = calcvar_L value = 100 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#246
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=RE_FillLuxury }
											multiply_variable = { which = calcvar_L value = 100 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 245 }
										}
										#245
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=RE_FillComfort }
											multiply_variable = { which = calcvar_L value = 100 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#244
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=RE_FillLife }
											multiply_variable = { which = calcvar_L value = 100 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 242 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 243 }
										}
										#243
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=SF_FillLuxury }
											multiply_variable = { which = calcvar_L value = 100 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#242
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=SF_FillComfort }
											multiply_variable = { which = calcvar_L value = 100 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 241 }
										}
										#241
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=SF_FillLife }
											multiply_variable = { which = calcvar_L value = 100 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#240
										every_country = {
											limit = {
												isValidCountry = yes
											}
											set_var_from_key = { var=calcvar_L key=Stat_Lit }
										}
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L which = owner }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = { which = smm_type value = 232 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 236 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 238 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 239 }
										}
										#239
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Stat_Lit }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#238
										every_country = {
											limit = {
												isValidCountry = yes
											}
											set_var_from_key = { var=calcvar_L key=Stat_Edu }
										}
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L which = owner }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 237 }
										}
										#237
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Stat_Edu }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#236
										smm_mapmode_type_religion_density = { rel=60 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 234 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 235 }
										}
										#235
										smm_mapmode_type_religion_density = { rel=59 }
									}
									else = {
										#234
										smm_mapmode_type_religion_density = { rel=56 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 233 }
										}
										#233
										smm_mapmode_type_religion_density = { rel=55 }
									}
									else = {
										#232
										smm_mapmode_type_religion_density = { rel=54 }
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 228 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 230 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 231 }
										}
										#231
										smm_mapmode_type_religion_density = { rel=53 }
									}
									else = {
										#230
										smm_mapmode_type_religion_density = { rel=52 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 229 }
										}
										#229
										smm_mapmode_type_religion_density = { rel=51 }
									}
									else = {
										#228
										smm_mapmode_type_religion_density = { rel=50 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 226 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 227 }
										}
										#227
										smm_mapmode_type_religion_density = { rel=48 }
									}
									else = {
										#226
										smm_mapmode_type_religion_density = { rel=47 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 225 }
										}
										#225
										smm_mapmode_type_religion_density = { rel=45 }
									}
									else = {
										#224
										smm_mapmode_type_religion_density = { rel=42 }
									}
								}
							}
						}
					}
				}
				else = {
					if = {
						limit = {
							check_variable = { which = smm_type value = 208 }
						}
						if = {
							limit = {
								check_variable = { which = smm_type value = 216 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 220 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 222 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 223 }
										}
										#223
										smm_mapmode_type_religion_density = { rel=39 }
									}
									else = {
										#222
										smm_mapmode_type_religion_density = { rel=37 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 221 }
										}
										#221
										smm_mapmode_type_religion_density = { rel=36 }
									}
									else = {
										#220
										smm_mapmode_type_religion_density = { rel=35 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 218 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 219 }
										}
										#219
										smm_mapmode_type_religion_density = { rel=34 }
									}
									else = {
										#218
										smm_mapmode_type_religion_density = { rel=33 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 217 }
										}
										#217
										smm_mapmode_type_religion_density = { rel=32 }
									}
									else = {
										#216
										smm_mapmode_type_religion_density = { rel=31 }
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 212 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 214 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 215 }
										}
										#215
										smm_mapmode_type_religion_density = { rel=26 }
									}
									else = {
										#214
										smm_mapmode_type_religion_density = { rel=25 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 213 }
										}
										#213
										smm_mapmode_type_religion_density = { rel=24 }
									}
									else = {
										#212
										smm_mapmode_type_religion_density = { rel=23 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 210 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 211 }
										}
										#211
										smm_mapmode_type_religion_density = { rel=22 }
									}
									else = {
										#210
										smm_mapmode_type_religion_density = { rel=11 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 209 }
										}
										#209
										smm_mapmode_type_religion_density = { rel=9 }
									}
									else = {
										#208
										smm_mapmode_type_religion_density = { rel=7 }
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = { which = smm_type value = 200 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 204 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 206 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 207 }
										}
										#207
										smm_mapmode_type_religion_density = { rel=6 }
									}
									else = {
										#206
										smm_mapmode_type_religion_density = { rel=5 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 205 }
										}
										#205
										smm_mapmode_type_religion_density = { rel=3 }
									}
									else = {
										#204
										smm_mapmode_type_religion_density = { rel=2 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 202 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 203 }
										}
										#203
										smm_mapmode_type_religion_density = { rel=1 }
									}
									else = {
										#202
										smm_mapmode_type_religion_fraction = { rel=66 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 201 }
										}
										#201
										smm_mapmode_type_religion_fraction = { rel=63 }
									}
									else = {
										#200
										smm_mapmode_type_religion_fraction = { rel=62 }
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 196 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 198 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 199 }
										}
										#199
										smm_mapmode_type_religion_fraction = { rel=61 }
									}
									else = {
										#198
										smm_mapmode_type_religion_fraction = { rel=60 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 197 }
										}
										#197
										smm_mapmode_type_religion_fraction = { rel=59 }
									}
									else = {
										#196
										smm_mapmode_type_religion_fraction = { rel=56 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 194 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 195 }
										}
										#195
										smm_mapmode_type_religion_fraction = { rel=55 }
									}
									else = {
										#194
										smm_mapmode_type_religion_fraction = { rel=54 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 193 }
										}
										#193
										smm_mapmode_type_religion_fraction = { rel=53 }
									}
									else = {
										#192
										smm_mapmode_type_religion_fraction = { rel=52 }
									}
								}
							}
						}
					}
				}
			}
			else = {
				if = {
					limit = {
						check_variable = { which = smm_type value = 160 }
					}
					if = {
						limit = {
							check_variable = { which = smm_type value = 176 }
						}
						if = {
							limit = {
								check_variable = { which = smm_type value = 184 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 188 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 190 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 191 }
										}
										#191
										smm_mapmode_type_religion_fraction = { rel=51 }
									}
									else = {
										#190
										smm_mapmode_type_religion_fraction = { rel=50 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 189 }
										}
										#189
										smm_mapmode_type_religion_fraction = { rel=48 }
									}
									else = {
										#188
										smm_mapmode_type_religion_fraction = { rel=47 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 186 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 187 }
										}
										#187
										smm_mapmode_type_religion_fraction = { rel=45 }
									}
									else = {
										#186
										smm_mapmode_type_religion_fraction = { rel=42 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 185 }
										}
										#185
										smm_mapmode_type_religion_fraction = { rel=39 }
									}
									else = {
										#184
										smm_mapmode_type_religion_fraction = { rel=37 }
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 180 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 182 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 183 }
										}
										#183
										smm_mapmode_type_religion_fraction = { rel=36 }
									}
									else = {
										#182
										smm_mapmode_type_religion_fraction = { rel=35 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 181 }
										}
										#181
										smm_mapmode_type_religion_fraction = { rel=34 }
									}
									else = {
										#180
										smm_mapmode_type_religion_fraction = { rel=33 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 178 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 179 }
										}
										#179
										smm_mapmode_type_religion_fraction = { rel=32 }
									}
									else = {
										#178
										smm_mapmode_type_religion_fraction = { rel=31 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 177 }
										}
										#177
										smm_mapmode_type_religion_fraction = { rel=26 }
									}
									else = {
										#176
										smm_mapmode_type_religion_fraction = { rel=25 }
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = { which = smm_type value = 168 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 172 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 174 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 175 }
										}
										#175
										smm_mapmode_type_religion_fraction = { rel=24 }
									}
									else = {
										#174
										smm_mapmode_type_religion_fraction = { rel=23 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 173 }
										}
										#173
										smm_mapmode_type_religion_fraction = { rel=22 }
									}
									else = {
										#172
										smm_mapmode_type_religion_fraction = { rel=11 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 170 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 171 }
										}
										#171
										smm_mapmode_type_religion_fraction = { rel=9 }
									}
									else = {
										#170
										smm_mapmode_type_religion_fraction = { rel=7 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 169 }
										}
										#169
										smm_mapmode_type_religion_fraction = { rel=6 }
									}
									else = {
										#168
										smm_mapmode_type_religion_fraction = { rel=5 }
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 164 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 166 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 167 }
										}
										#167
										smm_mapmode_type_religion_fraction = { rel=3 }
									}
									else = {
										#166
										smm_mapmode_type_religion_fraction = { rel=2 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 165 }
										}
										#165
										smm_mapmode_type_religion_fraction = { rel=1 }
									}
									else = {
										#164, Partner
										smm_mapmode_type_trade = { type = In prod = 1 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 162 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 163 }
										}
										#163, Partner
										smm_mapmode_type_trade = { type = Out prod = 1 }
									}
									else = {
										#162, Partner
										smm_mapmode_type_trade = { type = In prod = 2 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 161 }
										}
										#161, Partner
										smm_mapmode_type_trade = { type = Out prod = 2 }
									}
									else = {
										#160, Partner
										smm_mapmode_type_trade = { type = In prod = 4 }
									}
								}
							}
						}
					}
				}
				else = {
					if = {
						limit = {
							check_variable = { which = smm_type value = 144 }
						}
						if = {
							limit = {
								check_variable = { which = smm_type value = 152 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 156 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 158 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 159 }
										}
										#159, Partner
										smm_mapmode_type_trade = { type = Out prod = 4 }
									}
									else = {
										#158, State Reach
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Admin_Reach }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 157 }
										}
										#157, Partner
										smm_mapmode_type_trade = { type = In prod = 5 }
									}
									else = {
										#156, Partner
										smm_mapmode_type_trade = { type = Out prod = 5 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 154 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 155 }
										}
										#155, Partner
										smm_mapmode_type_trade = { type = In prod = 6 }
									}
									else = {
										#154, Partner
										smm_mapmode_type_trade = { type = Out prod = 6 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 153 }
										}
										#153, Partner
										smm_mapmode_type_trade = { type = In prod = 9 }
									}
									else = {
										#152, Partner
										smm_mapmode_type_trade = { type = Out prod = 9 }
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 148 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 150 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 151 }
										}
										#151, Partner
										smm_mapmode_type_trade = { type = In prod = 21 }
									}
									else = {
										#150, Partner
										smm_mapmode_type_trade = { type = Out prod = 21 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 149 }
										}
										#149, Partner
										smm_mapmode_type_trade = { type = In prod = 22 }
									}
									else = {
										#148, Partner
										smm_mapmode_type_trade = { type = Out prod = 22 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 146 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 147 }
										}
										#147, Partner
										smm_mapmode_type_trade = { type = In prod = 23 }
									}
									else = {
										#146, Partner
										smm_mapmode_type_trade = { type = Out prod = 23 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 145 }
										}
										#145, Partner
										smm_mapmode_type_trade = { type = In prod = 24 }
									}
									else = {
										#144, Partner
										smm_mapmode_type_trade = { type = Out prod = 24 }
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = { which = smm_type value = 136 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 140 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 142 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 143 }
										}
										#143, Partner
										smm_mapmode_type_trade = { type = In prod = 25 }
									}
									else = {
										#142, Partner
										smm_mapmode_type_trade = { type = Out prod = 25 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 141 }
										}
										#141, Partner
										smm_mapmode_type_trade = { type = In prod = 41 }
									}
									else = {
										#140, Partner
										smm_mapmode_type_trade = { type = Out prod = 41 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 138 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 139 }
										}
										#139
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_SectorTraffic1 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#138
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Infra_Harbourage }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 137 }
										}
										#137
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Infra_Pathing }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#136
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Class_TotalIn }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 132 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 134 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 135 }
										}
										#135
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Class_TotalOut }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#134
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
											set_var_from_key = { var=temp key=Plague_Dead0 }
											change_variable = { which = calcvar_L which = temp }
											set_var_from_key = { var=temp key=Plague_Dead1 }
											change_variable = { which = calcvar_L which = temp }
											set_var_from_key = { var=temp key=Plague_Dead2 }
											change_variable = { which = calcvar_L which = temp }
											set_var_from_key = { var=temp key=Plague_Dead3 }
											change_variable = { which = calcvar_L which = temp }
											set_var_from_key = { var=temp key=Plague_Dead4 }
											change_variable = { which = calcvar_L which = temp }
											set_variable = { which = temp value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 133 }
										}
										#133
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
											if = {
												limit = {
													has_province_flag = Plague
												}
												set_var_from_key = { var=temp key=Plague_Susceptible0 }
												change_variable = { which = calcvar_L which = temp }
												set_var_from_key = { var=temp key=Plague_Susceptible1 }
												change_variable = { which = calcvar_L which = temp }
												set_var_from_key = { var=temp key=Plague_Susceptible2 }
												change_variable = { which = calcvar_L which = temp }
												set_var_from_key = { var=temp key=Plague_Susceptible3 }
												change_variable = { which = calcvar_L which = temp }
												set_var_from_key = { var=temp key=Plague_Susceptible4 }
												change_variable = { which = calcvar_L which = temp }
												set_variable = { which = temp value = 0 }
											}
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#132
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
											set_var_from_key = { var=temp key=Plague_Resistance0 }
											change_variable = { which = calcvar_L which = temp }
											set_var_from_key = { var=temp key=Plague_Resistance1 }
											change_variable = { which = calcvar_L which = temp }
											set_var_from_key = { var=temp key=Plague_Resistance2 }
											change_variable = { which = calcvar_L which = temp }
											set_var_from_key = { var=temp key=Plague_Resistance3 }
											change_variable = { which = calcvar_L which = temp }
											set_var_from_key = { var=temp key=Plague_Resistance4 }
											change_variable = { which = calcvar_L which = temp }
											set_variable = { which = temp value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 130 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 131 }
										}
										#131
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Land_GrowthPeriod }

										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#130
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Land_Soil }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 129 }
										}
										#129
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=pv_ce }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#128
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											export_to_variable = { which = calcvar_L value = development }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
						}
					}
				}
			}
		}
		else = {
			if = {
				limit = {
					check_variable = { which = smm_type value = 64 }
				}
				if = {
					limit = {
						check_variable = { which = smm_type value = 96 }
					}
					if = {
						limit = {
							check_variable = { which = smm_type value = 112 }
						}
						if = {
							limit = {
								check_variable = { which = smm_type value = 120 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 124 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 126 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 127 }
										}
										#127
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											if = {
												limit = {
													has_province_flag = TN_Silk
												}
												set_variable = { which = calcvar_L value = 0 }
												trigger_switch = {
													on_trigger = has_province_modifier
													TN_Minor = { set_variable = { which = calcvar_L value = 16 } }
													TN_Important = { set_variable = { which = calcvar_L value = 24 } }
													TN_Major = { set_variable = { which = calcvar_L value = 32 } }
												}
											}
											else = {
												clr_province_flag = smm
											}
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#126
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											if = {
												limit = {
													has_province_flag = TN_Silk
												}
												set_variable = { which = calcvar_L value = 0 }
												trigger_switch = {
													on_trigger = has_province_flag
													TN_Natural_Minor = { set_variable = { which = calcvar_L value = 16 } }
													TN_Natural_Important = { set_variable = { which = calcvar_L value = 24 } }
													TN_Natural_Major = { set_variable = { which = calcvar_L value = 32 } }
												}
											}
											else = {
												clr_province_flag = smm
											}
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 125 }
										}
										#125
										every_country = {
											limit = {
												isValidCountry = yes
											}
											set_variable = { which = calcvar_L value = 0 }
										}
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Class_TotalIn }
											set_var_from_key = { var=temp key=Class_TotalOut }
											subtract_variable = { which = calcvar_L which = temp }
											owner = {
												change_variable = { which = calcvar_L which = PREV }
											}
										}
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L which = owner }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
											set_variable = { which = temp value = 0 }
										}
										every_country = {
											limit = {
												isValidCountry = yes
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#124
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Class_TotalIn }
											set_var_from_key = { var=temp key=Class_TotalOut }
											subtract_variable = { which = calcvar_L which = temp }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
											set_variable = { which = temp value = 0 }
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 122 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 123 }
										}
										#123
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_Subsistence }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#122
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvSply41 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 121 }
										}
										#121
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvSply25 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#120
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvSply24 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 116 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 118 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 119 }
										}
										#119
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvSply23 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#118
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvSply22 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 117 }
										}
										#117
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvSply21 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#116
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvSply9 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 114 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 115 }
										}
										#115
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvSply6 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#114
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvSply5 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 113 }
										}
										#113
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvSply4 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#112
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvSply2 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = { which = smm_type value = 104 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 108 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 110 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 111 }
										}
										#111
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvSply1 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#110
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
											set_variable = { which = temp value = 0 }
											if = {
												limit = {
													has_province_flag = Plague0
												}
												set_variable = { which = calcvar_L value = 10 }
												change_variable = { which = temp value = 1 }
											}
											if = {
												limit = {
													has_province_flag = Plague1
												}
												set_variable = { which = calcvar_L value = 15 }
												change_variable = { which = temp value = 1 }
											}
											if = {
												limit = {
													has_province_flag = Plague2
												}
												set_variable = { which = calcvar_L value = 20 }
												change_variable = { which = temp value = 1 }
											}
											if = {
												limit = {
													has_province_flag = Plague3
												}
												set_variable = { which = calcvar_L value = 25 }
												change_variable = { which = temp value = 1 }
											}
											if = {
												limit = {
													has_province_flag = Plague4
												}
												set_variable = { which = calcvar_L value = 32 }
												change_variable = { which = temp value = 1 }
											}
											if = {
												limit = {
													check_variable = { which = temp value = 2 }
												}
												set_variable = { which = calcvar_L value = 5 }
											}
											set_variable = { which = temp value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 109 }
										}
										#109
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
	                                            check_key = { lhs = Sector_ScoreDisp value = 0.01 }
											}
											set_var_from_key = { var=calcvar_L key=Sector_ScoreDisp }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
	                                            NOT = { check_key = { lhs = Sector_ScoreDisp value = 0.01 } }
												has_province_flag = smm
											}
	                                        clr_province_flag = smm
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#108
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Land_CropLabour }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 106 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 107 }
										}
										#107
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Land_CropOutput }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#106 - Samaritan
										smm_mapmode_type_religion_total = { rel=33 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 105 }
										}
										#105 - Jewish
										smm_mapmode_type_religion_total = { rel=32 }
									}
									else = {
										#104 - Yazidi
										smm_mapmode_type_religion_total = { rel=31 }
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 100 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 102 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 103 }
										}
										#103
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=NM_FillLuxury }
											multiply_variable = { which = calcvar_L value = 100 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#102
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=NM_FillComfort }
											multiply_variable = { which = calcvar_L value = 100 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 101 }
										}
										#101
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=NM_FillLife }
											multiply_variable = { which = calcvar_L value = 100 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#100 - Zoroastrian
										smm_mapmode_type_religion_total = { rel=30 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 98 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 99 }
										}
										#99 - Kejawen_H
										smm_mapmode_type_religion_total = { rel=29 }
									}
									else = {
										#98 - Jain
										smm_mapmode_type_religion_total = { rel=28 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 97 }
										}
										#97 - Sikh
										smm_mapmode_type_religion_total = { rel=27 }
									}
									else = {
										#96 - Hindu
										smm_mapmode_type_religion_total = { rel=26 }
									}
								}
							}
						}
					}
				}
				else = {
					if = {
						limit = {
							check_variable = { which = smm_type value = 80 }
						}
						if = {
							limit = {
								check_variable = { which = smm_type value = 88 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 92 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 94 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 95 }
										}
										#95- Confucian
										smm_mapmode_type_religion_total = { rel=25 }
									}
									else = {
										#94 - Kejawen_B
										smm_mapmode_type_religion_total = { rel=24 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 93 }
										}
										#93 - Mahayana
										smm_mapmode_type_religion_total = { rel=23 }
									}
									else = {
										#92 - Vajrayana
										smm_mapmode_type_religion_total = { rel=22 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 90 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 91 }
										}
										#91 - Theravada
										smm_mapmode_type_religion_total = { rel=21 }
									}
									else = {
										#90 - Shi'ite
										smm_mapmode_type_religion_total = { rel=20 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 89 }
										}
										#89 - Ibadi
										smm_mapmode_type_religion_total = { rel=19 }
									}
									else = {
										#88 - Kejawen_M
										smm_mapmode_type_religion_total = { rel=18 }
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 84 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 86 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 87 }
										}
										#87- Mahdavi
										smm_mapmode_type_religion_total = { rel=17 }
									}
									else = {
										#86 - Wahhabi
										smm_mapmode_type_religion_total = { rel=16 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 85 }
										}
										#85 - Sunni
										smm_mapmode_type_religion_total = { rel=15 }
									}
									else = {
										#84 - Druze
										smm_mapmode_type_religion_total = { rel=14 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 82 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 83 }
										}
										#83 - Gnostic
										smm_mapmode_type_religion_total = { rel=13 }
									}
									else = {
										#82 - Bogomilist
										smm_mapmode_type_religion_total = { rel=12 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 81 }
										}
										#81 - Monophysite
										smm_mapmode_type_religion_total = { rel=11 }
									}
									else = {
										#80- Assyrian
										smm_mapmode_type_religion_total = { rel=10 }
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = { which = smm_type value = 72 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 76 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 78 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 79 }
										}
										#79 - Oriental (Coptic/Miaphysite)
										smm_mapmode_type_religion_total = { rel=9 }
									}
									else = {
										#78 - Orthodox
										smm_mapmode_type_religion_total = { rel=8 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 77 }
										}
										#77 - Avignonist
										smm_mapmode_type_religion_total = { rel=7 }
									}
									else = {
										#76 - Lollard
										smm_mapmode_type_religion_total = { rel=6 }
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 74 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 75 }
										}
										#75 - Waldensian
										smm_mapmode_type_religion_total = { rel=5 }
									}
									else = {
										#74 - Hussite
										smm_mapmode_type_religion_total = { rel=4 }
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 73 }
										}
										#73 - Reformed (Calvinist)
										smm_mapmode_type_religion_total = { rel=3 }
									}
									else = {
										#72 - Protestant (Lutheran)
										smm_mapmode_type_religion_total = { rel=2 }
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 68 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 70 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 71 }
										}
										#71 - Catholic
										smm_mapmode_type_religion_total = { rel=1 }
									}
									else = {
										#70
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											if = {
												limit = {
													has_province_flag = UI_Select
												}
												set_variable = { which = smm value = 32 }
											}
											else = {
												set_variable = { which = smm value = 0 }
											}
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 69 }
										}
										#69
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											if = {
												limit = {
													check_key = { lhs = TN_Pass value = 1 }
												}
												set_var_from_key = { var=calcvar_L key=TN_Pass }
												while = {
													limit = {
														check_variable = { which = calcvar_L value = 33 }
													}
													subtract_variable = { which = calcvar_L value = 33 }
												}
											}
											else = {
												clr_province_flag = smm
											}
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#68
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 66 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 67 }
										}
										#67
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvPrc51 }


										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#66
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }

											set_key = { lhs = Tmp_1 which = TN_ProvSply41 }
											change_key = { lhs = Tmp_1 which = TN_ProvSubsistSply41 }

											change_key = { lhs = Tmp_0 which = Tmp_1 }

											set_key = { lhs = Tmp_1 which = TN_ProvDmnd41 }
											subtract_key = { lhs = Tmp_0 which = Tmp_1 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
											set_key = { lhs = Tmp_1 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 65 }
										}
										#65
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = TN_SectorStockpileIn41 }
											subtract_key = { lhs = Tmp_0 which = TN_SectorStockpileOut41 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
										}
									}
									else = {
										#64
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvPrc41 }


										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
						}
					}
				}
			}
			else = {
				if = {
					limit = {
						check_variable = { which = smm_type value = 32 }
					}
					if = {
						limit = {
							check_variable = { which = smm_type value = 48 }
						}
						if = {
							limit = {
								check_variable = { which = smm_type value = 56 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 60 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 62 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 63 }
										}
										#63
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }

											set_key = { lhs = Tmp_1 which = TN_ProvSply25 }
											change_key = { lhs = Tmp_1 which = TN_ProvSubsistSply25 }

											change_key = { lhs = Tmp_0 which = Tmp_1 }

											set_key = { lhs = Tmp_1 which = TN_ProvDmnd25 }

											subtract_key = { lhs = Tmp_0 which = Tmp_1 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
											set_key = { lhs = Tmp_1 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#62
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = TN_SectorStockpileIn25 }
											subtract_key = { lhs = Tmp_0 which = TN_SectorStockpileOut25 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 61 }
										}
										#61
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvPrc25 }


										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#60
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }

											set_key = { lhs = Tmp_1 which = TN_ProvSply24 }
											change_key = { lhs = Tmp_1 which = TN_ProvSubsistSply24 }

											change_key = { lhs = Tmp_0 which = Tmp_1 }

											set_key = { lhs = Tmp_1 which = TN_ProvDmnd24 }

											subtract_key = { lhs = Tmp_0 which = Tmp_1 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
											set_key = { lhs = Tmp_1 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 58 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 59 }
										}
										#59
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = TN_SectorStockpileIn24 }
											subtract_key = { lhs = Tmp_0 which = TN_SectorStockpileOut24 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#58
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvPrc24 }


										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 57 }
										}
										#57
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }

											set_key = { lhs = Tmp_1 which = TN_ProvSply23 }
											change_key = { lhs = Tmp_1 which = TN_ProvSubsistSply23 }

											change_key = { lhs = Tmp_0 which = Tmp_1 }

											set_key = { lhs = Tmp_1 which = TN_ProvDmnd23 }

											subtract_key = { lhs = Tmp_0 which = Tmp_1 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
											set_key = { lhs = Tmp_1 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#56
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = TN_SectorStockpileIn23 }
											subtract_key = { lhs = Tmp_0 which = TN_SectorStockpileOut23 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 52 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 54 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 55 }
										}
										#55
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvPrc23 }


										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#54
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }

											set_key = { lhs = Tmp_1 which = TN_ProvSply22 }
											change_key = { lhs = Tmp_1 which = TN_ProvSubsistSply22 }

											change_key = { lhs = Tmp_0 which = Tmp_1 }

											set_key = { lhs = Tmp_1 which = TN_ProvDmnd22 }

											subtract_key = { lhs = Tmp_0 which = Tmp_1 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
											set_key = { lhs = Tmp_1 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 53 }
										}
										#53
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = TN_SectorStockpileIn22 }
											subtract_key = { lhs = Tmp_0 which = TN_SectorStockpileOut22 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#52
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvPrc22 }


										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 50 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 51 }
										}
										#51
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }

											set_key = { lhs = Tmp_1 which = TN_ProvSply21 }
											change_key = { lhs = Tmp_1 which = TN_ProvSubsistSply21 }

											change_key = { lhs = Tmp_0 which = Tmp_1 }

											set_key = { lhs = Tmp_1 which = TN_ProvDmnd21 }

											subtract_key = { lhs = Tmp_0 which = Tmp_1 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
											set_key = { lhs = Tmp_1 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#50
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = TN_SectorStockpileIn21 }
											subtract_key = { lhs = Tmp_0 which = TN_SectorStockpileOut21 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 49 }
										}
										#49
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvPrc21 }


										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#48
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }

											set_key = { lhs = Tmp_1 which = TN_ProvSply9 }
											change_key = { lhs = Tmp_1 which = TN_ProvSubsistSply9 }

											change_key = { lhs = Tmp_0 which = Tmp_1 }

											set_key = { lhs = Tmp_1 which = TN_ProvDmnd9 }

											subtract_key = { lhs = Tmp_0 which = Tmp_1 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
											set_key = { lhs = Tmp_1 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = { which = smm_type value = 40 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 44 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 46 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 47 }
										}
										#47
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = TN_SectorStockpileIn9 }
											subtract_key = { lhs = Tmp_0 which = TN_SectorStockpileOut9 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#46
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvPrc9 }


										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 45 }
										}
										#45
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }

											set_key = { lhs = Tmp_1 which = TN_ProvSply6 }
											change_key = { lhs = Tmp_1 which = TN_ProvSubsistSply6 }

											change_key = { lhs = Tmp_0 which = Tmp_1 }

											set_key = { lhs = Tmp_1 which = TN_ProvDmnd6 }

											subtract_key = { lhs = Tmp_0 which = Tmp_1 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
											set_key = { lhs = Tmp_1 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#44
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = TN_SectorStockpileIn6 }
											subtract_key = { lhs = Tmp_0 which = TN_SectorStockpileOut6 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 42 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 43 }
										}
										#43
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvPrc6 }


										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#42
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }

											set_key = { lhs = Tmp_1 which = TN_ProvSply5 }
											change_key = { lhs = Tmp_1 which = TN_ProvSubsistSply5 }

											change_key = { lhs = Tmp_0 which = Tmp_1 }

											set_key = { lhs = Tmp_1 which = TN_ProvDmnd5 }

											subtract_key = { lhs = Tmp_0 which = Tmp_1 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
											set_key = { lhs = Tmp_1 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 41 }
										}
										#41
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = TN_SectorStockpileIn5 }
											subtract_key = { lhs = Tmp_0 which = TN_SectorStockpileOut5 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#40
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvPrc5 }


										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 36 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 38 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 39 }
										}
										#39
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }

											set_key = { lhs = Tmp_1 which = TN_ProvSply4 }
											change_key = { lhs = Tmp_1 which = TN_ProvSubsistSply4 }

											change_key = { lhs = Tmp_0 which = Tmp_1 }

											set_key = { lhs = Tmp_1 which = TN_ProvDmnd4 }

											subtract_key = { lhs = Tmp_0 which = Tmp_1 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
											set_key = { lhs = Tmp_1 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#38
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = TN_SectorStockpileIn4 }
											subtract_key = { lhs = Tmp_0 which = TN_SectorStockpileOut4 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 37 }
										}
										#37
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvPrc4 }


										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#36
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }

											set_key = { lhs = Tmp_1 which = TN_ProvSply2 }
											change_key = { lhs = Tmp_1 which = TN_ProvSubsistSply2 }

											change_key = { lhs = Tmp_0 which = Tmp_1 }

											set_key = { lhs = Tmp_1 which = TN_ProvDmnd2 }

											subtract_key = { lhs = Tmp_0 which = Tmp_1 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
											set_key = { lhs = Tmp_1 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 34 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 35 }
										}
										#35
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = TN_SectorStockpileIn2 }
											subtract_key = { lhs = Tmp_0 which = TN_SectorStockpileOut2 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#34
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvPrc2 }


										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 33 }
										}
										#33
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 value = 0 }

											set_key = { lhs = Tmp_1 which = TN_ProvSply1 }
											change_key = { lhs = Tmp_1 which = TN_ProvSubsistSply1 }

											change_key = { lhs = Tmp_0 which = Tmp_1 }

											set_key = { lhs = Tmp_1 which = TN_ProvDmnd1 }

											subtract_key = { lhs = Tmp_0 which = Tmp_1 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
											set_key = { lhs = Tmp_1 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#32
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = TN_SectorStockpileIn1 }
											subtract_key = { lhs = Tmp_0 which = TN_SectorStockpileOut1 }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }

											set_key = { lhs = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
						}
					}
				}
				else = {
					if = {
						limit = {
							check_variable = { which = smm_type value = 16 }
						}
						if = {
							limit = {
								check_variable = { which = smm_type value = 24 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 28 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 30 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 31 }
										}
										#31
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=TN_ProvPrc1 }


										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#30
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
												has_province_flag = pearls
											}
											set_var_from_key = { var=calcvar_L key=Land_Resource }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
												has_province_flag = pearls
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 29 }
										}
										#29
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
												OR = {
													has_province_flag = ivory
													has_province_flag = westafrican_ivory
													has_province_flag = asian_ivory
												}
											}
											set_var_from_key = { var=calcvar_L key=Land_Forest }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
												OR = {
													has_province_flag = ivory
													has_province_flag = westafrican_ivory
													has_province_flag = asian_ivory
												}
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#28
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
												has_province_flag = coal
											}
											set_var_from_key = { var=calcvar_L key=Land_Resource }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
												has_province_flag = coal
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 26 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 27 }
										}
										#27
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
												has_province_flag = seasalt
											}
											set_var_from_key = { var=calcvar_L key=Land_Resource }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
												has_province_flag = seasalt
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#26
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
												has_province_flag = salt
											}
											set_var_from_key = { var=calcvar_L key=Land_Resource }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
												has_province_flag = salt
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 25 }
										}
										#25
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
												has_province_flag = pm
											}
											set_var_from_key = { var=calcvar_L key=Land_Resource }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
												has_province_flag = pm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#24
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
												has_province_flag = m
											}
											set_var_from_key = { var=calcvar_L key=Land_Resource }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
												has_province_flag = m
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 20 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 22 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 23 }
										}
										#23
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Prov_BULoy }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#22
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Prov_TRLoy }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 21 }
										}
										#21
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Prov_CLLoy }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#20
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Prov_BGLoy }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 18 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 19 }
										}
										#19
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Prov_NOLoy }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#18
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Prov_BUPow }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 17 }
										}
										#17
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Prov_TRPow }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#16
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Prov_CLPow }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
						}
					}
					else = {
						if = {
							limit = {
								check_variable = { which = smm_type value = 8 }
							}
							if = {
								limit = {
									check_variable = { which = smm_type value = 12 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 14 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 15 }
										}
										#15
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Prov_BGPow }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#14
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Prov_NOPow }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 13 }
										}
										#13
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											#set_key = { lhs = Tmp_0 which = Building_AmenitiesPool }
											#change_key = { lhs = Tmp_0 which = Building_HarbouragePool }
											#change_key = { lhs = Tmp_0 which = Building_CommercialPool }
											#change_key = { lhs = Tmp_0 which = Building_IndustrialPool }
											#change_key = { lhs = Tmp_0 which = Building_AcademicPool }
											#change_key = { lhs = Tmp_0 which = Building_PathingPool }
											#change_key = { lhs = Tmp_0 which = Building_AgriculturePool }
											#change_key = { lhs = Tmp_0 which = Building_MilitaryPool }

											#divide_key = { lhs = Tmp_0 which = Land_PSize }
											#set_var_from_key = { var=calcvar_L key=Tmp_0 }
											#set_key = { lhs = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#12
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = SF_Income }
											change_key = { lhs = Tmp_0 which = NM_Income }
											change_key = { lhs = Tmp_0 which = RE_Income }
											change_key = { lhs = Tmp_0 which = NO_Income }
											change_key = { lhs = Tmp_0 which = BG_Income }
											change_key = { lhs = Tmp_0 which = CL_Income }
											divide_key = { lhs = Tmp_0 which = Class_Total }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }
											set_key = { lhs = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 10 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 11 }
										}
										#11
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_key = { lhs = Tmp_0 which = SF_Wealth }
											change_key = { lhs = Tmp_0 which = NM_Wealth }
											change_key = { lhs = Tmp_0 which = RE_Wealth }
											change_key = { lhs = Tmp_0 which = NO_Wealth }
											change_key = { lhs = Tmp_0 which = BG_Wealth }
											change_key = { lhs = Tmp_0 which = CL_Wealth }
											divide_key = { lhs = Tmp_0 which = Class_Total }

											set_var_from_key = { var=calcvar_L key=Tmp_0 }
											set_key = { lhs = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#10
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Class_Notables }
											set_var_from_key = { var=Tmp_0 key=Land_PSize }

											divide_variable = { which = calcvar_L which = Tmp_0 }
											set_variable = { which = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 9 }
										}
										#9
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Class_Urban }
											set_var_from_key = { var=Tmp_0 key=Land_PSize }

											divide_variable = { which = calcvar_L which = Tmp_0 }
											set_variable = { which = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#8
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Class_Rural }
											set_var_from_key = { var=Tmp_0 key=Land_PSize }

											divide_variable = { which = calcvar_L which = Tmp_0 }
											set_variable = { which = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
						}
						else = {
							if = {
								limit = {
									check_variable = { which = smm_type value = 4 }
								}
								if = {
									limit = {
										check_variable = { which = smm_type value = 6 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 7 }
										}
										#7
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Class_Total }
											set_var_from_key = { var=Tmp_0 key=Land_PSize }

											divide_variable = { which = calcvar_L which = Tmp_0 }
											set_variable = { which = Tmp_0 value = 0 }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#6
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Class_Notables }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else = {
									if = {
										limit = {
											check_variable = { which = smm_type value = 5 }
										}
										#5
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Class_Urban }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#4
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Class_Rural }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
							}
							else = {
								if = {
									limit = {
										check_variable = { which = smm_type value = 2 }
									}
									if = {
										limit = {
											check_variable = { which = smm_type value = 3 }
										}
										#3
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Class_Total }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
									else = {
										#2
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_var_from_key = { var=calcvar_L key=Coord_Y }
										}
										smm_scale_get_maxmin = { var=calcvar_L }
										every_province = {
											limit = {
												isValidEmpty = yes
												has_province_flag = smm
											}
											set_variable = { which = calcvar_L value = 0 }
										}
									}
								}
								else_if = {
									limit = {
										check_variable = { which = smm_type value = 1 }
									}
									#1
									every_province = {
										limit = {
											isValidEmpty = yes
											has_province_flag = smm
										}
										set_key = { lhs = Tmp_1 which = Prod_S0Sply25 }
										change_key = { lhs = Tmp_1 which = Prod_S1Sply25 }
										change_key = { lhs = Tmp_1 which = Prod_S2Sply25 }
										change_key = { lhs = Tmp_1 which = Prod_S3Sply25 }
										change_key = { lhs = Tmp_1 which = Prod_S4Sply25 }
										change_key = { lhs = Tmp_1 which = Prod_S5Sply25 }
										change_key = { lhs = Tmp_1 which = Prod_S6Sply25 }
										change_key = { lhs = Tmp_1 which = Prod_S7Sply25 }
										change_key = { lhs = Tmp_1 which = Prod_S8Sply25 }
										change_key = { lhs = Tmp_1 which = Prod_S9Sply25 }
										change_key = { lhs = Tmp_1 which = Prod_S10Sply25 }
										change_key = { lhs = Tmp_1 which = Prod_S11Sply25 }
										set_var_from_key = { var=calcvar_L key=Tmp_1 }
									}
									smm_scale_get_maxmin = { var=calcvar_L }
									every_province = {
										limit = {
											isValidEmpty = yes
											has_province_flag = smm
										}
										set_variable = { which = calcvar_L value = 0 }
									}
								}
								else = {
									#0
								}
							}
						}
					}
				}
			}
		}
	}
}
smm_recalc_mapmode_3 = { ## %%% 32-choice ## resets mapmode according to smm_scale variable - part 3 of 4: Calculating the correct values
	if = {  ## do smm_scale_x_y_z
		limit = {
			check_variable = { which = smm_scale value = 16 }
		}
		if = {
			limit = {
				check_variable = { which = smm_scale value = 24 }
			}
			if = {
				limit = {
					check_variable = { which = smm_scale value = 28 }
				}
				if = {
					limit = {
						check_variable = { which = smm_scale value = 30 }
					}
					if = {
						limit = {
							check_variable = { which = smm_scale value = 31 }
						}
						#31
					}
					else = {
						#30
					}
				}
				else_if = {
					limit = {
						check_variable = { which = smm_scale value = 29 }
					}
					#29
				}
				else = {
					#28
				}
			}
			else_if = {
				limit = {
					check_variable = { which = smm_scale value = 26 }
				}
				if = {
					limit = {
						check_variable = { which = smm_scale value = 27 }
					}
					#27
				}
				else = {
					#26
				}
			}
			else_if = {
				limit = {
					check_variable = { which = smm_scale value = 25 }
				}
				#25
			}
			else = {
				#24
			}
		}
		else_if = {
			limit = {
				check_variable = { which = smm_scale value = 20 }
			}
			if = {
				limit = {
					check_variable = { which = smm_scale value = 22 }
				}
				if = {
					limit = {
						check_variable = { which = smm_scale value = 23 }
					}
					#23
				}
				else = {
					#22
				}
			}
			else_if = {
				limit = {
					check_variable = { which = smm_scale value = 21 }
				}
				#21
			}
			else = {
				#20
			}
		}
		else_if = {
			limit = {
				check_variable = { which = smm_scale value = 18 }
			}
			if = {
				limit = {
					check_variable = { which = smm_scale value = 19 }
				}
				#19
				smm_scale_linear_abs = { firstmul=0.48 }
			}
			else = {
				#18
				smm_scale_vari_exp_abs = { exp=5 }
			}
		}
		else_if = {
			limit = {
				check_variable = { which = smm_scale value = 17 }
			}
			#17
			smm_scale_vari_exp_abs = { exp=4 }
		}
		else = {
			#16
			smm_scale_vari_exp_abs = { exp=3 }
		}
	}
	else_if = {
		limit = {
			check_variable = { which = smm_scale value = 8 }
		}
		if = {
			limit = {
				check_variable = { which = smm_scale value = 12 }
			}
			if = {
				limit = {
					check_variable = { which = smm_scale value = 14 }
				}
				if = {
					limit = {
						check_variable = { which = smm_scale value = 15 }
					}
					#15
					smm_scale_vari_exp_abs = { exp=2 }
				}
				else = {
					#14
					smm_scale_vari_exp = { exp=5 }
				}
			}
			else_if = {
				limit = {
					check_variable = { which = smm_scale value = 13 }
				}
				#13
				smm_scale_vari_exp = { exp=4 }
			}
			else = {
				#12
				smm_scale_vari_exp = { exp=3 }
			}
		}
		else_if = {
			limit = {
				check_variable = { which = smm_scale value = 10 }
			}
			if = {
				limit = {
					check_variable = { which = smm_scale value = 11 }
				}
				#11
				smm_scale_vari_exp = { exp=2 }
			}
			else = {
				#10
				set_variable = { which = smm_display_0 value = 0 }
				set_variable = { which = smm_display_32 value = 32 }
				smm_scale_linear = { firstmul=0.5 }
			}
		}
		else_if = {
			limit = {
				check_variable = { which = smm_scale value = 9 }
			}
			#9
			set_variable = { which = smm_display_0 value = 0 }
			set_variable = { which = smm_display_32 value = 1.6 }
			smm_scale_linear = { firstmul=0.5 }
		}
		else = {
			#8
			set_variable = { which = smm_display_0 value = 0 }
			set_variable = { which = smm_display_32 value = 400 }
			smm_scale_linear = { firstmul=0.5 }
		}
	}
	else_if = {
		limit = {
			check_variable = { which = smm_scale value = 4 }
		}
		if = {
			limit = {
				check_variable = { which = smm_scale value = 6 }
			}
			if = {
				limit = {
					check_variable = { which = smm_scale value = 7 }
				}
				#7
				set_variable = { which = smm_display_0 value = 0 }
				set_variable = { which = smm_display_32 value = 100 }
				smm_scale_linear = { firstmul=0.5 }
			}
			else = {
				#6
				smm_scale_linear = { firstmul=0.48 }
			}
		}
		else_if = {
			limit = {
				check_variable = { which = smm_scale value = 5 }
			}
			#5
		}
		else = {
			#4
		}
	}
	else_if = {
		limit = {
			check_variable = { which = smm_scale value = 2 }
		}
		if = {
			limit = {
				check_variable = { which = smm_scale value = 3 }
			}
			#3
		}
		else = {
			#2
		}
	}
	else_if = {
		limit = {
			check_variable = { which = smm_scale value = 1 }
		}
		#1
	}
	else = {
		#0
	}
}
smm_recalc_mapmode_4 = { ## 21-choice ## resets mapmode according to smm_colors variable - part 4 of 4: Applying the colors
	if = {
		limit = {
			check_variable = { which = smm_colors value = 11 }
		}
		if = {
			limit = {
				check_variable = { which = smm_colors value = 16 }
			}
			if = {
				limit = {
					check_variable = { which = smm_colors value = 19 }
				}
				if = {
					limit = {
						check_variable = { which = smm_colors value = 20 }
					}
					if = {
						limit = {
							check_variable = { which = smm_colors value = 21 }
						}
						#21
					}
					else = {
						#20
					}
				}
				else = {
					#19
				}
			}
			else = {
				if = {
					limit = {
						check_variable = { which = smm_colors value = 17 }
					}
					if = {
						limit = {
							check_variable = { which = smm_colors value = 18 }
						}
						#18
					}
					else = {
						#17
					}
				}
				else = {
					#16
				}
			}
		}
		else = {
			if = {
				limit = {
					check_variable = { which = smm_colors value = 13 }
				}
				if = {
					limit = {
						check_variable = { which = smm_colors value = 14 }
					}
					if = {
						limit = {
							check_variable = { which = smm_colors value = 15 }
						}
						#15
					}
					else = {
						#14
					}
				}
				else = {
					#13
				}
			}
			else = {
				if = {
					limit = {
						check_variable = { which = smm_colors value = 12 }
					}
					#12
				}
				else = {
					#11
				}
			}
		}
	}
	else = {
		if = {
			limit = {
				check_variable = { which = smm_colors value = 5 }
			}
			if = {
				limit = {
					check_variable = { which = smm_colors value = 8 }
				}
				if = {
					limit = {
						check_variable = { which = smm_colors value = 9 }
					}
					if = {
						limit = {
							check_variable = { which = smm_colors value = 10 }
						}
						#10
					}
					else = {
						#9
						smm_scale_apply = { color=pby }
					}
				}
				else = {
					#8
					smm_scale_apply = { color=grw }
				}
			}
			else = {
				if = {
					limit = {
						check_variable = { which = smm_colors value = 6 }
					}
					if = {
						limit = {
							check_variable = { which = smm_colors value = 7 }
						}
						#7
						smm_scale_apply = { color=bbg }
					}
					else = {
						#6
						smm_scale_apply = { color=bbw }
					}
				}
				else = {
					#5
					smm_scale_apply = { color=bro }
				}
			}
		}
		else = {
			if = {
				limit = {
					check_variable = { which = smm_colors value = 2 }
				}
				if = {
					limit = {
						check_variable = { which = smm_colors value = 3 }
					}
					if = {
						limit = {
							check_variable = { which = smm_colors value = 4 }
						}
						#4
						smm_scale_apply = { color=rnd }
					}
					else = {
						#3
						smm_scale_apply = { color=bgw }
					}
				}
				else = {
					#2
					smm_scale_apply = { color=rwg }
				}
			}
			else = {
				if = {
					limit = {
						check_variable = { which = smm_colors value = 1 }
					}
					#1
					smm_scale_apply = { color=rygx }
				}
				else = {
					#0
					smm_scale_apply = { color=ryg }
				}
			}
		}
	}
}
smm_recalc_mapmode_res = {
	if = {
		limit = {
			has_country_flag = smm_rev
		}
		if = {
			limit = {
				check_variable = { which = smm_res value = 5 }
			}
			if = {
				limit = {
					check_variable = { which = smm_res value = 7 }
				}
				if = {
					limit = {
						check_variable = { which = smm_res value = 8 }
					}
					if = {
						limit = {
							check_variable = { which = smm_res value = 9 }
						}
						smm_res_setvalue = { v0=32 v1=31 v2=30 v3=29 v4=28 v5=27 v6=26 v7=25 v8=24 v9=23 v10=22 v11=21 v12=20 v13=19 v14=18 v15=17 v16=16 v17=15 v18=14 v19=13 v20=12 v21=11 v22=10 v23=9 v24=8 v25=7 v26=6 v27=5 v28=4 v29=3 v30=2 v31=1 v32=0 }
					}
					else = {
						smm_res_setvalue = { v0=32 v2=31 v4=30 v6=29 v8=28 v10=27 v12=26 v14=25 v16=24 v18=23 v20=22 v22=21 v24=20 v26=19 v28=18 v30=17 v32=16 T1=15 T2=14 T3=13 T4=12 T5=11 T6=10 T7=9 T8=8 T9=7 T10=6 T11=5 T12=4 T13=3 T14=2 T15=1 T16=0 }
					}
				}
				else = {
					smm_res_setvalue = { C1=32 C2=31 C3=30 C4=29 C5=28 C6=27 C7=26 C8=25 C9=24 C10=23 C11=22 C12=21 C13=20 C14=19 C15=18 C16=17 v0=16 v2=15 v4=14 v6=13 v8=12 v10=11 v12=10 v14=9 v16=8 v18=7 v20=6 v22=5 v24=4 v26=3 v28=2 v30=1 v32=0 }
				}
			}
			else = {
				if = {
					limit = {
						check_variable = { which = smm_res value = 6 }
					}
					smm_res_setvalue = { C1=32 C2=31 C3=30 C4=29 C5=28 C6=27 C7=26 C8=25 v0=24 v2=23 v4=22 v6=21 v8=20 v10=19 v12=18 v14=17 v16=16 v18=15 v20=14 v22=13 v24=12 v26=11 v28=10 v30=9 v32=8 T1=7 T2=6 T3=5 T4=4 T5=3 T6=2 T7=1 T8=0 }
				}
				else = {
					smm_res_setvalue = { v0=32 v4=30 v8=28 v12=26 v16=24 v20=22 v24=20 v28=18 v32=16 T1=14 T2=12 T3=10 T4=8 T5=6 T6=4 T7=2 T8=0 }
				}
			}
		}
		else = {
			if = {
				limit = {
					check_variable = { which = smm_res value = 2 }
				}
				if = {
					limit = {
						check_variable = { which = smm_res value = 3 }
					}
					if = {
						limit = {
							check_variable = { which = smm_res value = 4 }
						}
						smm_res_setvalue = { C1=32 C2=30 C3=28 C4=26 C5=24 C6=22 C7=20 C8=18 v0=16 v4=14 v8=12 v12=10 v16=8 v20=6 v24=4 v28=2 v32=0 }
					}
					else = {
						smm_res_setvalue = { C1=32 C2=30 C3=28 C4=26 v0=24 v4=22 v8=20 v12=18 v16=16 v20=14 v24=12 v28=10 v32=8 T1=6 T2=4 T3=2 T4=0 }
					}
				}
				else = {
					smm_res_setvalue = { v0=32 v2=30 v4=28 v6=26 v8=24 v10=22 v12=20 v14=18 v16=16 v18=14 v20=12 v22=10 v24=8 v26=6 v28=4 v30=2 v32=0 }
				}
			}
			else = {
				if = {
					limit = {
						check_variable = { which = smm_res value = 1 }
					}
					smm_res_setvalue = { v0=32 v4=28 v8=24 v12=20 v16=16 v20=12 v24=8 v28=4 v32=0 }
				}
				else = {
					smm_res_setvalue = { v0=32 v8=24 v16=16 v24=8 v32=0 }
				}
			}
		}
	}
	else = {
		if = {
			limit = {
				check_variable = { which = smm_res value = 5 }
			}
			if = {
				limit = {
					check_variable = { which = smm_res value = 7 }
				}
				if = {
					limit = {
						check_variable = { which = smm_res value = 8 }
					}
					if = {
						limit = {
							check_variable = { which = smm_res value = 9 }
						}
						smm_res_setvalue = { v0=0 v1=1 v2=2 v3=3 v4=4 v5=5 v6=6 v7=7 v8=8 v9=9 v10=10 v11=11 v12=12 v13=13 v14=14 v15=15 v16=16 v17=17 v18=18 v19=19 v20=20 v21=21 v22=22 v23=23 v24=24 v25=25 v26=26 v27=27 v28=28 v29=29 v30=30 v31=31 v32=32 }
					}
					else = {
						smm_res_setvalue = { C1=0 C2=1 C3=2 C4=3 C5=4 C6=5 C7=6 C8=7 C9=8 C10=9 C11=10 C12=11 C13=12 C14=13 C15=14 C16=15 v0=16 v2=17 v4=18 v6=19 v8=20 v10=21 v12=22 v14=23 v16=24 v18=25 v20=26 v22=27 v24=28 v26=29 v28=30 v30=31 v32=32 }
					}
				}
				else = {
					smm_res_setvalue = { v0=0 v2=1 v4=2 v6=3 v8=4 v10=5 v12=6 v14=7 v16=8 v18=9 v20=10 v22=11 v24=12 v26=13 v28=14 v30=15 v32=16 T1=17 T2=18 T3=19 T4=20 T5=21 T6=22 T7=23 T8=24 T9=25 T10=26 T11=27 T12=28 T13=29 T14=30 T15=31 T16=32 }
				}
			}
			else = {
				if = {
					limit = {
						check_variable = { which = smm_res value = 6 }
					}
					smm_res_setvalue = { C1=0 C2=1 C3=2 C4=3 C5=4 C6=5 C7=6 C8=7 v0=8 v2=9 v4=10 v6=11 v8=12 v10=13 v12=14 v14=15 v16=16 v18=17 v20=18 v22=19 v24=20 v26=21 v28=22 v30=23 v32=24 T1=25 T2=26 T3=27 T4=28 T5=29 T6=30 T7=31 T8=32 }
				}
				else = {
					smm_res_setvalue = { C1=0 C2=2 C3=4 C4=6 C5=8 C6=10 C7=12 C8=14 v0=16 v4=18 v8=20 v12=22 v16=24 v20=26 v24=28 v28=30 v32=32 }
				}
			}
		}
		else = {
			if = {
				limit = {
					check_variable = { which = smm_res value = 2 }
				}
				if = {
					limit = {
						check_variable = { which = smm_res value = 3 }
					}
					if = {
						limit = {
							check_variable = { which = smm_res value = 4 }
						}
						smm_res_setvalue = { v0=0 v4=2 v8=4 v12=6 v16=8 v20=10 v24=12 v28=14 v32=16 T1=18 T2=20 T3=22 T4=24 T5=26 T6=28 T7=30 T8=32 }
					}
					else = {
						smm_res_setvalue = { C1=0 C2=2 C3=4 C4=6 v0=8 v4=10 v8=12 v12=14 v16=16 v20=18 v24=20 v28=22 v32=24 T1=26 T2=28 T3=30 T4=32 }
					}
				}
				else = {
					smm_res_setvalue = { v0=0 v2=2 v4=4 v6=6 v8=8 v10=10 v12=12 v14=14 v16=16 v18=18 v20=20 v22=22 v24=24 v26=26 v28=28 v30=30 v32=32 }
				}
			}
			else = {
				if = {
					limit = {
						check_variable = { which = smm_res value = 1 }
					}
					smm_res_setvalue = { v0=0 v4=4 v8=8 v12=12 v16=16 v20=20 v24=24 v28=28 v32=32 }
				}
				else = {
					smm_res_setvalue = { v0=0 v8=8 v16=16 v24=24 v32=32 }
				}
			}
		}
	}
#####
	if = {
		limit = {
			has_country_flag = smm_rev
		}
		smm_scale_reverse = yes
	}
#####
}
smm_mapmode_type_religion_total = { #rel
	every_province = {
		limit = {
			isValidEmpty = yes
			has_province_flag = smm
		}
		MN_GetReligion = { typeReligion = value religion = $rel$ return = Tmp_0 }
		set_var_from_key = { var=calcvar_L key=Tmp_0 }
		set_key = { lhs = Tmp_0 value = 0 }
	}
	smm_scale_get_maxmin = { var=calcvar_L }
	every_province = {
		limit = {
			isValidEmpty = yes
			has_province_flag = smm
		}
		set_variable = { which = calcvar_L value = 0 }
	}
}
smm_mapmode_type_religion_fraction = { #rel
	every_province = {
		limit = {
			isValidEmpty = yes
			has_province_flag = smm
		}
		MN_GetReligion = { typeReligion = value religion = $rel$ return = Tmp_0 }
		divide_key = { lhs = Tmp_0 which = Class_Total }
		set_var_from_key = { var=calcvar_L key=Tmp_0 }
		set_key = { lhs = Tmp_0 value = 0 }
	}
	smm_scale_get_maxmin = { var=calcvar_L }
	every_province = {
		limit = {
			isValidEmpty = yes
			has_province_flag = smm
		}
		set_variable = { which = calcvar_L value = 0 }
	}
}
smm_mapmode_type_religion_density = { #rel
	every_province = {
		limit = {
			isValidEmpty = yes
			has_province_flag = smm
		}
		MN_GetReligion = { typeReligion = value religion = $rel$ return = Tmp_0 }
		set_var_from_key = { var=calcvar_L key=Tmp_0 }
		set_var_from_key = { var=Tmp_0 key=Land_PSize }
		divide_variable = { which = calcvar_L which = Tmp_0 }
		set_key = { lhs = Tmp_0 value = 0 }
	}
	smm_scale_get_maxmin = { var=calcvar_L }
	every_province = {
		limit = {
			isValidEmpty = yes
			has_province_flag = smm
		}
		set_variable = { which = calcvar_L value = 0 }
	}
}
smm_mapmode_type_trade = {
	set_global_flag = SMM_Trade$type$

	every_province = {
		limit = {
			isValidEmpty = yes
		}
		set_key = { lhs = SMM_Sply which = TN_ProvSply$prod$ }
		set_key = { lhs = SMM_Dmnd which = TN_ProvDmnd$prod$ }

		set_key = { lhs = SMM_Subsist which = TN_SubsistenceDisp }
		multiply_key = { lhs = SMM_Subsist value = 0.01 }
		multiply_key = { lhs = SMM_Subsist which = TN_ProvSply$prod$ }
		subtract_key = { lhs = SMM_Sply which = SMM_Subsist }

		set_key = { lhs = SMM_Trade which = TN_ProvSply51 }

		set_key = { lhs = SMM_Offer which = TN_SectorStockpile$prod$ }
		set_key = { lhs = SMM_Bid which = TN_SectorStockpileSize$prod$ }

		set_key = { lhs = SMM_Prc which = TN_ProvPrc$prod$ }
		set_key = { lhs = SMM_Dev which = Dev_Total }
		change_key = { lhs = SMM_Dev value = 1 }
		divide_key = { lhs = SMM_Dev value = 2 }
		multiply_key = { lhs = SMM_Prc which = SMM_Dev }

		set_key = { lhs = SMM_Val value = 0 }
	}

	FROM = {
		country_event = {
			id = POP_Display.999
		}
	}

	clr_global_flag = SMM_Trade$type$
}
