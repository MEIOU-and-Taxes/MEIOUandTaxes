### Set Advisor Data based on currently employed
# Update State alignment period 
# Output Keys:
# - Advisor_$category$ = lvl of advisor of category
# - Advisor_$category$Faction = faction ID of advisor of category 
Advisor_UpdateTimers = {
	if = {
		limit = {
			check_key = { lhs = State_AlignmentDuration value = 2 } # If 1, its ticking to 0 anyway and is over
		}
		subtract_key = { lhs = State_AlignmentDuration value = 1 }
	}
	else = {
		#set_key = { lhs = State_Alignment value = 0 } # used for more events
		set_key = { lhs = State_AlignmentDuration value = 0 }
	}
}
Advisor_SetData = {
	if = {
		limit = { # employed advisor of type
			NOT = {
				employed_advisor = {
					category = $type$
				}
			}
			check_key = { lhs = Advisor_$type$ value = 1 }
		}
		set_key = { lhs = Advisor_$type$Faction value = 0 }
		set_key = { lhs = Advisor_$type$ value = 0 }
		set_key = { lhs = Advisor_$type$Type value = 0 }
	}
}
# Triggered by above
Advisor_SetDataCategory = {
	Advisor_SetDataCategory_$category$ = yes
}
Advisor_SetDataCategory_ADM = {
	if = {
		limit = { # employed advisor of type
			employed_advisor = {
				category = ADM
			}
		}
		set_key = { lhs = Tmp_0 which = Advisor_ADM }
		set_key = { lhs = Tmp_1 which = Advisor_ADMType }
		set_key = { lhs = Tmp_2 which = Advisor_ADMFaction }
		# Check data for each advisor
		trigger_switch = {
			on_trigger = advisor
			cardinal_CL = {
				if = {
					limit = {
						cardinal_CL = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						cardinal_CL = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 3 }
			}
			philosopher_CL = {
				if = {
					limit = {
						philosopher_CL = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						philosopher_CL = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 3 }
			}
			philosopher_NO = {
				if = {
					limit = {
						philosopher_NO = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						philosopher_NO = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 1 }
			}
			philosopher_BU = {
				if = {
					limit = {
						philosopher_BU = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						philosopher_BU = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 5 }
			}
			philosopher_BG = {
				if = {
					limit = {
						philosopher_BG = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						philosopher_BG = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 2 }
			}
			philosopher_TR = {
				if = {
					limit = {
						philosopher_TR = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						philosopher_TR = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 4 }
			}
			natural_scientist_BU = {
				if = {
					limit = {
						natural_scientist_BU = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						natural_scientist_BU = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 5 }
			}
			natural_scientist_NO = {
				if = {
					limit = {
						natural_scientist_NO = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						natural_scientist_NO = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 1 }
			}
			natural_scientist_BG = {
				if = {
					limit = {
						natural_scientist_BG = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						natural_scientist_BG = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 2 }
			}
			artist_BG = {
				if = {
					limit = {
						artist_BG = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						artist_BG = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 2 }
			}
			artist_NO = {
				if = {
					limit = {
						artist_NO = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						artist_NO = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 1 }
			}
			artist_BU = {
				if = {
					limit = {
						artist_BU = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						artist_BU = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 5 }
			}
			artist_TR = {
				if = {
					limit = {
						artist_TR = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						artist_TR = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 4 }
			}
			treasurer_BG = {
				if = {
					limit = {
						treasurer_BG = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						treasurer_BG = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 2 }
			}
			treasurer_NO = {
				if = {
					limit = {
						treasurer_NO = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						treasurer_NO = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 1 }
			}
			treasurer_BU = {
				if = {
					limit = {
						treasurer_BU = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						treasurer_BU = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 5 }
			}
			treasurer_TR = {
				if = {
					limit = {
						treasurer_TR = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						treasurer_TR = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 4 }
			}
			theologian_CL = {
				if = {
					limit = {
						theologian_CL = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						theologian_CL = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 3 }
			}
			master_of_mint_BG = {
				if = {
					limit = {
						master_of_mint_BG = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						master_of_mint_BG = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 2 }
			}
			master_of_mint_BU = {
				if = {
					limit = {
						master_of_mint_BU = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						master_of_mint_BU = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 5 }
			}
			master_of_mint_NO = {
				if = {
					limit = {
						master_of_mint_NO = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						master_of_mint_NO = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 1 }
			}
			inquisitor_CL = {
				if = {
					limit = {
						inquisitor_CL = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						inquisitor_CL = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 3 }
			}
			alderman_NO = {
				if = {
					limit = {
						alderman_NO = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						alderman_NO = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 1 }
			}
			alderman_BU = {
				if = {
					limit = {
						alderman_BU = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						alderman_BU = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 5 }
			}
			alderman_BG = {
				if = {
					limit = {
						alderman_BG = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						alderman_BG = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 2 }
			}
			architect_BU = {
				if = {
					limit = {
						architect_BU = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						architect_BU = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 5 }
			}
			architect_BG = {
				if = {
					limit = {
						architect_BG = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						architect_BG = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 2 }
			}
			high_judge_BU = {
				if = {
					limit = {
						high_judge_BU = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						high_judge_BU = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 5 }
			}
			astronomist_NO = {
				if = {
					limit = {
						astronomist_NO = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						astronomist_NO = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 1 }
			}
			astronomist_BU = {
				if = {
					limit = {
						astronomist_BU = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						astronomist_BU = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 5 }
			}
			astronomist_BG = {
				if = {
					limit = {
						astronomist_BG = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						astronomist_BG = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 2 }
			}
			#jewish_financier_BG = {
			#	if = {
			#		limit = {
			#			jewish_financier_BG = 3
			#		}
			#		set_key = { lhs = Advisor_ADM value = 3 }
			#	}
			#	else_if = {
			#		limit = {
			#			jewish_financier_BG = 2
			#		}
			#		set_key = { lhs = Advisor_ADM value = 2 }
			#	}
			#	else = {
			#		set_key = { lhs = Advisor_ADM value = 1 }
			#	}
			#	#set_key = { lhs = Advisor_ADMType value = 1 }
			#	set_key = { lhs = Advisor_ADMFaction value = 2 }
			#}
			composer_BG = {
				if = {
					limit = {
						composer_BG = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						composer_BG = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 2 }
			}
			composer_NO = {
				if = {
					limit = {
						composer_NO = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						composer_NO = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 1 }
			}
			composer_BU = {
				if = {
					limit = {
						composer_BU = 3
					}
					set_key = { lhs = Advisor_ADM value = 3 }
				}
				else_if = {
					limit = {
						composer_BU = 2
					}
					set_key = { lhs = Advisor_ADM value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_ADM value = 1 }
				}
				#set_key = { lhs = Advisor_ADMType value = 1 }
				set_key = { lhs = Advisor_ADMFaction value = 5 }
			}
		}
		if = {
			limit = {
				check_key = { lhs = Advisor_ADM value = 1 }
				OR = {
					NOT = { check_key = { lhs = State_AlignmentDuration value = 1 } }
					NOT = { is_key_equal = { lhs = State_Alignment which = Advisor_ADMFaction } } # If aligned, no stab hit
				}
				#NOT = { is_key_equal = { lhs = Tmp_1 which = Advisor_$category$Type } }
				NOT = { is_key_equal = { lhs = Tmp_2 which = Advisor_ADMFaction } }
			}
		}
	}
	else_if = {
		limit = {
			check_key = { lhs = Advisor_ADM value = 1 } # had advisor in variable but no longer one employed 
		}
		# Null existing advisor data
		set_key = { lhs = Advisor_ADM value = 0 }
		set_key = { lhs = Advisor_ADMType value = 0 }
		set_key = { lhs = Advisor_ADMFaction value = 0 }
	}
	else = { # no data and no employed advisor
		set_key = { lhs = Advisor_ADM value = 0 }
		set_key = { lhs = Advisor_ADMType value = 0 }
		set_key = { lhs = Advisor_ADMFaction value = 0 }
	}
}
Advisor_SetDataCategory_DIP = {
	if = {
		limit = {
			employed_advisor = {
				category = DIP
			}
		}
		set_key = { lhs = Tmp_0 which = Advisor_DIP }
		set_key = { lhs = Tmp_1 which = Advisor_DIPType }
		set_key = { lhs = Tmp_2 which = Advisor_DIPFaction }
		trigger_switch = {
			on_trigger = advisor
			statesman_BU = {
				if = {
					limit = {
						statesman_BU = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						statesman_BU = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 5 }
			}
			statesman_NO = {
				if = {
					limit = {
						statesman_NO = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						statesman_NO = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 1 }
			}
			statesman_BG = {
				if = {
					limit = {
						statesman_BG = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						statesman_BG = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 2 }
			}
			statesman_TR = {
				if = {
					limit = {
						statesman_TR = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						statesman_TR = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 4 }
			}
			statesman_CL = {
				if = {
					limit = {
						statesman_CL = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						statesman_CL = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 3 }
			}
			naval_reformer_BU = {
				if = {
					limit = {
						naval_reformer_BU = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						naval_reformer_BU = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 5 }
			}
			naval_reformer_NO = {
				if = {
					limit = {
						naval_reformer_NO = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						naval_reformer_NO = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 1 }
			}
			naval_reformer_BG = {
				if = {
					limit = {
						naval_reformer_BG = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						naval_reformer_BG = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 2 }
			}
			trader_BG = {
				if = {
					limit = {
						trader_BG = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						trader_BG = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 2 }
			}
			spymaster_BG = {
				if = {
					limit = {
						spymaster_BG = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						spymaster_BG = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 2 }
			}
			spymaster_NO = {
				if = {
					limit = {
						spymaster_NO = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						spymaster_NO = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 1 }
			}
			spymaster_BU = {
				if = {
					limit = {
						spymaster_BU = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						spymaster_BU = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 5 }
			}
			colonial_governor_BG = {
				if = {
					limit = {
						colonial_governor_BG = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						colonial_governor_BG = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 2 }
			}
			colonial_governor_NO = {
				if = {
					limit = {
						colonial_governor_NO = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						colonial_governor_NO = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 1 }
			}
			colonial_governor_BU = {
				if = {
					limit = {
						colonial_governor_BU = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						colonial_governor_BU = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 5 }
			}
			diplomat_BG = {
				if = {
					limit = {
						diplomat_BG = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						diplomat_BG = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 2 }
			}
			diplomat_NO = {
				if = {
					limit = {
						diplomat_NO = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						diplomat_NO = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 1 }
			}
			diplomat_BU = {
				if = {
					limit = {
						diplomat_BU = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						diplomat_BU = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 5 }
			}
			diplomat_CL = {
				if = {
					limit = {
						diplomat_CL = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						diplomat_CL = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 3 }
			}
			navigator_BU = {
				if = {
					limit = {
						navigator_BU = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						navigator_BU = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 5 }
			}
			navigator_NO = {
				if = {
					limit = {
						navigator_NO = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						navigator_NO = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 1 }
			}
			navigator_BG = {
				if = {
					limit = {
						navigator_BG = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						navigator_BG = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 2 }
			}
			collector_BU = {
				if = {
					limit = {
						collector_BU = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						collector_BU = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 5 }
			}
			sheriff_NO = {
				if = {
					limit = {
						sheriff_NO = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						sheriff_NO = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 1 }
			}
			sheriff_BU = {
				if = {
					limit = {
						sheriff_BU = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						sheriff_BU = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 5 }
			}
			banker_BG = {
				if = {
					limit = {
						banker_BG = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						banker_BG = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 2 }
			}
			grand_admiral_NO = {
				if = {
					limit = {
						grand_admiral_NO = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						grand_admiral_NO = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 1 }
			}
			grand_admiral_BU = {
				if = {
					limit = {
						grand_admiral_BU = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						grand_admiral_BU = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 5 }
			}
			grand_admiral_BG = {
				if = {
					limit = {
						grand_admiral_BG = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						grand_admiral_BG = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 2 }
			}
			lord_proprietor_NO = {
				if = {
					limit = {
						lord_proprietor_NO = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						lord_proprietor_NO = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 1 }
			}
			lord_proprietor_BU = {
				if = {
					limit = {
						lord_proprietor_BU = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						lord_proprietor_BU = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 5 }
			}
			lord_proprietor_BG = {
				if = {
					limit = {
						lord_proprietor_BG = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						lord_proprietor_BG = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 2 }
			}
			rear_admiral_BU = {
				if = {
					limit = {
						rear_admiral_BU = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						rear_admiral_BU = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 5 }
			}
			rear_admiral_NO = {
				if = {
					limit = {
						rear_admiral_NO = 3
					}
					set_key = { lhs = Advisor_DIP value = 3 }
				}
				else_if = {
					limit = {
						rear_admiral_NO = 2
					}
					set_key = { lhs = Advisor_DIP value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_DIP value = 1 }
				}
				#set_key = { lhs = Advisor_DIPType value = 1 }
				set_key = { lhs = Advisor_DIPFaction value = 1 }
			}
		}
		if = {
			limit = {
				check_key = { lhs = Advisor_DIP value = 1 }
				OR = {
					NOT = { check_key = { lhs = State_AlignmentDuration value = 1 } }
					NOT = { is_key_equal = { lhs = State_Alignment which = Advisor_DIPFaction } } # If aligned, no stab hit
				}
				#NOT = { is_key_equal = { lhs = Tmp_1 which = Advisor_DIPType } }
				NOT = { is_key_equal = { lhs = Tmp_2 which = Advisor_DIPFaction } }
			}
		}
	}
	else_if = {
		limit = {
			check_key = { lhs = Advisor_DIP value = 1 }
		}
		set_key = { lhs = Advisor_DIP value = 0 }
		set_key = { lhs = Advisor_DIPType value = 0 }
		set_key = { lhs = Advisor_DIPFaction value = 0 }
	}
	else = {
		set_key = { lhs = Advisor_DIP value = 0 }
		set_key = { lhs = Advisor_DIPType value = 0 }
		set_key = { lhs = Advisor_DIPFaction value = 0 }
	}
}
Advisor_SetDataCategory_MIL = {
	if = {
		limit = {
			employed_advisor = {
				category = MIL
			}
		}
		set_key = { lhs = Tmp_0 which = Advisor_MIL }
		set_key = { lhs = Tmp_1 which = Advisor_MILType }
		set_key = { lhs = Tmp_2 which = Advisor_MILFaction }
		trigger_switch = {
			on_trigger = advisor
			army_reformer_NO = {
				if = {
					limit = {
						army_reformer_NO = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						army_reformer_NO = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 1 }
			}
			army_reformer_TR = {
				if = {
					limit = {
						army_reformer_TR = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						army_reformer_TR = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 4 }
			}
			army_reformer_BU = {
				if = {
					limit = {
						army_reformer_BU = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						army_reformer_BU = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 5 }
			}
			army_reformer_CL = {
				if = {
					limit = {
						army_reformer_CL = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						army_reformer_CL = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 3 }
			}
			army_organiser_NO = {
				if = {
					limit = {
						army_organiser_NO = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						army_organiser_NO = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 1 }
			}
			army_organiser_TR = {
				if = {
					limit = {
						army_organiser_TR = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						army_organiser_TR = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 4 }
			}
			army_organiser_BU = {
				if = {
					limit = {
						army_organiser_BU = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						army_organiser_BU = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 5 }
			}
			commandant_NO = {
				if = {
					limit = {
						commandant_NO = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						commandant_NO = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 1 }
			}
			commandant_TR = {
				if = {
					limit = {
						commandant_TR = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						commandant_TR = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 4 }
			}
			commandant_BU = {
				if = {
					limit = {
						commandant_BU = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						commandant_BU = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 5 }
			}
			quartermaster_NO = {
				if = {
					limit = {
						quartermaster_NO = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						quartermaster_NO = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 1 }
			}
			quartermaster_TR = {
				if = {
					limit = {
						quartermaster_TR = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						quartermaster_TR = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 4 }
			}
			quartermaster_BU = {
				if = {
					limit = {
						quartermaster_BU = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						quartermaster_BU = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 5 }
			}
			recruitmaster_NO = {
				if = {
					limit = {
						recruitmaster_NO = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						recruitmaster_NO = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 1 }
			}
			recruitmaster_TR = {
				if = {
					limit = {
						recruitmaster_TR = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						recruitmaster_TR = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 4 }
			}
			recruitmaster_BU = {
				if = {
					limit = {
						recruitmaster_BU = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						recruitmaster_BU = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 5 }
			}
			fortification_expert_NO = {
				if = {
					limit = {
						fortification_expert_NO = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						fortification_expert_NO = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 1 }
			}
			fortification_expert_TR = {
				if = {
					limit = {
						fortification_expert_TR = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						fortification_expert_TR = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 4 }
			}
			fortification_expert_BU = {
				if = {
					limit = {
						fortification_expert_BU = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						fortification_expert_BU = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 5 }
			}
			fortification_expert_CL = {
				if = {
					limit = {
						fortification_expert_CL = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						fortification_expert_CL = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 3 }
			}
			grand_captain_NO = {
				if = {
					limit = {
						grand_captain_NO = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						grand_captain_NO = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 1 }
			}
			grand_captain_BU = {
				if = {
					limit = {
						grand_captain_BU = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						grand_captain_BU = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 5 }
			}
			grand_captain_BG = {
				if = {
					limit = {
						grand_captain_BG = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						grand_captain_BG = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 2 }
			}
			colonel_BU = {
				if = {
					limit = {
						colonel_BU = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						colonel_BU = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 5 }
			}
			colonel_NO = {
				if = {
					limit = {
						colonel_NO = 3
					}
					set_key = { lhs = Advisor_MIL value = 3 }
				}
				else_if = {
					limit = {
						colonel_NO = 2
					}
					set_key = { lhs = Advisor_MIL value = 2 }
				}
				else = {
					set_key = { lhs = Advisor_MIL value = 1 }
				}
				#set_key = { lhs = Advisor_MILType value = 1 }
				set_key = { lhs = Advisor_MILFaction value = 1 }
			}
		}
		if = {
			limit = {
				check_key = { lhs = Advisor_MIL value = 1 }
				OR = {
					NOT = { check_key = { lhs = State_AlignmentDuration value = 1 } }
					NOT = { is_key_equal = { lhs = State_Alignment which = Advisor_MILFaction } } # If aligned, no stab hit
				}
				#NOT = { is_key_equal = { lhs = Tmp_1 which = Advisor_MILType } }
				NOT = { is_key_equal = { lhs = Tmp_2 which = Advisor_MILFaction } }
			}
		}
	}
	else_if = {
		limit = {
			check_key = { lhs = Advisor_MIL value = 1 }
		}
		set_key = { lhs = Advisor_MIL value = 0 }
		set_key = { lhs = Advisor_MILType value = 0 }
		set_key = { lhs = Advisor_MILFaction value = 0 }
	}
	else = {
		set_key = { lhs = Advisor_MIL value = 0 }
		set_key = { lhs = Advisor_MILType value = 0 }
		set_key = { lhs = Advisor_MILFaction value = 0 }
	}
}
# Spawn Cabinet = 1 advisors per type which is reduced in costs
# Inputs:
# $Faction$ - Faction of which to spawn an advisor from
# $Var1$ - Key name, which hold advisor type ID for Faction
# $Var2$ - Key name, which hold advisor type ID for Faction
# $Var3$ - Key name, which hold advisor type ID for Faction
Pol_AdvisorGenerateCabinet = {
	Pol_AdvisorGenerateCabinet_$Faction$ = { Var1 = $Var1$ Var2 = $Var2$ Var3 = $Var3$ }
}
Pol_AdvisorGenerateCabinet_NO = {
	#ADM
	random_list = {
		4 = {
			set_key = { lhs = $Var1$ value = 2 } # philosopher
		}
		6 = {
			set_key = { lhs = $Var1$ value = 3 } # natural scientist
		}
		6 = {
			set_key = { lhs = $Var1$ value = 4 } # artist
		}
		12 = {
			set_key = { lhs = $Var1$ value = 5 } # treasurer
		}
		12 = {
			set_key = { lhs = $Var1$ value = 7 } # master of mint
		}
		16 = {
			set_key = { lhs = $Var1$ value = 9 } # alderman
		}
		4 = {
			set_key = { lhs = $Var1$ value = 12 } # astronomist
		}
		5 = {
			set_key = { lhs = $Var1$ value = 14 } # composer
		}
	}
	#DIP
	random_list = {
		15 = {
			set_key = { lhs = $Var2$ value = 1 } # statesman
		}
		10 = {
			set_key = { lhs = $Var2$ value = 2 } # naval reformer
		}
		8 = {
			set_key = { lhs = $Var2$ value = 4 } # spymaster
		}
		8 = {
			set_key = { lhs = $Var2$ value = 5 } # colonial governor
		}
		7 = {
			set_key = { lhs = $Var2$ value = 6 } # diplomat
		}
		5 = {
			set_key = { lhs = $Var2$ value = 7 } # navigator
		}
		5 = {
			set_key = { lhs = $Var2$ value = 9 } # grand admiral
		}
		5 = {
			set_key = { lhs = $Var2$ value = 10 } # lord proprietor
		}
		8 = {
			set_key = { lhs = $Var2$ value = 11 } # rear admiral
		}
		10 = {
			set_key = { lhs = $Var2$ value = 13 } # sheriff
		}
	}
	#MIL
	random_list = {
		12 = {
			set_key = { lhs = $Var3$ value = 1 } # army reformer
		}
		13 = {
			set_key = { lhs = $Var3$ value = 2 } # army organiser
		}
		12 = {
			set_key = { lhs = $Var3$ value = 3 } # commandant
		}
		13 = {
			set_key = { lhs = $Var3$ value = 4 } # quartermaster
		}
		12 = {
			set_key = { lhs = $Var3$ value = 5 } # recruitmaster
		}
		13 = {
			set_key = { lhs = $Var3$ value = 6 } # fortification master
		}
		12 = {
			set_key = { lhs = $Var3$ value = 7 } # grand captain
		}
		13 = {
			set_key = { lhs = $Var3$ value = 8 } # colonel
		}
	}
}
Pol_AdvisorGenerateCabinet_BU = {
	#ADM
	random_list = {
		#7 = {
		#	set_key = { lhs = $Var1$ value = 1 }
		#}
		10 = {
			set_key = { lhs = $Var1$ value = 2 } # philosopher
		}
		8 = {
			set_key = { lhs = $Var1$ value = 3 } # natural scientist
		}
		4 = {
			set_key = { lhs = $Var1$ value = 4 } # artist
		}
		10 = {
			set_key = { lhs = $Var1$ value = 5 } # treasurer
		}
		#7 = {
		#	set_key = { lhs = $Var1$ value = 6 }
		#}
		12 = {
			set_key = { lhs = $Var1$ value = 7 } # master of mint
		}
		#7 = {
		#	set_key = { lhs = $Var1$ value = 8 }
		#}
		14 = {
			set_key = { lhs = $Var1$ value = 9 } # alderman
		}
		8 = {
			set_key = { lhs = $Var1$ value = 10 } # architect
		}
		20 = {
			set_key = { lhs = $Var1$ value = 11 }	# high judge 
		}
		8 = {
			set_key = { lhs = $Var1$ value = 12 } # astronomist
		}
		#8 = {
		#	set_key = { lhs = $Var1$ value = 13 }
		#}
		5 = {
			set_key = { lhs = $Var1$ value = 14 } # composer
		}
	}
	#DIP
	random_list = {
		20 = {
			set_key = { lhs = $Var2$ value = 1 } # statesman
		}
		8 = {
			set_key = { lhs = $Var2$ value = 2 }   # naval reformer
		}
		#8 = {
		#	set_key = { lhs = $Var2$ value = 3 }
		#}
		12 = {
			set_key = { lhs = $Var2$ value = 4 }  # spymaster
		}
		8 = {
			set_key = { lhs = $Var2$ value = 5 } # colonial governor
		}
		10 = {
			set_key = { lhs = $Var2$ value = 6 } # diplomat
		}
		8 = {
			set_key = { lhs = $Var2$ value = 7 } # navigator
		}
		#7 = {
		#	set_key = { lhs = $Var2$ value = 8 }
		#}
		8 = {
			set_key = { lhs = $Var2$ value = 9 } # grand admiral
		}
		7 = {
			set_key = { lhs = $Var2$ value = 10 } # lord proprietor
		}
		8 = {
			set_key = { lhs = $Var2$ value = 11 } # rear admiral
		}
		7 = {
			set_key = { lhs = $Var2$ value = 12 }
		}
		14 = {
			set_key = { lhs = $Var2$ value = 13 } # sheriff
		}
	}
	#MIL
	random_list = {
		12 = {
			set_key = { lhs = $Var3$ value = 1 } # army reformer
		}
		13 = {
			set_key = { lhs = $Var3$ value = 2 } # army organiser
		}
		12 = {
			set_key = { lhs = $Var3$ value = 3 } # commandant
		}
		13 = {
			set_key = { lhs = $Var3$ value = 4 } # quartermaster
		}
		12 = {
			set_key = { lhs = $Var3$ value = 5 } # recruitmaster
		}
		13 = {
			set_key = { lhs = $Var3$ value = 6 } # fortification master
		}
		12 = {
			set_key = { lhs = $Var3$ value = 7 } # grand captain
		}
		13 = {
			set_key = { lhs = $Var3$ value = 8 } # colonel
		}
	}
}
Pol_AdvisorGenerateCabinet_CL = {
	#ADM
	random_list = {
		40 = {
			set_key = { lhs = $Var1$ value = 1 } # cardinal
		}
		15 = {
			set_key = { lhs = $Var1$ value = 2 } # philosopher
		}
		25 = {
			set_key = { lhs = $Var1$ value = 6 } # theologian
		}
		20 = {
			set_key = { lhs = $Var1$ value = 8 } # inquisitor
		}

	}
	#DIP
	random_list = {
		50 = {
			set_key = { lhs = $Var2$ value = 1 } # statesman
		}
		50 = {
			set_key = { lhs = $Var2$ value = 6 } # diplomat
		}
	}
	#MIL
	random_list = {
		50 = {
			set_key = { lhs = $Var3$ value = 1 } # army reformer
		}
		50 = {
			set_key = { lhs = $Var3$ value = 6 } # fortification expert
		}
	}
}
Pol_AdvisorGenerateCabinet_BG = {
	#ADM
	random_list = {
		15 = {
			set_key = { lhs = $Var1$ value = 2 } # philopher
		}
		15 = {
			set_key = { lhs = $Var1$ value = 3 } # natural scientist
		}
		15 = {
			set_key = { lhs = $Var1$ value = 4 } # artist
		}
		20 = {
			set_key = { lhs = $Var1$ value = 5 } # treasurer
		}
		12 = {
			set_key = { lhs = $Var1$ value = 7 } # master of mint
		}
		5 = {
			set_key = { lhs = $Var1$ value = 9 } # alderman
		}
		16 = {
			set_key = { lhs = $Var1$ value = 10 } # architect
		}
		8 = {
			set_key = { lhs = $Var1$ value = 12 } # astronomist
		}
		8 = {
			set_key = { lhs = $Var1$ value = 14 } # composer
		}
	}
	#DIP
	random_list = {
		4 = {
			set_key = { lhs = $Var2$ value = 1 } # statesman
		}
		5 = {
			set_key = { lhs = $Var2$ value = 2 } # naval reformer
		}
		14 = {
			set_key = { lhs = $Var2$ value = 3 } # trader
		}
		4 = {
			set_key = { lhs = $Var2$ value = 4 } # spymaster
		}
		2 = {
			set_key = { lhs = $Var2$ value = 5 } # colonial governor
		}
		6 = {
			set_key = { lhs = $Var2$ value = 6 } # diplomat
		}
		12 = {
			set_key = { lhs = $Var2$ value = 7 } # navigator
		}
		15 = {
			set_key = { lhs = $Var2$ value = 8 } # banker
		}
		7 = {
			set_key = { lhs = $Var2$ value = 9 } # grand admiral
		}
		5 = {
			set_key = { lhs = $Var2$ value = 10 } # lord proprietor
		}
	}
	#MIL
	#random_list = {
	#	100 = {
			set_key = { lhs = $Var3$ value = 7 } # grand captain
	#	}
	#}
}
Pol_AdvisorGenerateCabinet_TR = {
	#ADM
	random_list = {
		34 = {
			set_key = { lhs = $Var1$ value = 2 } # philosopher
		}
		33 = {
			set_key = { lhs = $Var1$ value = 4 } # artist
		}
		33 = {
			set_key = { lhs = $Var1$ value = 5 } # treasurer
		}
	}
	#DIP
	set_key = { lhs = $Var2$ value = 1 } # statesman
	#MIL
	random_list = {
		12 = {
			set_key = { lhs = $Var3$ value = 1 } # army reformer
		}
		13 = {
			set_key = { lhs = $Var3$ value = 2 } # army organiser
		}
		12 = {
			set_key = { lhs = $Var3$ value = 3 } # commandant
		}
		13 = {
			set_key = { lhs = $Var3$ value = 4 } # quartermaster
		}
		12 = {
			set_key = { lhs = $Var3$ value = 5 } # recruitmaster
		}
		13 = {
			set_key = { lhs = $Var3$ value = 6 } # fortification expert
		}
	}
}

Advisor_CreateAdvisor_Faction = {
	define_advisor = {
		type = $Type$_$Faction$
		[[skill] skill = $skill$]
		[[name] name = $name$]
		[[location] location = $location$]
		[[discount] discount = $discount$]
		[[cost_multiplier] cost_multiplier = $cost_multiplier$]
		[[female] female = $female$]
		[[culture] culture = $culture$]
		[[religion] religion = $religion$]
	}
}

Advisor_RemoveAdvisor = {
	if = {
		limit = {
			employed_advisor = {
				category = $category$
			}
		}
		remove_advisor_by_category = $category$
	}
	hidden_effect = {
		set_key = { lhs = Advisor_$category$ value = 0 }
		set_key = { lhs = Advisor_$category$Type value = 0 }
		set_key = { lhs = Advisor_$category$Faction value = 0 }
	}
}

Advisor_Get_Mana_per_Type = {
	set_key = { lhs = Advisor_$type$ value = 0 }
	if = {
		limit = {
			employed_advisor = {
				category = $type$
				skill = 3
			}
		}
		change_key = { lhs = Advisor_$type$ value = 3 }
	}
	else_if = {
		limit = {
			employed_advisor = {
				category = $type$
				skill = 2
			}
		}
		change_key = { lhs = Advisor_$type$ value = 2 }
	}
	else_if = {
		limit = {
			employed_advisor = {
				category = $type$
				skill = 1
			}
		}
		change_key = { lhs = Advisor_$type$ value = 1 }
	}
}