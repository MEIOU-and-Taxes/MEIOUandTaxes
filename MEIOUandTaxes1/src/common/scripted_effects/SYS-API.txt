#Modifiers (Modi_)
#Effects (Effect_)
# Add Country (and Province if a thing) modifier script to this list

# Public effects list:
# FC_Boost = { Faction = NO Value = 20 } - Boosts influence of specified faction by specified value


# A main effect that fires a list of effects which set Modi values in country and province
# Proper way to add a new api is to simply write a new effect that sets Modi values and call that in this effect
# Proper way to edit preexisting api is to go into the specific effect that sets related Modi values and add in the logic there
Modi_Main = {
	if = {
		limit = {
			NOT = { has_global_flag = Global_Modi_Set }
		}
		AAA = { Modi_Global = yes }
		set_global_flag = Global_Modi_Set
	}
	every_country = {
		limit = {
			isValidCountry = yes
		}
		Modi_AI_ReformDesire_Country = yes
		Modi_TradeCountry = yes
		Modi_MilCountry = yes
		Modi_GrowthCountry = yes
		Modi_ProdCountry = yes
		Modi_BuildingCountry = yes
		Modi_MerchantsCountry = yes
		Modi_InfraMaintenanceCountry = yes
		Modi_ExecutiveAuthorityCountry = yes
		Modi_AdminCountry = yes #TBD
		Modi_CorruptionCountry = yes
		Modi_AutonomyCountry = yes #TBD
		Modi_EliteLoyaltyCountry = yes
		Modi_ElitePowerCountry = yes
		Modi_ElitePromotionDemotion = yes
		Modi_TariffCountry = yes #TBD
		#Modi_DemandCountry = yes
		Modi_TreatmentCountry = yes
		Modi_CECountry = yes
		Modi_FactionsCountry = yes
		Modi_TaxCountry = yes
		Modi_DiplomacyCountry = yes
		#TBD means doesnt do anything yet
	}

	regiongroup = {
		region = {
			limit = {
				isValidProv = yes
			}
			Modi_TradeProvince = yes
			Modi_MilProvince = yes
			Modi_GrowthProvince = yes
			Modi_ProdProvince = yes
			Modi_BuildingProvince = yes
			Modi_MerchantsProvince = yes
			Modi_InfraMaintenanceProvince = yes
			Modi_AdminProvince = yes
			Modi_CorruptionProvince = yes
			Modi_AutonomyProvince = yes
			Modi_EliteLoyaltyProvince = yes
			Modi_ElitePowerProvince = yes
			Modi_ElitePromotionDemotion_Province = yes
			Modi_TariffProvince = yes
			Modi_DemandProvince = yes
			Modi_TreatmentProvince = yes
			Modi_CEProvince = yes
			Modi_TaxProvince = yes
		}
	}
}
Modi_Country = {
	Modi_AI_ReformDesire_Country = yes
	Modi_TradeCountry = yes
	Modi_MilCountry = yes
	Modi_GrowthCountry = yes
	Modi_ProdCountry = yes
	Modi_BuildingCountry = yes
	Modi_MerchantsCountry = yes
	Modi_InfraMaintenanceCountry = yes
	Modi_ExecutiveAuthorityCountry = yes
	Modi_AdminCountry = yes #TBD
	Modi_CorruptionCountry = yes
	Modi_AutonomyCountry = yes #TBD
	Modi_EliteLoyaltyCountry = yes
	Modi_ElitePowerCountry = yes
	Modi_ElitePromotionDemotion = yes
	Modi_TariffCountry = yes #TBD
	#Modi_DemandCountry = yes
	Modi_TreatmentCountry = yes
	Modi_CECountry = yes
	Modi_FactionsCountry = yes
	Modi_TaxCountry = yes
	Modi_DiplomacyCountry = yes
	#TBD means doesnt do anything yet
	every_owned_province = {
		Modi_TradeProvince = yes
		Modi_MilProvince = yes
		Modi_GrowthProvince = yes
		Modi_ProdProvince = yes
		Modi_BuildingProvince = yes
		Modi_MerchantsProvince = yes
		Modi_InfraMaintenanceProvince = yes
		Modi_AdminProvince = yes
		Modi_CorruptionProvince = yes
		Modi_AutonomyProvince = yes
		Modi_EliteLoyaltyProvince = yes
		Modi_ElitePowerProvince = yes
		Modi_ElitePromotionDemotion_Province = yes
		Modi_TariffProvince = yes
		Modi_DemandProvince = yes
		Modi_TreatmentProvince = yes
		Modi_CEProvince = yes
		Modi_TaxProvince = yes
	}
}
Modi_Global = {
	# Global Defines
	API_AI_DEFINES = yes
	API_DIPLOMACY_DEFINES = yes
}

get_global_define = {
	set_key = { lhs = $define$ which = AAA }
}
clear_global_define = {
	set_key = { lhs = $define$ value = 0 }
}

# Modify settings for AI Calculations 
API_AI_DEFINES = {
	### AI - State Building Defines
	#set_key = { lhs = DEFINE_AI_BUILDS_AMENITIES_POP_RATIO_BELOW_CAP value = 1.10 } # Above this fraction of the amenities cap the AI will attempt to build amenities
	#set_key = { lhs = DEFINE_AI_BUILDS_AMENITIES_POP_RATIO_BELOW_CAP_BIG value = 0.8 } # Above this fraction of the amenities cap the AI will attempt to build amenities in its 3 biggest cities
	
	#set_key = { lhs = DEFINE_AI_STATE_BUILDING_USE_TREASURY_PERC 	value = 0.75 } # (1 - value) * treasury will always be kept in reserve and not be used for building infrastructure
	#set_key = { lhs = DEFINE_AI_STATE_BUILDING_BUDGET_CE 			value = 0.25 } # the state building AI will try to use this fraction of their budget to build CE infrastructure (the rest 1-value is used on amenities)
	#set_key = { lhs = DEFINE_AI_STATE_BUILDING_BUDGET_CAPITOL 		value = 0.33 } # the state building AI will try to use this fraction of their CE budget to build a capitol infrastructure in their capital
	#set_key = { lhs = DEFINE_AI_STATE_BUILDING_BUDGET_BIG_CITIES	value = 0.55 } # the state building AI will try to use this fraction of their budget to build amenities in 3 biggest cities (the rest 1-value is used on small cities)

	### AI - Tax Mana Assignment Defines
	#set_key = { lhs = DEFINE_AI_BASE_MANA_TAX_SPENDING value = 1 } # Base spending of mana -> relative mana fraction on top
	#set_key = { lhs = DEFINE_AI_MANA_TAX_SPENDING_UPPER_CAP value = 45 } # Upper cap spending mana
	#set_key = { lhs = DEFINE_AI_MANA_TAX_SPENDING_LOWER_CAP value = 2.5 } # lower cap of spending mana
	#set_key = { lhs = DEFINE_AI_YEARLY_MANA_SPEND_RATIO_CAP value = 0.275 } # This is applied before the war modifier on spending

	### AI Alliance Evaluation
	#set_key = { lhs = DEFINE_ALLIANCE_TRUST_NO_BREAKING 		value = 80 }		# above this trust lvl the AI will never consider breaking alliances
	#set_key = { lhs = DEFINE_ALLIANCE_RELATIVE_STRENGTH_CUTOFF 	value = 3 } 		# below this lvl of relative strength AI will never consider breaking alliances
	#set_key = { lhs = DEFINE_ALLIANCE_DISTANCE_CUTOFF 			value = 0.1 } 		# below this fraction of the diplomatic range AI will never consider breaking alliances

	### AI Heuristics Settings
	# Overall strength approximation settings
	#set_key = { lhs = Modi_AI_Mil_Strength_Divisor value = 20 }
	#set_key = { lhs = Modi_AI_Navy_Strength_Divisor value = 30 }
	#set_key = { lhs = Modi_AI_Econ_Strength_Divisor value = 5 }
#
	#set_key = { lhs = Modi_AI_Weight_Strength_Mil_Multi value = 0.5 }
	#set_key = { lhs = Modi_AI_Weight_Strength_Navy_Multi value = 0.2 }
	#set_key = { lhs = Modi_AI_Weight_Strength_Econ_Multi value = 0.3 }
#
	## Set assumed army strength gain, when at war due to risen taxes
	#set_key = { lhs = Modi_AI_Weight_War_Strength_Gain		value = 1.3 }
	#set_key = { lhs = Modi_AI_Weight_Econ_War_Strength_Gain	value = 1.15 }
#
	#### Well beeing composite weights
	#set_key = { lhs = Modi_AI_Weight_WB_Stability 			value = 1.5	}
	#set_key = { lhs = Modi_AI_Weight_WB_NatCorruption 		value = 1.25 }
	#set_key = { lhs = Modi_AI_Weight_WB_AvgUnrest 			value = 0.75 }
	#set_key = { lhs = Modi_AI_Weight_WB_WarExhaustion 		value = 0.8 }
	#set_key = { lhs = Modi_AI_Weight_WB_ExecPower 			value = 1.2 }
	#set_key = { lhs = Modi_AI_Weight_WB_AvgProvCorruption 	value = 0.9	}
	#set_key = { lhs = Modi_AI_Weight_WB_AvgEliteLoyalty		value = 1.1 }
	#set_key = { lhs = Modi_AI_Weight_WB_AvgFactionRelations value = 0.5 }
	#set_key = { lhs = Modi_AI_Weight_WB_Loans				value = 1.1 }
#
	## Sum up total weights to be able to calc mean
	#set_key = { lhs = Modi_AI_Weight_WB_Total which = Modi_AI_Weight_WB_Stability }
	#change_key = { lhs = Modi_AI_Weight_WB_Total which = Modi_AI_Weight_WB_NatCorruption }
	#change_key = { lhs = Modi_AI_Weight_WB_Total which = Modi_AI_Weight_WB_AvgUnrest }
	#change_key = { lhs = Modi_AI_Weight_WB_Total which = Modi_AI_Weight_WB_WarExhaustion }
	#change_key = { lhs = Modi_AI_Weight_WB_Total which = Modi_AI_Weight_WB_ExecPower }
	#change_key = { lhs = Modi_AI_Weight_WB_Total which = Modi_AI_Weight_WB_AvgProvCorruption }
	#change_key = { lhs = Modi_AI_Weight_WB_Total which = Modi_AI_Weight_WB_AvgEliteLoyalty }
	#change_key = { lhs = Modi_AI_Weight_WB_Total which = Modi_AI_Weight_WB_AvgFactionRelations }
	#change_key = { lhs = Modi_AI_Weight_WB_Total which = Modi_AI_Weight_WB_Loans }
}

API_DIPLOMACY_DEFINES = {
	#set_key = { lhs = DEFINE_YEARLY_MAX_BASE_INTEGRATION_RATE value = 0.05 } # Sets the maximum percentage of a subjects development that can be integrated as base progress in one year
	#set_key = { lhs = DEFINE_BASE_DIPLOMATIC_RANGE value = 75 } # Sets the base range of diplomatic actions - checked against border distance
}

# Explanation for the keys:
# Modi_Multi is multiplicative modifier on reform desire
# Modi_Add is additive / base modifier on reform desire
# Up means towards more reformed
# Down means towards less reformed
Modi_AI_ReformDesire_Country = {
	set_key = { lhs = Modi_Multi_Rights_BU_Ref_Des_Up value = 1 }
	set_key = { lhs = Modi_Multi_Rights_NO_Ref_Des_Up value = 1 }
	set_key = { lhs = Modi_Multi_Rights_BG_Ref_Des_Up value = 1 }
	set_key = { lhs = Modi_Multi_Rights_CL_Ref_Des_Up value = 1 }
	set_key = { lhs = Modi_Multi_Rights_BU_Ref_Des_Down value = 1 }
	set_key = { lhs = Modi_Multi_Rights_NO_Ref_Des_Down value = 1 }
	set_key = { lhs = Modi_Multi_Rights_BG_Ref_Des_Down value = 1 }
	set_key = { lhs = Modi_Multi_Rights_CL_Ref_Des_Down value = 1 }

	set_key = { lhs = Modi_Add_Rights_BU_Ref_Des_Up value = 0 }
	set_key = { lhs = Modi_Add_Rights_NO_Ref_Des_Up value = 0 }
	set_key = { lhs = Modi_Add_Rights_BG_Ref_Des_Up value = 0 }
	set_key = { lhs = Modi_Add_Rights_CL_Ref_Des_Up value = 0 }
	set_key = { lhs = Modi_Add_Rights_BU_Ref_Des_Down value = 0 }
	set_key = { lhs = Modi_Add_Rights_NO_Ref_Des_Down value = 0 }
	set_key = { lhs = Modi_Add_Rights_BG_Ref_Des_Down value = 0 }
	set_key = { lhs = Modi_Add_Rights_CL_Ref_Des_Down value = 0 }

	if = {
		limit = {
			OR = {
				AND = {
					has_reform =  Pol_Succession2
					has_country_flag = NewWorldTag
				}
				has_reform =  Pol_Succession2
			}
		}
		subtract_key = { lhs = Modi_Multi_Rights_BU_Ref_Des_Up value = 0.75 }
	}

	## Reduce interets in BG reforms 
	if = {
		limit = {
			OR = {
				culture_group = chinese_group
				capital_scope = {
					OR = {
						continent = asia
						superregion = japan_superregion
					}
				}
			}
		}
		subtract_key = { lhs = Modi_Multi_Rights_BG_Ref_Des_Up value = 0.75 }
	}
	else_if = {
		limit = {
			capital_scope = {
				NOT = {
					continent = europe
				}
			}
		}
		subtract_key = { lhs = Modi_Multi_Rights_BG_Ref_Des_Up value = 0.5 }
	}
}

Modi_TradeCountry = {
	set_key = { lhs = Modi_TradeScoreInternal value = 2 }
	set_key = { lhs = Modi_TradeScoreExternal value = 1 }
	set_key = { lhs = Modi_LeagueInfluence value = 1 }
	trigger_switch = {
		on_trigger = has_idea
		granadan_ideas_7 = {
			change_key = { lhs = Modi_TradeScoreExternal value = 0.15 }
		}
		low_frankish_ideas_7 = {
			change_key = { lhs = Modi_TradeScoreExternal value = 0.15 }
		}
		netherlands_ideas_7 = {
			change_key = { lhs = Modi_TradeScoreExternal value = 0.2 }
		}
		imperial_slavs_ideas_2 = {
			change_key = { lhs = Modi_TradeScoreExternal value = 0.05 }
		}
		ethiopian_ideas_7 = {
			change_key = { lhs = Modi_TradeScoreExternal value = 0.10 }
		}
		malayali_ideas_3 = {
			change_key = { lhs = Modi_TradeScoreExternal value = 0.15 }
		}
		sicilian_ideas_2 = {
			change_key = { lhs = Modi_TradeScoreExternal value = 0.2 }
		}
		genoese_ideas_5 = {
			change_key = { lhs = Modi_TradeScoreExternal value = 0.2 }
		}
		venetian_ideas_1 = {
			change_key = { lhs = Modi_TradeScoreExternal value = 0.4 }
		}
		crusader_egypt_ideas_5 = {
			change_key = { lhs = Modi_TradeScoreExternal value = 0.25 }
		}
	}
	if = {
		limit = {
			has_country_modifier = BG_RestrictTrade_S
		}
		subtract_key = { lhs = Modi_TradeScoreExternal value = 0.1 }
	}
	else_if = {
		limit = {
			has_country_modifier = BG_RestrictTrade_M
		}
		subtract_key = { lhs = Modi_TradeScoreExternal value = 0.3 }
	}
	else_if = {
		limit = {
			has_country_modifier = BG_RestrictTrade_L
		}
		subtract_key = { lhs = Modi_TradeScoreExternal value = 0.5 }
	}
	if = {
		limit = {
			has_idea = free_trade_ideas_2
		}
		change_key = { lhs = Modi_TradeScoreExternal value = 0.05 }
	}
}

Modi_TradeProvince = {
	set_key = { lhs = Modi_TradeScoreInternal which = owner }
	set_key = { lhs = Modi_TradeScoreExternal which = owner }

	trigger_switch = {
		on_trigger = has_state_edict

		dip_edict_promote_local_commerce = {
			change_key = { lhs = Modi_TradeScoreExternal value = 0.10 } # +10.0% Sector Score
		}
		dip_edict_learning_and_education_act = {  #ignore
		}
	}
}

Modi_MilCountry = {
	set_key = { lhs = Modi_Manpower value = 1 } # Multiplier on base recruitment rate of all recruitment types
	set_key = { lhs = Modi_Militarism value = 1 } # Multiplier on class manpower pool
	set_key = { lhs = Modi_MilitarismRural value = 1 } # Multiplier on rural manpower pool
	set_key = { lhs = Modi_MilitarismUrban value = 1 } # Multiplier on urban manpower pool
	set_key = { lhs = Modi_MilitarismNotables value = 1 } # Multiplier on notables manpower pool

	set_key = { lhs = Modi_MilNOBudget value = 0 } # base of how much relative wealth nobles invest in levies (actual base from rights)
	set_key = { lhs = Modi_MilBGBudget value = 0 } # base of how much relative wealth burghers invest in levies (actual base from rights)
	set_key = { lhs = Modi_MilTRBudget value = 1.5 } # base of how much relative wealth tribals invest in levies (actual base from rights)
	set_key = { lhs = Modi_MilBUBudget value = 1 } # has to be 1
	
	set_key = { lhs = Modi_MilNOCost value = 0.8 } # multiplier on general costs of noble levies
	set_key = { lhs = Modi_MilBGCost value = 0.9 } # multiplier on general costs of citizen milia
	set_key = { lhs = Modi_MilTRCost value = 0.4 } # multiplier on general costs of tribal hordes
	set_key = { lhs = Modi_MilBUCost value = 0.75 }# multiplier on general costs of bureaucratic recruitment
		
	set_key = { lhs = Modi_MilNOMaint value = 0.8 } # multiplier on maintenance costs of noble levies
	set_key = { lhs = Modi_MilBGMaint value = 0.9 } # multiplier on maintenance costs of citizen milia
	set_key = { lhs = Modi_MilTRMaint value = 1 } # multiplier on maintenance costs of tribal hordes
	set_key = { lhs = Modi_MilBUMaint value = 1 } # multiplier on maintenance costs of bureaucratic recruitment
	
	set_key = { lhs = Modi_MilNOBuild value = 1 }   # multiplier on recruitment costs of noble levies
	set_key = { lhs = Modi_MilBGBuild value = 1 }   # multiplier on recruitment costs of citizen milia
	set_key = { lhs = Modi_MilTRBuild value = 0.8 } # multiplier on recruitment costs of tribal hordes
	set_key = { lhs = Modi_MilBUBuild value = 1 }   # multiplier on recruitment costs of bureaucratic recruitment
	
	export_to_key = { lhs = Modi_MilRecruit value = modifier:reinforce_cost_modifier }
	set_key = { lhs = Modi_MilTrain which = Modi_MilTrainSave } 
	export_to_key = { lhs = Modi_MilRecovery value = modifier:manpower_recovery_speed }

	#Multipliers on yearly manpower recovery gained from specific classes. 
	set_key = { lhs = Modi_MilRecoverySF value = 1 }
	set_key = { lhs = Modi_MilRecoveryRE value = 1 }
	set_key = { lhs = Modi_MilRecoveryNM value = 1 }
	set_key = { lhs = Modi_MilRecoveryNO value = 1 }
	set_key = { lhs = Modi_MilRecoveryBG value = 1 }
	set_key = { lhs = Modi_MilRecoveryCL value = 1 }
	
	change_key = { lhs = Modi_MilRecruit value = 1 }
	change_key = { lhs = Modi_MilTrain value = 1 }
	change_key = { lhs = Modi_MilRecovery value = 100 }
	if = {
		limit = {
			NOT = {
				check_key = { lhs = Modi_MilRecovery value = 0.1 }
			}
		}
		set_key = { lhs = Modi_MilRecovery value = 0.1 }
	}
	
	if = {
		limit = { is_at_war = yes ai = yes }
		change_key = { lhs = Modi_MilBUBudget value = 0.15 }
	}
	if = {
		limit = {
			has_country_flag = red_turban_reb
			NOT = { is_year = 1400 }
		}
		if = { 
			limit = {
				NOT = { is_year = 1360 }
			}
			multiply_key = { lhs = Modi_MilBUCost value = 0.6 }
		}
		else_if = { 
			limit = {
				NOT = { is_year = 1370 }
			}
			multiply_key = { lhs = Modi_MilBUCost value = 0.66 }
		}
		else_if = { 
			limit = {
				NOT = { is_year = 1380 }
			}
			multiply_key = { lhs = Modi_MilBUCost value = 0.72 }
		}
		else_if = { 
			limit = {
				NOT = { is_year = 1390 }
			}
			multiply_key = { lhs = Modi_MilBUCost value = 0.8 }
		}
		else = {
			multiply_key = { lhs = Modi_MilBUCost value = 0.9 }
		}
	}
	
	if = {
		limit = {
			Rights_NOSer5Has = yes
		}
		multiply_key = { lhs = Modi_MilBUBuild value = 1.13 }
	}
	else_if = {
		limit = {
			Rights_NOSer4Has = yes
		}
		multiply_key = { lhs = Modi_MilBUBuild value = 1.30 }
	}
	else_if = {
		limit = {
			NOT = { Rights_NOSer4HasGreater = yes }
		}
		multiply_key = { lhs = Modi_MilBUBuild value = 1.45 }
	}
	
	if = {
		limit = {
			Rights_NOSer3Has = yes
		}
		change_key = { lhs = Modi_MilNOBudget value = 0.3 }
	}
	else_if = {
		limit = {
			NOT = { Rights_NOSer3HasGreater = yes }
		}
		change_key = { lhs = Modi_MilNOBudget value = 0.6 }
	}

	if = {
		limit = {
			has_idea = grand_army_ideas_4
		}
		change_key = { lhs = Modi_MilNOBudget value = 0.075 }
		change_key = { lhs = Modi_MilBGBudget value = 0.075 }
		change_key = { lhs = Modi_MilTRBudget value = 0.075 }
		if = {
			limit = {
				has_idea = grand_army_ideas_5
			}
			change_key = { lhs = Modi_Manpower value = 0.1 }
		}

	}
	if = {
		limit = {
			has_idea = quantity_ideas_4
		}
		change_key = { lhs = Modi_MilNOBudget value = 0.1 }
		change_key = { lhs = Modi_MilBGBudget value = 0.1 }
		change_key = { lhs = Modi_MilTRBudget value = 0.1 }
		if = {
			limit = {
				has_idea = quantity_ideas_5
			}
			change_key = { lhs = Modi_Manpower value = 0.1 }
		}

	}
	if = {
		limit = {
			has_idea = plutocracy_ideas_4
		}
		change_key = { lhs = Modi_MilBGBudget value = 0.10 }
	}
	if = {
		limit = {
			has_idea = mercenary_ideas_1
		}
		change_key = { lhs = Modi_MilitarismUrban value = 0.15 }
		if = {
			limit = {
				has_idea = mercenary_ideas_2
			}
			change_key = { lhs = Modi_MilBGBudget value = 0.15 }
		}
		if = {
			limit = {
				has_idea = mercenary_ideas_4
			}
			change_key = { lhs = Modi_MilBGCost value = -0.15 }
		}
	}
	if = {
		limit = {
			Rights_NOObl2Has = yes
		}
		change_key = { lhs = Modi_MilNOBudget value = 0.15 }
	}
	else_if = {
		limit = {
			Rights_NOObl1Has = yes
		}
		change_key = { lhs = Modi_MilNOBudget value = 0.3 }
	}
	if = {
		limit = {
			Rights_NOGov1Has = yes
		}
		change_key = { lhs = Modi_MilNOBudget value = 0.20 }
	}
	else_if = {
		limit = {
			Rights_NOGov2Has = yes
		}
		change_key = { lhs = Modi_MilNOBudget value = 0.10 }
	}
	
	if = {
		limit = {
			Rights_BGGov6HasGreater = yes
		}
		change_key = { lhs = Modi_MilBGBudget value = 0.75 }
	}
	else_if = {
		limit = {
			Rights_BGGov5HasGreater = yes
		}
		change_key = { lhs = Modi_MilBGBudget value = 0.5 }
	}
	if = {
		limit = {
			has_country_modifier = NO_EnforceLevee_XL
		}
		change_key = { lhs = Modi_MilNOBudget value = 0.5 }
	}
	else_if = {
		limit = {
			has_country_modifier = NO_EnforceLevee_L
		}
		change_key = { lhs = Modi_MilNOBudget value = 0.35 }
	}
	else_if = {
		limit = {
			has_country_modifier = NO_EnforceLevee_M
		}
		change_key = { lhs = Modi_MilNOBudget value = 0.25 }
	}
	else_if = {
		limit = {
			has_country_modifier = NO_EnforceLevee_S
		}
		change_key = { lhs = Modi_MilNOBudget value = 0.15 }
	}
	if = {
		limit = {
			has_country_modifier = BG_ExtraLevee_XL
		}
		change_key = { lhs = Modi_MilBGBudget value = 0.5 }
	}
	else_if = {
		limit = {
			has_country_modifier = BG_ExtraLevee_L
		}
		change_key = { lhs = Modi_MilBGBudget value = 0.35 }
	}
	else_if = {
		limit = {
			has_country_modifier = BG_ExtraLevee_M
		}
		change_key = { lhs = Modi_MilBGBudget value = 0.25 }
	}
	else_if = {
		limit = {
			has_country_modifier = BG_ExtraLevee_S
		}
		change_key = { lhs = Modi_MilBGBudget value = 0.15 }
	}
	else_if = {
		limit = {
			has_idea = irish_ideas_7
		}
		change_key = { lhs = Modi_MilTRBudget value = 0.25 }
	}
	else_if = {
		limit = {
			has_idea = flemish_ideas_7
		}
		change_key = { lhs = Modi_MilBGBudget value = 0.25 }
	}
	trigger_switch = {
		on_trigger = has_idea
		kanem_ideas_6 = { 
			change_key = { lhs = Modi_MilTRCost value = -0.2 }
		}
		morrocan_berber_ideas_1 = { 
			change_key = { lhs = Modi_MilTRCost value = -0.1 }
		}
		korean_ideas_4 = { 
			change_key = { lhs = Modi_Manpower value = 0.1 }
		}
		jurchen_ideas_5 = { 
			change_key = { lhs = Modi_Manpower value = 0.15 }
		}
		viet_ideas_3 = { 
			change_key = { lhs = Modi_Manpower value = 0.1 }
		}
		oghuz_ideas_2 = { 
			change_key = { lhs = Modi_Manpower value = 0.1 }
		}
		turkish_ideas_1 = { 
			change_key = { lhs = Modi_Manpower value = 0.15 }
		}
		turkoman_ideas_2 = { 
			change_key = { lhs = Modi_Manpower value = 0.1 }
		}
		great_lakes_ideas_5 = { 
			change_key = { lhs = Modi_Manpower value = 0.05 }
		}
		russian_ideas_6 = { 
			change_key = { lhs = Modi_Manpower value = 0.05 }
		}
		ruthenian_ideas_6 = { 
			change_key = { lhs = Modi_Manpower value = 0.05 }
		}
		schweiz_ideas_4 = { 
			change_key = { lhs = Modi_Manpower value = 0.1 }
		}
		na_colonial_ideas_3 = {
			change_key = { lhs = Modi_Manpower value = 0.15 }
		}
		scottish_ideas_3 = {
			subtract_key = { lhs = Modi_MilTRCost value = 0.2 }
			if = {
				limit = {
					has_idea = scottish_ideas_5
				}
				subtract_key = { lhs = Modi_MilNOCost value = 0.05 }
			}
		}
		savoyard_ideas_7 = {
			change_key = { lhs = Modi_MilNOBudget value = 0.1 }
		}
		venetian_ideas_4 = {
			change_key = { lhs = Modi_MilBGBudget value = 0.1 }
		}
		crusader_egypt_ideas_6 = {
			change_key = { lhs = Modi_MilNOBudget value = 0.1 }
			if = {
				limit = {
					has_idea = crusader_egypt_ideas_7
				}
				subtract_key = { lhs = Modi_MilBUCost value = 0.1 }
			}
		}
		lithuanian_ideas_2 = {
			change_key = { lhs = Modi_MilNOBudget value = 0.05 }
			if = {
				limit = {
					has_idea = lithuanian_ideas_3 
				}
				change_key = { lhs = Modi_MilTRBudget value = 0.1 }
			}
		}
		levantine_ideas_3 = {
			change_key = { lhs = Modi_MilNOBudget value = 0.05 }
		}
	}

	## Move of country-level modifiers after removal of Global Manpower Modifiers
	if = {
		limit = {
			has_country_modifier = fez_political_anarchy
		}
		change_key = { lhs = Modi_Manpower value = -0.3 }
	}
	if = {
		limit = {
			has_country_modifier = the_petition_of_rights
		}
		change_key = { lhs = Modi_Manpower value = -0.05 }
	}
	if = {
		limit = {
			has_country_modifier = obstacle_military_administration
		}
		change_key = { lhs = Modi_Manpower value = -0.1 }
	}
	if = {
		limit = {
			has_country_modifier = disarmament
		}
		subtract_key = { lhs = Modi_Manpower value = -0.25 }
	}
	trigger_switch = {
		on_trigger = has_country_modifier
		enforce_serfdom = {
			change_key = { lhs = Modi_Manpower value = 0.25 }
		}
		restrict_serfdom = {
			subtract_key = { lhs = Modi_Manpower value = -0.25 }
		}
	}
	
	if = {
		limit = {
			OR = {
				is_nomad = yes
				is_tribal = yes
				has_reform = Horde_MonarchyS
				#is_key_equal = { lhs = Pol_Privileges value = 8 } 
				has_reform = Yuan_Monarchy
				#is_key_equal = { lhs = Pol_Privileges value = 9 }
				has_country_modifier = Karamanid_Synthesis
				has_country_modifier = Ottoman_OldGuard
				tag = SON
				tag = YUA
				primary_culture = hiberno_norman
				primary_culture = irish
				culture_group = jurchen_group
			}
		}
		multiply_key = { lhs = Modi_MilTRCost value = 0.5 }
		set_country_flag = Modi_TribalMP
	}
	else = {
		clr_country_flag = Modi_TribalMP
	}
	if = {
		limit = {
			OR = {
				is_nomad = yes
				has_reform = Horde_MonarchyS
				#is_key_equal = { lhs = Pol_Privileges value = 8 } 
				has_reform = Yuan_Monarchy
				#is_key_equal = { lhs = Pol_Privileges value = 9 }
				has_country_modifier = Karamanid_Synthesis
				has_country_modifier = Ottoman_OldGuard
				has_country_modifier = Rassid_Tribesmen
				tag = SON
				culture_group = jurchen_group
			}
		}
		set_country_flag = Modi_NomadMP
	}
	else = {
		clr_country_flag = Modi_NomadMP
	}
}

Modi_MilProvince = {
	set_key = { lhs = Modi_Manpower which = owner }
	set_key = { lhs = Modi_Militarism which = owner }
	set_key = { lhs = Modi_MilitarismRural which = owner }
	set_key = { lhs = Modi_MilitarismUrban which = owner }
	set_key = { lhs = Modi_MilitarismNotables which = owner }

	set_key = { lhs = Modi_MilNOBudget which = owner }
	set_key = { lhs = Modi_MilBGBudget which = owner }
	set_key = { lhs = Modi_MilTRBudget which = owner }
	set_key = { lhs = Modi_MilBUBudget which = owner }
	
	set_key = { lhs = Modi_MilNOCost which = owner }
	set_key = { lhs = Modi_MilBGCost which = owner }
	set_key = { lhs = Modi_MilTRCost which = owner }
	set_key = { lhs = Modi_MilBUCost which = owner }
	
	set_key = { lhs = Modi_MilNOMaint which = owner }
	set_key = { lhs = Modi_MilBGMaint which = owner }
	set_key = { lhs = Modi_MilTRMaint which = owner }
	set_key = { lhs = Modi_MilBUMaint which = owner }
	
	set_key = { lhs = Modi_MilNOBuild which = owner }
	set_key = { lhs = Modi_MilBGBuild which = owner }
	set_key = { lhs = Modi_MilTRBuild which = owner }
	set_key = { lhs = Modi_MilBUBuild which = owner }
	
	set_key = { lhs = Modi_MilRecruit which = owner }
	set_key = { lhs = Modi_MilTrain which = owner }
	set_key = { lhs = Modi_MilRecovery which = owner }
	
	set_key = { lhs = Modi_MilRecoverySF which = owner }
	set_key = { lhs = Modi_MilRecoveryRE which = owner }
	set_key = { lhs = Modi_MilRecoveryNM which = owner }
	set_key = { lhs = Modi_MilRecoveryNO which = owner }
	set_key = { lhs = Modi_MilRecoveryBG which = owner }
	set_key = { lhs = Modi_MilRecoveryCL which = owner }

	trigger_switch = {
		on_trigger = culture_group
		scandinavian = {
			change_key = { lhs = Modi_Militarism value = 0.5 }
		}
		japanese_g = {
			change_key = { lhs = Modi_Militarism value = 0.25 }
		}
		altaic = {
			change_key = { lhs = Modi_Militarism value = 0.5 }
		}
		tartar_group = {
			change_key = { lhs = Modi_Militarism value = 0.5 }
		}
		jurchen_group = {
			change_key = { lhs = Modi_Militarism value = 0.333 }
		}
		korean_group = {
			change_key = { lhs = Modi_Militarism value = 0.1 }
		}
		basque_group = {
			change_key = { lhs = Modi_Militarism value = 0.1 }
		}
	}
	trigger_switch = {
		on_trigger = culture
		irish = {
			change_key = { lhs = Modi_Militarism value = 0.666 }
		}
		highland_scottish = {
			change_key = { lhs = Modi_Militarism value = 0.333 }
		}
		lowland_scottish = {
			change_key = { lhs = Modi_Militarism value = 0.2 }
		}
		welsh = {
			change_key = { lhs = Modi_Militarism value = 0.2 }
		}
		albanian = {
			change_key = { lhs = Modi_Militarism value = 0.333 }
		}
		prussian = {
			change_key = { lhs = Modi_Militarism value = 0.333 }
		}
		songhai = {
			change_key = { lhs = Modi_Militarism value = 0.25 }
		}
		ukrainian = {
			change_key = { lhs = Modi_Militarism value = 0.333 }
		}
		turkmeni = {
			change_key = { lhs = Modi_Militarism value = 0.5 }
		}
		turkish = {
			change_key = { lhs = Modi_Militarism value = 0.1 }
		}
		turkoman = {
			change_key = { lhs = Modi_Militarism value = 0.15 }
		}
		high_alemanisch = {
			change_key = { lhs = Modi_Militarism value = 0.25 }
		}
		vlach = {
			change_key = { lhs = Modi_Militarism value = 0.25 }
		}
		serbian = {
			change_key = { lhs = Modi_Militarism value = 0.25 }
		}
		bulgarian = {
			change_key = { lhs = Modi_Militarism value = 0.25 }
		}
		croatian = {
			change_key = { lhs = Modi_Militarism value = 0.1 }
		}
		aimak = {
			change_key = { lhs = Modi_Militarism value = 0.333 } ## close to the Mongols
		}
		hazara = {
			change_key = { lhs = Modi_Militarism value = 0.2 } ## close to the Chagatai
		}
	}
	if = {
		limit = {
			OR = {
				province_id = 2551
				province_id = 5074
				province_id = 4028
				province_id = 1444
				province_id = 418
				province_id = 3884
			}
		}
		change_key = { lhs = Modi_Militarism value = 0.15 }
	}

	if = {
		limit = {
			area = yamamah_area
		}
		subtract_key = { lhs = Modi_Militarism value = 0.333 } ### OP
	}
	if = {
		limit = {
			check_key = { lhs = Modi_Militarism value = 1.001 }
		}
		set_key = { lhs = Modi_Tmp2 which = Modi_Militarism }
		subtract_key = { lhs = Modi_Tmp2 value = 1 }
		multiply_key = { lhs = Modi_Tmp2 value = -0.4 } # turn it negative, and then nearly third the benefit
		change_key = { lhs = Modi_Tmp2 value = 1 }
		if = {
			limit = {
				check_key = { lhs = Modi_Tmp2 value = 0.1 }
			}
			multiply_key = { lhs = Modi_MilBUCost which = Modi_Tmp2 }
			multiply_key = { lhs = Modi_MilNOCost which = Modi_Tmp2 }
			multiply_key = { lhs = Modi_MilBGCost which = Modi_Tmp2 }
			multiply_key = { lhs = Modi_MilTRCost which = Modi_Tmp2 }
		}
	}

	# For the first 15k rural pop of a province, they are 2x as militaristic as the rest of the province
	if = {
		limit = {
			check_key = { lhs = Class_Rural value = 15.001 }
		}
		set_key = { lhs = Modi_Tmp2 value = 15 }
		divide_key = { lhs = Modi_Tmp2 which = Class_Rural }
		change_key = { lhs = Modi_MilitarismRural which = Modi_Tmp2 }
	}
	else = {
		change_key = { lhs = Modi_MilitarismRural value = 1 }
	}

	#MN_CalcTotalTolerance = yes

	# intolerance hits LA which does this already
	#if = {
	#	limit = {
	#		NOT = { check_key = { lhs = MN_Tolerance value = 0 } }
	#	}
	#	set_key = { lhs = Modi_Tmp0 which = MN_Tolerance }
	#	multiply_key = { lhs = Modi_Tmp0 value = 0.1 }
	#	change_key = { lhs = Modi_Manpower which = Modi_Tmp0 }
	#}
	# Factor in nationalism
	export_to_key = { lhs = Modi_Tmp0 value = nationalism }
	multiply_key = { lhs = Modi_Tmp0 value = 0.01 }
	subtract_key = { lhs = Modi_Manpower which = Modi_Tmp0 }
	
	if = {
		limit = {
			owner = { NOT = { Rights_NOSer4HasGreater = yes } }
			is_capital = yes
		}
		multiply_key = { lhs = Modi_MilBUCost value = 0.75 }
	}
	if = {
		limit = {
			OR = {
				continent = asia
				superregion = japan_superregion
			}
		}
		multiply_key = { lhs = Modi_MilBUCost value = 0.45 }
		multiply_key = { lhs = Modi_MilNOCost value = 0.5 }
		multiply_key = { lhs = Modi_MilBGCost value = 0.7 }
		multiply_key = { lhs = Modi_MilTRCost value = 0.4 }
	}

	trigger_switch = {
		on_trigger = has_building
		local_fortification_0 = { subtract_key = { lhs = Modi_MilTrain value = 0 } }
		local_fortification_1 = { subtract_key = { lhs = Modi_MilTrain value = 0.05 } }
		local_fortification_2 = { subtract_key = { lhs = Modi_MilTrain value = 0.010 } }
		local_fortification_3 = { subtract_key = { lhs = Modi_MilTrain value = 0.15 } }
		local_fortification_4 = { subtract_key = { lhs = Modi_MilTrain value = 0.175 } }
		local_fortification_5 = { subtract_key = { lhs = Modi_MilTrain value = 0.20 } }
		local_fortification_6 = { subtract_key = { lhs = Modi_MilTrain value = 0.225 } }
		local_fortification_7 = { subtract_key = { lhs = Modi_MilTrain value = 0.25 } }
	}
	if = {
		limit = {
			has_state_edict = mil_edict_recruitment_effort
		}
		subtract_key = { lhs = Modi_MilRecruit value = 0.1 }
		subtract_key = { lhs = Modi_MilTrain value = 0.15 }
	}
	if = {
		limit = {
			owner = { has_country_modifier = Ottoman_Janissaries }
		}
		MN_GetReligion = { typeReligion = value religion = 22 return = Modi_Tmp0 }
		if = {
			limit = {
				check_key = { lhs = Modi_Tmp0 value = 0.001 }
				NOT = { check_key = { lhs = Modi_Tmp0 which = Class_Total } }
			}
			set_key = { lhs = Modi_Tmp2 which = Class_Total }
			subtract_key = { lhs = Modi_Tmp2 which = Modi_Tmp0 }
			divide_key = { lhs = Modi_Tmp2 which = Class_Total }
			set_key = { lhs = Modi_Tmp0 which = Modi_Tmp2 }
			
			set_key = { lhs = Modi_Tmp2 value = 1 }
			subtract_key = { lhs = Modi_Tmp2 which = Modi_Tmp0 }
			
			change_key = { lhs = Modi_Tmp0 which = Modi_Tmp2 }
			multiply_key = { lhs = Modi_Tmp0 value = 0.9 }
			subtract_key = { lhs = Modi_MilBUBuild which = Modi_Tmp0 }
			multiply_key = { lhs = Modi_Tmp0 value = 0.5 }
			subtract_key = { lhs = Modi_MilBUMaint which = Modi_Tmp0 }
		}
	}
	if = {
		limit = {
			owner = { has_idea = welsh_ideas_7 }
			culture = welsh
		}
		change_key = { lhs = Modi_Manpower value = 0.2 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_MilRecruit value = 0.1 } }
		}
		set_key = { lhs = Modi_MilRecruit value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_MilTrain value = 0.1 } }
		}
		set_key = { lhs = Modi_MilTrain value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_MilRecovery value = 0.1 } }
		}
		set_key = { lhs = Modi_MilRecovery value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_MilBUBuild value = 0.1 } }
		}
		set_key = { lhs = Modi_MilBUBuild value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_MilBUMaint value = 0.1 } }
		}
		set_key = { lhs = Modi_MilBUMaint value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_MilNOBuild value = 0.1 } }
		}
		set_key = { lhs = Modi_MilNOBuild value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_MilNOMaint value = 0.1 } }
		}
		set_key = { lhs = Modi_MilNOMaint value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_MilBGBuild value = 0.1 } }
		}
		set_key = { lhs = Modi_MilBGBuild value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_MilBGMaint value = 0.1 } }
		}
		set_key = { lhs = Modi_MilBGMaint value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_Manpower value = 0.1 } }
		}
		set_key = { lhs = Modi_Manpower value = 0.1 }
	}
	set_key = { lhs = Modi_Tmp0 which = NM_Ratio }
	multiply_key = { lhs = Modi_Tmp0 value = 0.005 }
	change_key = { lhs = Modi_MilTRBudget which = Modi_Tmp0 }
	set_key = { lhs = Modi_Tmp0 which = NM_Ratio }
	multiply_key = { lhs = Modi_Tmp0 value = -0.005 }
	multiply_key = { lhs = Modi_Tmp0 value = 1.2 } # 0.333x
	change_key = { lhs = Modi_Tmp0 value = 1 }
	multiply_key = { lhs = Modi_MilTRBuild which = Modi_Tmp0 }
	multiply_key = { lhs = Modi_MilTRMaint which = Modi_Tmp0 }
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_MilTRBudget value = 0.1 } }
		}
		set_key = { lhs = Modi_MilTRBudget value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_MilTRBuild value = 0.1 } }
		}
		set_key = { lhs = Modi_MilTRBuild value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_MilTRMaint value = 0.1 } }
		}
		set_key = { lhs = Modi_MilTRMaint value = 0.1 }
	}
	## Move of province-level modifiers after removal of Local Manpower Modifiers
	if = {
		limit = {
			has_province_modifier = forced_conversion
		}
		change_key = { lhs = Modi_Manpower value = -0.4 }
	}
	if = {
		limit = {
			has_province_modifier = powerful_noble
		}
		change_key = { lhs = Modi_Manpower value = -0.5 }
	}
	if = {
		limit = {
			has_province_modifier = unlawful_territory
		}
		change_key = { lhs = Modi_Manpower value = -0.5 }
	}
	if = {
		limit = {
			has_province_modifier = rebel_stronghold
		}
		change_key = { lhs = Modi_Manpower value = -1 }
	}
	if = {
		limit = {
			has_province_modifier = refusal_of_petition_of_rights
		}
		change_key = { lhs = Modi_Manpower value = -0.25 }
	}
	if = {
		limit = {
			has_province_modifier = religious_massacre
		}
		change_key = { lhs = Modi_Manpower value = -0.25 }
	}
	if = {
		limit = {
			has_province_modifier = mutinous_soldiers
		}
		change_key = { lhs = Modi_Manpower value = -0.5 }
	}
	if = {
		limit = {
			has_province_modifier = hit_by_earthquake
		}
		change_key = { lhs = Modi_Manpower value = -0.15 }
	}
	if = {
		limit = {
			has_province_modifier = influential_power_holder
		}
		change_key = { lhs = Modi_Manpower value = 0.1 }
	}
	if = {
		limit = {
			has_province_modifier = military_development_efforts
		}
		change_key = { lhs = Modi_Manpower value = 0.1 }
	}
	trigger_switch = {
		on_trigger = culture
		lowland_scottish = {
			if = {
				limit = {
					owner = {
						has_idea = scottish_ideas_2
					}
				}
				change_key = { lhs = Modi_Manpower value = 0.1 }
			}
		}
		sicilian = {
			if = {
				limit = {
					owner = {
						has_idea = sicilian_ideas_5
					}
				}
				change_key = { lhs = Modi_Manpower value = 0.1 }
			}
		}
	}
}

#Modi_Manpower in SYS-API

# Modi_Birth: Impacts population birth rate in all owned provinces
# Modi_Death: Impacts population death rate in all owned provinces
# Modi_MP: Impacts the ratio of fighting age men for all classes in all owned provinces
Modi_GrowthCountry = {
	set_key = { lhs = Modi_Tmp0 value = 0 }
	set_key = { lhs = Modi_Birth value = 1 }
	set_key = { lhs = Modi_BirthSF value = 1 }
	set_key = { lhs = Modi_BirthRE value = 1 }
	set_key = { lhs = Modi_BirthNM value = 1 }
	set_key = { lhs = Modi_BirthNO value = 1 }
	set_key = { lhs = Modi_BirthBG value = 1 }
	set_key = { lhs = Modi_BirthCL value = 1 }
	set_key = { lhs = Modi_Death value = 1 }
	set_key = { lhs = Modi_MP value = 1 }
	
	set_key = { lhs = Modi_PressureMultiSF value = 1 }
	set_key = { lhs = Modi_PressureMultiRE value = 1 }
	set_key = { lhs = Modi_PressureMultiNM value = 1 }
	set_key = { lhs = Modi_PressureMultiNO value = 1 }
	set_key = { lhs = Modi_PressureMultiBG value = 2 }
	set_key = { lhs = Modi_PressureMultiCL value = 1 }
	
	set_key = { lhs = Modi_PressureAddSF value = 0 }
	set_key = { lhs = Modi_PressureAddRE value = 0 }
	set_key = { lhs = Modi_PressureAddNM value = 0 }
	set_key = { lhs = Modi_PressureAddNO value = 0 }
	set_key = { lhs = Modi_PressureAddBG value = 0 }
	set_key = { lhs = Modi_PressureAddCL value = 0 }

	if = {
		limit = {
			has_idea = plutocracy_ideas_1
		}
		subtract_key = { lhs = Modi_PressureMultiRE value = 0.01 }
	}
	
	trigger_switch = {
		on_trigger = has_idea
		yoruba_ideas_5 = {
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.05 }
		}
		akan_ideas_1 = {
			subtract_key = { lhs = Modi_PressureMultiSF value = 0.05 }
		}
		hiberno_norman_ideas_7 = {
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.025 }
		}
		na_colonial_ideas_1 = {
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.005 }
			subtract_key = { lhs = Modi_PressureMultiSF value = 0.015 }
		}
		ayutthaya_ideas_3 = {
			subtract_key = { lhs = Modi_PressureMultiSF value = 0.05 }
		}
		latin_ideas_1 = {
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.05 }
		}
		sukhothai_ideas_3 = {
			subtract_key = { lhs = Modi_PressureMultiSF value = 0.05 }
		}
		genoese_ideas_2 =  {
			subtract_key = { lhs = Modi_PressureMultiBG value = 0.05 }
		}
		lao_ideas_3 = {
			subtract_key = { lhs = Modi_PressureMultiSF value = 0.05 }
		}
		shan_ideas_3 = {
			subtract_key = { lhs = Modi_PressureMultiSF value = 0.05 }
		}
		lan_na_ideas_3 = {
			subtract_key = { lhs = Modi_PressureMultiSF value = 0.05 }
			if = {
				limit = {
					has_idea = lan_na_ideas_6
				}
				subtract_key = { lhs = Modi_PressureMultiRE value = 0.025 }
			}
		}
	}

	if = {
		limit = {
			has_country_flag = BYZ_MigrationIn
		}
		subtract_key = { lhs = Modi_PressureMultiSF value = 0.10 }
		subtract_key = { lhs = Modi_PressureMultiRE value = 0.10 }
		subtract_key = { lhs = Modi_PressureMultiNO value = 0.10 }
		subtract_key = { lhs = Modi_PressureMultiBG value = 0.10 }
		subtract_key = { lhs = Modi_PressureMultiCL value = 0.10 }
	}
	
	# Stability impact (-3 to 3 / 60)
	export_to_key = { lhs = Modi_Tmp0 value = stability }
	divide_key = { lhs = Modi_Tmp0 value = 60 }

	change_key = { lhs = Modi_Birth which = Modi_Tmp0 }
	subtract_key = { lhs = Modi_Death which = Modi_Tmp0 }
	
	# War exhaustion impact (0-20 / 200)
	
	export_to_key = { lhs = Modi_Tmp0 value = war_exhaustion }
	divide_key = { lhs = Modi_Tmp0 value = 200 }

	subtract_key = { lhs = Modi_Birth which = Modi_Tmp0 }
	change_key = { lhs = Modi_Death which = Modi_Tmp0 }

	set_key = { lhs = Modi_Tmp0 value = 0 }
}

# Modi_Birth: Impacts population birth rate in a given province
# Modi_Death: Impacts population death rate in a given province
# Modi_MP: Impacts the ratio of fighting age men for all classes in a given province
Modi_GrowthProvince = {	
	set_key = { lhs = Modi_Birth which = owner }
	set_key = { lhs = Modi_BirthSF which = owner }
	set_key = { lhs = Modi_BirthRE which = owner }
	set_key = { lhs = Modi_BirthNM which = owner }
	set_key = { lhs = Modi_BirthNO which = owner }
	set_key = { lhs = Modi_BirthBG which = owner }
	set_key = { lhs = Modi_BirthCL which = owner }
	set_key = { lhs = Modi_Death which = owner }
	set_key = { lhs = Modi_MP which = owner }
	
	set_key = { lhs = Modi_PressureMultiSF which = owner }
	set_key = { lhs = Modi_PressureMultiRE which = owner }
	set_key = { lhs = Modi_PressureMultiNM which = owner }
	set_key = { lhs = Modi_PressureMultiNO which = owner }
	set_key = { lhs = Modi_PressureMultiBG which = owner }
	set_key = { lhs = Modi_PressureMultiCL which = owner }
	
	set_key = { lhs = Modi_PressureAddSF which = owner }
	set_key = { lhs = Modi_PressureAddRE which = owner }
	set_key = { lhs = Modi_PressureAddNM which = owner }
	set_key = { lhs = Modi_PressureAddNO which = owner }
	set_key = { lhs = Modi_PressureAddBG which = owner }
	set_key = { lhs = Modi_PressureAddCL which = owner }

	# Devastation impact (0-100 / 400)
	
	POP_GetDevastation = {
		return = Modi_Tmp0
	}
	
	divide_key = { lhs = Modi_Tmp0 value = 300 }
	subtract_key = { lhs = Modi_Birth which = Modi_Tmp0 }
	change_key = { lhs = Modi_Death which = Modi_Tmp0 }

	if = {
		limit = {
			has_province_modifier = mis_prov_growth
		}
		subtract_key = { lhs = Modi_PressureMultiRE value = 0.05 }
	}
	
	# State edict effects
	trigger_switch = {
		on_trigger = has_state_edict

		adm_edict_attract_peasantry_act = {
			subtract_key = { lhs = Modi_PressureMultiSF value = 0.10 }
			subtract_key = { lhs = Modi_PressureMultiNO value = 0.05 }

		}
		dip_encourage_city_growth_act = {
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.10 }
			subtract_key = { lhs = Modi_PressureMultiBG value = 0.05 }
		}
	}

	if = {
		limit = {
			has_province_modifier = monastic_town
		}
		subtract_key = { lhs = Modi_PressureMultiRE value = 0.05 }
	}

	trigger_switch = {
		on_trigger = has_province_modifier
		korean_settlement = {
			change_key = { lhs = Modi_PressureMultiNM value = 3 }
			subtract_key = { lhs = Modi_PressureMultiSF value = 0.2 }
		}
        cordoba_restoration = {
            subtract_key = { lhs = Modi_PressureMultiRE value = 0.1 }
        }
		kaaba_1 = {
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.025 }
		}
		kaaba_2 = {
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.05 }
		}
		kaaba_3 = {
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.075 }
		}
		stpeter_cathedral_1 = {
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.025 }
		}
		stpeter_cathedral_2 = {
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.05 }
		}
		stpeter_cathedral_3 = {
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.075 }
		}
		holy_city_jerusalem_1 = {
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.025 }
		}
		holy_city_jerusalem_2 = {
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.05 }
		}
		holy_city_jerusalem_3 = {
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.075 }
		}
		hagia_sophia_1 = {
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.025 }
		}
		hagia_sophia_2 = {
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.05 }
		}
		hagia_sophia_3 = {
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.075 }
		}
    }
	
	# Bonus to Birth rates and city migration pressure
	# Case 1: Siberia for Siberian colonization (banking embraced + no nomad)
	# Case 2: Regional bonus for provinces hold by (former) colonial nations
	# --> North / South Ameria besdies central ameria and inka territory
	# --> Oceania besides japan superregion
	# --> Hokkaido Area
	# --> is_island provinces (small ocean islands)
	if = {
		limit = {
			OR = {
				AND = {
					superregion = siberia_superregion
					owner = {
						has_institution = Banking
						is_nomad = no
					}
				}
				AND = {
					OR = {
						continent = south_america
						continent = north_america
						area = hokkaido_area
						AND = {
							continent = oceania
							NOT = { superregion = japan_superregion }
						}
						NOT = { 
							OR = {
								superregion = central_america_superregion
								AND = {
									superregion = western_south_america_superregion
									NOT = { region = la_plata_region }
								}
								area = bogota_area	
							}
						}
						is_island = yes
					}
					owner = {
						OR = {
							is_colonial_nation = yes
							is_former_colonial_nation = yes
							has_country_flag = changed_from_colonial_nation
						}
					}
				}
			}
		}
		#subtract_key = { lhs = Modi_BirthNM value = 0.25 }
		#change_key = { lhs = Modi_BirthSF value = 0.25 }
		#change_key = { lhs = Modi_BirthNO value = 0.25 }
		#change_key = { lhs = Modi_BirthCL value = 0.25 }
		subtract_key = { lhs = Modi_PressureMultiRE value = 0.10 }
		subtract_key = { lhs = Modi_PressureMultiBG value = 0.10 }
	}

	# City Migration Pull Bonus for Capitals
	# scaled by owner total development
	if = {
		limit = {
			is_capital = yes
		}
		if = {
			limit = {
				owner = {
					NOT = { total_development = 50 }
					total_development = 10
				}
			}
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.01 }
		}
		else_if = {
			limit = {
				owner = {
					NOT = { total_development = 100 }
					total_development = 50
				}
			}
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.05 }
		}
		else_if = {
			limit = {
				owner = {
					NOT = { total_development = 250 }
					total_development = 100
				}
			}
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.075 }
		}
		else_if = {
			limit = {
				owner = {
					total_development = 250
				}
			}
			subtract_key = { lhs = Modi_PressureMultiRE value = 0.10 }
		}
	}
}

# Modi_$type$Output: Impacts industry output for a given type of industries in all owned provinces
# Modi_$class$Labor: Impacts class labor output for a given type of class in all owned provinces
# Modi_Prod$prod$: Impacts industry output for a given type of tradegood in all owned provinces
Modi_ProdCountry = {
	set_key = { lhs = Modi_ProdOutput value = 1 }
	set_key = { lhs = Modi_UrbanOutput value = 1 }
	set_key = { lhs = Modi_RuralOutput value = 1 }
	set_key = { lhs = Modi_MineOutput value = 1 }
	set_key = { lhs = Modi_FishingOutput value = 1 }
	set_key = { lhs = Modi_PastureOutput value = 1 }
	set_key = { lhs = Modi_TradeOutput value = 1 }
	set_key = { lhs = Modi_KnowledgeOutput value = 1 }			#Only affects Higher Learning
	set_key = { lhs = Modi_ReligiousKnowledgeOutput value = 1 }	#Only affects Religious Learning
	set_key = { lhs = Modi_FarmOutput value = 1 }
	set_key = { lhs = Modi_GameOutput value = 1 }
	set_key = { lhs = Modi_TradeMargin value = 1 }
	set_key = { lhs = Modi_Labor value = 1 }
	set_key = { lhs = Modi_SFLabor value = 1 }
	set_key = { lhs = Modi_NMLabor value = 1 }
	set_key = { lhs = Modi_RELabor value = 1 }
	set_key = { lhs = Modi_BGLabor value = 1 }
	set_key = { lhs = Modi_NOLabor value = 1 }
	set_key = { lhs = Modi_CLLabor value = 1 }
	set_key = { lhs = Modi_Prod1 value = 1 }	# Food
	set_key = { lhs = Modi_Prod2 value = 1 }	# Salt
	set_key = { lhs = Modi_Prod4 value = 1 }	# Fiber
	set_key = { lhs = Modi_Prod5 value = 1 }	# Fuel
	set_key = { lhs = Modi_Prod6 value = 1 }	# Raw
	set_key = { lhs = Modi_Prod9 value = 1 }	# Exotics
	set_key = { lhs = Modi_Prod10 value = 1 }	# Delicacies
	set_key = { lhs = Modi_Prod21 value = 1 }	# Consumer
	set_key = { lhs = Modi_Prod22 value = 1 }	# Military
	set_key = { lhs = Modi_Prod23 value = 1 }	# Naval
	set_key = { lhs = Modi_Prod24 value = 1 }	# Industrial
	set_key = { lhs = Modi_Prod25 value = 1 }	# Luxury
	set_key = { lhs = Modi_Prod41 value = 1 }   # Knowledge (affects both Higher and Religious Learning
	set_key = { lhs = Modi_Prod51 value = 1 }	# Commerce
	set_key = { lhs = Modi_StockpileSize value = 1 }	# Commerce
	set_key = { lhs = Modi_SettledOutput value = 1 }
	set_key = { lhs = Modi_NomadicOutput value = 1 }
	if = {
		limit = {
			Rights_NOGov6Has = yes
		}
		change_key = { lhs = Modi_RuralOutput value = 0.15 }
	}
	if = {
		limit = {
			Rights_NOTen4Has = yes
		}
		change_key = { lhs = Modi_RuralOutput value = 0.1 }
	}
	if = {
		limit = {
			Rights_BGGov2Has = yes
		}
		subtract_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
		subtract_key = { lhs = Modi_UrbanOutput value = 0.05 }
	}
	else_if = {
		limit = {
			Rights_BGGov3Has = yes
		}
		subtract_key = { lhs = Modi_KnowledgeOutput value = 0.15 }
		subtract_key = { lhs = Modi_UrbanOutput value = 0.15 }
		subtract_key = { lhs = Modi_TradeOutput value = 0.05 }
	}
	else_if = {
		limit = {
			Rights_BGGov4Has = yes
		}
		subtract_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
		subtract_key = { lhs = Modi_UrbanOutput value = 0.05 }
	}
	if = {
		limit = {
			has_idea = economic_ideas_7
		}
		change_key = { lhs = Modi_KnowledgeOutput value = 0.10 }
	}
	if = {
		limit = {
			has_idea = global_empire_ideas_1
		}
		change_key = { lhs = Modi_Prod9 value = 0.10 } #Exotics
		change_key = { lhs = Modi_Prod10 value = 0.10 } #Delicacies
	}
	if = {
		limit = {
			has_idea = innovativeness_ideas_1
		}
		change_key = { lhs = Modi_KnowledgeOutput value = 0.10 }
	}
	if = {
		limit = {
			has_idea = naval_ideas_1
		}
		change_key = { lhs = Modi_Prod23 value = 0.10 } #Naval
	}
	if = {
		limit = {
			has_idea = quantity_ideas_1
		}
		change_key = { lhs = Modi_Prod22 value = 0.10 } #Military
	}
	if = {
		limit = {
			has_idea = industrial_ideas_2
		}
		change_key = { lhs = Modi_SFLabor value = 0.10 }
	}
	if = {
		limit = {
			has_idea = industrial_ideas_6
		}
		change_key = { lhs = Modi_Prod23 value = 0.05 } #Naval
		change_key = { lhs = Modi_Prod22 value = 0.05 } #Military
	}
	if = {
		limit = {
			has_idea = innovativeness_ideas_7
		}
		change_key = { lhs = Modi_Labor value = 0.05 }
	}
	if = {
		limit = {
			has_idea = scholastic_ideas_7
		}
		change_key = { lhs = Modi_KnowledgeOutput value = 0.10 }
	}
	trigger_switch = {
		on_trigger = has_idea
		chinese_ideas_5 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
		}
		japanese_ideas_4 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
		}
		egyptian_ideas_3 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
		}
		latin_ideas_3 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
		}
		southern_african_ideas_4 = {
			change_key = { lhs = Modi_MineOutput value = 0.10 }
			if = {
				limit = {
					has_idea = southern_african_ideas_6
				}
				change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
			}
		}
		low_frankish_ideas_2 = {
			change_key = { lhs = Modi_Prod25 value = 0.05 }  #Luxury
			if = {
				limit = {
					has_idea = low_frankish_ideas_6
				}
				change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
			}
		}
		tibetan_ideas_6 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.10 }
		}
		netherlands_ideas_4 = {
			change_key = { lhs = Modi_Prod25 value = 0.05 }  #Luxury
		}
		chamic_ideas_3 = {
			change_key = { lhs = Modi_Prod6 value = 0.05 } #Raw
			if = {
				limit = {
					has_idea = chamic_ideas_5
				}
				change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
			}
		}
		venetian_ideas_4 = {
			change_key = { lhs = Modi_Prod23 value = 0.15 } #Naval
		}
		netherlands_ideas_2 = {
			change_key = { lhs = Modi_Prod23 value = 0.15 } #Naval
		}
		great_lakes_ideas_1 = {
			change_key = { lhs = Modi_FishingOutput value = 0.05 }
			if = {
				limit = {
					has_idea = great_lakes_ideas_7
				}
				change_key = { lhs = Modi_PastureOutput value = 0.05 }
			}
		}
		swahili_ideas_1 = {
			change_key = { lhs = Modi_Prod23 value = 0.10 } #Naval
		}
		somali_ideas_1 = {
			change_key = { lhs = Modi_PastureOutput value = 0.1 }
			if = {
				limit = {
					has_idea = somali_ideas_7
				}
				change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
			}
		}
		bengali_ideas_4 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
		}
		yuan_ideas_6 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
		}
		bodo_kachari_ideas_6 = {
			change_key = { lhs = Modi_Prod9 value = 0.10 } #Exotics
			change_key = { lhs = Modi_Prod10 value = 0.10 } #Delicacies
		}
		bodo_kachari_ideas_6_a = {
			change_key = { lhs = Modi_Prod9 value = 0.10 } #Exotics
			change_key = { lhs = Modi_Prod10 value = 0.10 } #Delicacies
		}
		javanese_ideas_4 = {
			change_key = { lhs = Modi_Prod24 value = 0.05 } #Industrial
		}
		russian_ideas_5 = {
			change_key = { lhs = Modi_Prod9 value = 0.10 } #Exotics
			change_key = { lhs = Modi_Prod10 value = 0.10 } #Delicacies
		}
		ruthenian_ideas_5 = {
			change_key = { lhs = Modi_Prod1 value = 0.05 } #Food
		}
		neapolitan_ideas_4 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.10 }
		}
		ayyubid_ideas_5 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.10 }
		}
		persian_ideas_5 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.10 }
		}
		mande_ideas_4 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
			if = {
				limit = {
					has_idea = mande_ideas_6
				}
				change_key = { lhs = Modi_MineOutput value = 0.10 }
			}
		}
		tunisian_ideas_1 = {
			change_key = { lhs = Modi_PastureOutput value = 0.10 }
		}
		chaghatai_ideas_2 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
		}
		scandanavian_ideas_1 = {
			change_key = { lhs = Modi_FishingOutput value = 0.10 }
			if = {
				limit = {
					has_idea = scandanavian_ideas_2
				}
				change_key = { lhs = Modi_Prod5 value = 0.10 } #Fuel
				change_key = { lhs = Modi_Prod23 value = 0.10 } #Naval
			}
		}
		tunisian_ideas_1 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
		}
		malayan_ideas_5 = {
			change_key = { lhs = Modi_MineOutput value = 0.10 }
		}
		basque_ideas_7 = {
			change_key = { lhs = Modi_MineOutput value = 0.10 }
		}
		granadan_ideas_4 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
		}
		portuguese_ideas_5 = {
			change_key = { lhs = Modi_MineOutput value = 0.1 }
		}
		castillian_ideas_7 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.1 }
		}
		danubian_alpine_german_ideas_1 = {
			change_key = { lhs = Modi_MineOutput value = 0.1 }
		}
		najdi_ideas_2 = {
			change_key = { lhs = Modi_Prod10 value = 0.05 } #Delicacies
			if = {
				limit = {
					has_idea = najdi_ideas_3
				}
				change_key = { lhs = Modi_PastureOutput value = 0.10 }
			}
		}
		milanese_ideas_5 = {
			change_key = { lhs = Modi_Prod22 value = 0.05 } #Military
			change_key = { lhs = Modi_UrbanOutput value = 0.025 }
		}
		harari_ideas_5 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
			if = {
				limit = {
					has_idea = harari_ideas_6
				}
				change_key = { lhs = Modi_Prod1 value = 0.05 } #Food
				change_key = { lhs = Modi_UrbanOutput value = 0.025 }
			}
		}
		imperial_slavs_ideas_1 = {
			change_key = { lhs = Modi_MineOutput value = 0.1 }
		}
		yemeni_ideas_2 = {
			change_key = { lhs = Modi_Prod1 value = 0.05 } #Food
			if = {
				limit = {
					has_idea = yemeni_ideas_6
				}
				change_key = { lhs = Modi_KnowledgeOutput value = 0.1 }
			}
		}
		akan_ideas_6 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
			if = {
				limit = {
					has_idea = akan_ideas_7
				}
				change_key = { lhs = Modi_MineOutput value = 0.1 }
			}
		}
		wolof_ideas_3 = {
			change_key = { lhs = Modi_Prod22 value = 0.05 } #Military
		}
		punjab_ideas_7 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.1 }
		}
		tuscan_ideas_3 = {
			change_key = { lhs = Modi_Prod10 value = 0.075 } #Delicacies
			if = {
				limit = {
					has_idea = tuscan_ideas_4
				}
				change_key = { lhs = Modi_Prod25 value = 0.05 } #Luxury
				if = {
					limit = {
						has_idea = tuscan_ideas_7
					}
					change_key = { lhs = Modi_KnowledgeOutput value = 0.075 }
				}
			}

		}
		polish_ideas_2 = {
			change_key = { lhs = Modi_Prod1 value = 0.075 } #Food
		}
		occitanian_ideas_1 = {
			change_key = { lhs = Modi_Prod10 value = 0.05 } #Delicacies
		}
		gujarat_ideas_6 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
			if = {
				limit = {
					has_idea = gujarat_ideas_7
				}
				change_key = { lhs = Modi_Prod25 value = 0.05 } #Luxury
			}
		}
		cordoban_ideas_4 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.1 }
		}
		malayali_ideas_2 = {
			change_key = { lhs = Modi_FishingOutput value = 0.05 }
			if = {
				limit = {
					has_idea = malayali_ideas_3
				}
				change_key = { lhs = Modi_Prod9 value = 0.10 } #Exotics
			}
			if = {
				limit = {
					has_idea = malayali_ideas_6
				}
				change_key = { lhs = Modi_KnowledgeOutput value = 0.075 }
			}
		}
		irish_ideas_1 = {
			change_key = { lhs = Modi_PastureOutput value = 0.1 }
			if = {
				limit = {
					has_idea = irish_ideas_4
				}
				change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
			}
		}
		oriya_ideas_2 = {
			change_key = { lhs = Modi_Prod9 value = 0.05 } #Exotics
		}
		serbian_ideas_2 = {
			change_key = { lhs = Modi_MineOutput value = 0.1 }
			if = {
				limit = {
					has_idea = serbian_ideas_5
				}
				change_key = { lhs = Modi_Prod51 value = 0.05 } #Commerce
			}
			if = {
				limit = {
					has_idea = serbian_ideas_6
				}
				change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
			}
		}
		flemish_ideas_5 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.075 }
			if = {
				limit = {
					has_idea = flemish_ideas_4
				}
				change_key = { lhs = Modi_Prod25 value = 0.075 } #Luxury
			}
		}
		mossi_ideas_2 = {
			change_key = { lhs = Modi_RuralOutput value = 0.075 }
		}
		kanem_ideas_5 = {
			change_key = { lhs = Modi_MineOutput value = 0.10 }
		}
		welsh_ideas_1 = {
			change_key = { lhs = Modi_MineOutput value = 0.10 }
		}
		papal_ideas_1 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.05 }
			if = {
				limit = {
					has_idea = papal_ideas_7
				}
				change_key = { lhs = Modi_Prod25 value = 0.05 } #Luxury
			}
		}
		na_colonial_ideas_2 = {
			change_key = { lhs = Modi_Prod23 value = 0.1 } #Naval
			if = {
				limit = {
					has_idea = na_colonial_ideas_5
				}
				change_key = { lhs = Modi_Prod25 value = 0.0.05 } #Luxury
			}
		}
		ayutthaya_ideas_1 = {
			change_key = { lhs = Modi_RuralOutput value = 0.05 }
		}
		sukhothai_ideas_1 = {
			change_key = { lhs = Modi_RuralOutput value = 0.05 }
		}
		sicilian_ideas_2 = {
			change_key = { lhs = Modi_Prod9 value = 0.05 }
			change_key = { lhs = Modi_Prod10 value = 0.05 }
			if = {
				limit = {
					has_idea = sicilian_ideas_7
				}
				change_key = { lhs = Modi_FarmOutput value = 0.05 }
			}
		}
		savoyard_ideas_3 = {
			change_key = { lhs = Modi_Prod10 value = 0.05 }
			if = {
				limit = {
					has_idea = savoyard_ideas_5
				}
				change_key = { lhs = Modi_PastureOutput value = 0.1 }
			}
		}
		genoese_ideas_1 = {
			change_key = { lhs = Modi_Prod23 value = 0.1 } #Naval production
		}
		netherlands_ideas_6 = {
			change_key = { lhs = Modi_FarmOutput value = 0.1 } #Farmland Production
		}
		crusader_jerusalem_ideas_4 = {
			change_key = { lhs = Modi_Prod10 value = 0.05 } #Delicacies
			change_key = { lhs = Modi_Prod25 value = 0.025 } #Luxury
		}
		crusader_egypt_ideas_4 = {
			change_key = { lhs = Modi_FarmOutput value = 0.1 }
		}
		crusader_africa_ideas_2 = {
			change_key = { lhs = Modi_PastureOutput value = 0.1 }
			if = {
				limit = {
					has_idea = crusader_africa_ideas_4
				}
				change_key = { lhs = Modi_KnowledgeOutput value = 0.1}
				if = {
					limit = {
						has_idea = crusader_africa_ideas_7
					}
					change_key = { lhs = Modi_Prod23 value = 0.05 }	#Naval
				}
			}
		}
		omani_ideas_5 = {
			change_key = { lhs = Modi_Prod23 value = 0.1 } #Naval
		}
		lithuanian_ideas_4 = {
			change_key = { lhs = Modi_ReligiousKnowledgeOutput value = 0.1 }
		}
		levantine_ideas_5 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.1 }
			if = {
				limit = {
					has_idea = levantine_ideas_6
				}
				change_key = { lhs = Modi_Prod22 value = 0.05 }	#Military output
			}
		}
		morrocan_fez_ideas_5 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.1 }
			if = {
				limit = {
					has_idea = morrocan_fez_ideas_6
				}
				change_key = { lhs = Modi_FarmOutput value = 0.05 }
			}
		}
		morrocan_arab_ideas_4 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.1 }
			if = {
				limit = {
					has_idea = morrocan_arab_ideas_5
				}
				change_key = { lhs = Modi_FarmOutput value = 0.05 }
			}
		}
		bulgarian_ideas_1 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.1 }
			if = {
				limit = {
					has_idea = bulgarian_ideas_3
				}
				change_key = { lhs = Modi_Prod10 value = 0.05 } #Delicacies
				change_key = { lhs = Modi_MineOutput value = 0.05 }
			}
		}
		khmer_ideas_5 = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.075 }
		}
		lao_ideas_5 = {
			change_key = { lhs = Modi_GameOutput value = 0.075 }
			if = {
				limit = {
					has_idea = lao_ideas_7
				}
				change_key = { lhs = Modi_Prod21 value = 0.1 }
			}
		}
		shan_ideas_1 = {
			change_key = { lhs = Modi_MineOutput value = 0.05 }
		}
		lan_na_ideas_1 = {
			change_key = { lhs = Modi_RuralOutput value = 0.05 }
		}
	}
	if = {
		limit = {
			OR = {
				has_country_modifier = BG_SecureMaterial_S
				has_country_modifier = BG_SecureMaterial_M
				has_country_modifier = BG_SecureMaterial_L
			}
		}
		subtract_key = { lhs = Modi_Prod23 value = 0.05 } #Naval
	}
	
	export_to_key = { lhs = Modi_Tmp0 value = modifier:production_efficiency }
	change_key = { lhs = Modi_Tmp0 value = 1 }
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_Tmp0 value = 0 } }
		}
		set_key = { lhs = Modi_UrbanOutput value = 0 }
	}
	else = { 
		multiply_key = { lhs = Modi_UrbanOutput which = Modi_Tmp0 }
	}
	export_to_key = { lhs = Modi_Tmp0 value = modifier:global_trade_goods_size_modifier }
	change_key = { lhs = Modi_Tmp0 value = 1 }
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_Tmp0 value = 0 } }
		}
		set_key = { lhs = Modi_RuralOutput value = 0 }
	}
	else = { 
		multiply_key = { lhs = Modi_RuralOutput which = Modi_Tmp0 }
	}
	export_to_key = { lhs = Modi_Tmp0 value = modifier:center_of_trade_upgrade_cost }
	if = {
		limit = {
			check_key = { lhs = Modi_Tmp0 value = 0.001 }
		}
		change_key = { lhs = Modi_Tmp0 value = 1 }
		divide_key = { lhs = Modi_TradeOutput which = Modi_Tmp0 }
	}
	else = {
		set_key = { lhs = Modi_Tmp1 value = 1 }
		subtract_key = { lhs = Modi_Tmp1 which = Modi_Tmp0 }
		multiply_key = { lhs = Modi_TradeOutput which = Modi_Tmp1 }
	}
	if = {
		limit = {
			Rights_BGCom1Has = yes
		}
		subtract_key = { lhs = Modi_TradeOutput value = 0.8 }
	}
	else_if = {
		limit = {
			Rights_BGCom2Has = yes
		}
		subtract_key = { lhs = Modi_TradeOutput value = 0.6 }
	}
	else_if = {
		limit = {
			Rights_BGCom3Has = yes
		}
		subtract_key = { lhs = Modi_TradeOutput value = 0.45 }
	}
	else_if = {
		limit = {
			Rights_BGCom4Has = yes
		}
		subtract_key = { lhs = Modi_TradeOutput value = 0.35 }
	}
	else_if = {
		limit = {
			Rights_BGCom5Has = yes
		}
		subtract_key = { lhs = Modi_TradeOutput value = 0.2 }
	}
	else_if = {
		limit = {
			Rights_BGCom6Has = yes
		}
		subtract_key = { lhs = Modi_TradeOutput value = 0.1 }
	}
	else_if = {
		limit = {
			Rights_BGCom8Has = yes
		}
		change_key = { lhs = Modi_TradeOutput value = 0.1 }
	}
	else_if = {
		limit = {
			Rights_BGCom9Has = yes
		}
		change_key = { lhs = Modi_TradeOutput value = 0.25 }
	}
	else_if = {
		limit = {
			Rights_BGCom10Has = yes
		}
		change_key = { lhs = Modi_TradeOutput value = 0.33 }
	}
}

# Modi_$type$Output: Impacts industry output for a given type of industries in a given province
# Modi_$class$Labor: Impacts class labor output for a given type of class in a given province
# Modi_Prod$prod$: Impacts industry output for a given type of tradegood in a given province
Modi_ProdProvince = {
	set_key = { lhs = Modi_Tmp0 value = 0 }
	set_key = { lhs = Modi_CommerceNatural value = 1 }
	set_key = { lhs = Modi_StockpileSize value = 1 }
	set_key = { lhs = Modi_ProdOutput which = owner }
	set_key = { lhs = Modi_UrbanOutput which = owner }
	set_key = { lhs = Modi_RuralOutput which = owner }
	set_key = { lhs = Modi_MineOutput which = owner }
	set_key = { lhs = Modi_FishingOutput which = owner }
	set_key = { lhs = Modi_PastureOutput which = owner }
	set_key = { lhs = Modi_TradeOutput which = owner }
	set_key = { lhs = Modi_KnowledgeOutput which = owner }
	set_key = { lhs = Modi_ReligiousKnowledgeOutput which = owner }
	set_key = { lhs = Modi_FarmOutput which = owner }
	set_key = { lhs = Modi_GameOutput which = owner }
	set_key = { lhs = Modi_TradeMargin which = owner }
	set_key = { lhs = Modi_Labor which = owner }
	set_key = { lhs = Modi_SFLabor which = owner }
	set_key = { lhs = Modi_NMLabor which = owner }
	set_key = { lhs = Modi_RELabor which = owner }
	set_key = { lhs = Modi_BGLabor which = owner }
	set_key = { lhs = Modi_NOLabor which = owner }
	set_key = { lhs = Modi_CLLabor which = owner }
	set_key = { lhs = Modi_Prod1 which = owner }   # Food
	set_key = { lhs = Modi_Prod2 which = owner }   # Salt
	set_key = { lhs = Modi_Prod4 which = owner }   # Fiber
	set_key = { lhs = Modi_Prod5 which = owner }   # Fuel
	set_key = { lhs = Modi_Prod6 which = owner }   # Raw
	set_key = { lhs = Modi_Prod9 which = owner }   # Exotics
	set_key = { lhs = Modi_Prod10 which = owner }  # Delicacies
	set_key = { lhs = Modi_Prod21 which = owner }  # Consumer
	set_key = { lhs = Modi_Prod22 which = owner }  # Military
	set_key = { lhs = Modi_Prod23 which = owner }  # Naval
	set_key = { lhs = Modi_Prod24 which = owner }  # Industrial
	set_key = { lhs = Modi_Prod25 which = owner }  # Luxury
	set_key = { lhs = Modi_Prod41 which = owner }  # Knowledge
	set_key = { lhs = Modi_Prod51 which = owner }  # Commerce
	set_key = { lhs = Modi_StockpileSize which = owner }
	set_key = { lhs = Modi_SettledOutput which = owner }
	set_key = { lhs = Modi_NomadicOutput which = owner }

	if = {
		limit = {
			Post_Has = yes
			check_key = { lhs = Modi_TradeOutputPost value = 0.1 }
		}
		multiply_key = { lhs = Modi_TradeOutput which = Modi_TradeOutputPost }
	}
	
	if = { limit = { is_key_equal = { lhs = Infra_Irrigation value = 1 } } change_key = { lhs = Modi_FarmOutput value = 0.06 } }
	else_if = { limit = { is_key_equal = { lhs = Infra_Irrigation value = 2 } } change_key = { lhs = Modi_FarmOutput value = 0.12 } }
	else_if = { limit = { is_key_equal = { lhs = Infra_Irrigation value = 3 } } change_key = { lhs = Modi_FarmOutput value = 0.18 } }
	else_if = { limit = { is_key_equal = { lhs = Infra_Irrigation value = 4 } } change_key = { lhs = Modi_FarmOutput value = 0.24 } }
	else_if = { limit = { is_key_equal = { lhs = Infra_Irrigation value = 5 } } change_key = { lhs = Modi_FarmOutput value = 0.30 } }
	else_if = { limit = { is_key_equal = { lhs = Infra_Irrigation value = 6 } } change_key = { lhs = Modi_FarmOutput value = 0.35 } }
	else_if = { limit = { is_key_equal = { lhs = Infra_Irrigation value = 7 } } change_key = { lhs = Modi_FarmOutput value = 0.4 } }

	# State edict effects
	trigger_switch = {
		on_trigger = has_state_edict

		dip_edict_promote_local_commerce = {
			change_key = { lhs = Modi_TradeOutput value = 0.10 } # +10.0% Commerce
		}
		dip_edict_learning_and_education_act = {
			change_key = { lhs = Modi_KnowledgeOutput value = 0.10 } # + 10.0% Knowledge Output
		}
	}

	if = {
		limit = {
			check_key = { lhs = Prov_TRPow value = 1 }
			check_key = { lhs = NM_Total value = 1 }
		}
		owner = {
			trigger_switch = {
				on_trigger = has_country_modifier 
				TR_SupportNomadism_S = { PREV = { subtract_key = { lhs = Modi_NomadicOutput value = 0.10 } change_key = { lhs = Modi_SettledOutput value = 0.10 } } }
				TR_SupportNomadism_M = { PREV = { subtract_key = { lhs = Modi_NomadicOutput value = 0.10 } change_key = { lhs = Modi_SettledOutput value = 0.10 } } }
				TR_SupportNomadism_L = { PREV = { subtract_key = { lhs = Modi_NomadicOutput value = 0.10 } change_key = { lhs = Modi_SettledOutput value = 0.10 } } }
			}
		}
	}
	if = {
		limit = {
			region = egypt_region
			has_terrain = floodplains
		}
		change_key = { lhs = Modi_Prod1 value = 0.1 }
	}
	if = {
		limit = {
			OR = {
				culture_group = andean_group
				culture_group = north_central_tradition_group
			}
		}
		if = {
			limit = {
				owner = {
					Rights_BGCom2HasGreater = no
				}
			}
			change_key = { lhs = Modi_StockpileSize value = 1 }
		}
		else_if = {
			limit = {
				owner = {
					Rights_BGCom3HasGreater = no
				}
			}
			change_key = { lhs = Modi_StockpileSize value = 0.5 }
		}
	}
	if = {
		limit = {
			OR = {
				region = west_sahara_region
				region = east_sahara_region
			}
			has_port = no
		}
		change_key = { lhs = Modi_Prod2 value = 0.33 }
	}
	if = { # Kiel
		limit = {
			same_trade_node_as = 44
			44 = { has_province_flag = TN_SpecialCanal }
		}
		change_key = { lhs = Modi_StockpileSize value = 0.30 }
	}
	else_if = { # Suez
		limit = {
			same_trade_node_as = 359
			359 = { has_province_flag = TN_SpecialCanal }
		}
		change_key = { lhs = Modi_StockpileSize value = 0.30 }
	}
	else_if = { # Panama
		limit = {
			same_trade_node_as = 835
			835 = { has_province_flag = TN_SpecialCanal }
		}
		change_key = { lhs = Modi_StockpileSize value = 0.30 }
	}
	if = {
		limit = {
			OR = {
				has_province_flag = TN_Silk
				has_province_flag = TN_Tea
			}
		}
		change_key = { lhs = Modi_TradeOutput value = 0.20 }
	}
	if = {
		limit = {
			has_province_flag = TN_NorthernSilk
		}
		change_key = { lhs = Modi_TradeOutput value = 0.10 }
	}
	trigger_switch = {
		on_trigger = has_province_modifier
		ned_house_of_elzevir = { 
			change_key = { lhs = Modi_KnowledgeOutput value = 0.10 }
		}
		hee_toob_menadir = {
			change_key = { lhs = Modi_Prod21 value = 0.10 }
			change_key = { lhs = Modi_Prod25 value = 0.10 }
		}
	}
	if = {
		limit = {
			Banking = 100
		}
		change_key = { lhs = Modi_TradeOutput value = 0.25 }
		change_key = { lhs = Modi_UrbanOutput value = 0.15 }
		if = {
			limit = {
				Industrialisation = 100
			}
			change_key = { lhs = Modi_UrbanOutput value = 0.25 }
		}
	}
	if = {
		limit = {
			check_key = { lhs = Prov_TRPow value = 0.01 }
		}
		set_key = { lhs = Modi_Tmp0 value = 0.10 } # 10% penalty
		multiply_key = { lhs = Modi_Tmp0 which = Prov_TRPow }
		multiply_key = { lhs = Modi_Tmp0 value = 0.01 }
		subtract_key = { lhs = Modi_ProdOutput which = Modi_Tmp0 }
		multiply_key = { lhs = Modi_Tmp0 value = 1.0 }
		change_key = { lhs = Modi_PastureOutput which = Modi_Tmp0 } ## Except for pasture
		multiply_key = { lhs = Modi_Tmp0 value = 3.0 }
		change_key = { lhs = Modi_GameOutput which = Modi_Tmp0 } ## Especially not for Game, boost from Clans
	}
	if = {
		limit = {
			jungle_trigger = yes
		}
		subtract_key = { lhs = Modi_GameOutput value = 0.4 }
	}
	if = {
		limit = {
			check_key = { lhs = Prov_BULoy value = 0.01 }
		}
		set_key = { lhs = Modi_Tmp0 value = 100 }
		subtract_key = { lhs = Modi_Tmp0 which = Prov_TRPow }
		multiply_key = { lhs = Modi_Tmp0 value = 0.01 }
		multiply_key = { lhs = Modi_Tmp0 which = Prov_BULoy }
		multiply_key = { lhs = Modi_Tmp0 value = 0.01 } #100->1
		multiply_key = { lhs = Modi_Tmp0 value = 0.075 } #7.5% penalty
		subtract_key = { lhs = Modi_ProdOutput which = Modi_Tmp0 }
	}

	# Devastation impact (0-100 / 400)
	POP_GetDevastation = {
		return = Modi_Tmp0
	}
	
	divide_key = { lhs = Modi_Tmp0 value = 400 }
	subtract_key = { lhs = Modi_ProdOutput which = Modi_Tmp0 }
	
	# Impact from EU4 modifiers (1 +- modifier)
	if = {
		limit = {
			Casual_Literacy = 100
		}
		multiply_key = { lhs = Modi_KnowledgeOutput value = 2 }
	}
	trigger_switch = { 
		on_trigger = has_province_flag
		edu_1 = { change_key = { lhs = Modi_KnowledgeOutput value = 0.12 } }
		edu_7 = { change_key = { lhs = Modi_KnowledgeOutput value = 0.12 } }
		edu_12 = { change_key = { lhs = Modi_KnowledgeOutput value = 0.12 } }
		edu_8 = { change_key = { lhs = Modi_KnowledgeOutput value = 0.12 } }
		edu_11 = { change_key = { lhs = Modi_KnowledgeOutput value = 0.12 } }
	}
	if = {
		limit = {
			has_province_modifier = Education_Center_Major
		}
		change_key = { lhs = Modi_KnowledgeOutput value = 0.12 }
	}
	if = {
		limit = {
			has_province_modifier = colonial_gold_rush
		}
		change_key = { lhs = Modi_MineOutput value = 0.5 }
	}
	
	export_to_key = { lhs = Modi_Tmp0 value = modifier:local_production_efficiency }
	if = {
		limit = {
			is_city = yes
		}
		change_key = { lhs = Modi_Tmp0 value = 11 } #base value of local prod effic is -10
	}
	
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_Tmp0 value = 0 } }
		}
		set_key = { lhs = Modi_UrbanOutput value = 0 }
	}
	else = { 
		multiply_key = { lhs = Modi_UrbanOutput which = Modi_Tmp0 }
	}
	export_to_key = { lhs = Modi_Tmp0 value = modifier:trade_goods_size_modifier }
	change_key = { lhs = Modi_Tmp0 value = 1 } 
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_Tmp0 value = 0 } }
		}
		set_key = { lhs = Modi_RuralOutput value = 0 }
	}
	else = { 
		multiply_key = { lhs = Modi_RuralOutput which = Modi_Tmp0 }
	}
	if = {
		limit = {
			OR = {
				continent = north_america
				continent = south_america
			}
			NOT = { Columbian_Exchange = 100 }
			owner = {
				is_colonial_nation = no
				is_former_colonial_nation = no
				NOT = { has_country_flag = changed_from_colonial_nation }
			}
		}
		subtract_key = { lhs = Modi_PastureOutput value = 0.5 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_TradeOutput value = 0.1 } }
		}
		set_key = { lhs = Modi_TradeOutput value = 0.1 }
	}
	if = {
		limit = {
			has_province_flag = TN_Oasis
		}
		change_key = { lhs = Modi_CommerceNatural value = 0.20 }
	}
	if = {
		limit = {
			has_province_modifier = ara_sindicat_remenca
		}
		change_key = { lhs = Modi_CommerceNatural value = 0.20 }
	}
	trigger_switch = {
		on_trigger = has_province_flag 
		TN_Canal = { if = { limit = { NOT = { has_province_flag = TN_SpecialCanal } } change_key = { lhs = Modi_CommerceNatural value = 0.20 } } set_province_flag = TN_COT }
		TN_Natural_Major = { change_key = { lhs = Modi_CommerceNatural value = 0.30 } }
		TN_Natural_Important = { change_key = { lhs = Modi_CommerceNatural value = 0.20 } }
		TN_Natural_Minor = { change_key = { lhs = Modi_CommerceNatural value = 0.10 } }
	}
	trigger_switch = {
		on_trigger = has_province_flag 
		TN_Harbour_Major = { change_key = { lhs = Modi_CommerceNatural value = 0.15 } }
		TN_Harbour_Important = { change_key = { lhs = Modi_CommerceNatural value = 0.10 } }
		TN_Harbour_Minor = { change_key = { lhs = Modi_CommerceNatural value = 0.05 } }
	}
	trigger_switch = {
		on_trigger = has_building
		harbour_infrastructure_2 = { change_key = { lhs = Modi_CommerceNatural value = 0.05 } }
		harbour_infrastructure_3 = { change_key = { lhs = Modi_CommerceNatural value = 0.10 } }
		harbour_infrastructure_4 = { change_key = { lhs = Modi_CommerceNatural value = 0.15 } }
		harbour_infrastructure_5 = { change_key = { lhs = Modi_CommerceNatural value = 0.20 } }
		harbour_infrastructure_6 = { change_key = { lhs = Modi_CommerceNatural value = 0.25 } }
		harbour_infrastructure_7 = { change_key = { lhs = Modi_CommerceNatural value = 0.30 } }
	}
	trigger_switch = {
		on_trigger = has_building
		road_network = { change_key = { lhs = Modi_CommerceNatural value = 0.025 } }
		paved_road_network = { change_key = { lhs = Modi_CommerceNatural value = 0.05 } }
		highway_network = { change_key = { lhs = Modi_CommerceNatural value = 0.075 } }
		road_and_rail_network = { change_key = { lhs = Modi_CommerceNatural value = 0.1 } }
		extensive_rail_network = { change_key = { lhs = Modi_CommerceNatural value = 0.125 } }
		modern_highway_network = { change_key = { lhs = Modi_CommerceNatural value = 0.15 } }
	}
	if = {
		limit = {
			has_province_modifier = oresund_toll_tm
		}
		change_key = { lhs = Modi_CommerceNatural value = 0.30 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_TradeOutput value = 0.1 } }
		}
		set_key = { lhs = Modi_TradeOutput value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_RuralOutput value = 0.1 } }
		}
		set_key = { lhs = Modi_RuralOutput value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_UrbanOutput value = 0.1 } }
		}
		set_key = { lhs = Modi_UrbanOutput value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_ProdOutput value = 0.1 } }
		}
		set_key = { lhs = Modi_ProdOutput value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_KnowledgeOutput value = 0.1 } }
		}
		set_key = { lhs = Modi_KnowledgeOutput value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_MineOutput value = 0.1 } }
		}
		set_key = { lhs = Modi_MineOutput value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_FishingOutput value = 0.1 } }
		}
		set_key = { lhs = Modi_FishingOutput value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_PastureOutput value = 0.1 } }
		}
		set_key = { lhs = Modi_PastureOutput value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_SettledOutput value = 0.1 } }
		}
		set_key = { lhs = Modi_SettledOutput value = 0.1 }
	}
}

# Modi_$type$Max: Impacts the maximum size of a given type of property in all owned provinces
# Modi_$type$Cost: Impacts the amount of labor and tradegood a given type of property requires for its construction and therefore its cost in all owned provinces
# Modi_BuildingCost: Impacts the amount of tradegood required for construction and therefore its cost for all construction projects in all owned provinces 
# Modi_BuildingTime: Impacts the amount of labor required for construction and therefore its cost for all construction projects in all owned provinces 
Modi_BuildingCountry = {
	set_key = { lhs = Modi_AgricultureMax value = 1 }
	set_key = { lhs = Modi_FisheryMax value = 1 }
	set_key = { lhs = Modi_ForestryMax value = 1 }
	set_key = { lhs = Modi_ExtractionMax value = 1 }
	set_key = { lhs = Modi_AgricultureCost value = 1 }
	set_key = { lhs = Modi_ForestryCost value = 1 }
	set_key = { lhs = Modi_FisheryCost value = 1 }
	set_key = { lhs = Modi_ExtractionCost value = 1 }
	set_key = { lhs = Modi_IndustrialCost value = 1 }
	set_key = { lhs = Modi_CommercialCost value = 1 }
	set_key = { lhs = Modi_AcademicCost value = 1 }
	set_key = { lhs = Modi_ResourceSize value = 1 }
	
	export_to_key = { lhs = Modi_ResourceSizeIneffic value = modifier:development_cost }
	#export_to_key = { lhs = Modi_ResourceSize value = modifier:development_cost_modifier } #this thing doesn't appear to export properly.
	export_to_key = { lhs = Modi_BuildingCost value = modifier:build_cost }
	export_to_key = { lhs = Modi_BuildingTime value = modifier:build_time }
	
	change_key = { lhs = Modi_BuildingCost value = 1 }
	change_key = { lhs = Modi_BuildingTime value = 1 }

	if = { #This is represented in adm.txt under technologies as "development_cost_modifier", which is a tech-only modifier and can't be exported
		limit = {
			adm_tech = 59
		}
		change_key = { lhs = Modi_ResourceSize value = 0.35 }
	}
	else_if = {
		limit = {
			adm_tech = 55
		}
		change_key = { lhs = Modi_ResourceSize value = 0.325 }
	}
	else_if = {
		limit = {
			adm_tech = 50
		}
		change_key = { lhs = Modi_ResourceSize value = 0.3 }
	}
	else_if = {
		limit = {
			adm_tech = 45
		}
		change_key = { lhs = Modi_ResourceSize value = 0.275 }
	}
	else_if = {
		limit = {
			adm_tech = 40
		}
		change_key = { lhs = Modi_ResourceSize value = 0.25 }
	}
	else_if = {
		limit = {
			adm_tech = 35
		}
		change_key = { lhs = Modi_ResourceSize value = 0.225 }
	}
	else_if = {
		limit = {
			adm_tech = 30
		}
		change_key = { lhs = Modi_ResourceSize value = 0.2 }
	}
	else_if = {
		limit = {
			adm_tech = 25
		}
		change_key = { lhs = Modi_ResourceSize value = 0.175 }
	}
	else_if = {
		limit = {
			adm_tech = 20
		}
		change_key = { lhs = Modi_ResourceSize value = 0.15 }
	}
	else_if = {
		limit = {
			adm_tech = 18
		}
		change_key = { lhs = Modi_ResourceSize value = 0.125 }
	}
	else_if = {
		limit = {
			adm_tech = 15
		}
		change_key = { lhs = Modi_ResourceSize value = 0.1 }
	}
	else_if = {
		limit = {
			adm_tech = 12
		}
		change_key = { lhs = Modi_ResourceSize value = 0.075 }
	}
	else_if = {
		limit = {
			adm_tech = 10
		}
		change_key = { lhs = Modi_ResourceSize value = 0.05 }
	}
	else_if = {
		limit = {
			adm_tech = 7
		}
		change_key = { lhs = Modi_ResourceSize value = 0.025 }
	}
	if = {
		limit = {
			has_idea = culture_ideas_4
		}
		subtract_key = { lhs = Modi_AcademicCost value = 0.1 }
	}
	if = {
		limit = {
			has_idea = mercantilism_ideas_4
		}
		subtract_key = { lhs = Modi_CommercialCost value = 0.1 }
	}
	trigger_switch = {
		on_trigger = has_idea
		egyptian_ideas_1 = {
			subtract_key = { lhs = Modi_AgricultureCost value = 0.1 } # Farmland cost
		}
		georgian_ideas_1 = {
			subtract_key = { lhs = Modi_AgricultureCost value = 0.1 }
		}
		great_lakes_ideas_3 = {
			subtract_key = { lhs = Modi_AgricultureCost value = 0.05 }
		}
		swahili_ideas_5 = {
			subtract_key = { lhs = Modi_CommercialCost value = 0.1 }
		}
		bengali_ideas_1 = {
			subtract_key = { lhs = Modi_AgricultureCost value = 0.1 }
		}
		magyar_ideas_5 = {
			subtract_key = { lhs = Modi_AgricultureCost value = 0.05 }
		}
		russian_ideas_1 = {
			subtract_key = { lhs = Modi_AgricultureCost value = 0.05 }
		}
		ruthenian_ideas_1 = {
			subtract_key = { lhs = Modi_AgricultureCost value = 0.05 }
		}
		neapolitan_ideas_1 = {
			subtract_key = { lhs = Modi_AgricultureCost value = 0.05 }
		}
		ayyubid_ideas_4 = {
			subtract_key = { lhs = Modi_AgricultureCost value = 0.05 }
		}
		persian_ideas_1 = {
			subtract_key = { lhs = Modi_AgricultureCost value = 0.1 }
		}
		elbe_river_german_ideas_1 = {
			subtract_key = { lhs = Modi_AgricultureCost value = 0.1  }
		}
		german_ideas_5 = {
			change_key = { lhs = Modi_IndustrialCost value = 0.025 }
		}
		imperial_slavs_ideas_7 = {
			change_key = { lhs = Modi_IndustrialCost value = 0.025 }
		}
		basque_ideas_7 = {
			subtract_key = { lhs = Modi_ExtractionCost value = 0.10 }
		}
		ethiopian_ideas_3 = {
			subtract_key = { lhs = Modi_AgricultureCost value = 0.1 } 
		}	
		polish_ideas_4 = {
			subtract_key = { lhs = Modi_AgricultureCost value = 0.1 } # Farmland cost
		}
		irish_ideas_1 = {
			subtract_key = { lhs = Modi_AgricultureCost value = 0.075 } 
		}
		morrocan_fez_ideas_4 = {
			subtract_key = { lhs = Modi_AcademicCost value = 0.1 }
		}
		lan_na_ideas_5 = {
			multiply_key = { lhs = Modi_AgricultureMax value = 1.1 }
		}
	}
	trigger_switch = {
		on_trigger = has_country_modifier
		hee_christian_iv = {
			subtract_key = { lhs = Modi_BuildingCost value = 0.15 }
		}
		hee_building_imperial_canal = {
			subtract_key = { lhs = Modi_BuildingCost value = 0.05 }
		}
		mimar_sinan = {
			subtract_key = { lhs = Modi_BuildingCost value = 0.10 }
		}
	}
	
	set_key = { lhs = Modi_Tmp0 which = Modi_ResourceSize }
	subtract_key = { lhs = Modi_Tmp0 value = 1 }
	multiply_key = { lhs = Modi_Tmp0 value = 5 }
	change_key = { lhs = Modi_Tmp0 value = 1 }
	multiply_key = { lhs = Modi_ExtractionMax which = Modi_Tmp0 }	
	
	trigger_switch = {
		on_trigger = has_country_modifier
		very_easy_difficulty = {
			subtract_key = { lhs = Modi_BuildingCost value = 0.10 }
			subtract_key = { lhs = Modi_BuildingTime value = 0.10 }
		}
		easy_difficulty = {
			subtract_key = { lhs = Modi_BuildingCost value = 0.05 }
			subtract_key = { lhs = Modi_BuildingTime value = 0.05 }
		}
		hard_difficulty = {
			change_key = { lhs = Modi_BuildingCost value = 0.05 }
			change_key = { lhs = Modi_BuildingTime value = 0.05 }
		}
		expert_difficulty = {
			change_key = { lhs = Modi_BuildingCost value = 0.10 }
			change_key = { lhs = Modi_BuildingTime value = 0.10 }
		}
	}
	if = {
		limit = { 
			NOT = { check_key = { lhs = Modi_BuildingCost value = 0.1 } }
		}
		set_key = { lhs = Modi_BuildingCost value = 0.1 }
	}
	if = {
		limit = { 
			NOT = { check_key = { lhs = Modi_BuildingTime value = 0.1 } }
		}
		set_key = { lhs = Modi_BuildingTime value = 0.1 }
	}	
}

# Modi_$type$Max: Impacts the maximum size of a given type of property in a given province
# Modi_$type$Cost: Impacts the amount of labor and tradegood a given type of property requires for its construction and therefore its cost in a given province
# Modi_BuildingCost: Impacts the amount of tradegood required for construction and therefore its cost for all construction projects in a given province
# Modi_BuildingTime: Impacts the amount of labor required for construction and therefore its cost for all construction projects in a given province
Modi_BuildingProvince = {
	set_key = { lhs = Modi_AgricultureMax which = owner }
	set_key = { lhs = Modi_FisheryMax which = owner }
	set_key = { lhs = Modi_ForestryMax which = owner }
	set_key = { lhs = Modi_ExtractionMax which = owner }
	set_key = { lhs = Modi_AgricultureCost which = owner }
	set_key = { lhs = Modi_ForestryCost which = owner }
	set_key = { lhs = Modi_FisheryCost which = owner }
	set_key = { lhs = Modi_ExtractionCost which = owner }
	set_key = { lhs = Modi_IndustrialCost which = owner }
	set_key = { lhs = Modi_CommercialCost which = owner }
	set_key = { lhs = Modi_AcademicCost which = owner }
	
	export_to_key = { lhs = Modi_ResourceSizeIneffic value = modifier:local_development_cost }
	export_to_key = { lhs = Modi_BuildingCost value = modifier:local_build_cost }
	export_to_key = { lhs = Modi_BuildingTime value = modifier:local_build_time }
	
	change_key = { lhs = Modi_ResourceSizeIneffic which = owner } 
	change_key = { lhs = Modi_BuildingCost value = 1 }
	change_key = { lhs = Modi_BuildingTime value = 1 }
	
	if = {
		limit = {
			check_key = { lhs = Modi_ResourceSizeIneffic value = 0 }
		}
		change_key = { lhs = Modi_ResourceSizeIneffic value = 1 }
		divide_key = { lhs = Modi_AgricultureMax which = Modi_ResourceSizeIneffic }
		divide_key = { lhs = Modi_FisheryMax which = Modi_ResourceSizeIneffic }
		divide_key = { lhs = Modi_ForestryMax which = Modi_ResourceSizeIneffic }
		divide_key = { lhs = Modi_ExtractionMax which = Modi_ResourceSizeIneffic }
	}
	else = {
		set_key = { lhs = Modi_Tmp0 value = 1 }
		subtract_key = { lhs = Modi_Tmp0 which = Modi_ResourceSizeIneffic }
		multiply_key = { lhs = Modi_AgricultureMax which = Modi_Tmp0 }
		multiply_key = { lhs = Modi_FisheryMax which = Modi_Tmp0 }
		multiply_key = { lhs = Modi_ForestryMax which = Modi_Tmp0 }
		multiply_key = { lhs = Modi_ExtractionMax which = Modi_Tmp0 }
	}
	
	multiply_key = { lhs = Modi_BuildingCost which = owner } #multiplying is more in line with vanilla behaviour
	multiply_key = { lhs = Modi_BuildingTime which = owner }
	
	if = {
		limit = { 
			NOT = { check_key = { lhs = Modi_BuildingCost value = 0.1 } }
		}
		set_key = { lhs = Modi_BuildingCost value = 0.1 }
	}
	if = {
		limit = { 
			NOT = { check_key = { lhs = Modi_BuildingTime value = 0.1 } }
		}
		set_key = { lhs = Modi_BuildingTime value = 0.1 }
	}
	
	if = {
		limit = {
			has_province_flag = pm
		}
		if = {
			limit = {
				NOT = { Legalism = 100 }
			}
			if = {
				limit = {
					continent = north_america
				}
				multiply_key = { lhs = Modi_ExtractionMax value = 0.25 }
			}
			else_if= {
				limit = {
					continent = south_america
				}
				multiply_key = { lhs = Modi_ExtractionMax value = 0.1 }
			}
			else = {
				multiply_key = { lhs = Modi_ExtractionMax value = 0.5 }
			}
		}
		else_if = {
			limit = {
				owner = {
					is_colonial_nation = no
					is_former_colonial_nation = no
					NOT = { has_country_flag = changed_from_colonial_nation }
				}
				NOT = { Banking = 100 }
				OR = {
					continent = north_america
					continent = south_america
				}
			}
			multiply_key = { lhs = Modi_ExtractionMax value = 0.5 }
		}
	}
	if = {
		limit = {
			has_province_flag = salt
			OR = {
				region = peru_region
				region = bolivia_region
			}
			OR = {
				AND = {
					owner = {
						is_colonial_nation = no
						is_former_colonial_nation = no
						NOT = { has_country_flag = changed_from_colonial_nation }
					}
					NOT = { Banking = 100 }
				}
				NOT = { Legalism = 100 }
			}
		}
		multiply_key = { lhs = Modi_ExtractionMax value = 0.5 }
	}

	if = {
		limit = {
			is_key_equal = { lhs = Infra_Harbourage value = 1 }
		}
		subtract_key = { lhs = Modi_CommercialCost value = 0.04 }
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Infra_Harbourage value = 2 }
		}
		subtract_key = { lhs = Modi_CommercialCost value = 0.08 }
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Infra_Harbourage value = 3 }
		}
		subtract_key = { lhs = Modi_CommercialCost value = 0.12 }
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Infra_Harbourage value = 4 }
		}
		subtract_key = { lhs = Modi_CommercialCost value = 0.16 }
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Infra_Harbourage value = 5 }
		}
		subtract_key = { lhs = Modi_CommercialCost value = 0.20 }
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Infra_Harbourage value = 6 }
		}
		subtract_key = { lhs = Modi_CommercialCost value = 0.24 }
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Infra_Harbourage value = 7 }
		}
		subtract_key = { lhs = Modi_CommercialCost value = 0.28 }
	}

	trigger_switch = {
		on_trigger = has_province_modifier
		rural_development_efforts = {
			subtract_key = { lhs = Modi_AgricultureCost value = 0.1 }
			subtract_key = { lhs = Modi_FisheryCost value = 0.1 }
			subtract_key = { lhs = Modi_ForestryCost value = 0.1 }
			subtract_key = { lhs = Modi_ExtractionCost value = 0.1 }
		}
		urban_development_efforts = { 
			subtract_key = { lhs = Modi_IndustrialCost value = 0.1 }
			subtract_key = { lhs = Modi_CommercialCost value = 0.1 }
			subtract_key = { lhs = Modi_AcademicCost value = 0.1 }
		}
		hee_de_toledo_naples = { 
			subtract_key = { lhs = Modi_BuildingCost value = 0.2 }
		}
		hee_casa_san_giorgio = {
			subtract_key = { lhs = Modi_BuildingCost value = 0.10 }
		}
		hee_imperial_canal_province = {
			subtract_key = { lhs = Modi_BuildingCost value = 0.10 }
		}
		public_works_of_cairo = {
			subtract_key = { lhs = Modi_BuildingCost value = 0.10 }
		}
	}
	trigger_switch = {
		on_trigger = has_province_modifier
		dutch_polders_1 = { multiply_key = { lhs = Modi_AgricultureMax value = 1.25 } }
		dutch_polders_2 = { multiply_key = { lhs = Modi_AgricultureMax value = 1.5 } }
		dutch_polders_3 = { multiply_key = { lhs = Modi_AgricultureMax value = 2 } }
	}
	multiply_key = { lhs = Modi_BuildingCost value = 0.3 }
}

# Modi_MerchantFromTradeCenter: Impacts the amount of merchant gained from trade centers in all owned provinces
Modi_MerchantsCountry = {
	set_key = { lhs = Modi_MerchantBase value = 0 }
	set_key = { lhs = Modi_MerchantFromTradeCenter value = 1 }
	set_key = { lhs = Modi_MerchantMulti value = 1 }

	set_key = { lhs = Modi_Tmp0 value = 0 }
	#export_to_key = {
	#	lhs = Modi_Tmp0
	#	value = modifier:trade_efficiency
	#}
	#multiply_key = { lhs = Modi_Tmp0 value = 5 }
	#change_key = { lhs = Modi_Tmp0 value = 1 }
	#change_key = { lhs = Modi_MerchantMulti which = Modi_Tmp0 }
	# disable for now, this need checks and better bounds. unstable element.

	#set_key = { lhs = Modi_Tmp0 value = 0 }
	if = {
		limit = {
			has_idea = trade_ideas_1
		}
		change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.40 }
	}
	if = {
		limit = {
			has_idea = colonialism_ideas_6
		}
		change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.25 }
	}
	if = {
		limit = {
			has_idea = free_trade_ideas_5
		}
		change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.25 }
	}
	trigger_switch = {
		on_trigger = has_idea
		teutonic_order_ideas_5 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		mongol_ideas_3 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		turkic_ideas_5 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		swahili_ideas_6 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		bengali_ideas_2 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		bodo_kachari_ideas_6 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		bodo_kachari_ideas_6_a = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		russian_ideas_5 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		ruthenian_ideas_5 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		tunisian_ideas_4 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		chaghatai_ideas_5 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		malayan_ideas_6 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		elbe_river_german_ideas_7 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		portuguese_ideas_6 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		castillian_ideas_6 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		ethiopian_ideas_7 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		najdi_ideas_6 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		akan_ideas_3 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		yemeni_ideas_3 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		wolof_ideas_3 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		punjab_ideas_3 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		polish_ideas_7 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.075 }
		}
		gujarat_ideas_1 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.15 }
		}
		cordoban_ideas_7 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.15 }
		}
		malayali_ideas_4 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.075 }
		}
		oriya_ideas_5 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.125 }
		}
		serbian_ideas_5 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.05 }
		}
		flemish_ideas_1 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		kanem_ideas_4 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.05 }
		}
		genoese_ideas_7 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.125 }
		}
		riga_ideas_5 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.15 }
		}
		hejazi_ideas_7 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
		}
		cypriote_ideas_3 = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.05 }
		}
	}
	if = {
		limit = {
			Rights_BGCom1Has = yes
		}
		subtract_key = { lhs = Modi_MerchantFromTradeCenter value = 0.65 }
	}
	else_if = {
		limit = {
			Rights_BGCom2Has = yes
		}
		subtract_key = { lhs = Modi_MerchantFromTradeCenter value = 0.5 }
	}
	else_if = {
		limit = {
			Rights_BGCom3Has = yes
		}
		subtract_key = { lhs = Modi_MerchantFromTradeCenter value = 0.3 }
	}
	else_if = {
		limit = {
			Rights_BGCom4Has = yes
		}
		subtract_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
	}
	if = { # Merchant Republics
		limit = {
			has_reform = Pol_Mandate3
			#is_key_equal = { lhs = Pol_Mandate value = 2 }
		}
		change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.20 }
	}
	if = {
		limit = {
			has_idea = plutocracy_ideas_5
		}
		change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.20 }
	}
	if = {
		limit = {
			has_country_modifier = ara_book_consulate_sea
		}
		change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.1 }
	}
	trigger_switch = {
		on_trigger = has_country_modifier
		very_easy_difficulty = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.15 }
		}
		easy_difficulty = {
			change_key = { lhs = Modi_MerchantFromTradeCenter value = 0.075 }
		}
		hard_difficulty = {
			subtract_key = { lhs = Modi_MerchantFromTradeCenter value = 0.15 }
		}
		expert_difficulty = {
			subtract_key = { lhs = Modi_MerchantFromTradeCenter value = 0.33 }
		}
	}
}

# Modi_MerchantFromTradeCenter: Impacts the amount of merchant gained from trade centers in a given province
Modi_MerchantsProvince = {
	set_key = { lhs = Modi_MerchantBase which = owner }
	set_key = { lhs = Modi_MerchantFromTradeCenter which = owner }
	set_key = { lhs = Modi_MerchantMulti which = owner }
	
	# Capital Gain from Merchants
	if = {
		limit = {
			is_capital = yes
		}
		change_key = { lhs = Modi_MerchantFromTradeCenter value = 2 }
		
		owner = {
			if = {
				limit = {
					has_idea = plutocracy_ideas_7
				}
				PREV = { change_key = { lhs = Modi_MerchantFromTradeCenter value = 1 } }
			}
			trigger_switch = {
				on_trigger = has_idea
				georgian_ideas_3 = {
					PREV = { change_key = { lhs = Modi_MerchantFromTradeCenter value = 1 } }
				}
				roman_ideas_5 = {
					PREV = { change_key = { lhs = Modi_MerchantFromTradeCenter value = 1 } }
				}
				tartar_ideas_5 = {
					PREV = { change_key = { lhs = Modi_MerchantFromTradeCenter value = 1 } }
				}
			}
		}
	}
	
	# Effect of culture acceptance
	if = {
		limit = {
			has_owner_culture = no
			has_owner_accepted_culture = no
		}
		if = {
			limit = {
				culture_group = owner
			}
			multiply_key = { lhs = Modi_MerchantFromTradeCenter value = 0.5 }
		}
		else = {
			multiply_key = { lhs = Modi_MerchantFromTradeCenter value = 0.25 }
		}
	}
}

# Modi_InfraMaint: Impacts the amount of labor and tradegood all types of infra requires for its maintenance and therefore its cost in all owned provinces
# Modi_$type$Maint: Impacts the amount of labor and tradegood a given type of infra requires for its maintenance and therefore its cost in all owned provinces
Modi_InfraMaintenanceCountry = {
	set_key = { lhs = Modi_InfraMaint value = 1 }
	set_key = { lhs = Modi_PathingMaint value = 1 }
	set_key = { lhs = Modi_HarbourageMaint value = 1 }
	set_key = { lhs = Modi_AmenitiesMaint value = 1 }
	set_key = { lhs = Modi_IrrigationMaint value = 1 }
	set_key = { lhs = Modi_CapitolMaint value = 1 }
	#set_key = { lhs = Modi_CourthouseMaint value = 1 }
	set_key = { lhs = Modi_GarrisonMaint value = 1 }
	set_key = { lhs = Modi_InfraBuild value = 1 }
	set_key = { lhs = Modi_PathingBuild value = 1 }
	set_key = { lhs = Modi_HarbourageBuild value = 1 }
	set_key = { lhs = Modi_AmenitiesBuild value = 1 }
	set_key = { lhs = Modi_IrrigationBuild value = 1 }
	set_key = { lhs = Modi_CapitolBuild value = 1 }
	#set_key = { lhs = Modi_CourthouseBuild value = 1 }
	set_key = { lhs = Modi_GarrisonBuild value = 1 }
	if = {
		limit = {
			has_country_modifier = Fear_Of_Turks
		}
		subtract_key = { lhs = Modi_GarrisonMaint value = 0.33 }
	}
	if = {
		limit = {
			has_idea = economic_ideas_2
		}
		subtract_key = { lhs = Modi_PathingMaint value = 0.1 }
		subtract_key = { lhs = Modi_PathingBuild value = 0.1 }
	}
	if = {
		limit = {
			has_idea = logistics_ideas_3
		}
		subtract_key = { lhs = Modi_PathingMaint value = 0.1 }
		subtract_key = { lhs = Modi_PathingBuild value = 0.1 }
		subtract_key = { lhs = Modi_HarbourageBuild value = 0.1 }
		subtract_key = { lhs = Modi_HarbourageMaint value = 0.1 }
		if = {
			limit = {
				has_idea = logistics_ideas_4
			}
			subtract_key = { lhs = Modi_GarrisonMaint value = 0.05 }
			subtract_key = { lhs = Modi_GarrisonBuild value = 0.05 }
		}
	}
	if = {
		limit = {
			has_idea = plutocracy_ideas_1
		}
		subtract_key = { lhs = Modi_AmenitiesMaint value = 0.1 }
	}
	if = {
		limit = {
			has_idea = quantity_ideas_3
		}
		subtract_key = { lhs = Modi_GarrisonMaint value = 0.10 }
	}
	if = {
		limit = {
			has_idea = agrarian_ideas_1
		}
		subtract_key = { lhs = Modi_IrrigationMaint value = 0.15 }
	}
	if = {
		limit = {
			has_idea = industrial_ideas_7
		}
		subtract_key = { lhs = Modi_PathingMaint value = 0.1 }
	}
	if = {
		limit = {
			has_idea = mercantilism_ideas_7
		}
		subtract_key = { lhs = Modi_HarbourageMaint value = 0.1 }
	}
	if = {
		limit = {
			has_idea = empire_ideas_4
		}
		subtract_key = { lhs = Modi_CapitolMaint value = 0.1 }
		if = {
			limit = {
				has_idea = empire_ideas_5
			}
			subtract_key = { lhs = Modi_PathingMaint value = 0.05 }
		}
	}
	if = {
		limit = {
			has_idea = global_empire_ideas_2
		}
		subtract_key = { lhs = Modi_HarbourageMaint value = 0.1 }
		subtract_key = { lhs = Modi_PathingMaint value = 0.1 }
	}
	if = {
		limit = {
			has_idea = industrial_ideas_2
		}
		subtract_key = { lhs = Modi_AmenitiesMaint value = 0.10 }
	}
	if = {
		limit = {
			has_idea = fortification_ideas_1
		}
		subtract_key = { lhs = Modi_GarrisonBuild value = 0.1 }
		subtract_key = { lhs = Modi_GarrisonMaint value = 0.1 }
	}
	trigger_switch = {
		on_trigger = has_idea
		chinese_ideas_4 = {
			subtract_key = { lhs = Modi_CapitolMaint value = 0.20 }
		}
		japanese_ideas_1 = {
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.1 }
			if = {
				limit = {
					has_idea = japanese_ideas_5
				}
				subtract_key = { lhs = Modi_GarrisonMaint value = 0.1 }
			}
		}
		korean_ideas_1 = {
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.1 }
		}
		jurchen_ideas_2 = {
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.1 }
		}
		southern_african_ideas_2 = {
			subtract_key = { lhs = Modi_AmenitiesMaint value = 0.1 }
		}
		schweiz_ideas_7 = {
			subtract_key = { lhs = Modi_AmenitiesMaint value = 0.1 }
		}
		tibetan_ideas_1 = {
			subtract_key = { lhs = Modi_PathingMaint value = 0.10 }
			if = {
				limit = {
					has_idea = tibetan_ideas_5
				}
				subtract_key = { lhs = Modi_GarrisonMaint value = 0.10 }
			}
		}
		chamic_ideas_1 = {
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.10 }
			if = {
				limit = {
					has_idea = chamic_ideas_4
				}
				subtract_key = { lhs = Modi_AmenitiesMaint value = 0.10 }
				if = {
					limit = {
						has_idea = chamic_ideas_7
					}
					subtract_key = { lhs = Modi_GarrisonMaint value = 0.10 }
				}
			}
		}
		egyptian_ideas_1 = {
			subtract_key = { lhs = Modi_IrrigationMaint value = 0.1 }
		}
		roman_ideas_2 = {
			subtract_key = { lhs = Modi_CapitolMaint value = 0.25 }
		}
		armenian_ideas_1 = {
			subtract_key = { lhs = Modi_PathingMaint value = 0.1 }
			if = {
				limit = {
					has_idea = armenian_ideas_7
				}
				subtract_key = { lhs = Modi_GarrisonMaint value = 0.1 }
			}
		}
		cilician_ideas_1 = {
			subtract_key = { lhs = Modi_IrrigationMaint value = 0.1 }
			if = {
				limit = {
					has_idea = cilician_ideas_7
				}
				subtract_key = { lhs = Modi_GarrisonMaint value = 0.1 }
			}
		}
		great_lakes_ideas_1 = {
			subtract_key = { lhs = Modi_IrrigationMaint value = 0.05 }
		}
		somali_ideas_2 = {
			subtract_key = { lhs = Modi_IrrigationMaint value = 0.10 }
		}
		bengali_ideas_1 = {
			subtract_key = { lhs = Modi_IrrigationMaint value = 0.05 }
			if = {
				limit = {
					has_idea = bengali_ideas_2
				}
				subtract_key = { lhs = Modi_HarbourageMaint value = 0.10 }
			}
		}
		yuan_ideas_3 = {
			subtract_key = { lhs = Modi_CapitolMaint value = 0.10 }
			if = {
				limit = {
					has_idea = yuan_ideas_4
				}
				subtract_key = { lhs = Modi_PathingMaint value = 0.10 }
			}
		}
		bodo_kachari_ideas_1 = {
			subtract_key = { lhs = Modi_GarrisonMaint value = 0.10 }
			if = {
				limit = {
					has_idea = bodo_kachari_ideas_2
				}
				subtract_key = { lhs = Modi_IrrigationMaint value = 0.10 }
			}
		}
		bodo_kachari_ideas_1_a = {
			subtract_key = { lhs = Modi_GarrisonMaint value = 0.10 }
			if = {
				limit = {
					has_idea = bodo_kachari_ideas_2_a
				}
				subtract_key = { lhs = Modi_IrrigationMaint value = 0.10 }
			}
		}
		javanese_ideas_5 = {
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.10 }
		}
		magyar_ideas_5 = {
			subtract_key = { lhs = Modi_GarrisonMaint value = 0.10 }
		}
		russian_ideas_1 = {
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.10 }
		}
		ruthenian_ideas_1 = {
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.10 }
		}
		neapolitan_ideas_1 = {
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.10 }
			if = {
				limit = {
					has_idea = neapolitan_ideas_3
				}
				subtract_key = { lhs = Modi_GarrisonMaint value = 0.10 }
			}
		}
		ayyubid_ideas_2 = {
			subtract_key = { lhs = Modi_GarrisonMaint value = 0.20 }
			if = {
				limit = {
					has_idea = ayyubid_ideas_4
				}
				subtract_key = { lhs = Modi_IrrigationMaint value = 0.1 }
			}
		}
		persian_ideas_2 = {
			subtract_key = { lhs = Modi_CapitolMaint value = 0.20 }
			if = {
				limit = {
					has_idea = persian_ideas_3
				}
				subtract_key = { lhs = Modi_PathingMaint value = 0.10 }
			}
		}
		scandanavian_ideas_1 = {
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.10 }
		}
		kannadigaru_ideas_3 = {
			subtract_key = { lhs = Modi_CapitolMaint value = 0.20 }
		}
		malayan_ideas_1 = {
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.2 }
			if = {
				limit = {
					has_idea = malayan_ideas_6
				}
				subtract_key = { lhs = Modi_AmenitiesMaint value = 0.10 }
			}
		}
		elbe_river_german_ideas_7 = {
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.15 }
		}
		danubian_alpine_german_ideas_6 = {
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.15 }
		}
		basque_ideas_2 = {
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.10 }
		}
		iberian_ideas_1 = {
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.10 }
			if = {
				limit = {
					has_idea = iberian_ideas_4
				}
				subtract_key = { lhs = Modi_AmenitiesMaint value = 0.10 }
			}
		}
		milanese_ideas_1 = {
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.10 }
			if = {
				limit = {
					has_idea = milanese_ideas_6
				}
				subtract_key = { lhs = Modi_AmenitiesMaint value = 0.1 }
			}
		}
		yemeni_ideas_2 = {
			subtract_key = { lhs = Modi_IrrigationMaint value = 0.10 }
			if = {
				limit = {
					has_idea = yemeni_ideas_4
				}
				subtract_key = { lhs = Modi_AmenitiesMaint value = 0.1 }
			}
		}
		yoruba_ideas_4 = {
			subtract_key = { lhs = Modi_AmenitiesMaint value = 0.20 }
		}
		wolof_ideas_1 = {
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.15 }
		}
		nubia_ideas_1 = {
			subtract_key = { lhs = Modi_IrrigationMaint value = 0.1 }
		}
		punjab_ideas_1 = {
			subtract_key = { lhs = Modi_IrrigationMaint value = 0.1 }
		}
		tuscan_ideas_5 = {
			subtract_key = { lhs = Modi_AmenitiesMaint value = 0.15 }
		}
		gujarat_ideas_4 = {
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.15 }
		}
		oriya_ideas_1 = {
			subtract_key = { lhs = Modi_GarrisonMaint value = 0.10 }
			if = {
				limit = {
					has_idea = oriya_ideas_5
				}
				subtract_key = { lhs = Modi_HarbourageMaint value = 0.10 }
			}
		}
		serbian_ideas_2 = {
			subtract_key = { lhs = Modi_AmenitiesMaint value = 0.10 }
		}
		alanian_ideas_3 = {
			subtract_key = { lhs = Modi_GarrisonMaint value = 0.10 }
			if = {
				limit = {
					has_idea = alanian_ideas_4
				}
				subtract_key = { lhs = Modi_PathingMaint value = 0.10 }
			}
		}
		kanem_ideas_1 = {
			subtract_key = { lhs = Modi_IrrigationMaint value = 0.1 }
			subtract_key = { lhs = Modi_HarbourageMaint value = 0.1 }
			if = {
				limit = {
					has_idea = kanem_ideas_2
				}
				subtract_key = { lhs = Modi_CapitolMaint value = 0.15 }
			}
		}
		welsh_ideas_2 = {
			subtract_key = { lhs = Modi_GarrisonMaint value = 0.20 }
		}
		riga_ideas_4 = {
			subtract_key = { lhs = Modi_GarrisonMaint value = 0.15 }
		}
		crusader_jerusalem_ideas_5 = {
			subtract_key = { lhs = Modi_GarrisonMaint value = 0.25 }
		}
		crusader_egypt_ideas_5 = {
			subtract_key = { lhs = Modi_GarrisonMaint value = 0.1 }
		}
		crusader_africa_ideas_3 = {
			subtract_key = { lhs = Modi_GarrisonMaint value = 0.1 }
			subtract_key = { lhs = Modi_InfraMaint value = 0.05 }
			subtract_key = { lhs = Modi_InfraBuild value = 0.05 }
			if = {
				limit = {
					has_idea = crusader_africa_ideas_7
				}
				subtract_key = { lhs = Modi_HarbourageMaint value = 0.1 }
			}
		}
		morrocan_fez_ideas_5 = {
			subtract_key = {
				lhs = Modi_IrrigationMaint value = 0.05
			}
			subtract_key = {
				lhs = Modi_IrrigationBuild value = 0.05
			}
		}
		morrocan_arab_ideas_5 = {
			subtract_key = {
				lhs = Modi_IrrigationMaint value = 0.05
			}
			subtract_key = {
				lhs = Modi_IrrigationBuild value = 0.05
			}
		}
		bulgarian_ideas_6 = {
			subtract_key = { lhs = Modi_GarrisonMaint value = 0.1 }
		}
		turkish_ideas_4 = {
			subtract_key = { lhs = Modi_CapitolMaint value = 0.2 }
		}
		khmer_ideas_1 = {
			subtract_key = { lhs = Modi_IrrigationBuild value = 0.1 }
		}
	}
}

# Modi_InfraMaint: Impacts the amount of labor and tradegood all types of infra requires for its maintenance and therefore its cost in a given province
# Modi_$type$Maint: Impacts the amount of labor and tradegood a given type of infra requires for its maintenance and therefore its cost in a given province
Modi_InfraMaintenanceProvince = {
	set_key = { lhs = Modi_InfraMaint which = owner }
	set_key = { lhs = Modi_PathingMaint which = owner }
	set_key = { lhs = Modi_HarbourageMaint which = owner }
	set_key = { lhs = Modi_AmenitiesMaint which = owner }
	set_key = { lhs = Modi_IrrigationMaint which = owner }
	set_key = { lhs = Modi_CapitolMaint which = owner }
	#set_key = { lhs = Modi_CourthouseMaint which = owner }
	set_key = { lhs = Modi_GarrisonMaint which = owner }
	set_key = { lhs = Modi_InfraBuild which = owner }
	set_key = { lhs = Modi_PathingBuild which = owner }
	set_key = { lhs = Modi_HarbourageBuild which = owner }
	set_key = { lhs = Modi_AmenitiesBuild which = owner }
	set_key = { lhs = Modi_IrrigationBuild which = owner }
	set_key = { lhs = Modi_CapitolBuild which = owner }
	#set_key = { lhs = Modi_CourthouseBuild which = owner }
	set_key = { lhs = Modi_GarrisonBuild which = owner }
	if = {
		limit = {
			check_key = { lhs = TN_Pass value = 1 }
		}
		subtract_key = { lhs = Modi_PathingMaint value = 0.35 }
		if = {
			limit = {
				NOT = { check_key = { lhs = Infra_Pathing value = 1 } }
			}
			subtract_key = { lhs = Modi_PathingBuild value = 0.5 }
		}
	}
	if = {
		limit = {
			check_key = { lhs = TN_River value = 1 }
		}
		subtract_key = { lhs = Modi_HarbourageMaint value = 0.15 }
		if = {
			limit = {
				NOT = { check_key = { lhs = Infra_Harbourage value = 1 } }
			}
			subtract_key = { lhs = Modi_HarbourageBuild value = 0.25 }
		}
	}
	trigger_switch = {
		on_trigger = has_province_modifier
		military_development_efforts = {
			subtract_key = { lhs = Modi_GarrisonMaint value = 0.25 }
			subtract_key = { lhs = Modi_PathingMaint value = 0.25 }
		}
		hee_tuscan_roads = {
			subtract_key = { lhs = Modi_PathingMaint value = 0.20 }
		}
		hee_tuscan_toll_roads = { 
			subtract_key = { lhs = Modi_PathingMaint value = 0.20 }
		}
	}
	trigger_switch = {
		on_trigger = has_province_modifier
		dutch_polders_1 = {
			subtract_key = { lhs = Modi_IrrigationMaint value = 0.05 }
			subtract_key = { lhs = Modi_IrrigationBuild value = 0.05 }
		}
		dutch_polders_2 = {
			subtract_key = { lhs = Modi_IrrigationMaint value = 0.1 }
			subtract_key = { lhs = Modi_IrrigationBuild value = 0.1 }
		}
		dutch_polders_3 = {
			subtract_key = { lhs = Modi_IrrigationMaint value = 0.2 }
			subtract_key = { lhs = Modi_IrrigationBuild value = 0.2 }
		}
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_PathingMaint value = 0.1 } }
		}
		set_key = { lhs = Modi_PathingMaint value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_IrrigationMaint value = 0.1 } }
		}
		set_key = { lhs = Modi_IrrigationMaint value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_GarrisonMaint value = 0.1 } }
		}
		set_key = { lhs = Modi_GarrisonMaint value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_HarbourageMaint value = 0.1 } }
		}
		set_key = { lhs = Modi_HarbourageMaint value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_AmenitiesMaint value = 0.1 } }
		}
		set_key = { lhs = Modi_AmenitiesMaint value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_CapitolMaint value = 0.1 } }
		}
		set_key = { lhs = Modi_CapitolMaint value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_PathingBuild value = 0.1 } }
		}
		set_key = { lhs = Modi_PathingBuild value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_IrrigationBuild value = 0.1 } }
		}
		set_key = { lhs = Modi_IrrigationBuild value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_GarrisonBuild value = 0.1 } }
		}
		set_key = { lhs = Modi_GarrisonBuild value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_HarbourageBuild value = 0.1 } }
		}
		set_key = { lhs = Modi_HarbourageBuild value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_AmenitiesBuild value = 0.1 } }
		}
		set_key = { lhs = Modi_AmenitiesBuild value = 0.1 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_CapitolBuild value = 0.1 } }
		}
		set_key = { lhs = Modi_CapitolBuild value = 0.1 }
	}
	if = {
		limit = {
			Industrialisation = 100
		}
		subtract_key = { lhs = Modi_InfraBuild value = 0.1 }
		subtract_key = { lhs = Modi_InfraMaint value = 0.1 }
	}
}

# ExecutivePower is a divider, so increasing this is increasing the amount (sum of ruler skill) is divided by
Modi_ExecutiveAuthorityCountry = {
	set_key = { lhs = Modi_RulerPower value = 0 }
	set_key = { lhs = Modi_InstitutionalPower value = 0 }
	#base split of authority
	if = {
		limit = {
			has_reform = Horde_MonarchyS
			#is_key_equal = { lhs = Pol_Privileges value = 8 } 
		}
        set_key = { lhs = Modi_RulerPower value = 80 }
        set_key = { lhs = Modi_InstitutionalPower value = 20 }
	}
    else_if = {
		limit = {
			OR = {
				government = dictatorship
				AND = {
					OR = {
						is_nomad = yes
						is_tribal = yes
					}
					
					has_reform = Pol_Tradition4
					#is_key_equal = { lhs = Pol_Tradition value = 3 }
				}
			}
		}
		set_key = { lhs = Modi_RulerPower value = 100 }
		set_key = { lhs = Modi_InstitutionalPower value = 0 }
	}
    else_if = {
        limit = {
            OR = {
				government = monarchy
				
				AND = {
					OR = {
						is_nomad = yes
						is_tribal = yes
					}
					has_reform = Pol_Leadership1
					#is_key_equal = { lhs = Pol_Leadership value = 0 }
				}
			}
        }
        set_key = { lhs = Modi_RulerPower value = 60 }
        set_key = { lhs = Modi_InstitutionalPower value = 40 }
    }
    else_if = {
        limit = {
			OR = {
				government = republic
				
				AND = {
					OR = {
						is_nomad = yes
						is_tribal = yes
					}
					has_reform = Pol_Leadership2
					#is_key_equal = { lhs = Pol_Leadership value =  }
				}
			}
        }
        set_key = { lhs = Modi_RulerPower value = 40 }
        set_key = { lhs = Modi_InstitutionalPower value = 60 }
    }
    else_if = {
        limit = {
			OR = {
				government = theocracy
				
				AND = {
					OR = {
						is_nomad = yes
						is_tribal = yes
					}
					has_reform = Pol_Leadership3
					#is_key_equal = { lhs = Pol_Leadership value = 2 }
					}
			}
        }
        set_key = { lhs = Modi_RulerPower value = 50 }
        set_key = { lhs = Modi_InstitutionalPower value = 50 }
    }
	#modifiers to base split of authority
    if = {
        limit = {
            has_idea = bureaucracy_ideas_3
        }
        subtract_key = { lhs = Modi_RulerPower value = 10 }
        change_key = { lhs = Modi_InstitutionalPower value = 10 }
    }
    if = {
        limit = {
            has_idea = representation_ideas_5
        }
        subtract_key = { lhs = Modi_RulerPower value = 10 }
        change_key = { lhs = Modi_InstitutionalPower value = 10 }
    }
	if = {
        limit = {
            ruler_has_personality = lazy_personality
        }
        subtract_key = { lhs = Modi_RulerPower value = 5 }
    }
	if = {
        limit = {
            ruler_has_personality = energetic_personality
        }
        change_key = { lhs = Modi_RulerPower value = 5 }
    }
	trigger_switch = {
		on_trigger = has_idea
		schweiz_ideas_2 = {
			subtract_key = { lhs = Modi_RulerPower value = 10 }
			change_key = { lhs = Modi_InstitutionalPower value = 10 }
		}
		javanese_ideas_2 = {
			change_key = { lhs = Modi_RulerPower value = 10 }
			subtract_key = { lhs = Modi_InstitutionalPower value = 10 }
		}
		magyar_ideas_4 = {
			change_key = { lhs = Modi_InstitutionalPower value = 10 }
			subtract_key = { lhs = Modi_RulerPower value = 10 }
		}
		russian_ideas_7 = {
			change_key = { lhs = Modi_RulerPower value = 10 }
			subtract_key = { lhs = Modi_InstitutionalPower value = 10 }
		}
		mande_ideas_5 = {
			change_key = { lhs = Modi_InstitutionalPower value = 15 }
			subtract_key = { lhs = Modi_RulerPower value = 15 }
		}
		breton_ideas_7 = {
			change_key = { lhs = Modi_InstitutionalPower value = 10 }
			subtract_key = { lhs = Modi_RulerPower value = 10 }
		}
		basque_ideas_4 = {
			change_key = { lhs = Modi_InstitutionalPower value = 10 }
			subtract_key = { lhs = Modi_RulerPower value = 10 }		
		}
		english_ideas_6 = {
			change_key = { lhs = Modi_InstitutionalPower value = 15 }
			subtract_key = { lhs = Modi_RulerPower value = 15 }		
		}
		milanese_ideas_3 = {
        	subtract_key = { lhs = Modi_RulerPower value = 10 }
        	change_key = { lhs = Modi_InstitutionalPower value = 10 }
    	}
		yoruba_ideas_6 = {
			change_key = { lhs = Modi_InstitutionalPower value = 15 }
			subtract_key = { lhs = Modi_RulerPower value = 15 }		
		}
		serbian_ideas_1 = {
			change_key = { lhs = Modi_RulerPower value = 10 }
			subtract_key = { lhs = Modi_InstitutionalPower value = 10 }
		}
		flemish_ideas_2 = {
			change_key = { lhs = Modi_InstitutionalPower value = 15 }
			subtract_key = { lhs = Modi_RulerPower value = 15 }		
		}
		mossi_ideas_3 = {	
			change_key = { lhs = Modi_RulerPower value = 10 }
			subtract_key = { lhs = Modi_InstitutionalPower value = 10 }
		}
		papal_ideas_5 = {	
			change_key = { lhs = Modi_RulerPower value = 10 }
			subtract_key = { lhs = Modi_InstitutionalPower value = 10 }
		}
		ayutthaya_ideas_7 = {	
			change_key = { lhs = Modi_RulerPower value = 10 }
			subtract_key = { lhs = Modi_InstitutionalPower value = 10 }
		}
		scottish_ideas_6 = {
			change_key = { lhs = Modi_InstitutionalPower value = 20 }
			subtract_key = { lhs = Modi_RulerPower value = 20 }		
		}
		sicilian_ideas_4 = {
			change_key = { lhs = Modi_InstitutionalPower value = 20 }
			subtract_key = { lhs = Modi_RulerPower value = 20 }		
		}
		lithuanian_ideas_6 = {
			change_key = { lhs = Modi_RulerPower value = 20 }
			subtract_key = { lhs = Modi_InstitutionalPower value = 20 }
		}
		morrocan_fez_ideas_7 = {
			change_key = { lhs = Modi_RulerPower value = 20 }
			subtract_key = { lhs = Modi_InstitutionalPower value = 20 }
		}
		morrocan_arab_ideas_6 = {
			change_key = { lhs = Modi_RulerPower value = 20 }
			subtract_key = { lhs = Modi_InstitutionalPower value = 20 }
		}
	}
	trigger_switch = {
		on_trigger = has_reform
		salic_law_reform = {
			change_key = { lhs = Modi_RulerPower value = 20 }
			subtract_key = { lhs = Modi_InstitutionalPower value = 20 }
		}
	}
}

Modi_AdminCountry = {
	set_key = { lhs = Modi_AdminCost value = 0 }
	set_key = { lhs = Modi_AdminCostMulti value = 1 }
	set_key = { lhs = Modi_AdminHire value = 0 }
	set_key = { lhs = Modi_AdminHireMulti value = 1 }
	set_key = { lhs = Modi_AdminRuralDmnd value = 1 }
	set_key = { lhs = Modi_AdminUrbanDmnd value = 1 }
	set_key = { lhs = Modi_AdminNotablesDmnd value = 1 }
	set_key = { lhs = Modi_WagesGainNO value = 1 }
	set_key = { lhs = Modi_WagesGainBG value = 1 }
	set_key = { lhs = Modi_WagesGainCL value = 1 }
	set_key = { lhs = Modi_TaxFarmShare value = 0.1 }

	set_key = { lhs = Modi_AdminReachChange value = 0 }
	set_key = { lhs = Modi_AdminReachRights value = 0 }
	set_key = { lhs = Modi_AdminReachStructure value = 0 }
	set_key = { lhs = Modi_AdminReach value = 0 }
	set_key = { lhs = Modi_AdminReachRestMult value = 1 }
	set_key = { lhs = Modi_AdminReachSpeed value = 1 }
	set_key = { lhs = Modi_AdminStructureMin value = 0 }

    if = {
        limit = {
            has_idea = bureaucracy_ideas_1
        }
        subtract_key = { lhs = Modi_AdminCostMulti value = 0.1 }
    }
	if = {
		limit = {
			has_idea = aristocracy_ideas_3
		}
		change_key = { lhs = Modi_WagesGainNO value = 0.1 }
	}
	trigger_switch = {
		on_trigger = has_idea
		egyptian_ideas_6 = {
			subtract_key = { lhs = Modi_AdminCostMulti value = 0.05 }
		}
		chinese_ideas_4 = {
			subtract_key = { lhs = Modi_AdminCostMulti value = 0.05 }
		}
		bantu_ideas_1 = {
			subtract_key = { lhs = Modi_AdminCostMulti value = 0.05 }
		}
		yuan_ideas_3 = {
			subtract_key = { lhs = Modi_AdminCostMulti value = 0.05 }
		}
        ilkhan_ideas_5 = {
			change_key = { lhs = Modi_AdminCostMulti value = 0.05 }
		}
		basque_ideas_6 = {
			subtract_key = { lhs = Modi_AdminCostMulti value = 0.05 }
		}
	}
	# Sale of Office
	if = {
		limit = {
			Privilege_Has = { Privilege=BUOffice Lvl=0 }
		}
		subtract_key = { lhs = Modi_AdminCostMulti value = 0.50 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUOffice Lvl=1 }
		}
		subtract_key = { lhs = Modi_AdminCostMulti value = 0.30 }
	}
	# Bureaucratic Hierarchy
	if = {
		limit = {
			Privilege_Has = { Privilege=BUHierarchy Lvl=0 }
		}
		subtract_key = { lhs = Modi_AdminCostMulti value = 0.20 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUHierarchy Lvl=1 }
		}
		subtract_key = { lhs = Modi_AdminCostMulti value = 0.05 }
	}
	# Means of Recruitment
	if = {
		limit = {
			Privilege_Has = { Privilege=BUExams Lvl=0 }
		}
		subtract_key = { lhs = Modi_AdminCostMulti value = 0.10 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUExams Lvl=2 }
		}
		change_key = { lhs = Modi_AdminCostMulti value = 0.10 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUExams Lvl=3 }
		}
		change_key = { lhs = Modi_AdminCostMulti value = 0.15 }
	}
	# Means of Recruitment
	if = {
		limit = {
			Privilege_Has = { Privilege=BUStructure Lvl=0 }
		}
		subtract_key = { lhs = Modi_AdminCostMulti value = 0.50 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUStructure Lvl=1 }
		}
		subtract_key = { lhs = Modi_AdminCostMulti value = 0.20 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUStructure Lvl=3 }
		}
		subtract_key = { lhs = Modi_AdminCostMulti value = 0.25 }
	}
	
	if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=1 }
		}
		subtract_key = { lhs = Modi_AdminRuralDmnd value = 0.10 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=2 }
		}
		subtract_key = { lhs = Modi_AdminRuralDmnd value = 0.15 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=3 }
		}
		subtract_key = { lhs = Modi_AdminRuralDmnd value = 0.20 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=4 }
		}
		subtract_key = { lhs = Modi_AdminRuralDmnd value = 0.25 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=5 }
		}
		subtract_key = { lhs = Modi_AdminRuralDmnd value = 0.33 }
	}
	if = {
		limit = {
			Rights_NOObl2Has = yes
		}
		change_key = { lhs = Modi_WagesGainNO value = 0.5 }
	}
	else_if = {
		limit = {
			Rights_NOObl3Has = yes
		}
		change_key = { lhs = Modi_WagesGainNO value = 1.0 }
	}
    if = {
        limit = {
			NOT = { check_key = { lhs = Modi_AdminCostMulti value = 0.1 } }
        }
        set_key = { lhs = Modi_AdminCostMulti value = 0.1 }
    }
	if = {
		limit = {
			Rights_BUTax1Has = yes
		}
		change_key = { lhs = Modi_TaxFarmShare value = 0.2 }
	}
	# Tax Farming
	if = {
		limit = {
			Privilege_Has = { Privilege=BUFarm Lvl=0 }
		}
		change_key = { lhs = Modi_TaxFarmShare value = 0.1 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUFarm Lvl=1 }
		}
		change_key = { lhs = Modi_TaxFarmShare value = 0.05 }
	}
}

Modi_AdminProvince = {
	set_key = { lhs = Modi_AdminCost which = owner }
	set_key = { lhs = Modi_AdminCostMulti which = owner }
	set_key = { lhs = Modi_AdminHire which = owner }
	set_key = { lhs = Modi_AdminHireMulti which = owner }
	set_key = { lhs = Modi_AdminRuralDmnd which = owner }
	set_key = { lhs = Modi_AdminUrbanDmnd which = owner }
	set_key = { lhs = Modi_AdminNotablesDmnd which = owner }
	set_key = { lhs = Modi_WagesGainNO which = owner }
	set_key = { lhs = Modi_WagesGainBG which = owner }
	set_key = { lhs = Modi_TaxFarmShare which = owner }

	set_key = { lhs = Modi_AdminReachChange which = owner }
	set_key = { lhs = Modi_AdminReachRights which = owner }
	set_key = { lhs = Modi_AdminReachStructure which = owner }
	set_key = { lhs = Modi_AdminReach which = owner }
	set_key = { lhs = Modi_AdminReachRestMult which = owner }
	set_key = { lhs = Modi_AdminReachSpeed which = owner }
	set_key = { lhs = Modi_AdminStructureMin which = owner }
	
	if = {
		limit = {
			Post_Has = yes
		}
		multiply_key = { lhs = Modi_WagesGainBG which = Post_LocalInfluence }
		multiply_key = { lhs = Modi_WagesGainBG value = 0.01 }
	}
	set_key = { lhs = Modi_WagesGainCL which = owner }
}

Modi_CorruptionCountry = {
	set_key = { lhs = Modi_Corruption value = 1 }
	set_key = { lhs = Modi_CorruptionReform value = 0 } # Raw value to add
	set_key = { lhs = Modi_CorruptionReformPre value = 0 } # Raw value to add, no state reach effect
	set_key = { lhs = Modi_CorruptionLA value = 1 }
	set_key = { lhs = Modi_CorruptionNO value = 1 }
	set_key = { lhs = Modi_CorruptionBG value = 1 }
	set_key = { lhs = Modi_CorruptionCL value = 1 }
	set_key = { lhs = Modi_CorruptionElites value = 1 }
	set_key = { lhs = Modi_CorruptionChange value = 0 }
	set_key = { lhs = Modi_CorruptionWages value = 1 }
    if = {
        limit = {
            has_idea = administrative_ideas_7
        }
        subtract_key = { lhs = Modi_CorruptionLA value = 0.10 }
    }
    if = {
        limit = {
            has_country_modifier = BU_FightCrptLoy
        }
        subtract_key = { lhs = Modi_CorruptionElites value = 0.33 }
    }
	trigger_switch = {
		on_trigger = has_country_modifier
		very_easy_difficulty = {
			multiply_key = { lhs = Modi_CorruptionReform value = 0.75 }
			multiply_key = { lhs = Modi_CorruptionReformPre value = 0.75 }
			multiply_key = { lhs = Modi_CorruptionLA value = 0.75 }
			multiply_key = { lhs = Modi_CorruptionElites value = 0.75 }
			multiply_key = { lhs = Modi_CorruptionWages value = 0.75 }
		}
		easy_difficulty = {
			multiply_key = { lhs = Modi_CorruptionReform value = 0.90 }
			multiply_key = { lhs = Modi_CorruptionReformPre value = 0.90 }
			multiply_key = { lhs = Modi_CorruptionLA value = 0.90 }
			multiply_key = { lhs = Modi_CorruptionElites value = 0.90 }
			multiply_key = { lhs = Modi_CorruptionChange value = 0.90 }
			multiply_key = { lhs = Modi_CorruptionWages value = 0.90 }
		}
		hard_difficulty = {
			multiply_key = { lhs = Modi_CorruptionReform value = 1.05 }
			multiply_key = { lhs = Modi_CorruptionReformPre value = 1.05 }
			multiply_key = { lhs = Modi_CorruptionLA value = 1.05 }
			multiply_key = { lhs = Modi_CorruptionElites value = 1.05 }
			multiply_key = { lhs = Modi_CorruptionChange value = 1.05 }
			multiply_key = { lhs = Modi_CorruptionWages value = 1.05 }
		}
		expert_difficulty = {
			multiply_key = { lhs = Modi_CorruptionReform value = 1.10 }
			multiply_key = { lhs = Modi_CorruptionReformPre value = 1.10 }
			multiply_key = { lhs = Modi_CorruptionLA value = 1.10 }
			multiply_key = { lhs = Modi_CorruptionElites value = 1.10 }
			multiply_key = { lhs = Modi_CorruptionChange value = 1.10 }
			multiply_key = { lhs = Modi_CorruptionWages value = 1.10 }
		}
	}
    if = {
        limit = {
            has_country_modifier = BU_FightCrptWages
        }
        multiply_key = { lhs = Modi_CorruptionWages value = 1.333 }
    }
	# Reform effects
	# if updated, update custom localisation for Crpt_Reform_Sources_tt
	# Sale of Office
	if = {
		limit = {
			Privilege_Has = { Privilege=BUOffice Lvl=0 }
		}
		change_key = { lhs = Modi_CorruptionReform value = 0.3 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUOffice Lvl=1 }
		}
		change_key = { lhs = Modi_CorruptionReform value = 0.1 }
	}
	# Tax Farming
	if = {
		limit = {
			Privilege_Has = { Privilege=BUFarm Lvl=0 }
		}
		change_key = { lhs = Modi_CorruptionReformPre value = 0.10 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUFarm Lvl=1 }
		}
		change_key = { lhs = Modi_CorruptionReformPre value = 0.05 }
	}
	# Term of Office
	if = {
		limit = {
			Privilege_Has = { Privilege=BUTenure Lvl=0 }
		}
		change_key = { lhs = Modi_CorruptionReform value = 0.2 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUTenure Lvl=1 }
		}
		change_key = { lhs = Modi_CorruptionReform value = 0.10 }
	}
	# Wages
	if = {
		limit = {
			Privilege_Has = { Privilege=BUWages Lvl=0 }
		}
		subtract_key = { lhs = Modi_CorruptionWages value = 0.90 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUWages Lvl=1 }
		}
		subtract_key = { lhs = Modi_CorruptionWages value = 0.60 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUWages Lvl=2 }
		}
		subtract_key = { lhs = Modi_CorruptionWages value = 0.30 }
	}
	# Bureaucratic Hierarchy
	if = {
		limit = {
			Privilege_Has = { Privilege=BUHierarchy Lvl=0 }
		}
		change_key = { lhs = Modi_CorruptionReform value = 0.10 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUHierarchy Lvl=1 }
		}
		change_key = { lhs = Modi_CorruptionReform value = 0.05 }
	}
	# Means of Recruitment
	if = {
		limit = {
			Privilege_Has = { Privilege=BUHire Lvl=0 }
		}
		change_key = { lhs = Modi_CorruptionReform value = 0.25 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUHire Lvl=1 }
		}
		change_key = { lhs = Modi_CorruptionReform value = 0.20 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUHire Lvl=2 }
		}
		change_key = { lhs = Modi_CorruptionReform value = 0.10 }
	}
	# Civil Examinations
	if = {
		limit = {
			Privilege_Has = { Privilege=BUExams Lvl=0 }
		}
		change_key = { lhs = Modi_CorruptionReform value = 0.30 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUExams Lvl=1 }
		}
		change_key = { lhs = Modi_CorruptionReform value = 0.15 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUExams Lvl=3 }
		}
		subtract_key = { lhs = Modi_CorruptionReform value = 0.05 }
	}
	# Institutional Oversight
	if = {
		limit = {
			Privilege_Has = { Privilege=BUOversight Lvl=0 }
		}
		change_key = { lhs = Modi_CorruptionReform value = 0.15 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUOversight Lvl=1 }
		}
		change_key = { lhs = Modi_CorruptionReform value = 0.10 }
	}
	# Sovereign Courts
	if = {
		limit = {
			Privilege_Has = { Privilege=BUCourts Lvl=0 }
		}
		change_key = { lhs = Modi_CorruptionReform value = 0.15 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUCourts Lvl=1 }
		}
		change_key = { lhs = Modi_CorruptionReform value = 0.10 }
	}
	# Regional Tenure
	if = {
		limit = {
			Privilege_Has = { Privilege=BURotate Lvl=0 }
		}
		change_key = { lhs = Modi_CorruptionReform value = 0.10 }
	}
	
	# Seigneurial Courts 
	if = {
		limit = {
			Privilege_Has = { Privilege=NOSeigneurial Lvl=1 }
		}
		change_key = { lhs = Modi_CorruptionNO value = 0.05 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOSeigneurial Lvl=2 }
		}
		change_key = { lhs = Modi_CorruptionNO value = 0.10 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOSeigneurial Lvl=3 }
		}
		change_key = { lhs = Modi_CorruptionNO value = 0.15 }
	}
	trigger_switch = {
		on_trigger = has_country_modifier
		very_easy_difficulty = {
			subtract_key = { lhs = Modi_CorruptionElites value = 0.10 }
		}
		easy_difficulty = {
			subtract_key = { lhs = Modi_CorruptionElites value = 0.05 }
		}
		hard_difficulty = {
			change_key = { lhs = Modi_CorruptionElites value = 0.05 }
		}
		expert_difficulty = {
			change_key = { lhs = Modi_CorruptionElites value = 0.10 }
		}
	}
	trigger_switch = {
		on_trigger = has_idea
		malayan_ideas_2 = {
			subtract_key = { lhs = Modi_CorruptionLA value = 0.10 }
		}
		aragonese_ideas_5 = {
			subtract_key = { lhs = Modi_CorruptionLA value = 0.10 }
		}
		venetian_ideas_7 = {
			subtract_key = { lhs = Modi_CorruptionElites value = 0.075 }
		}
		latin_ideas_2 = {
			multiply_key = { lhs = Modi_CorruptionReform value = 0.75 }
			multiply_key = { lhs = Modi_CorruptionChange value = 0.95 }
		}
		crusader_egypt_ideas_7 = {
			subtract_key = { lhs = Modi_CorruptionWages value = 0.05 }
		}
		levantine_ideas_2 = {
			subtract_key = { lhs = Modi_Corruption value = 0.05 }
		}
		morrocan_fez_ideas_1 = {
			subtract_key = { lhs = Modi_CorruptionLA value = 0.10 }
		}
	}
	trigger_switch = {
		on_trigger = has_country_modifier
		nap_renaissance_culture = {
			subtract_key = { lhs = Modi_CorruptionElites value = 0.05 }
		}
		nezahualcoyotls_laws = {
			subtract_key = { lhs = Modi_CorruptionElites value = 0.05 }
		}
	}
    if = {
        limit = {
            has_country_modifier = BU_FightCrptRecall
        }
		subtract_key = { lhs = Modi_CorruptionReformPre value = 0.2 }
    }
	if = {
		limit = {
			has_idea = espionage_ideas_7
		}
		subtract_key = { lhs = Modi_CorruptionElites value = 0.075 }
	}
	if = {
		limit = {
			has_idea = empire_ideas_7
		}
		subtract_key = { lhs = Modi_CorruptionLA value = 0.05 }
	}
}


Modi_CorruptionProvince = {
	set_key = { lhs = Modi_Corruption which = owner }
	set_key = { lhs = Modi_CorruptionReform which = owner }
	set_key = { lhs = Modi_CorruptionReformPre which = owner }
	set_key = { lhs = Modi_CorruptionLA which = owner }
	set_key = { lhs = Modi_CorruptionNO which = owner }
	set_key = { lhs = Modi_CorruptionBG which = owner }
	set_key = { lhs = Modi_CorruptionCL which = owner }
	set_key = { lhs = Modi_CorruptionElites which = owner }
	set_key = { lhs = Modi_CorruptionChange which = owner }
	set_key = { lhs = Modi_CorruptionWages which = owner }
	if = {
		limit = {
			Banking = 100
		}
		subtract_key = { lhs = Modi_CorruptionBG value = 0.10 }
	}
	owner = {
		trigger_switch = {
			on_trigger = has_country_modifier
			very_easy_difficulty = {
				PREV = {
					multiply_key = { lhs = Modi_CorruptionReform value = 0.75 }
					multiply_key = { lhs = Modi_CorruptionReformPre value = 0.75 }
					multiply_key = { lhs = Modi_CorruptionLA value = 0.75 }
					multiply_key = { lhs = Modi_CorruptionElites value = 0.75 }
					multiply_key = { lhs = Modi_CorruptionWages value = 0.75 }
				}
			}
			easy_difficulty = {
				PREV = {
					multiply_key = { lhs = Modi_CorruptionReform value = 0.90 }
					multiply_key = { lhs = Modi_CorruptionReformPre value = 0.90 }
					multiply_key = { lhs = Modi_CorruptionLA value = 0.90 }
					multiply_key = { lhs = Modi_CorruptionElites value = 0.90 }
					multiply_key = { lhs = Modi_CorruptionChange value = 0.90 }
					multiply_key = { lhs = Modi_CorruptionWages value = 0.90 }
				}
			}
			hard_difficulty = {
				PREV = {
					multiply_key = { lhs = Modi_CorruptionReform value = 1.05 }
					multiply_key = { lhs = Modi_CorruptionReformPre value = 1.05 }
					multiply_key = { lhs = Modi_CorruptionLA value = 1.05 }
					multiply_key = { lhs = Modi_CorruptionElites value = 1.05 }
					multiply_key = { lhs = Modi_CorruptionChange value = 1.05 }
					multiply_key = { lhs = Modi_CorruptionWages value = 1.05 }
				}
			}
			expert_difficulty = {
				PREV = {
					multiply_key = { lhs = Modi_CorruptionReform value = 1.10 }
					multiply_key = { lhs = Modi_CorruptionReformPre value = 1.10 }
					multiply_key = { lhs = Modi_CorruptionLA value = 1.10 }
					multiply_key = { lhs = Modi_CorruptionElites value = 1.10 }
					multiply_key = { lhs = Modi_CorruptionChange value = 1.10 }
					multiply_key = { lhs = Modi_CorruptionWages value = 1.10 }
				}
			}
		}
	}
}

Modi_AutonomyCountry = {
	set_key = { lhs = Modi_AutonomyNO value = 1 }
	set_key = { lhs = Modi_AutonomyBG value = 1 }
	set_key = { lhs = Modi_AutonomyCL value = 1 }
	set_key = { lhs = Modi_AutonomyTR value = 1 }
	set_key = { lhs = Modi_AutonomyElites value = 1 }
	set_key = { lhs = Modi_PowerFromLANO value = 1 }
	set_key = { lhs = Modi_PowerFromLABG value = 1 }
	set_key = { lhs = Modi_PowerFromLACL value = 1 }
	set_key = { lhs = Modi_PowerFromLAElites value = 1 }
	if = {
		limit = {
			has_idea = empire_ideas_4
		}
		subtract_key = { lhs = Modi_AutonomyElites value = 0.1 }
	}
	trigger_switch = {
		on_trigger = has_idea
		magyar_ideas_6 = {
			subtract_key = { lhs = Modi_PowerFromLAElites value = 0.10 }
		}
		neapolitan_ideas_6 = {
			subtract_key = { lhs = Modi_PowerFromLAElites value = 0.10 }
		}
		ayyubid_ideas_3 = {
			subtract_key = { lhs = Modi_PowerFromLAElites value = 0.10 }
		}
		persian_ideas_3 = {
			subtract_key = { lhs = Modi_PowerFromLAElites value = 0.10 }
		}
		tartar_ideas_3 = {
			subtract_key = { lhs = Modi_PowerFromLAElites value = 0.10 }
		}
		scandanavian_ideas_6 = {
			subtract_key = { lhs = Modi_PowerFromLAElites value = 0.10 }
		}
		french_ideas_6 = {
			change_key = { lhs = Modi_PowerFromLAElites value = 0.075 }
		}
		aragonese_ideas_5 = {
			subtract_key = { lhs = Modi_PowerFromLAElites value = 0.10 }
		}
		ethiopian_ideas_5 = {
			subtract_key = { lhs = Modi_PowerFromLAElites value = 0.10 }
			change_key = { lhs = Modi_PowerFromLACL value = 0.10 }
		}
		polish_ideas_4 = {
			change_key = { lhs = Modi_PowerFromLANO value = 0.10 }
			subtract_key = { lhs = Modi_PowerFromLABG value = 0.10 }
		}
		gujarat_ideas_1 = {
			change_key = { lhs = Modi_AutonomyBG value = 0.15 }
		}
		irish_ideas_6 = {
			change_key = { lhs = Modi_PowerFromLAElites value = 0.10 }
		}
		hiberno_norman_ideas_6 = {
			subtract_key = { lhs = Modi_AutonomyElites value = 0.10 }
		}
		flemish_ideas_2 = {
			change_key = { lhs = Modi_AutonomyBG value = 0.20 }
			if = {
				limit = {
					has_idea = flemish_ideas_3
				}
				subtract_key = { lhs = Modi_PowerFromLANO value = 0.10 }
			}
		}
		welsh_ideas_6 = {
			change_key = { lhs = Modi_PowerFromLANO value = 0.10 }
		}
		papal_ideas_6 = {
			change_key = { lhs = Modi_PowerFromLACL value = 0.15 }
		}
		na_colonial_ideas_6 = {
			subtract_key = { lhs = Modi_PowerFromLANO value = 0.2 }
		}
		scottish_ideas_3 = {
			change_key = { lhs = Modi_AutonomyTR value = 0.1 }
		}
		genoese_ideas_3 = {
			change_key = { lhs = Modi_AutonomyElites value = 0.075 }
		}
		crusader_egypt_ideas_3 = {
			change_key = { lhs = Modi_PowerFromLANO value = 0.075 }
		}
		morrocan_arab_ideas_1 = {
			subtract_key = { lhs = Modi_AutonomyElites value = 0.05 }
			if = {
				limit = {
					has_idea = morrocan_arab_ideas_4
				}
				change_key = { lhs = Modi_PowerFromLABG value = 0.15 }
			}
		}
		bulgarian_ideas_7 = {
			subtract_key = { lhs = Modi_PowerFromLANO value = 0.1 }
		}
		shan_ideas_5 = {
			change_key = { lhs = Modi_AutonomyElites value = 0.1 }
		}
		lan_na_ideas_5 = {
			subtract_key = { lhs = Modi_AutonomyElites value = 0.1 }
		}
	}
	if = {
		limit = {
			has_idea = espionage_ideas_6
		}
		subtract_key = { lhs = Modi_PowerFromLAElites value = 0.1 }
	}
	if = {
		limit = {
			Rights_NOGov1Has = yes
		}
		change_key = { lhs = Modi_AutonomyNO value = 1.5 }
	}
	else_if = {
		limit = {
			Rights_NOGov2Has = yes
		}
		change_key = { lhs = Modi_AutonomyNO value = 1.0 }
	}
	else_if = {
		limit = {
			Rights_NOGov3Has = yes
		}
		change_key = { lhs = Modi_AutonomyNO value = 0.666 }
	}
	else_if = {
		limit = {
			Rights_NOGov4Has = yes
		}
		change_key = { lhs = Modi_AutonomyNO value = 0.333 }
	}
	# Means of Recruitment
	if = {
		limit = {
			Privilege_Has = { Privilege=BUHire Lvl=0 }
		}
		change_key = { lhs = Modi_PowerFromLAElites value = 0.30 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUHire Lvl=1 }
		}
		change_key = { lhs = Modi_PowerFromLAElites value = 0.20 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUHire Lvl=2 }
		}
		change_key = { lhs = Modi_PowerFromLAElites value = 0.10 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUHire Lvl=3 }
		}
		change_key = { lhs = Modi_PowerFromLAElites value = 0.05 }
	}
	
	if = {
		limit = {
			Privilege_Has = { Privilege=NOSeigneurial Lvl=1 }
		}
		change_key = { lhs = Modi_AutonomyNO value = 0.10 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOSeigneurial Lvl=2 }
		}
		change_key = { lhs = Modi_AutonomyNO value = 0.20 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOSeigneurial Lvl=3 }
		}
		change_key = { lhs = Modi_AutonomyNO value = 0.30 }
	}
	if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=1 }
		}
		change_key = { lhs = Modi_AutonomyNO value = 0.10 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=2 }
		}
		change_key = { lhs = Modi_AutonomyNO value = 0.20 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=3 }
		}
		change_key = { lhs = Modi_AutonomyNO value = 0.30 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=4 }
		}
		change_key = { lhs = Modi_AutonomyNO value = 0.40 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=5 }
		}
		change_key = { lhs = Modi_AutonomyNO value = 0.50 }
	}
	if = {
		limit = {
			Rights_BGGov4Has = yes
		}
		change_key = { lhs = Modi_AutonomyBG value = 0.25 }
	}
	else_if = {
		limit = {
			Rights_BGGov5Has = yes
		}
		change_key = { lhs = Modi_AutonomyBG value = 0.5 }
	}
	else_if = {
		limit = {
			Rights_BGGov6Has = yes
		}
		change_key = { lhs = Modi_AutonomyBG value = 0.75 }
	}
	else_if = {
		limit = {
			Rights_BGGov7Has = yes
		}
		change_key = { lhs = Modi_AutonomyBG value = 1 }
	}
	if = {
		limit = {
			Rights_CLHie1Has = yes
		}
		if = {
			limit = {
				Rights_CLTax1Has = yes
			}
			change_key = { lhs = Modi_AutonomyCL value = 0.75 }
		}
		else = {
			change_key = { lhs = Modi_AutonomyCL value = 0.5 }
		}
	}
	else_if = {
		limit = {
			Rights_CLHie2Has = yes
		}
		if = {
			limit = {
				Rights_CLTax1Has = yes
			}
			change_key = { lhs = Modi_AutonomyCL value = 0.5 }
		}
		else = {
			change_key = { lhs = Modi_AutonomyCL value = 0.25 }
		}
	}
	if = {
		limit = {
			OR = {
				has_country_modifier = TR_GrantAutonomy_S
				has_country_modifier = TR_GrantAutonomy_M
				has_country_modifier = TR_GrantAutonomy_L
			}
		}
		change_key = { lhs = Modi_AutonomyTR value = 0.25 }
	}
	trigger_switch = {
		on_trigger = has_country_modifier
		azt_texcoco_rising = {
			change_key = { lhs = Modi_AutonomyElites value = 0.05 }
		}
		very_easy_difficulty = {
			subtract_key = { lhs = Modi_AutonomyElites value = 0.3 }
		}
		easy_difficulty = {
			subtract_key = { lhs = Modi_AutonomyElites value = 0.15 }
		}
		hard_difficulty = {
			change_key = { lhs = Modi_AutonomyElites value = 0.15 }
		}
		expert_difficulty = {
			change_key = { lhs = Modi_AutonomyElites value = 0.3 }
		}
	}
	if = {
		limit = {
			OR = {
				is_nomad = yes
				is_tribal = yes
				has_reform = Horde_MonarchyS
				#is_key_equal = { lhs = Pol_Privileges value = 8 } 
				has_reform = Yuan_Monarchy
				#is_key_equal = { lhs = Pol_Privileges value = 9 }
			}
		}
		set_country_flag = Modi_NoTRAutonomy
	}
	else_if = {
		limit = {
			OR = {
				has_country_modifier = Karamanid_Synthesis
				has_country_modifier = Ottoman_OldGuard
				has_country_modifier = Rassid_Tribesmen
			}
		}
		set_country_flag = Modi_HalfTRAutonomy
	}
	else = {
		clr_country_flag = Modi_NoTRAutonomy
		clr_country_flag = Modi_HalfTRAutonomy
	}
}

Modi_AutonomyProvince = {
	set_key = { lhs = Modi_AutonomyNO which = owner }
	set_key = { lhs = Modi_AutonomyBG which = owner }
	set_key = { lhs = Modi_AutonomyCL which = owner }
	set_key = { lhs = Modi_AutonomyTR which = owner }
	set_key = { lhs = Modi_AutonomyElites which = owner }
	set_key = { lhs = Modi_PowerFromLANO which = owner }
	set_key = { lhs = Modi_PowerFromLABG which = owner }
	set_key = { lhs = Modi_PowerFromLACL which = owner }
	set_key = { lhs = Modi_PowerFromLAElites which = owner }
	trigger_switch = {
		on_trigger = has_province_modifier
		kingdom_of_castille = {
			change_key = { lhs = Modi_AutonomyElites value = 0.1 }
		}
		kingdom_of_portugal = { 
			change_key = { lhs = Modi_AutonomyElites value = 0.1 }
		}
		kingdom_of_leon = {
			change_key = { lhs = Modi_AutonomyElites value = 0.1 }
		}
		kingdom_of_andalucia = {
			change_key = { lhs = Modi_AutonomyElites value = 0.1 }
		}
		kingdom_of_granada = {
			change_key = { lhs = Modi_AutonomyElites value = 0.1 }
		}
		kingdom_of_murcia = {
			change_key = { lhs = Modi_AutonomyElites value = 0.1 }
		}
		kingdom_of_aragon = {
			change_key = { lhs = Modi_AutonomyElites value = 0.1 }
		}
		kingdom_of_navarra = {
			change_key = { lhs = Modi_AutonomyElites value = 0.1 }
		}
		qasim_khanate = {
			change_key = { lhs = Modi_AutonomyTR value = 1 }
		}
		semi_autonomous_bey = {
			change_key = { lhs = Modi_AutonomyNO value = 0.1 }
		}
		autonomous_bey = {
			change_key = { lhs = Modi_AutonomyNO value = 0.25 }
		}
		upset_bey = {
			change_key = { lhs = Modi_AutonomyNO value = 0.1 }
		}
		corrupt_bey = {
			change_key = { lhs = Modi_AutonomyNO value = 0.25 }
		}
		support_for_advisor = {
			subtract_key = { lhs = Modi_AutonomyElites value = 0.1 }
		}
		hee_mogadishu_administration = {
			change_key = { lhs = Modi_AutonomyElites value = 0.05 }
		}
	}
}

Modi_EliteLoyaltyCountry = {
	set_key = { lhs = Modi_NOLoyalty value = 1 }
	set_key = { lhs = Modi_BGLoyalty value = 1 }
	set_key = { lhs = Modi_CLLoyalty value = 1 }
	set_key = { lhs = Modi_TRLoyalty value = 1 }
	set_key = { lhs = Modi_NOLoyaltyChange value = 0 }
	set_key = { lhs = Modi_BGLoyaltyChange value = 0 }
	set_key = { lhs = Modi_CLLoyaltyChange value = 0 }
	set_key = { lhs = Modi_TRLoyaltyChange value = 0 }
	set_key = { lhs = Modi_NOLoyaltyChangeSpeed value = 1 }
	set_key = { lhs = Modi_BGLoyaltyChangeSpeed value = 1 }
	set_key = { lhs = Modi_CLLoyaltyChangeSpeed value = 1 }
	set_key = { lhs = Modi_TRLoyaltyChangeSpeed value = 1 }

	#Add flat loyalty with 'Modi_XXLoyaltyChange' as a percentage of the 'revanchism' trigger value
	export_to_key = { lhs = Modi_Tmp0 value = trigger_value:revanchism }
	multiply_key = { lhs = Modi_Tmp0 value = 0.25 }	#Extra loyalty value corresponding to 25% of the 'revanchism' value
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_Tmp0 value = 0.1 } }
		}
		set_key = { lhs = Modi_Tmp0 value = 0 }
	}
	change_key = { lhs = Modi_NOLoyaltyChange which = Modi_Tmp0 }
	change_key = { lhs = Modi_BGLoyaltyChange which = Modi_Tmp0 }
	change_key = { lhs = Modi_CLLoyaltyChange which = Modi_Tmp0 }
	change_key = { lhs = Modi_TRLoyaltyChange which = Modi_Tmp0 }
	#
    if = {
        limit = { OR = { western_christian = yes eastern_christian = yes } is_key_equal = { lhs = aspect_05 value = 1 } }
        change_key = { lhs = Modi_CLLoyaltyChange value = 0.25 }
    }
    else_if = {
        limit = { OR = { western_christian = yes eastern_christian = yes } is_key_equal = { lhs = aspect_05 value = 3 } }
        subtract_key = { lhs = Modi_CLLoyaltyChange value = 0.25 }
    }
	if = {
		limit = {
			Privilege_Has = { Privilege=NOHierarchy Lvl=1 }
		}
		change_key = { lhs = Modi_NOLoyaltyChangeSpeed value = 0.25 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOHierarchy Lvl=2 }
		}
		change_key = { lhs = Modi_NOLoyaltyChangeSpeed value = 0.5 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOHierarchy Lvl=3 }
		}
		change_key = { lhs = Modi_NOLoyaltyChangeSpeed value = 1 }
	}
	trigger_switch = {
		on_trigger = has_country_modifier
		BYZ_Bureaucracy_3 = {
			subtract_key = { lhs = Modi_NOLoyaltyChange value = 0.10 }
		}
	}
	trigger_switch = {
		on_trigger = has_idea
		kanem_ideas_6 = {
			change_key = { lhs = Modi_TRLoyaltyChange value = 2.5 }
		}
		kanem_ideas_7 = { # ignore
		}
	}
}

Modi_EliteLoyaltyProvince = {
	set_key = { lhs = Modi_NOLoyalty which = owner }
	set_key = { lhs = Modi_BGLoyalty which = owner }
	set_key = { lhs = Modi_CLLoyalty which = owner }
	set_key = { lhs = Modi_TRLoyalty which = owner }
	set_key = { lhs = Modi_NOLoyaltyChange which = owner }
	set_key = { lhs = Modi_BGLoyaltyChange which = owner }
	set_key = { lhs = Modi_CLLoyaltyChange which = owner }
	set_key = { lhs = Modi_TRLoyaltyChange which = owner }
	set_key = { lhs = Modi_NOLoyaltyChangeSpeed which = owner }
	set_key = { lhs = Modi_BGLoyaltyChangeSpeed which = owner }
	set_key = { lhs = Modi_CLLoyaltyChangeSpeed which = owner }
	set_key = { lhs = Modi_TRLoyaltyChangeSpeed which = owner }

	trigger_switch = {
		on_trigger = has_state_edict

		adm_edict_centralization_effort = {
			subtract_key = { lhs = Modi_NOLoyaltyChange value = 0.5 }
			subtract_key = { lhs = Modi_BGLoyaltyChange value = 0.5 }
			subtract_key = { lhs = Modi_CLLoyaltyChange value = 0.5 }
			subtract_key = { lhs = Modi_TRLoyaltyChange value = 0.5 }
		}
		dip_edict_improve_elite_loyalty = {
			change_key = { lhs = Modi_NOLoyaltyChange value = 0.75 }
			change_key = { lhs = Modi_BGLoyaltyChange value = 0.75 }
			change_key = { lhs = Modi_CLLoyaltyChange value = 0.75 }
			change_key = { lhs = Modi_TRLoyaltyChange value = 0.75 }
		}
		mil_edict_tribal_resettlement = {
			subtract_key = { lhs = Modi_TRLoyaltyChange value = 1 }
		}
	}

	trigger_switch = {
		on_trigger = has_province_modifier
		nobles_organizing = { 
			subtract_key = { lhs = Modi_NOLoyaltyChange value = 25 } 
		}
		burghers_organizing = { 
			subtract_key = { lhs = Modi_BGLoyaltyChange value = 25 } 
		}
		nationalists_organizing = {
			subtract_key = { lhs = Modi_NOLoyaltyChange value = 5 }
			subtract_key = { lhs = Modi_BGLoyaltyChange value = 5 }
			subtract_key = { lhs = Modi_CLLoyaltyChange value = 5 }
			subtract_key = { lhs = Modi_TRLoyaltyChange value = 5 }
		}
		separatists_organizing = {
			subtract_key = { lhs = Modi_NOLoyaltyChange value = 5 }
			subtract_key = { lhs = Modi_BGLoyaltyChange value = 5 }
			subtract_key = { lhs = Modi_CLLoyaltyChange value = 5 }
			subtract_key = { lhs = Modi_TRLoyaltyChange value = 5 }
		}
		pretender_organizing = {
			subtract_key = { lhs = Modi_NOLoyaltyChange value = 15 }
			subtract_key = { lhs = Modi_BGLoyaltyChange value = 15 }
			subtract_key = { lhs = Modi_CLLoyaltyChange value = 15 }
			subtract_key = { lhs = Modi_TRLoyaltyChange value = 15 }
		}
	}
}

Modi_ElitePowerCountry = {
	# Multiplies Power
	set_key = { lhs = Modi_NOPower value = 1 }
	set_key = { lhs = Modi_BGPower value = 1 }
	set_key = { lhs = Modi_CLPower value = 1 }
	set_key = { lhs = Modi_TRPower value = 1 }
	# Adds Resting Power (gravity)
	set_key = { lhs = Modi_NOPowerRest value = 0 }
	set_key = { lhs = Modi_BGPowerRest value = 0 }
	set_key = { lhs = Modi_CLPowerRest value = 0 }
	# Raises Power from wealth
	set_key = { lhs = Modi_NOPowerWealth value = 1 }
	set_key = { lhs = Modi_BGPowerWealth value = 1 }
	set_key = { lhs = Modi_CLPowerWealth value = 1 }
	# Changes Power by this much every year
	set_key = { lhs = Modi_StateReach value = 0 }
	set_key = { lhs = Modi_TRPowerChange value = 0 }
	set_key = { lhs = Modi_NOPowerChange value = 0 }
	set_key = { lhs = Modi_BGPowerChange value = 0 }
	set_key = { lhs = Modi_CLPowerChange value = 0 }
	set_key = { lhs = Modi_SFFreedomChange value = 0 }
	set_key = { lhs = Modi_NOPowerChangeSpeed value = 1 }
	set_key = { lhs = Modi_BGPowerChangeSpeed value = 1 }
	set_key = { lhs = Modi_CLPowerChangeSpeed value = 1 }
	# Civil war effects:
	set_key = { lhs = Modi_CivilWarStrength value = 1 }	
	# Modify the amount of Taxes levied by the Nobles on other classes 
	set_key = { lhs = Modi_NobleTaxOnRural value = 1 }
	set_key = { lhs = Modi_NobleTaxOnUrban value = 1 }

	#Global balancing because Nobles are too poor:
	change_key = { lhs = Modi_NobleTaxOnRural value = 0.1 }
	change_key = { lhs = Modi_NobleTaxOnUrban value = 0.1 }
	
	#Cods and hooks avoidance desicion 
	if = { 
		limit = {
			has_country_modifier = appeased_urban_elite
			}
		change_key = { lhs = Modi_BGPowerWealth value = 0.5 }
	}
	# Rural Governance
	if = {
		limit = {
			Rights_NOGov1Has = yes
		}
		subtract_key = { lhs = Modi_NOPowerWealth value = 0.5 }
		change_key = { lhs = Modi_NOPowerRest value = 45 }
	}
	else_if = {
		limit = {
			Rights_NOGov2Has = yes
		}
		subtract_key = { lhs = Modi_NOPowerWealth value = 0.166 }
		change_key = { lhs = Modi_NOPowerRest value = 35 }
	}
	else_if = {
		limit = {
			Rights_NOGov3Has = yes
		}
		change_key = { lhs = Modi_NOPowerWealth value = 0.333 }
		change_key = { lhs = Modi_NOPowerRest value = 25 }
	}
	else_if = {
		limit = {
			Rights_NOGov4Has = yes
		}
		change_key = { lhs = Modi_NOPowerWealth value = 1.25 }
		change_key = { lhs = Modi_NOPowerRest value = 15 }
	}
	else_if = {
		limit = {
			Rights_NOGov5Has = yes
		}
		change_key = { lhs = Modi_NOPowerWealth value = 0.5 }
	}
	# Noble Obligations
	if = {
		limit = {
			Rights_NOObl1Has = yes
		}
		change_key = { lhs = Modi_NOPowerRest value = 5 }
	}
	else_if = {
		limit = {
			Rights_NOObl2Has = yes
		}
		change_key = { lhs = Modi_NOPowerRest value = 2.5 }
	}
	# Military Organisation
	if = {
		limit = {
			Rights_NOSer1Has = yes
		}
		change_key = { lhs = Modi_NOPowerRest value = 5 }
	}
	else_if = {
		limit = {
			Rights_NOSer2Has = yes
		}
		change_key = { lhs = Modi_NOPowerRest value = 2.5 }
	}
	# Church Authority
	if = {
		limit = {
			Rights_CLHie2Has = yes
		}
		change_key = { lhs = Modi_CLPowerWealth value = 0.5 }
	}
	else_if = {
		limit = {
			Rights_CLHie3Has = yes
		}
		change_key = { lhs = Modi_CLPowerWealth value = 1.0 }
	}
	# Seigneurial Courts
	if = {
		limit = {
			Privilege_Has = { Privilege=NOSeigneurial Lvl=1 }
		}
		change_key = { lhs = Modi_NOPowerRest value = 1 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOSeigneurial Lvl=2 }
		}
		change_key = { lhs = Modi_NOPowerRest value = 3 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOSeigneurial Lvl=3 }
		}
		change_key = { lhs = Modi_NOPowerRest value = 5 }
	}
	# Entry Requirements
	if = {
		limit = {
			Privilege_Has = { Privilege=BUEnlist Lvl=0 }
		}
		subtract_key = { lhs = Modi_NOPowerWealth value = 0.1 }
		subtract_key = { lhs = Modi_BGPowerWealth value = 0.1 }
		subtract_key = { lhs = Modi_CLPowerWealth value = 0.1 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUEnlist Lvl=2 }
		}
		change_key = { lhs = Modi_NOPowerWealth value = 0.1 }
		change_key = { lhs = Modi_BGPowerWealth value = 0.1 }
		change_key = { lhs = Modi_CLPowerWealth value = 0.1 }
	}
	# Processing Monopoly
	if = {
		limit = {
			Privilege_Has = { Privilege=NOProcessing Lvl=1 }
		}
		change_key = { lhs = Modi_NOPowerRest value = 1 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOProcessing Lvl=2 }
		}
		change_key = { lhs = Modi_NOPowerRest value = 2 }
	}
	# Game Monopoly
	if = {
		limit = {
			Privilege_Has = { Privilege=NOGame Lvl=1 }
		}
		change_key = { lhs = Modi_NOPowerRest value = 1 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOGame Lvl=2 }
		}
		change_key = { lhs = Modi_NOPowerRest value = 2 }
	}
	# Forestry Monopoly
	if = {
		limit = {
			Privilege_Has = { Privilege=NOForestry Lvl=1 }
		}
		change_key = { lhs = Modi_NOPowerRest value = 1 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOForestry Lvl=2 }
		}
		change_key = { lhs = Modi_NOPowerRest value = 2 }
	}
	# Hierarchal Rule
	if = {
		limit = {
			Privilege_Has = { Privilege=NOHierarchy Lvl=1 }
		}
		change_key = { lhs = Modi_NOPowerChangeSpeed value = 0.25 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOHierarchy Lvl=2 }
		}
		change_key = { lhs = Modi_NOPowerChangeSpeed value = 0.5 }
		change_key = { lhs = Modi_NOPowerRest value = 5 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOHierarchy Lvl=3 }
		}
		change_key = { lhs = Modi_NOPowerChangeSpeed value = 1 }
		change_key = { lhs = Modi_NOPowerRest value = 10 }
	}
	if = {
		limit = {
			OR = {
				has_country_modifier = NO_RoyalConsort_S
				has_country_modifier = NO_RoyalConsort_M
				has_country_modifier = NO_RoyalConsort_L
			}
		}
		change_key = { lhs = Modi_NOPowerChange value = 0.25 }
	}
	if = {
		limit = {
			OR = {
				has_country_modifier = NO_StrategicMarriage_S
				has_country_modifier = NO_StrategicMarriage_M
				has_country_modifier = NO_StrategicMarriage_L
			}
		}
		change_key = { lhs = Modi_NOPowerChange value = 0.125 }
	}
	if = {
		limit = {
			OR = {
				has_country_modifier = NO_Advisor_S
				has_country_modifier = NO_Advisor_M
				has_country_modifier = NO_Advisor_L
			}
		}
		change_key = { lhs = Modi_NOPowerChange value = 0.25 }
	}
	if = {
		limit = {
			OR = {
				has_country_modifier = NO_Promotion_S
				has_country_modifier = NO_Promotion_M
				has_country_modifier = NO_Promotion_L
			}
		}
		change_key = { lhs = Modi_NOPowerChange value = 1 }
	}
	else_if = {
		limit = {
			OR = {
				has_country_modifier = NO_DemoteLords_S
				has_country_modifier = NO_DemoteLords_M
				has_country_modifier = NO_DemoteLords_L
			}
		}
		subtract_key = { lhs = Modi_NOPowerChange value = 0.5 }
	}
	# Urban Governance
	if = {
		limit = {
			Rights_BGGov5HasGreater = yes
		}
		change_key = { lhs = Modi_BGPowerWealth value = 1 }
	}
	else_if = {
		limit = {
			Rights_BGGov4Has = yes
		}
		change_key = { lhs = Modi_BGPowerWealth value = 0.5 }
	}
	else_if = {
		limit = {
			Rights_BGGov2Has = yes
		}
		subtract_key = { lhs = Modi_BGPowerWealth value = 0.25 }
	}
	else_if = {
		limit = {
			Rights_BGGov1Has = yes
		}
		subtract_key = { lhs = Modi_BGPowerWealth value = 0.5 }
	}
	if = {
		limit = {
			Rights_BGGov5Has = yes
		}
		change_key = { lhs = Modi_BGPowerRest value = 5 }
	}
	else_if = {
		limit = {
			Rights_BGGov6Has = yes
		}
		change_key = { lhs = Modi_BGPowerRest value = 10 }
	}
	else_if = {
		limit = {
			Rights_BGGov7Has = yes
		}
		change_key = { lhs = Modi_BGPowerRest value = 20 }
	}
	# Interactions
	if = {
		limit = {
			OR = {
				has_country_modifier = BG_Advisor_S
				has_country_modifier = BG_Advisor_M
				has_country_modifier = BG_Advisor_L
			}
		}
		change_key = { lhs = Modi_BGPowerChange value = 0.25 }
	}
	if = {
		limit = {
			OR = {
				has_country_modifier = BG_Autonomy_S
				has_country_modifier = BG_Autonomy_M
				has_country_modifier = BG_Autonomy_L
			}
		}
		change_key = { lhs = Modi_BGPowerChange value = 1 }
	}
	else_if = {
		limit = {
			OR = {
				has_country_modifier = BG_RevokeCharters_S
				has_country_modifier = BG_RevokeCharters_M
				has_country_modifier = BG_RevokeCharters_L
			}
		}
		subtract_key = { lhs = Modi_BGPowerChange value = 0.5 }
	}
	# Church Authority
	if = {
		limit = {
			Rights_CLHie1Has = yes
		}
		change_key = { lhs = Modi_CLPowerRest value = 30 }
	}
	else_if = {
		limit = {
			Rights_CLHie2Has = yes
		}
		change_key = { lhs = Modi_CLPowerRest value = 15 }
	}
	# Faith Aspects
    if = {
        limit = { western_christian = yes is_key_equal = { lhs = aspect_04 value = 1 } }
        change_key = { lhs = Modi_CLPowerRest value = 2.5 }
    }

    if = {
        limit = { OR = { western_christian = yes eastern_christian = yes } is_key_equal = { lhs = aspect_05 value = 1 } }
        change_key = { lhs = Modi_CLPowerRest value = 2.5 }
    }
    else_if = {
        limit = { OR = { western_christian = yes eastern_christian = yes } is_key_equal = { lhs = aspect_05 value = 3 } }
        subtract_key = { lhs = Modi_CLPowerRest value = 2.5 }
    }

    if = {
        limit = { OR = { western_christian = yes eastern_christian = yes } is_key_equal = { lhs = aspect_14 value = 2 } }
        subtract_key = { lhs = Modi_CLPowerRest value = 1.0 }
    }
    else_if = {
        limit = { OR = { western_christian = yes eastern_christian = yes } is_key_equal = { lhs = aspect_14 value = 3 } }
        subtract_key = { lhs = Modi_CLPowerRest value = 2.0 }
    }

    if = {
        limit = { western_christian = yes is_key_equal = { lhs = aspect_16 value = 1 } }
        subtract_key = { lhs = Modi_CLPowerRest value = 1.0 }
    }
    else_if = {
        limit = { eastern_christian = yes is_key_equal = { lhs = aspect_16 value = 3 } }
        change_key = { lhs = Modi_CLPowerRest value = 1.0 }
    }
	# Interactions
	if = {
		limit = {
			OR = {
				has_country_modifier = CL_Advisor_S
				has_country_modifier = CL_Advisor_M
				has_country_modifier = CL_Advisor_L
			}
		}
		change_key = { lhs = Modi_CLPowerChange value = 0.25 }
	}
	if = {
		limit = {
			OR = {
				has_country_modifier = CL_EmpowerClergy_S
				has_country_modifier = CL_EmpowerClergy_M
				has_country_modifier = CL_EmpowerClergy_L
			}
		}
		change_key = { lhs = Modi_CLPowerChange value = 1 }
	}
	else_if = {
		limit = {
			OR = {
				has_country_modifier = CL_Secularise_S
				has_country_modifier = CL_Secularise_M
				has_country_modifier = CL_Secularise_L
			}
		}
		subtract_key = { lhs = Modi_CLPowerChange value = 0.5 }
	}
	if = {
		limit = {
			NOT = { has_global_flag = POP_Sim }
		}
		# Tax Service
		if = {
			limit = {
				Rights_BUTax3Has = yes
			}
			change_key = { lhs = Modi_StateReach value = 0.15 }
		}
		else_if = {
			limit = {
				Rights_BUTax4Has = yes
			}
			change_key = { lhs = Modi_StateReach value = 0.50 }
		}
		# Provincial Administration
		if = {
			limit = {
				Privilege_Has = { Privilege=BUStructure Lvl=0 }
			}
			subtract_key = { lhs = Modi_StateReach value = 0.2 }
		}
		else_if = {
			limit = {
				Privilege_Has = { Privilege=BUStructure Lvl=1 }
			}
			subtract_key = { lhs = Modi_StateReach value = 0.1 }
		}
		else_if = {
			limit = {
				Privilege_Has = { Privilege=BUStructure Lvl=3 }
			}
			change_key = { lhs = Modi_StateReach value = 0.1 }
		}
		# Administrative Reform (Anti-Corruption measure)
		if = {
			limit = {
				has_country_modifier = BU_FightCrptRevitalise
			}
			change_key = { lhs = Modi_StateReach value = -1.0 }
		}
		# Interactions
		if = {
			limit = {
				OR = {
					has_country_modifier = BU_Advisor_S
					has_country_modifier = BU_Advisor_M
					has_country_modifier = BU_Advisor_L
				}
			}
			if = {
				limit = { 
					has_idea = bureaucracy_ideas_7 
				}
				change_key = { lhs = Modi_StateReach value = 0.37 }
			}
			else = {
				change_key = { lhs = Modi_StateReach value = 0.25 }
			}
		}
		if = {
			limit = {
				OR = {
					has_country_modifier = BU_Develop_S
					has_country_modifier = BU_Develop_M
					has_country_modifier = BU_Develop_L
				}
			}
			if = {
				limit = { 
					has_idea = bureaucracy_ideas_7 
				}
				change_key = { lhs = Modi_StateReach value = 0.75 }
			}
			else = {
				change_key = { lhs = Modi_StateReach value = 0.5 }
			}
		}
		# National Ideas
		if = {
			limit = {
				has_idea = cordoban_ideas_3
			}
			change_key = { lhs = Modi_StateReach value = 0.1 }
		}
		if = {
			limit = {
				has_idea = levantine_ideas_2
			}
			change_key = { lhs = Modi_StateReach value = 0.1 }
		}
		if = {
			limit = {
				has_idea = algharb_ideas_5
			}
			change_key = { lhs = Modi_StateReach value = 0.1 }
		}
		if = {
			limit = {
				has_idea = roman_ideas_2
			}
			change_key = { lhs = Modi_StateReach value = 0.1 }
		}

		
		if = {
			limit = {
				has_idea = bureaucracy_ideas_6
			}
			change_key = { lhs = Modi_TRPowerChange value = -0.2 }
		}
		if = {
			limit = {
				has_idea = industrial_ideas_3
			}
			change_key = { lhs = Modi_TRPowerChange value = -0.5 }
		}
		if = {
			limit = {
				OR = {
					has_country_modifier = TR_Promotion_S
					has_country_modifier = TR_Promotion_M
					has_country_modifier = TR_Promotion_L
				}
			}
			change_key = { lhs = Modi_TRPowerChange value = 0.5 }
		}
		else_if = {
			limit = {
				OR = {
					has_country_modifier = TR_Stratify_S
					has_country_modifier = TR_Stratify_M
					has_country_modifier = TR_Stratify_L
				}
			}
			subtract_key = { lhs = Modi_TRPowerChange value = 0.5 }
		}
		if = {
			limit = {
				Rights_NOTen1Has = yes
			}
			change_key = { lhs = Modi_SFFreedomChange value = -1.5 }
		}
		else_if = {
			limit = {
				Rights_NOTen2Has = yes
			}
			change_key = { lhs = Modi_SFFreedomChange value = -1 }
		}
		else_if = {
			limit = {
				Rights_NOTen4Has = yes
			}
			change_key = { lhs = Modi_SFFreedomChange value = 1.5 }
		}
		if = {
			limit = {
				OR = {
					has_country_modifier = NO_Serfs_S
					has_country_modifier = NO_Serfs_M
					has_country_modifier = NO_Serfs_L
				}
			}
			set_key = { lhs = Modi_Tmp0 value = -1.5 }
			multiply_key = { lhs = Modi_Tmp0 which = Prov_NOPow }
			change_key = { lhs = Modi_SFFreedomChange which = Modi_Tmp0 }
			set_key = { lhs = Modi_Tmp0 value = 0 }
		}
		trigger_switch = {
			on_trigger = has_idea 
			industrial_ideas_1 = {
				change_key = { lhs = Modi_SFFreedomChange value = 1 }
			}
			industrial_ideas_2 = { # ignore
			}
		}
		trigger_switch = {
			on_trigger = has_idea
			serbian_ideas_4 = {
				change_key = { lhs = Modi_NOPower value = 0.1 } 
				if = {
					limit = {
						has_idea = serbian_ideas_6
					}
					change_key = { lhs = Modi_CLPower value = 0.1 }
				}
			}
			genoese_ideas_4	= {
				change_key = { lhs = Modi_BGPowerWealth value = 0.2 }
				change_key = { lhs = Modi_NOPowerWealth value = 0.2 }
				change_key = { lhs = Modi_CLPowerWealth value = 0.2 }
			}
			low_frankish_ideas_4	= {
				change_key = { lhs = Modi_BGPowerWealth value = 0.30 }
				change_key = { lhs = Modi_NOPowerWealth value = 0.15 }
				change_key = { lhs = Modi_CLPowerWealth value = 0.15 }
			}
			netherlands_ideas_3	= {
				change_key = { lhs = Modi_BGPowerWealth value = 0.40 }
				change_key = { lhs = Modi_NOPowerWealth value = 0.10 }
				change_key = { lhs = Modi_CLPowerWealth value = 0.10 }
			}
			venetian_ideas_5 = {
				change_key = { lhs = Modi_BGPowerWealth value = 0.25 }
				change_key = { lhs = Modi_NOPowerWealth value = 0.25 }
				change_key = { lhs = Modi_CLPowerWealth value = 0.25 }
			}
			crusader_egypt_ideas_4 = {
				change_key = { lhs = Modi_NOPowerWealth value = 0.05 }
			}
			lithuanian_ideas_3 = {
				change_key = { lhs = Modi_TRPower value = 0.1 }
			}
			algharb_ideas_1 = {
				change_key = { lhs = Modi_CLPower value = 0.1 }
			}
			morrocan_fez_ideas_1 = {
				change_key = { lhs = Modi_TRPower value = 0.1 }
			}
			morrocan_arab_ideas_2 = {
				change_key = { lhs = Modi_CLPower value = 0.1 }
			}
			morrocan_berber_ideas_1 = {
				change_key = { lhs = Modi_TRPower value = 0.1 }
			}
		}
		if = {
			limit = {
				OR = {
					has_country_modifier = NO_ProtectSerfs_S
					has_country_modifier = NO_ProtectSerfs_M
					has_country_modifier = NO_ProtectSerfs_L
				}
			}
			set_key = { lhs = Modi_Tmp0 value = 2.0 }
			subtract_key = { lhs = Modi_Tmp0 which = Prov_NOPow }
			change_key = { lhs = Modi_SFFreedomChange which = Modi_Tmp0 }
			set_key = { lhs = Modi_Tmp0 value = 0 }
		}
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_NOPowerWealth value = 0 } }
		}
		set_key = { lhs = Modi_NOPowerWealth value = 0 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_BGPowerWealth value = 0 } }
		}
		set_key = { lhs = Modi_BGPowerWealth value = 0 }
	}
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_CLPowerWealth value = 0 } }
		}
		set_key = { lhs = Modi_CLPowerWealth value = 0 }
	}
	if = {
		limit = {
			has_idea = empire_ideas_1
		}
		subtract_key = { lhs = Modi_CivilWarStrength value = 0.15 }
	}
	if = {
		limit = {
			has_idea = espionage_ideas_2
		}
		subtract_key = { lhs = Modi_CivilWarStrength value = 0.25 }
	}
	if = {
		limit = {
			has_idea = humanist_ideas_2
		}
		subtract_key = { lhs = Modi_CivilWarStrength value = 0.2 }
	}
	if = {
		limit = {
			has_institution = Casual_Literacy
		}
		change_key = { lhs = Modi_CivilWarStrength value = 0.2 }
		if = {
			limit = {
				has_institution = Nationalism
			}
			change_key = { lhs = Modi_CivilWarStrength value = 0.2 }
		}
	}
}

Modi_ElitePowerProvince = {
	set_key = { lhs = Modi_NOPower which = owner }
	set_key = { lhs = Modi_BGPower which = owner }
	set_key = { lhs = Modi_CLPower which = owner }
	set_key = { lhs = Modi_TRPower which = owner }
	set_key = { lhs = Modi_NOPowerRest which = owner }
	set_key = { lhs = Modi_BGPowerRest which = owner }
	set_key = { lhs = Modi_CLPowerRest which = owner }
	set_key = { lhs = Modi_NOPowerWealth which = owner }
	set_key = { lhs = Modi_BGPowerWealth which = owner }
	set_key = { lhs = Modi_CLPowerWealth which = owner }
	set_key = { lhs = Modi_StateReach which = owner }
	set_key = { lhs = Modi_TRPowerChange which = owner }
	set_key = { lhs = Modi_NOPowerChange which = owner }
	set_key = { lhs = Modi_BGPowerChange which = owner }
	set_key = { lhs = Modi_CLPowerChange which = owner }
	set_key = { lhs = Modi_SFFreedomChange which = owner }
	set_key = { lhs = Modi_NOPowerChangeSpeed which = owner }
	set_key = { lhs = Modi_BGPowerChangeSpeed which = owner }
	set_key = { lhs = Modi_CLPowerChangeSpeed which = owner }
	# Modify the amount of Taxes levied by the Nobles on other classes 
	set_key = { lhs = Modi_NobleTaxOnRural which = owner }
	set_key = { lhs = Modi_NobleTaxOnUrban which = owner }

	if = {
		limit = {
			Banking = 100
		}
		change_key = { lhs = Modi_BGPowerWealth value = 0.10 }
	}

	if = {
		limit = { has_state_edict = adm_edict_centralization_effort }

		change_key = { lhs = Modi_StateReach value = 0.5 }
	}

	if = { ## for things that boost power where power already is
		limit = {
			check_key = { lhs = Prov_TRPow value = 1 }
		}
		if = {
			limit = {
				check_key = { lhs = NM_Total value = 1 }
			}
			owner = {
				trigger_switch = {
					on_trigger = has_country_modifier 
					TR_SupportNomadism_S = { PREV = { change_key = { lhs = Modi_TRPowerChange value = 0.20 } } }
					TR_SupportNomadism_M = { PREV = { change_key = { lhs = Modi_TRPowerChange value = 0.20 } } }
					TR_SupportNomadism_L = { PREV = { change_key = { lhs = Modi_TRPowerChange value = 0.20 } } }
				}
			}
		}
		if = {
			limit = {
				owner = {
					OR = {
						has_country_modifier = TR_GrantAutonomy_S
						has_country_modifier = TR_GrantAutonomy_M
						has_country_modifier = TR_GrantAutonomy_L
					}
				}
			}
			change_key = { lhs = Modi_TRPowerChange value = 0.2 }
		}
		if = {
			limit = {
				owner = {
					OR = {
						has_country_modifier = TR_SupportRights_S
						has_country_modifier = TR_SupportRights_M
						has_country_modifier = TR_SupportRights_L
					}
				}
			}
			change_key = { lhs = Modi_TRPowerChange value = 0.1 }
		}
		if = {
			limit = {
				owner = {
					OR = {
						has_country_modifier = TR_ClanMarriageState_S
						has_country_modifier = TR_ClanMarriageState_M
						has_country_modifier = TR_ClanMarriageState_L
					}
				}
			}
			change_key = { lhs = Modi_TRPowerChange value = 0.1 }
		}
	}
	if = {
		limit = {
			OR = {
				AND = {
					superregion = siberia_superregion
					owner = {
						has_institution = Banking
						is_tribal = no
						is_nomad = no
					}
				}
				AND = {
					OR = {
						continent = south_america
						continent = north_america
						area = hokkaido_area
						AND = {
							continent = oceania
							NOT = { superregion = japan_superregion }
						}
						is_island = yes
						has_province_modifier = trading_post_province
					}
					owner = {
						OR = {
							is_colonial_nation = yes
							is_former_colonial_nation = yes
							has_country_flag = changed_from_colonial_nation
						}
					}
				}
			}
		}
		change_key = { lhs = Modi_TRPowerChange value = -1 }
	}
	if = {
		limit = {
			has_state_edict = mil_edict_tribal_resettlement
		}
		subtract_key = { lhs = Modi_TRPowerChange value = 1 }
	}
}

# Modi_IdealBurgherSizePerc_Add: Impacts ideal burgher size in % of a cities residents additively -> should be very small
# Modi_IdealBurgherSizePerc_Multi: Impacts ideal burgher size in % of a cities residents multiplicaticely
Modi_ElitePromotionDemotion = {
	set_key = { lhs = Modi_IdealBurgherSizePerc_Add value = 0 }
	set_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 1 }
	set_key = { lhs = Modi_IdealBurgherSize_Add value = 0 }

	set_key = { lhs = Modi_BurgherPromoteSpeed value = 1 }
	set_key = { lhs = Modi_NobilityPromoteSpeed value = 1 }
	set_key = { lhs = Modi_ClergyPromoteSpeed value = 1 }
	set_key = { lhs = Modi_BurgherDemoteSpeed value = 1 }
	set_key = { lhs = Modi_NobilityDemoteSpeed value = 1 }
	set_key = { lhs = Modi_ClergyDemoteSpeed value = 1 }

	if = { # Blood Nobility
		limit = {
			has_reform = Pol_Nobility1
			#is_key_equal = { lhs = Pol_Nobility value = 0 }
		}
		subtract_key = { lhs = Modi_NobilityPromoteSpeed value = 0.5 }
		subtract_key = { lhs = Modi_NobilityDemoteSpeed value = 0.5 }
	}
	else_if = { # Possession Nobility
		limit = {
			has_reform = Pol_Nobility2
			#is_key_equal = { lhs = Pol_Nobility value = 1 } 
		}
		change_key = { lhs = Modi_NobilityPromoteSpeed value = 0.1 }
		change_key = { lhs = Modi_NobilityDemoteSpeed value = 0.1 }
	}
	else_if = { # Office Nobility
		limit = {
			has_reform = Pol_Nobility3
			#is_key_equal = { lhs = Pol_Nobility value = 2 }
		}
		change_key = { lhs = Modi_NobilityPromoteSpeed value = 0.2 }
		change_key = { lhs = Modi_NobilityDemoteSpeed value = 0.2 }

	}

	if = {
		limit = {
			Rights_BGCom1Has = yes
		}
		change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = -0.20 }
	}
	else_if = {
		limit = {
			Rights_BGCom2Has = yes
		}
		change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = -0.15 }
	}
	else_if = {
		limit = {
			Rights_BGCom3Has = yes
		}
		change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = -0.125 }
	}
	else_if = {
		limit = {
			Rights_BGCom4Has = yes
		}
		change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = -0.10 }
	}
	else_if = {
		limit = {
			Rights_BGCom5Has = yes
		}
		change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = -0.05 }
	}
	else_if = {
		limit = {
			Rights_BGCom6Has = yes
		}
		change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = -0.025 }
	}
	else_if = {
		limit = {
			Rights_BGCom7Has = yes
		}
		change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.050 }
	}
	else_if = {
		limit = {
			Rights_BGCom8Has = yes
		}
		change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.075 }
	}
	else_if = {
		limit = {
			Rights_BGCom9Has = yes
		}
		change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.10 }
	}
	else_if = {
		limit = {
			Rights_BGCom10Has = yes
		}
		change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.125 }
	}
	trigger_switch = {
		on_trigger = has_idea
		genoese_ideas_2 = { 
			change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.05 }
		}
		venetian_ideas_1 = {
			change_key = { lhs = Modi_IdealBurgherSizePerc_Add value = 0.02 }
		}
		netherlands_ideas_4 = {
			change_key = { lhs = Modi_IdealBurgherSizePerc_Add value = 0.01 }
		}
	}
}

# Modi_IdealBurgherSizePerc_Add: Impacts ideal burgher size in % of a cities residents in all owned provinces additively -> should be very small
# Modi_IdealBurgherSizePerc_Multi: Impacts ideal burgher size in % of a cities residents in all owned provinces multiplicatively
Modi_ElitePromotionDemotion_Province = {
	set_key = { lhs = Modi_IdealBurgherSizePerc_Add which = owner }
	set_key = { lhs = Modi_IdealBurgherSizePerc_Multi which = owner }
	set_key = { lhs = Modi_BurgherPromoteSpeed which = owner }
	set_key = { lhs = Modi_NobilityPromoteSpeed which = owner }
	set_key = { lhs = Modi_ClergyPromoteSpeed which = owner }
	set_key = { lhs = Modi_BurgherDemoteSpeed which = owner }
	set_key = { lhs = Modi_NobilityDemoteSpeed which = owner }
	set_key = { lhs = Modi_ClergyDemoteSpeed which = owner }
	set_key = { lhs = Modi_IdealBurgherSize_Add which = owner }

	trigger_switch = {
		on_trigger = has_province_modifier
		TN_Minor = {
			change_key = { lhs = Modi_IdealBurgherSize_Add value = 0.250 }
		}
		TN_Important = {
			change_key = { lhs = Modi_IdealBurgherSize_Add value = 0.450 }
		}
		TN_Major = {
			change_key = { lhs = Modi_IdealBurgherSize_Add value = 0.750 }
		}
		TN_Dominant = {
			change_key = { lhs = Modi_IdealBurgherSize_Add value = 1.000 }
		}
	}

	# Make natural features impact ideal burgher population
	trigger_switch = {
		on_trigger = has_province_flag 
		TN_SpecialCanal = { 
			change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.05 } 
			change_key = { lhs = Modi_IdealBurgherSize_Add value = 0.050 }
		}
		TN_Natural_Major = { 
			change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.03 } 
			change_key = { lhs = Modi_IdealBurgherSize_Add value = 0.040 }
		}
		TN_Natural_Important = {
			change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.02 }
			change_key = { lhs = Modi_IdealBurgherSize_Add value = 0.030 }
		}
		TN_Natural_Minor = {
			change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.01 }
			change_key = { lhs = Modi_IdealBurgherSize_Add value = 0.020 }
		}
	}
	trigger_switch = {
		on_trigger = has_province_flag 
		TN_Harbour_Major = {
			change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.05 }
			change_key = { lhs = Modi_IdealBurgherSize_Add value = 0.050 }
		}
		TN_Harbour_Important = {
			change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.03 }
			change_key = { lhs = Modi_IdealBurgherSize_Add value = 0.035 }
		}
		TN_Harbour_Minor = {
			change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.01 }
			change_key = { lhs = Modi_IdealBurgherSize_Add value = 0.020 }
		}
	}
	if = {
		limit = {
			has_province_flag = TN_Oasis
		}
		change_key = { lhs = Modi_IdealBurgherSize_Add value = 0.050 }
	}
	trigger_switch = {
		on_trigger = has_building
		harbour_infrastructure_2 = { change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.025 } }
		harbour_infrastructure_3 = { change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.05 } }
		harbour_infrastructure_4 = { change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.075 } }
		harbour_infrastructure_5 = { change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.10 } }
		harbour_infrastructure_6 = { change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.125 } }
		harbour_infrastructure_7 = { change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.15 } }
	}
	trigger_switch = {
		on_trigger = has_building
		road_network = { change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.01 } }
		paved_road_network = { change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.025 } }
		highway_network = { change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.04 } }
		road_and_rail_network = { change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.055 } }
		extensive_rail_network = { change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.07 } }
		modern_highway_network = { change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.08 } }
	}

	if = {
		limit = {
			Banking = 100
		}
		change_key = { lhs = Modi_IdealBurgherSizePerc_Multi value = 0.05 }
		change_key = { lhs = Modi_IdealBurgherSizePerc_Add value = 0.005 }
	}
}

Modi_TariffCountry = {
	set_key = { lhs = Modi_Smuggling value = 1 }
}

Modi_TariffProvince = {
	set_key = { lhs = Modi_Smuggling which = owner }
}

# Modi_ClassDemand: Impacts class consumption for all tradegoods for all classes in all owned provinces
# Modi_ClassDemand$prod$: Impacts class consumption for a given tradegood for all classes in all owned provinces
# Modi_$class$Demand: Impacts class consumption for all tradegoods for a given class in all owned provinces
# Modi_$class$Demand$prod$: Impacts class consumption for a given tradegood for a given class in all owned provinces
Modi_DemandCountry = {
}

# Modi_ClassDemand: Impacts class consumption for all tradegoods for all classes in a given province
# Modi_ClassDemand$prod$: Impacts class consumption for a given tradegood for all classes in a given province
# Modi_$class$Demand: Impacts class consumption for all tradegoods for a given class in a given province
# Modi_$class$Demand$prod$: Impacts class consumption for a given tradegood for a given class in a given province
Modi_DemandProvince = {
	set_key = { lhs = Modi_ClassDemand value = 1 }
	set_key = { lhs = Modi_ClassDemand1 value = 1 }		#Food
	set_key = { lhs = Modi_ClassDemand2 value = 1 }		#Salt
	set_key = { lhs = Modi_ClassDemand4 value = 1 }		#Fiber
	set_key = { lhs = Modi_ClassDemand5 value = 1 }		#Fuel
	set_key = { lhs = Modi_ClassDemand6 value = 1 }		#Raw
	set_key = { lhs = Modi_ClassDemand9 value = 1 }		#Exotics
	set_key = { lhs = Modi_ClassDemand10 value = 1 }	#Delicacies
	set_key = { lhs = Modi_ClassDemand21 value = 1 }	#Military
	set_key = { lhs = Modi_ClassDemand23 value = 1 }	#Naval
	set_key = { lhs = Modi_ClassDemand24 value = 1 }	#Industrial
	set_key = { lhs = Modi_ClassDemand25 value = 1 }	#Luxury
	set_key = { lhs = Modi_ClassDemand41 value = 1 }	#Knowledge
	set_key = { lhs = Modi_SFDemand value = 1 }
	set_key = { lhs = Modi_SFDemand1 value = 1 }
	set_key = { lhs = Modi_SFDemand2 value = 1 }
	set_key = { lhs = Modi_SFDemand4 value = 1 }
	set_key = { lhs = Modi_SFDemand5 value = 1 }
	set_key = { lhs = Modi_SFDemand6 value = 1 }
	set_key = { lhs = Modi_SFDemand9 value = 1 }
	set_key = { lhs = Modi_SFDemand10 value = 1 }
	set_key = { lhs = Modi_SFDemand21 value = 1 }
	set_key = { lhs = Modi_SFDemand23 value = 1 }
	set_key = { lhs = Modi_SFDemand24 value = 1 }
	set_key = { lhs = Modi_SFDemand25 value = 1 }
	set_key = { lhs = Modi_SFDemand41 value = 1 }
	set_key = { lhs = Modi_NMDemand value = 1 }
	set_key = { lhs = Modi_NMDemand1 value = 1 }
	set_key = { lhs = Modi_NMDemand2 value = 1 }
	set_key = { lhs = Modi_NMDemand4 value = 1 }
	set_key = { lhs = Modi_NMDemand5 value = 1 }
	set_key = { lhs = Modi_NMDemand6 value = 1 }
	set_key = { lhs = Modi_NMDemand9 value = 1 }
	set_key = { lhs = Modi_NMDemand10 value = 1 }
	set_key = { lhs = Modi_NMDemand21 value = 1 }
	set_key = { lhs = Modi_NMDemand23 value = 1 }
	set_key = { lhs = Modi_NMDemand24 value = 1 }
	set_key = { lhs = Modi_NMDemand25 value = 1 }
	set_key = { lhs = Modi_NMDemand41 value = 1 }
	set_key = { lhs = Modi_REDemand value = 1 }
	set_key = { lhs = Modi_REDemand1 value = 1 }
	set_key = { lhs = Modi_REDemand2 value = 1 }
	set_key = { lhs = Modi_REDemand4 value = 1 }
	set_key = { lhs = Modi_REDemand5 value = 1 }
	set_key = { lhs = Modi_REDemand6 value = 1 }
	set_key = { lhs = Modi_REDemand9 value = 1 }
	set_key = { lhs = Modi_REDemand10 value = 1 }
	set_key = { lhs = Modi_REDemand21 value = 1 }
	set_key = { lhs = Modi_REDemand23 value = 1 }
	set_key = { lhs = Modi_REDemand24 value = 1 }
	set_key = { lhs = Modi_REDemand25 value = 1 }
	set_key = { lhs = Modi_REDemand41 value = 1 }
	set_key = { lhs = Modi_NODemand value = 1 }
	set_key = { lhs = Modi_NODemand1 value = 1 }
	set_key = { lhs = Modi_NODemand2 value = 1 }
	set_key = { lhs = Modi_NODemand4 value = 1 }
	set_key = { lhs = Modi_NODemand5 value = 1 }
	set_key = { lhs = Modi_NODemand6 value = 1 }
	set_key = { lhs = Modi_NODemand9 value = 1 }
	set_key = { lhs = Modi_NODemand10 value = 1 }
	set_key = { lhs = Modi_NODemand21 value = 1 }
	set_key = { lhs = Modi_NODemand23 value = 1 }
	set_key = { lhs = Modi_NODemand24 value = 1 }
	set_key = { lhs = Modi_NODemand25 value = 1 }
	set_key = { lhs = Modi_NODemand41 value = 1 }
	set_key = { lhs = Modi_BGDemand value = 1 }
	set_key = { lhs = Modi_BGDemand1 value = 1 }
	set_key = { lhs = Modi_BGDemand2 value = 1 }
	set_key = { lhs = Modi_BGDemand4 value = 1 }
	set_key = { lhs = Modi_BGDemand5 value = 1 }
	set_key = { lhs = Modi_BGDemand6 value = 1 }
	set_key = { lhs = Modi_BGDemand9 value = 1 }
	set_key = { lhs = Modi_BGDemand10 value = 1 }
	set_key = { lhs = Modi_BGDemand21 value = 1 }
	set_key = { lhs = Modi_BGDemand23 value = 1 }
	set_key = { lhs = Modi_BGDemand24 value = 1 }
	set_key = { lhs = Modi_BGDemand25 value = 1 }
	set_key = { lhs = Modi_BGDemand41 value = 1 }
	set_key = { lhs = Modi_CLDemand value = 1 }
	set_key = { lhs = Modi_CLDemand1 value = 1 }
	set_key = { lhs = Modi_CLDemand2 value = 1 }
	set_key = { lhs = Modi_CLDemand4 value = 1 }
	set_key = { lhs = Modi_CLDemand5 value = 1 }
	set_key = { lhs = Modi_CLDemand6 value = 1 }
	set_key = { lhs = Modi_CLDemand9 value = 1 }
	set_key = { lhs = Modi_CLDemand10 value = 1 }
	set_key = { lhs = Modi_CLDemand21 value = 1 }
	set_key = { lhs = Modi_CLDemand23 value = 1 }
	set_key = { lhs = Modi_CLDemand24 value = 1 }
	set_key = { lhs = Modi_CLDemand25 value = 1 }
	set_key = { lhs = Modi_CLDemand41 value = 1 }

	### CORE BALANCING
	### GENERAL THINGS
	# Clan power reduction for certain demand
    set_key = { lhs = Modi_Tmp0 value = 125 }
    subtract_key = { lhs = Modi_Tmp0 which = Prov_TRPow }
    divide_key = { lhs = Modi_Tmp0 value = 125 }
    multiply_key = { lhs = Modi_SFDemand6 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_SFDemand9 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_SFDemand10 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_SFDemand21 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_SFDemand24 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_SFDemand25 which = Modi_Tmp0 }
	
    multiply_key = { lhs = Modi_NODemand6 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_NODemand9 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_NODemand10 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_NODemand21 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_NODemand24 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_NODemand25 which = Modi_Tmp0 }
	
    multiply_key = { lhs = Modi_CLDemand6 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_CLDemand9 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_CLDemand10 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_CLDemand21 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_CLDemand24 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_CLDemand25 which = Modi_Tmp0 }

	### No naval outside ports
	if = {
		limit = {
            OR = {
                has_port = yes
                check_key = { lhs = TN_River value = 1 }
            }
		}
		### Naval balancing for certain classes
		multiply_key = { lhs = Modi_SFDemand23 value = 0.4 }
		multiply_key = { lhs = Modi_NODemand23 value = 0.5 }
		multiply_key = { lhs = Modi_CLDemand23 value = 0.1 }
        if = {
            limit = {
                NOT = { has_port = yes }
            }
            multiply_key = { lhs = Modi_ClassDemand23 value = 0.15 }
        }
	}
	else = {
		multiply_key = { lhs = Modi_ClassDemand23 value = 0 }
	}

	## Apply fuel temperature impact for all fuel demand
    set_key = { lhs = Modi_Tmp0 value = 1 }
	TN_GetDmndTemp = { return=Modi_Tmp0 Norm=15 Max=35 }
    multiply_key = { lhs = Modi_ClassDemand5 which = Modi_Tmp0 }


	### No advanced demand for nomads
    set_key = { lhs = Modi_NMDemand23 value = 0 }
    set_key = { lhs = Modi_NMDemand24 value = 0 }
    set_key = { lhs = Modi_NMDemand25 value = 0 }
    set_key = { lhs = Modi_NMDemand41 value = 0 }

	### Industrial balancing, namely reduce what peasants use here
    multiply_key = { lhs = Modi_SFDemand24 value = 0.1 }

	### Knowledge balancing, cause who knows how this thing works, similar to old vals
    multiply_key = { lhs = Modi_SFDemand41 value = 0.25 }
    multiply_key = { lhs = Modi_REDemand41 value = 0.7 }
    multiply_key = { lhs = Modi_NODemand41 value = 3 }
    multiply_key = { lhs = Modi_BGDemand41 value = 5 }
    multiply_key = { lhs = Modi_CLDemand41 value = 7.5 }
	
	# Urbanised Nobles want more consumer product
    set_key = { lhs = Modi_Tmp0 which = RE_Ratio }
    multiply_key = { lhs = Modi_Tmp0 value = 0.006 }
    change_key = { lhs = Modi_NODemand21 which = Modi_Tmp0 }
    change_key = { lhs = Modi_NODemand23 which = Modi_Tmp0 }
    change_key = { lhs = Modi_NODemand25 which = Modi_Tmp0 }

	# Nomadic Nobles dont want castles
    set_key = { lhs = Modi_Tmp0 which = NM_Ratio }
    multiply_key = { lhs = Modi_Tmp0 value = -0.01 }
    change_key = { lhs = Modi_Tmp0 value = 1 }
    multiply_key = { lhs = Modi_NODemand6 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_NODemand23 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_NODemand24 which = Modi_Tmp0 }
    multiply_key = { lhs = Modi_NODemand41 which = Modi_Tmp0 }
	
	### Regional balancing, trust me bro just one more regional tweak bro this one will fix the econ I promise just one more please
	if = {
		limit = {
			OR = {
				continent = europe
				continent = mena
			}
		}
		multiply_key = { lhs = Modi_ClassDemand1 value = 0.9 }
		if = {
			limit = { 
				continent = mena
			}
			multiply_key = { lhs = Modi_ClassDemand1 value = 0.9 }
			multiply_key = { lhs = Modi_ClassDemand4 value = 0.85 }
		}
	}
	else = {
		change_key = { lhs = Modi_ClassDemand4 value = 0.1 }
	}
	if = {
		limit = {
			NOT = { superregion = eastern_steppe_superregion }
			OR = {
				continent = asia
				superregion = japan_superregion
			}
		}
		change_key = { lhs = Modi_ClassDemand2 value = 0.15 }
		subtract_key = { lhs = Modi_ClassDemand5 value = 0.10 }
		change_key = { lhs = Modi_ClassDemand25 value = 0.20 }
	}
	if = {
		limit = {
			continent = africa
		}
		subtract_key = { lhs = Modi_ClassDemand1 value = 0.1 }
		multiply_key = { lhs = Modi_ClassDemand25 value = 0.5 }
		multiply_key = { lhs = Modi_ClassDemand41 value = 0.75 }
	}
	if = {
		limit = {
			continent = indian_continent
		}
		change_key = { lhs = Modi_ClassDemand1 value = 0.2 }
		subtract_key = { lhs = Modi_ClassDemand2 value = 0.25 }
		subtract_key = { lhs = Modi_ClassDemand23 value = 0.25 }
	}
	if = {
		limit = {
			superregion = east_indies_superregion
		}
		change_key = { lhs = Modi_ClassDemand1 value = 0.05 }
		change_key = { lhs = Modi_ClassDemand2 value = 0.15 }
	}
	else_if = {
		limit = {
			superregion = south_africa_superregion
		}
		subtract_key = { lhs = Modi_ClassDemand2 value = 0.20 }
	}
	else_if = {
		limit = {
			superregion = east_africa_superregion
		}
		multiply_key = { lhs = Modi_ClassDemand1 value = 0.85 }
		subtract_key = { lhs = Modi_ClassDemand9 value = 0.10 }
	}
	else_if = {
		limit = {
			superregion = west_africa_superregion
		}
		multiply_key = { lhs = Modi_ClassDemand1 value = 0.85 }
		subtract_key = { lhs = Modi_ClassDemand2 value = 0.20 }
	}
	else_if = {
		limit = {
			superregion = persia_superregion
		}
		subtract_key = { lhs = Modi_ClassDemand1 value = 0.10 }
	}
	if = {
		limit = {
			continent = north_america
		}
		subtract_key = { lhs = Modi_ClassDemand4 value = 0.35 }
		subtract_key = { lhs = Modi_ClassDemand9 value = 0.2 }
		subtract_key = { lhs = Modi_ClassDemand2 value = 0.10 }
		subtract_key = { lhs = Modi_ClassDemand23 value = 0.333 }
	}
	else_if = {
		limit = {
			continent = south_america
		}
		subtract_key = { lhs = Modi_ClassDemand9 value = 0.2 }
		subtract_key = { lhs = Modi_ClassDemand2 value = 0.10 }
		subtract_key = { lhs = Modi_ClassDemand23 value = 0.5 }
	}
	if = {
		limit = {
			OR = {
				continent = north_asia
				region = north_russia_region
				region = russia_region
				region = east_russia_region
				area = kazan_area
				area = iskier_area
				AND = {
					superregion = scandinavian_superregion
					NOT = { region = danish_region }
				}
				superregion = eastern_steppe_superregion
				area = hokkaido_area
				region = cascadia_region
				area = winnipeg_area
				region = canada_region
			}
		}
		change_key = { lhs = Modi_ClassDemand4 value = 0.3 } ### Colder
	}
	else_if = {
		limit = {
			OR = {
				superregion = commonwealth_superregion
				region = scotland_region
				region = ireland_region
				region = danish_region
				region = ruthenia_region
				region = belarus_region
			}
		}
		change_key = { lhs = Modi_ClassDemand4 value = 0.15 } ### Cold
	}
	if = {
		limit = {
			OR = {
				continent = north_america
				continent = south_america
				AND = {
					continent = oceania
					NOT = { superregion = japan_superregion }
				}
				continent = north_asia
				area = hokkaido_area
				has_province_modifier = Natural_IslandRemote
			}
		}
		multiply_key = { lhs = Modi_ClassDemand41 value = 0.75 }
		if = {
			limit = {
				NOT = { Columbian_Exchange = 100 }
				OR = {
					continent = south_america
					continent = north_america
				}
			}
			multiply_key = { lhs = Modi_ClassDemand10 value = 0 }
		}
	}
	if = {
		limit = {
			Banking = 100
		}
		change_key = { lhs = Modi_ClassDemand21 value = 0.10 }
		change_key = { lhs = Modi_ClassDemand25 value = 0.10 }
	}
	owner = {
		if = {
			limit = {
				has_idea = global_empire_ideas_1
			}
			PREV = {
				change_key = { lhs = Modi_ClassDemand9 value = 0.25 }
			}
		}            
		trigger_switch = {
			on_trigger = has_idea
			tibetan_ideas_2 = {
				PREV = { subtract_key = { lhs = Modi_ClassDemand5 value = 0.2 } }
			}
			papal_ideas_7 = {
				PREV = { change_key = { lhs = Modi_ClassDemand25 value = 0.1 } }
			}
		}
	}
	########################## Literacy & Education ##########################
	trigger_switch = { 
		on_trigger = has_province_flag
		edu_1 = { change_key = { lhs = Modi_ClassDemand41 value = 0.2 } }
		edu_7 = { change_key = { lhs = Modi_ClassDemand41 value = 0.2 } }
		edu_12 = { change_key = { lhs = Modi_ClassDemand41 value = 0.2 } }
		edu_8 = { change_key = { lhs = Modi_ClassDemand41 value = 0.2 } }
		edu_11 = { change_key = { lhs = Modi_ClassDemand41 value = 0.2 } }
	}
	if = {
		limit = {
			has_province_modifier = Education_Center_Major
		}
		change_key = { lhs = Modi_ClassDemand41 value = 0.2 }
	}
	if = {
		limit = {
			is_year = 1430
		}
		if = {
			limit = {
				Casual_Literacy = 100
			}
			if = {
				limit = {
					Scientific_Method = 100
				}
				if = {
					limit = {
						Academia = 100
					}
					change_key = { lhs = Modi_NODemand41 value = 0.35 }
					change_key = { lhs = Modi_BGDemand41 value = 0.35 }
					change_key = { lhs = Modi_CLDemand41 value = 0.35 }
				}
				else = {
					change_key = { lhs = Modi_NODemand41 value = 0.25 }
					change_key = { lhs = Modi_BGDemand41 value = 0.25 }
					change_key = { lhs = Modi_CLDemand41 value = 0.25 }
				}
			}
			else = { 
				change_key = { lhs = Modi_NODemand41 value = 0.15 }
				change_key = { lhs = Modi_BGDemand41 value = 0.15 }
				change_key = { lhs = Modi_CLDemand41 value = 0.15 }
			}
		}
	}
	########################## Literacy & Education ##########################
    set_key = { lhs = Modi_ProdDesire9 value = 1 }
	set_key = { lhs = Modi_ProdDesire10 value = 1 }
	set_key = { lhs = Modi_Tmp0 which = NM_Ratio }
	multiply_key = { lhs = Modi_Tmp0 value = -0.01 } # Nomad provinces need less urban for armies
	change_key = { lhs = Modi_Tmp0 value = 1 }

	trigger_switch = {
		on_trigger = superregion
		france_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.4 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.6 }
		}
		iberia_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.4 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.6 }
		}
		italy_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.4 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.6 }
		}
		british_isles_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.3 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.7 }
		}
		scandinavian_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.35 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.65 }
		}
		germany_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.35 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.65 }
		}
		commonwealth_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.4 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.6 }
		}
		balkan_superregion = {
			if = {
				limit = {
					region = greece_region
				}
				set_key = { lhs = Modi_ProdDesire9 value = 0.5 }
				set_key = { lhs = Modi_ProdDesire10 value = 0.5 }
			}
			else = {
				set_key = { lhs = Modi_ProdDesire9 value = 0.35 }
				set_key = { lhs = Modi_ProdDesire10 value = 0.65 }
			}
		}
		greater_austrian_circle_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.45 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.55 }
		}
		greater_russia_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.6 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.4 }
		}
		european_steppe_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.55 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.45 }
		}
		west_india_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.9 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.1 }
		}
		north_india_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.90 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.1 }
		}
		rajputana_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.9 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.1 }
		}
		east_india_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.92 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.08 }
		}
		central_india_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.92 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.08 }
		}
		south_india_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.95 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.05 }
		}
		southeast_asia_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.95 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.05 }
			multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
		}
		central_asia_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.8 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.2 }
			multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
		}
		north_china_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.9 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.1 }
			multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
		}
		east_china_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.90 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.1 }
			multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
		}
		southwest_china_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.9 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.1 }
			multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
		}
		japan_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.95 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.05 }
			multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
		}
		east_africa_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.85 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.15 }
			multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
		}
		west_africa_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.8 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.2 }
			multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
		}
		south_africa_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.9 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.1 }
			multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
		}
		north_africa_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.6 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.4 }
		}
		siberia_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.9 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.1 }
			multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
		}
		western_south_america_superregion = {
			if = {
				limit = {
					owner = {
						OR = {
							technology_group = western
							technology_group = eastern
							technology_group = muslim
							technology_group = ottoman
							technology_group = byzantine
						}
					}
				}
				set_key = { lhs = Modi_ProdDesire9 value = 0.7 }
				set_key = { lhs = Modi_ProdDesire10 value = 0.3 }
				multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
			}
			else_if = {
				limit = {
					owner = {
						OR = {
							is_colonial_nation = yes
							is_former_colonial_nation = yes
							has_country_flag = changed_from_colonial_nation
							has_institution = Columbian_Exchange
						}
					}
				}
				set_key = { lhs = Modi_ProdDesire9 value = 0.8 }
				set_key = { lhs = Modi_ProdDesire10 value = 0.2 }
				multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
			}
			else = {
				set_key = { lhs = Modi_ProdDesire9 value = 1 }
				set_key = { lhs = Modi_ProdDesire10 value = 0 }
			}
		}
		eastern_south_america_superregion = {
			if = {
				limit = {
					owner = {
						OR = {
							technology_group = western
							technology_group = eastern
							technology_group = muslim
							technology_group = ottoman
							technology_group = byzantine
						}
					}
				}
				set_key = { lhs = Modi_ProdDesire9 value = 0.7 }
				set_key = { lhs = Modi_ProdDesire10 value = 0.3 }
				multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
			}
			else_if = {
				limit = {
					owner = {
						OR = {
							is_colonial_nation = yes
							is_former_colonial_nation = yes
							has_country_flag = changed_from_colonial_nation
							has_institution = Columbian_Exchange
						}
					}
				}
				set_key = { lhs = Modi_ProdDesire9 value = 0.8 }
				set_key = { lhs = Modi_ProdDesire10 value = 0.2 }
				multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
			}
			else = {
				set_key = { lhs = Modi_ProdDesire9 value = 1 }
				set_key = { lhs = Modi_ProdDesire10 value = 0 }
			}
		}
		north_america_superregion = {
			if = {
				limit = {
					owner = {
						OR = {
							technology_group = western
							technology_group = eastern
							technology_group = muslim
							technology_group = ottoman
							technology_group = byzantine
						}
					}
				}
				set_key = { lhs = Modi_ProdDesire9 value = 0.7 }
				set_key = { lhs = Modi_ProdDesire10 value = 0.3 }
				multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
			}
			else_if = {
				limit = {
					owner = {
						OR = {
							is_colonial_nation = yes
							is_former_colonial_nation = yes
							has_country_flag = changed_from_colonial_nation
							has_institution = Columbian_Exchange
						}
					}
				}
				set_key = { lhs = Modi_ProdDesire9 value = 0.8 }
				set_key = { lhs = Modi_ProdDesire10 value = 0.2 }
				multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
			}
			else = {
				set_key = { lhs = Modi_ProdDesire9 value = 1 }
				set_key = { lhs = Modi_ProdDesire10 value = 0 }
			}
		}
		east_america_superregion = {
			if = {
				limit = {
					owner = {
						OR = {
							technology_group = western
							technology_group = eastern
							technology_group = muslim
							technology_group = ottoman
							technology_group = byzantine
						}
					}
				}
				set_key = { lhs = Modi_ProdDesire9 value = 0.7 }
				set_key = { lhs = Modi_ProdDesire10 value = 0.3 }
				multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
			}
			else_if = {
				limit = {
					owner = {
						OR = {
							is_colonial_nation = yes
							is_former_colonial_nation = yes
							has_country_flag = changed_from_colonial_nation
							has_institution = Columbian_Exchange
						}
					}
				}
				set_key = { lhs = Modi_ProdDesire9 value = 0.8 }
				set_key = { lhs = Modi_ProdDesire10 value = 0.2 }
				multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
			}
			else = {
				set_key = { lhs = Modi_ProdDesire9 value = 1 }
				set_key = { lhs = Modi_ProdDesire10 value = 0 }
			}
		}
		west_america_superregion = {
			if = {
				limit = {
					owner = {
						OR = {
							technology_group = western
							technology_group = eastern
							technology_group = muslim
							technology_group = ottoman
							technology_group = byzantine
						}
					}
				}
				set_key = { lhs = Modi_ProdDesire9 value = 0.7 }
				set_key = { lhs = Modi_ProdDesire10 value = 0.3 }
				multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
			}
			else_if = {
				limit = {
					owner = {
						OR = {
							is_colonial_nation = yes
							is_former_colonial_nation = yes
							has_country_flag = changed_from_colonial_nation
							has_institution = Columbian_Exchange
						}
					}
				}
				set_key = { lhs = Modi_ProdDesire9 value = 0.8 }
				set_key = { lhs = Modi_ProdDesire10 value = 0.2 }
				multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
			}
			else = {
				set_key = { lhs = Modi_ProdDesire9 value = 1 }
				set_key = { lhs = Modi_ProdDesire10 value = 0 }
			}
		}
		central_america_superregion = {
			if = {
				limit = {
					owner = {
						OR = {
							technology_group = western
							technology_group = eastern
							technology_group = muslim
							technology_group = ottoman
							technology_group = byzantine
						}
					}
				}
				set_key = { lhs = Modi_ProdDesire9 value = 0.7 }
				set_key = { lhs = Modi_ProdDesire10 value = 0.3 }
				multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
			}
			else_if = {
				limit = {
					owner = {
						OR = {
							is_colonial_nation = yes
							is_former_colonial_nation = yes
							has_country_flag = changed_from_colonial_nation
							has_institution = Columbian_Exchange
						}
					}
				}
				set_key = { lhs = Modi_ProdDesire9 value = 0.8 }
				set_key = { lhs = Modi_ProdDesire10 value = 0.2 }
				multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
			}
			else = {
				set_key = { lhs = Modi_ProdDesire9 value = 1 }
				set_key = { lhs = Modi_ProdDesire10 value = 0 }
			}
		}
		near_east_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.65 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.35 }
		}
		persia_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.75 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.25 }
		}
		east_indies_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.9 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.1 }
			multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
		}
		australia_superregion = {
			if = {
				limit = {
					owner = {
						OR = {
							technology_group = western
							technology_group = eastern
							technology_group = muslim
							technology_group = ottoman
							technology_group = byzantine
						}
					}
				}
				set_key = { lhs = Modi_ProdDesire9 value = 0.7 }
				set_key = { lhs = Modi_ProdDesire10 value = 0.3 }
				multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
			}
			else_if = {
				limit = {
					owner = {
						OR = {
							is_colonial_nation = yes
							is_former_colonial_nation = yes
							has_country_flag = changed_from_colonial_nation
							has_institution = Columbian_Exchange
						}
					}
				}
				set_key = { lhs = Modi_ProdDesire9 value = 0.8 }
				set_key = { lhs = Modi_ProdDesire10 value = 0.2 }
				multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
			}
			else = {
				set_key = { lhs = Modi_ProdDesire9 value = 1 }
				set_key = { lhs = Modi_ProdDesire10 value = 0 }
			}
		}
		eastern_steppe_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.9 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.1 }
			multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
		}
		anatolia_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.55 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.45 }
		}
		tibet_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.95 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.05 }
			multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
		}
		korea_superregion = {
			set_key = { lhs = Modi_ProdDesire9 value = 0.9 }
			set_key = { lhs = Modi_ProdDesire10 value = 0.1 }
			multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp0 }
		}
	}
	if = {
		limit = {
			check_key = { lhs = Modi_ProdDesire10 which = Modi_ProdDesire9 }
			check_key = { lhs = Modi_ProdDesire10 value = 0.65 }
			Columbian_Exchange = 100
		}
		multiply_key = { lhs = Modi_ProdDesire9 value = 1.25 }
	}
	if = {
		limit = {
			Global_Trade = 100
		}
		if = {
			limit = {
				Banking = 100
			}
			if = {
				limit = {
					check_key = { lhs = Modi_ProdDesire10 which = Modi_ProdDesire9 }
				}
				multiply_key = { lhs = Modi_ProdDesire9 value = 1.25 }
			}
			else = {
				multiply_key = { lhs = Modi_ProdDesire10 value = 1.25 }
			}
		}
		change_key = { lhs = Modi_ClassDemand21 value = 0.10 }
		change_key = { lhs = Modi_ClassDemand25 value = 0.15 }
	}

	# Normalise total to 1
	set_key = { lhs = Modi_Tmp1 which = Modi_ProdDesire9 }
	change_key = { lhs = Modi_Tmp1 which = Modi_ProdDesire10 }
	if = {
		limit = {
			check_key = { lhs = Modi_Tmp1 value = 0.01 }
		}
		set_key = { lhs = Modi_Tmp2 value = 1 }
		divide_key = { lhs = Modi_Tmp2 which = Modi_Tmp1 }
		multiply_key = { lhs = Modi_ProdDesire9 which = Modi_Tmp2 }
		multiply_key = { lhs = Modi_ProdDesire10 which = Modi_Tmp2 }
	}
	else = {
		set_key = { lhs = Modi_ProdDesire9 value = 0.98 }
		set_key = { lhs = Modi_ProdDesire10 value = 0.02 }
	}
	### Apply Prod Desire
	multiply_key = { lhs = Modi_ClassDemand9 which = Modi_ProdDesire9 }
	multiply_key = { lhs = Modi_ClassDemand10 which = Modi_ProdDesire10 }
}

Modi_TreatmentCountry = {
	set_key = { lhs = Modi_TreatWelfare value = 0 }
	set_key = { lhs = Modi_TreatDiversions value = 0 }
	set_key = { lhs = Modi_TreatSpirituality value = 0 }
	set_key = { lhs = Modi_TreatConsultation value = 0 }
	set_key = { lhs = Modi_TreatHierarchy value = 0 }
	set_key = { lhs = Modi_WeightWelfare value = 1 }
	set_key = { lhs = Modi_WeightDiversions value = 1 }
	set_key = { lhs = Modi_WeightSpirituality value = 1 }
	set_key = { lhs = Modi_WeightConsultation value = 1 }
	set_key = { lhs = Modi_WeightHierarchy value = 1 }
	trigger_switch = {
		on_trigger = has_country_modifier
		very_easy_difficulty = {
			change_key = { lhs = Modi_TreatWelfare value = 1 }
		}
		easy_difficulty = {
			change_key = { lhs = Modi_TreatWelfare value = 0.5 }
		}
		hard_difficulty = {
			subtract_key = { lhs = Modi_TreatWelfare value = 0.5 }
		}
		expert_difficulty = {
			subtract_key = { lhs = Modi_TreatWelfare value = 1 }
		}
		Jean_ransom_fra = {
			subtract_key = { lhs = Modi_TreatWelfare value = -1 }
		}
	}
	# Tax Farming
	if = {
		limit = {
			Privilege_Has = { Privilege=BUFarm Lvl=0 }
		}
		subtract_key = { lhs = Modi_TreatWelfare value = 0.5 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUFarm Lvl=1 }
		}
		subtract_key = { lhs = Modi_TreatWelfare value = 0.25 }
	}
	# Bureaucratic Hierarchy
	if = {
		limit = {
			Privilege_Has = { Privilege=BUCourts Lvl=0 }
		}
		subtract_key = { lhs = Modi_TreatWelfare value = 0.5 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUCourts Lvl=1 }
		}
		subtract_key = { lhs = Modi_TreatWelfare value = 0.25 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUCourts Lvl=3 }
		}
		change_key = { lhs = Modi_TreatWelfare value = 0.5 }
	}
	# Regional Tenure
	if = {
		limit = {
			Privilege_Has = { Privilege=BURotate Lvl=0 }
		}
		change_key = { lhs = Modi_TreatWelfare value = 0.5 }
	}
	
	if = {
		limit = {
			Privilege_Has = { Privilege=NOSeigneurial Lvl=1 }
		}
		subtract_key = { lhs = Modi_TreatWelfare value = 0.25 }
		change_key = { lhs = Modi_TreatHierarchy value = 0.25 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOSeigneurial Lvl=2 }
		}
		subtract_key = { lhs = Modi_TreatWelfare value = 0.50 }
		change_key = { lhs = Modi_TreatHierarchy value = 0.5 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOSeigneurial Lvl=3 }
		}
		subtract_key = { lhs = Modi_TreatWelfare value = 1.00 }
		change_key = { lhs = Modi_TreatHierarchy value = 1.00 }
	}
	if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=1 }
		}
		change_key = { lhs = Modi_TreatHierarchy value = 0.25 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=2 }
		}
		change_key = { lhs = Modi_TreatHierarchy value = 0.5 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=3 }
		}
		change_key = { lhs = Modi_TreatHierarchy value = 1.0 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=4 }
		}
		change_key = { lhs = Modi_TreatHierarchy value = 1.5 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=5 }
		}
		change_key = { lhs = Modi_TreatHierarchy value = 2.00 }
	}
	if = {
		limit = {
			Privilege_Has = { Privilege=NODiplomacy Lvl=1 }
		}
		change_key = { lhs = Modi_TreatHierarchy value = 0.25 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NODiplomacy Lvl=2 }
		}
		change_key = { lhs = Modi_TreatHierarchy value = 0.5 }
	}
	if = {
		limit = {
			has_idea = civic_religion_ideas_1
		}
		change_key = { lhs = Modi_TreatSpirituality value = 0.5 }
	}
	if = {
		limit = {
			has_idea = aristocracy_ideas_2
		}
		change_key = { lhs = Modi_TreatHierarchy value = 1 }
	}
	if = {
		limit = {
			has_idea = culture_ideas_1
		}
		change_key = { lhs = Modi_TreatDiversions value = 1 }
	}
	if = {
		limit = {
			has_idea = plutocracy_ideas_2
		}
		change_key = { lhs = Modi_TreatConsultation value = 1 }
	}
	if = {
		limit = {
			has_idea = representation_ideas_1
		}
		change_key = { lhs = Modi_TreatWelfare value = 0.5 }
	}
	if = {
		limit = {
			has_idea = representation_ideas_5
		}
		change_key = { lhs = Modi_TreatConsultation value = 0.5 }
	}
	if = {
		limit = {
			has_idea = agrarian_ideas_3
		}
		change_key = { lhs = Modi_TreatSpirituality value = 1 }
	}
	if = {
		limit = {
			has_idea = industrial_ideas_3
		}
		change_key = { lhs = Modi_WeightDiversions value = 0.5 }
		if = {
			limit = {
				has_idea = industrial_ideas_7
			}
			change_key = { lhs = Modi_TreatDiversions value = 1 }
		}
	}
	if = {
		limit = {
			has_idea = humanist_ideas_1
		}
		change_key = { lhs = Modi_TreatWelfare value = 1 }
	}
	if = {
        limit = { OR = { western_christian = yes eastern_christian = yes } is_key_equal = { lhs = aspect_19 value = 2 } }
		change_key = { lhs = Modi_TreatSpirituality value = 0.5 }
	}
	else_if = {
        limit = { OR = { western_christian = yes eastern_christian = yes } is_key_equal = { lhs = aspect_19 value = 3 } }
		change_key = { lhs = Modi_TreatSpirituality value = 1 }
	}
	if = {
        limit = { OR = { western_christian = yes eastern_christian = yes } is_key_equal = { lhs = aspect_18 value = 2 } }
		change_key = { lhs = Modi_TreatHierarchy value = 0.5 }
	}
	else_if = {
        limit = { OR = { western_christian = yes eastern_christian = yes } is_key_equal = { lhs = aspect_18 value = 3 } }
		change_key = { lhs = Modi_TreatHierarchy value = 1 }
	}
	trigger_switch = {
		on_trigger = has_idea
		teutonic_order_ideas_7 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		egyptian_ideas_5 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		roman_ideas_5 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		georgian_ideas_5 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
			if = {
				limit = {
					has_idea = georgian_ideas_6
				}
				change_key = { lhs = Modi_WeightHierarchy value = 0.25 }
			}
		}
		armenian_ideas_3 = {
			change_key = { lhs = Modi_TreatDiversions value = 0.5 }
			if = {
				limit = {
					has_idea = armenian_ideas_5
				}
				change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
			}
		}
		cilician_ideas_3 = {
			change_key = { lhs = Modi_TreatDiversions value = 0.5 }
			if = {
				limit = {
					has_idea = cilician_ideas_5
				}
				change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
				if = {
					limit = {
						has_idea = cilician_ideas_7
					}
					change_key = { lhs = Modi_WeightHierarchy value = 0.25 }
				}
			}
		}
		chinese_ideas_3 = {
			change_key = { lhs = Modi_WeightWelfare value = 0.25 }
		}
		morrocan_berber_ideas_6 = {
			change_key = { lhs = Modi_TreatWelfare value = 0.5 }
		}
		malagasy_ideas_4 = {
			change_key = { lhs = Modi_TreatDiversions value = 0.5 }
		}
		southern_african_ideas_1 = {
			change_key = { lhs = Modi_TreatWelfare value = 0.5 }
		}
		low_frankish_ideas_4 = {
			change_key = { lhs = Modi_TreatConsultation value = 0.50 }
		}
		netherlands_ideas_3 = {
			change_key = { lhs = Modi_TreatConsultation value = 0.50 }
		}
		industrial_ideas_4 = {
			change_key = { lhs = Modi_TreatConsultation value = 1 }
		}
		viet_ideas_5 = {
			change_key = { lhs = Modi_TreatWelfare value = 1 }
		}
		southern_african_ideas_3 = {
			change_key = { lhs = Modi_TreatConsultation value = 0.50 }
		}
		great_lakes_ideas_3 = {
			change_key = { lhs = Modi_TreatHierarchy value = 0.5 }
			if = {
				limit = {
					has_idea = great_lakes_ideas_4
				}
				change_key = { lhs = Modi_TreatSpirituality value = 0.5 }
			}
		}
		bodo_kachari_ideas_4 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		magyar_ideas_2 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
			if = {
				limit = {
					has_idea = magyar_ideas_4
				}
				change_key = { lhs = Modi_WeightHierarchy value = 0.25 }
			}
		}
		russian_ideas_3 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		ruthenian_ideas_3 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		tunisian_ideas_3 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
			if = {
				limit = {
					has_idea = tunisian_ideas_6
				}
				change_key = { lhs = Modi_WeightWelfare value = 0.25 }
				change_key = { lhs = Modi_TreatWelfare value = 0.5 }
			}
		}
		neapolitan_ideas_5 = {
			change_key = { lhs = Modi_WeightHierarchy value = 0.25 }
		}
		ayyubid_ideas_1 = {
			change_key = { lhs = Modi_WeightWelfare value = 0.25 }
			if = {
				limit = {
					has_idea = ayyubid_ideas_3
				}
				change_key = { lhs = Modi_TreatDiversions value = 0.5 }
				if = {
					limit = {
						has_idea = ayyubid_ideas_6
					}
					change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
				}
			}
		}
		persian_ideas_6 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		scandanavian_ideas_6 = {
			change_key = { lhs = Modi_TreatWelfare value = 0.5 }
		}
		kannadigaru_ideas_4 = {
			change_key = { lhs = Modi_WeightConsultation value = 0.25 }
			if = {
				limit = {
					has_idea = kannadigaru_ideas_5
				}
				change_key = { lhs = Modi_TreatSpirituality value = 0.5 }
			}
		}
		breton_ideas_1 = {
			change_key = { lhs = Modi_WeightHierarchy value = 0.20 }
			if = {
				limit = {
					has_idea = breton_ideas_5
				}
				change_key = { lhs = Modi_WeightSpirituality value = 0.20 }
			}
		}
		german_ideas_3 = {
			change_key = { lhs = Modi_TreatDiversions value = 0.5 }
			change_key = { lhs = Modi_WeightHierarchy value = 0.2 }
			
			if = { limit = { has_idea = german_ideas_5 }
				change_key = { lhs = Modi_WeightConsultation value = 0.1 }
			}
		}
		imperial_slavs_ideas_7 = {
			change_key = { lhs = Modi_WeightConsultation value = 0.1 }
		}
		basque_ideas_4 = {
			change_key = { lhs = Modi_TreatWelfare value = 1 }
		}
		english_ideas_4 = {
			change_key = { lhs = Modi_WeightConsultation value = 0.25 }
			if = { limit = { has_idea = english_ideas_6 }
				change_key = { lhs = Modi_TreatWelfare value = 0.5 }
				
				if = { limit = { has_idea = english_ideas_7 }
					change_key = { lhs = Modi_WeightWelfare value = 0.25 }
				}

			}
		}
		french_ideas_1 = {
			change_key = { lhs = Modi_TreatDiversions value = 0.5 }
			if = { limit = { has_idea = french_ideas_6 }
				change_key = { lhs = Modi_WeightHierarchy value = 0.25 }
				
				if = { limit = { has_idea = french_ideas_7 }
					subtract_key = { lhs = Modi_TreatWelfare value = 0.25 }
				}
			}
		}
		granadan_ideas_1 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.3 }
		}
		iberian_ideas_3 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.3 }
			if = { limit = { has_idea = portuguese_ideas_5 }
				change_key = { lhs = Modi_TreatWelfare value = 0.5 }
				
				if = { limit = { has_idea = portuguese_ideas_6 }
					change_key = { lhs = Modi_TreatConsultation value = 0.5 }
				}
			}
			if = { limit = { has_idea = aragonese_ideas_6 }
					change_key = { lhs = Modi_TreatConsultation value = 1 }
				}
		}
		ethiopian_ideas_1 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		ethiopian_ideas_muslim_1 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		najdi_ideas_4 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		yemeni_ideas_7 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		yoruba_ideas_3 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		punjab_ideas_6 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		tuscan_ideas_6 = {
			change_key = { lhs = Modi_TreatConsultation value = 1 }
			change_key = { lhs = Modi_WeightConsultation value = 0.15 }
		}
		polish_ideas_1 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.15 }
		}
		occitanian_ideas_4 = {
			change_key = { lhs = Modi_TreatWelfare value = 0.5 }
		}
		occitanian_ideas_6 = { 
			change_key = { lhs = Modi_WeightHierarchy value = 0.2 }
		}
		cordoban_ideas_1 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.3 }
		}
		malayali_ideas_7 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.20 }
		}
		irish_ideas_3 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.20 }
		}
		oriya_ideas_4 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		flemish_ideas_3 = {
			change_key = { lhs = Modi_WeightHierarchy value = 0.25 }
		}
		mossi_ideas_2 = {
			change_key = { lhs = Modi_WeightWelfare value = 0.25 }
			if = {
				limit = {
					has_idea = mossi_ideas_3
				}
				change_key = { lhs = Modi_WeightHierarchy value = 0.25 }
			}
			if = {
				limit = {
					has_idea = mossi_ideas_4 
				}
				change_key = { lhs = Modi_TreatHierarchy value = 0.5 }
				change_key = { lhs = Modi_TreatConsultation value = 0.5 }
			}
		}
		alanian_ideas_6 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		knights_ideas_5 = {
			change_key = { lhs = Modi_TreatWelfare value = 0.5 }
		}
		knights_ideas_7 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		papal_ideas_3 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.30 }
		}
		na_colonial_ideas_6 = {
			subtract_key = { lhs = Modi_TreatHierarchy value = 1 }
		}
		sukhothai_ideas_7 = {
			change_key = { lhs = Modi_TreatWelfare value = 0.5 }
		}
		scottish_ideas_1 = {
			change_key = { lhs = Modi_TreatHierarchy value = 1 }
			if = {
				limit = {
					has_idea = scottish_ideas_2
				}
				change_key = { lhs = Modi_WeightWelfare value = 0.2 }
				if = {
					limit = {
						has_idea = scottish_ideas_6
					}
					change_key = { lhs = Modi_TreatSpirituality value = 1 }
				}
			}
		}
		sicilian_ideas_4 = {
			change_key = { lhs = Modi_TreatWelfare value = 1 }
			change_key = { lhs = Modi_WeightWelfare value = 0.25 }
			subtract_key = { lhs = Modi_WeightHierarchy value = 0.15 }
		}
		savoyard_ideas_4 = {
			change_key = { lhs = Modi_WeightHierarchy value = 0.2 }
		}
		genoese_ideas_3 = {
			change_key = { lhs = Modi_TreatDiversions value = 1 }
			change_key = { lhs = Modi_WeightConsultation value = 0.2 }
		}
		riga_ideas_7 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		hejazi_ideas_6 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.30 }
		}
		crusader_jerusalem_ideas_2 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		crusader_egypt_ideas_2 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.30 }
			if = {
				limit = {
					has_idea = crusader_egypt_ideas_3
				}
				change_key = { lhs = Modi_WeightHierarchy value = 0.30 }
			}
		}
		omani_ideas_7 = {
			change_key = { lhs = Modi_TreatSpirituality value = 1 }
		}
		cypriote_ideas_4 = {
			subtract_key = { lhs = Modi_WeightConsultation value = 0.25 }
			change_key = { lhs = Modi_TreatHierarchy value = 0.5 }
		}
		lithuanian_ideas_6 = {
			change_key = { lhs = Modi_TreatWelfare value = 0.5 }
		}
		algharb_ideas_3 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.20 }
		}
		morrocan_fez_ideas_6 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		morrocan_arab_ideas_2 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.20 }
		}
		ottoman_ideas_5 = {
			change_key = { lhs = Modi_WeightSpirituality value = 0.25 }
		}
		bulgarian_ideas_1= {
			change_key = { lhs = Modi_TreatDiversions value = 0.5 }
			if = {
				limit = {
					has_idea = crusader_egypt_ideas_3
				}
				change_key = { lhs = Modi_WeightHierarchy value = 0.30 }
			}
		}
		khmer_ideas_6 = {
			change_key = { lhs = Modi_TreatDiversions value = 0.5 }
			change_key = { lhs = Modi_TreatWelfare value = 0.75 }
		}
	}
	if = {
		limit = {
			Rights_NOTen1Has = yes
		}
		change_key = { lhs = Modi_TreatWelfare value = 2 }
	}
	else_if = {
		limit = {
			Rights_NOTen2Has = yes
		}
		change_key = { lhs = Modi_TreatWelfare value = -2 }
	}
	else_if = {
		limit = {
			Rights_NOTen3Has = yes
		}
		change_key = { lhs = Modi_TreatWelfare value = -1 }
	}
	else_if = {
		limit = {
			Rights_NOTen4Has = yes
		}
		change_key = { lhs = Modi_TreatWelfare value = 1 }
	}
	if = {
		limit = {
			Rights_BUTax1Has = yes
		}
		change_key = { lhs = Modi_TreatWelfare value = -1 }
	}
	if = {
		limit = {
			Rights_BUDir1Has = yes
		}
		change_key = { lhs = Modi_TreatWelfare value = -0.5 }
	}
	else_if = {
		limit = {
			Rights_BUInd1Has = yes
		}
		change_key = { lhs = Modi_TreatWelfare value = -0.5 }
	}
	if = {
		limit = {
			Rights_CLHie1Has = yes
		}
		change_key = { lhs = Modi_TreatSpirituality value = 2 }
	}
	if = {
		limit = {
			Rights_CLHie2Has = yes
		}
		change_key = { lhs = Modi_TreatSpirituality value = 1 }
	}
	else_if = {
		limit = {
			Rights_CLHie3Has = yes
		}
		change_key = { lhs = Modi_TreatSpirituality value = -2 }
	}
	if = {
		limit = {
			Rights_CLTax1Has = yes
		}
		change_key = { lhs = Modi_TreatSpirituality value = 1 }
	}
	else_if = {
		limit = {
			Rights_CLObl1Has = yes
		}
		change_key = { lhs = Modi_TreatSpirituality value = 1 }
	}
	else_if = {
		limit = {
			Rights_CLObl3Has = yes
		}
		change_key = { lhs = Modi_TreatSpirituality value = -1 }
	}
	if = {
		limit = {
			Rights_BGCom4Has = yes
		}
		change_key = { lhs = Modi_TreatConsultation value = -0.5 }
	}
	else_if = {
		limit = {
			Rights_BGCom5Has = yes
		}
		change_key = { lhs = Modi_TreatConsultation value = -1 }
	}
	else_if = {
		limit = {
			Rights_BGCom7Has = yes
		}
		change_key = { lhs = Modi_TreatConsultation value = 0.5 }
	}
	else_if = {
		limit = {
			Rights_BGCom8Has = yes
		}
		change_key = { lhs = Modi_TreatConsultation value = 1 }
	}
	else_if = {
		limit = {
			Rights_BGCom9Has = yes
		}
		change_key = { lhs = Modi_TreatConsultation value = 1.5 }
	}
	else_if = {
		limit = {
			Rights_BGCom10Has = yes
		}
		change_key = { lhs = Modi_TreatConsultation value = 2 }
	}
	if = {
		limit = {
			Rights_BGGov1Has = yes
		}
		change_key = { lhs = Modi_TreatConsultation value = 1 }
	}
	else_if = {
		limit = {
			Rights_BGGov3Has = yes
		}
		change_key = { lhs = Modi_TreatConsultation value = -2 }
	}
	if = {
		limit = {
			Rights_BUSer1Has = yes
		}
		change_key = { lhs = Modi_TreatHierarchy value = 1 }
	}
}

Modi_TreatmentProvince = {
	set_key = { lhs = Modi_TreatWelfare which = owner }
	set_key = { lhs = Modi_TreatDiversions which = owner }
	set_key = { lhs = Modi_TreatSpirituality which = owner }
	set_key = { lhs = Modi_TreatConsultation which = owner }
	set_key = { lhs = Modi_TreatHierarchy which = owner }
	set_key = { lhs = Modi_WeightWelfare which = owner }
	set_key = { lhs = Modi_WeightDiversions which = owner }
	set_key = { lhs = Modi_WeightSpirituality which = owner }
	set_key = { lhs = Modi_WeightConsultation which = owner }
	set_key = { lhs = Modi_WeightHierarchy which = owner }

	if = {
		limit = {
			has_state_edict = adm_edict_extract_taxes
		}
		change_key = { lhs = Modi_TreatWelfare 		value = -0.5 } # -0.5 Welfare
		change_key = { lhs = Modi_TreatDiversions 	value = -0.5 } # -0.5 Diversions
	}

	trigger_switch = {
		on_trigger = has_province_modifier
		kingdom_of_castille = {
			change_key = { lhs = Modi_TreatWelfare value = 1 }
		}
		kingdom_of_portugal = { 
			change_key = { lhs = Modi_TreatWelfare value = 1 }
		}
		kingdom_of_leon = {
			change_key = { lhs = Modi_TreatWelfare value = 1 }
		}
		kingdom_of_andalucia = {
			change_key = { lhs = Modi_TreatWelfare value = 1 }
		}
		kingdom_of_granada = {
			change_key = { lhs = Modi_TreatWelfare value = 1 }
		}
		kingdom_of_murcia = {
			change_key = { lhs = Modi_TreatWelfare value = 1 }
		}
		kingdom_of_aragon = {
			change_key = { lhs = Modi_TreatWelfare value = 1 }
		}
		kingdom_of_navarra = {
			change_key = { lhs = Modi_TreatWelfare value = 1 }
		}
		hee_albergo_reale = {
			change_key = { lhs = Modi_TreatWelfare value = 0.5 }
		}
		hee_gennaro_poveri = {
			change_key = { lhs = Modi_TreatWelfare value = 0.5 }
		}
	}
	trigger_switch = { 
		on_trigger = has_province_modifier
		turmoil_organizing = { 
			subtract_key = { lhs = Modi_TreatWelfare value = 2 }
			subtract_key = { lhs = Modi_TreatDiversions value = 2 }
		}
		peasants_organizing = {
			subtract_key = { lhs = Modi_TreatWelfare value = 2 }
		}
		unsafe_roads = {
			subtract_key = { lhs = Modi_TreatWelfare value = 2 }
		}
		particularists_organizing = { 
			subtract_key = { lhs = Modi_TreatWelfare value = 1 }
		}
	}
	trigger_switch = {
		on_trigger = has_province_modifier
		stpeter_cathedral_1 = {
			change_key = { lhs = Modi_TreatSpirituality value = 1 }
		}
		stpeter_cathedral_1 = {
			change_key = { lhs = Modi_TreatSpirituality value = 2 }
		}
		stpeter_cathedral_1 = {
			change_key = { lhs = Modi_TreatSpirituality value = 3 }
		}
		kaaba_1 = {
			change_key = { lhs = Modi_TreatSpirituality value = 1 }
		}
		kaaba_2 = {
			change_key = { lhs = Modi_TreatSpirituality value = 2 }
		}
		kaaba_3 = {
			change_key = { lhs = Modi_TreatSpirituality value = 3 }
		}
		hagia_sophia_1 = {
			change_key = { lhs = Modi_TreatSpirituality value = 1 }
		}
		hagia_sophia_2 = {
			change_key = { lhs = Modi_TreatSpirituality value = 2 }
		}
		hagia_sophia_3 = {
			change_key = { lhs = Modi_TreatSpirituality value = 3 }
		}
		holy_city_jerusalem_1 = {
			change_key = { lhs = Modi_TreatSpirituality value = 1 }
		}
		holy_city_jerusalem_2 = {
			change_key = { lhs = Modi_TreatSpirituality value = 2 }
		}
		holy_city_jerusalem_3 = {
			change_key = { lhs = Modi_TreatSpirituality value = 3 }
		}
	}
}

Modi_CECountry = {
	set_key = { lhs = Modi_CE value = 1 }
	set_key = { lhs = Modi_CEForest value = 1 }
	set_key = { lhs = Modi_CEHeight value = 1 }
	set_key = { lhs = Modi_CEDesert value = 1 }
	set_key = { lhs = Modi_CEEmbark value = 1 }
	export_to_key = { lhs = Modi_Tmp0 value = modifier:movement_speed_onto_off_boat_modifier }
	subtract_key = { lhs = Modi_CEEmbark which = Modi_Tmp0 }
	export_to_key = { lhs = Modi_Tmp0 value = modifier:envoy_travel_time }
	change_key = { lhs = Modi_CE which = Modi_Tmp0 }
	set_key = { lhs = Modi_Tmp0 value = 0 }

	if = {
		limit = {
			NOT = {
				check_key = { lhs = Modi_CEEmbark value = 0.1 }
			}
		}
		set_key = { lhs = Modi_CEEmbark value = 0.1 }
	}
	trigger_switch = {
		on_trigger = has_country_modifier
		BYZ_Bureaucracy_3 = {
			change_key = { lhs = Modi_CE value = 0.40 }
		}
		BYZ_Bureaucracy_2 = {
			change_key = { lhs = Modi_CE value = 0.25 }
		}
		BYZ_Bureaucracy_1 = {
			change_key = { lhs = Modi_CE value = 0.15 }
		}
	}
	trigger_switch = {
		on_trigger = has_idea
		tibetan_ideas_1 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.33 }
		}
		viet_ideas_1 = {
			subtract_key = { lhs = Modi_CEForest value = 0.33 }
		}
		georgian_ideas_1 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.33 }
		}
		armenian_ideas_1 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.33 }
		}
		persian_ideas_1 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.33 }
		}
		mande_ideas_1 = {
			subtract_key = { lhs = Modi_CEForest value = 0.20 }
		}
		chaghatai_ideas_4 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.10 }
		}
		kannadigaru_ideas_1 = {
			subtract_key = { lhs = Modi_CEForest value = 0.10 }
			subtract_key = { lhs = Modi_CEHeight value = 0.10 }
		}
		breton_ideas_2 = {
			subtract_key = { lhs = Modi_CEForest value = 0.10 }
		}
		basque_ideas_2 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.20 }		
		}
		granadan_ideas_3 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.15 }		
		}
		castillian_ideas_5 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.15 }		
		}
		ethiopian_ideas_2 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.33 }		
		}
		najdi_ideas_1 = {
			subtract_key = { lhs = Modi_CEDesert value = 0.33 }
		}
		yemeni_ideas_1 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.20 }
		}
		yoruba_ideas_1 = {
			subtract_key = { lhs = Modi_CEForest value = 0.25 }
		}
		akan_ideas_2 = {
			subtract_key = { lhs = Modi_CEForest value = 0.20 }
		}
		occitanian_ideas_1 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.1 }
		}
		cordoban_ideas_3 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.15 }		
		}
		malayali_ideas_1 = {
			subtract_key = { lhs = Modi_CEForest value = 0.20 }
		}
		serbian_ideas_4 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.20 }		
		}
		alanian_ideas_1 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.20 }		
		}
		welsh_ideas_1 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.20 }		
		}
		scottish_ideas_1 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.2 }
		}
		savoyard_ideas_6 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.25 }
		}
		algharb_ideas_5 = {
			subtract_key = { lhs = Modi_CE value = 0.15 }
		}
		morrocan_fez_ideas_3 = {
			subtract_key = { lhs = Modi_CE value = 0.10 }
		}
		morrocan_berber_ideas_7 = {
			subtract_key = { lhs = Modi_CE value = 0.15 }
		}
		morrocan_arab_ideas_1 = {
			subtract_key = { lhs = Modi_CE value = 0.10 }
		}
		lao_ideas_1 = {
			subtract_key = { lhs = Modi_CEHeight value = 0.15 }
		}
	}
	if = {
		limit = {
			OR = {
				is_nomad = yes
				#Steppe cultures, or with extensive experience on the steppe
				culture_group = east_slavic
				culture_group = tartar_group
				culture_group = old_turkic
				culture_group = altaic
				primary_culture = turkmeni
				culture_group = jurchen_group
				primary_culture = najdi
				culture_group = berber_group
			}
		}
		set_country_flag = Modi_NomadCE
	}
	else = {
		clr_country_flag = Modi_NomadCE
	}
}

Modi_CEProvince = {
	set_key = { lhs = Modi_CE which = owner }
	set_key = { lhs = Modi_CEForest which = owner }
	set_key = { lhs = Modi_CEHeight which = owner }
	set_key = { lhs = Modi_CEDesert which = owner }
	set_key = { lhs = Modi_CEEmbark which = owner }
	if = {
		limit = {
			has_province_flag = TN_Oasis
		}
		subtract_key = { lhs = Modi_CE value = 0.3 }
	}
	if = {
		limit = {
			owner = { has_country_flag = Modi_NomadCE }
			OR = {
				province_group = steppes_group
				province_group = arabian_steppes_group
				province_group = saharan_steppes_group
			}
		}
		set_province_flag = Modi_NomadCE
	}
	else = {
		clr_province_flag = Modi_NomadCE
	}
	if = {
		limit = {
			OR = {
				has_province_flag = TN_Silk
				has_province_flag = TN_NorthernSilk
			}
		}
		subtract_key = { lhs = Modi_CE value = 0.1 }
	}
	if = {
		limit = {
			has_province_modifier = hee_imperial_canal_province
		}
		subtract_key = { lhs = Modi_CEEmbark value = 0.5 }
	}
}

Modi_FactionsCountry = {
	# Base Faction Relations in integer
	set_key = { lhs = Modi_FCNOBG value = 0 }
	set_key = { lhs = Modi_FCNOCL value = 0 }
	set_key = { lhs = Modi_FCNOTR value = 0 }
	set_key = { lhs = Modi_FCNOBU value = 0 }
	set_key = { lhs = Modi_FCBGCL value = 0 }
	set_key = { lhs = Modi_FCBGTR value = 0 }
	set_key = { lhs = Modi_FCBGBU value = 0 }
	set_key = { lhs = Modi_FCCLTR value = 0 }
	set_key = { lhs = Modi_FCCLBU value = 0 }
	set_key = { lhs = Modi_FCTRBU value = 0 }
	set_key = { lhs = Modi_FCNOState value = 0 } 
	set_key = { lhs = Modi_FCBGState value = 0 } 
	set_key = { lhs = Modi_FCCLState value = 0 } 
	set_key = { lhs = Modi_FCTRState value = 0 } 
	set_key = { lhs = Modi_FCBUState value = 0 } 

	# Intertia is a multiplier on base faction influence
	set_key = { lhs = Modi_FCNOInertia value = 1 }
	set_key = { lhs = Modi_FCBGInertia value = 1 }
	set_key = { lhs = Modi_FCCLInertia value = 1 }
	set_key = { lhs = Modi_FCTRInertia value = 1 }
	set_key = { lhs = Modi_FCBUInertia value = 1 }
	# Boost is a flat addition to faction influence after all modifiers in integer
	change_key = { lhs = Modi_FCNOBoost value = 0 }
	change_key = { lhs = Modi_FCBGBoost value = 0 }
	change_key = { lhs = Modi_FCCLBoost value = 0 }
	change_key = { lhs = Modi_FCTRBoost value = 0 }
	change_key = { lhs = Modi_FCBUBoost value = 0 }


	if = {
		limit = {
			Privilege_Has = { Privilege=NOTitles Lvl=1 }
		}
		change_key = { lhs = Modi_FCNOState value = 2 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOTitles Lvl=2 }
		}
		change_key = { lhs = Modi_FCNOState value = 5 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOTitles Lvl=3 }
		}
		change_key = { lhs = Modi_FCNOState value = 10 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOTitles Lvl=4 }
		}
		change_key = { lhs = Modi_FCNOState value = 15 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOTitles Lvl=5 }
		}
		change_key = { lhs = Modi_FCNOState value = 20 }
	}
	if = {
		limit = {
			Privilege_Has = { Privilege=NODynastic Lvl=1 }
		}
		change_key = { lhs = Modi_FCNOState value = 5 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NODynastic Lvl=2 }
		}
		change_key = { lhs = Modi_FCNOState value = 10 }
	}
	if = {
		limit = {
			has_country_modifier = ven_barnabotti
		}
		change_key = { lhs = Modi_FCBGState value = 5 }
	}
    # Church Aspect
    if = {
        limit = { OR = { western_christian = yes eastern_christian = yes } is_key_equal = { lhs = aspect_13 value = 3 } }
        subtract_key = { lhs = Modi_FCCLBoost value = 0.05 }
    }
	# Bureaucratic Politicisation
	if = {
		limit = {
			Privilege_Has = { Privilege=BUPolitics Lvl=0 }
		}
		subtract_key = { lhs = Modi_FCBUInertia value = 0.5 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUPolitics Lvl=1 }
		}
		subtract_key = { lhs = Modi_FCBUInertia value = 0.25 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUPolitics Lvl=2 }
		}
		subtract_key = { lhs = Modi_FCBUInertia value = 0.1 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=BUPolitics Lvl=3 }
		}
		change_key = { lhs = Modi_FCBUInertia value = 0.1 }
	}
	if = {
		limit = {
			Rights_BGCom7HasGreater = no
		}
		subtract_key = { lhs = Modi_FCBGInertia value = 0.33 }
	}
	if = {
		limit = {
			has_idea = aristocracy_ideas_6
		}
		change_key = { lhs = Modi_FCNOBU value = 0.05 }
	}
}

Modi_TaxCountry = {
	set_key = { lhs = Modi_TaxMana value = 1 }
	export_to_key = { lhs = Modi_TaxMana value = modifier:all_power_cost }
	change_key = { lhs = Modi_TaxMana value = 1 }
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_TaxMana value = 0.1 } }
		}
		set_key = { lhs = Modi_TaxMana value = 0.1 }
	}
	set_key = { lhs = Modi_ManaCostFromPop value = 1 }
	set_key = { lhs = Modi_LevyDraftCost value = 1 }
	set_key = { lhs = Modi_LevyVoluntCost value = 1 }
	set_key = { lhs = Modi_LevyFeudalCost value = 1 }
	set_key = { lhs = Modi_LevyNobleCost value = 1 }
	set_key = { lhs = Modi_LevyUrbanCost value = 1 }
	set_key = { lhs = Modi_LevyHordeCost value = 1 }
	set_key = { lhs = Modi_TaxNobleCost value = 1 }
	set_key = { lhs = Modi_TaxCharterCost value = 1 }
	set_key = { lhs = Modi_TaxTributeCost value = 1 }
	set_key = { lhs = Modi_TaxLandCost value = 1 }
	set_key = { lhs = Modi_TaxPropCost value = 1 }
	set_key = { lhs = Modi_TaxInheritCost value = 1 }
	set_key = { lhs = Modi_TaxChattelsCost value = 1 }
	set_key = { lhs = Modi_TaxPollCost value = 1 }
	set_key = { lhs = Modi_TaxFeudalCost value = 1 }
	set_key = { lhs = Modi_TaxTollCost value = 1 }
	set_key = { lhs = Modi_TaxSaltCost value = 1 }
	set_key = { lhs = Modi_TaxTimberCost value = 1 }
	set_key = { lhs = Modi_TaxSubstCost value = 1 }
	set_key = { lhs = Modi_TaxAlcoholCost value = 1 }
	set_key = { lhs = Modi_TaxPropAgricultureCost value = 1 }
	set_key = { lhs = Modi_TaxPropExtractionCost value = 1 }
	set_key = { lhs = Modi_TaxPropForestryCost value = 1 }
	set_key = { lhs = Modi_TaxPropFisheryCost value = 1 }
	set_key = { lhs = Modi_TaxPropIndustrialCost value = 1 }
	set_key = { lhs = Modi_TaxPropAcademicCost value = 1 }
	set_key = { lhs = Modi_TaxPropCommercialCost value = 1 }

	set_key = { lhs = Modi_TaxAI_RatioSpendingMulti value = 1 } # This is a multiplier, which is applied on the fractional part of AI mana spending (applied before the hardcaps)

	if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=5 }
		}
		change_key = { lhs = Modi_TaxLandCost value = 1 }
		change_key = { lhs = Modi_TaxInheritCost value = 1 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=4 }
		}
		change_key = { lhs = Modi_TaxLandCost value = 0.5 }
		change_key = { lhs = Modi_TaxInheritCost value = 0.5 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOAutonomy Lvl=3 }
		}
		change_key = { lhs = Modi_TaxLandCost value = 0.25 }
		change_key = { lhs = Modi_TaxInheritCost value = 0.25 }
	}
	if = {
		limit = {
			Privilege_Has = { Privilege=NOTaxE Lvl=5 }
		}
		change_key = { lhs = Modi_TaxNobleCost value = 1 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOTaxE Lvl=4 }
		}
		change_key = { lhs = Modi_TaxNobleCost value = 0.8 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOTaxE Lvl=3 }
		}
		change_key = { lhs = Modi_TaxNobleCost value = 0.6 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOTaxE Lvl=2 }
		}
		change_key = { lhs = Modi_TaxNobleCost value = 0.4 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOTaxE Lvl=1 }
		}
		change_key = { lhs = Modi_TaxNobleCost value = 0.2 }
	}
	if = {
		limit = {
			Privilege_Has = { Privilege=NOServiceE Lvl=5 }
		}
		change_key = { lhs = Modi_LevyNobleCost value = 1 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOServiceE Lvl=4 }
		}
		change_key = { lhs = Modi_LevyNobleCost value = 0.8 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOServiceE Lvl=3 }
		}
		change_key = { lhs = Modi_LevyNobleCost value = 0.6 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOServiceE Lvl=2 }
		}
		change_key = { lhs = Modi_LevyNobleCost value = 0.4 }
	}
	else_if = {
		limit = {
			Privilege_Has = { Privilege=NOServiceE Lvl=1 }
		}
		change_key = { lhs = Modi_LevyNobleCost value = 0.2 }
	}
	trigger_switch = {
		on_trigger = has_country_modifier
		very_easy_difficulty = {
			subtract_key = { lhs = Modi_TaxMana value = 0.20 }
		}
		easy_difficulty = {
			subtract_key = { lhs = Modi_TaxMana value = 0.10 }
		}
		hard_difficulty = {
			change_key = { lhs = Modi_TaxMana value = 0.10 }
		}
		expert_difficulty = {
			change_key = { lhs = Modi_TaxMana value = 0.20 }
		}
		Jean_ransom_fra = {
			change_key = { lhs = Modi_TaxMana value = 0.20 }
		}
	}
	trigger_switch = {
		on_trigger = has_idea
		english_ideas_3 = {
			subtract_key = { lhs = Modi_TaxLandCost value = 0.15 }
		}
		chinese_ideas_6 = {
			subtract_key = { lhs = Modi_LevyDraftCost value = 0.15 }
		}
		granadan_ideas_2 = {
			subtract_key = { lhs = Modi_LevyVoluntCost value = 0.15 }
		}
		hiberno_norman_ideas_6 = {
			subtract_key = { lhs = Modi_TaxLandCost value = 0.10 }
		}
		welsh_ideas_6 = {
			subtract_key = { lhs = Modi_LevyNobleCost value = 0.15 }
		}
		savoyard_ideas_6 = {
			subtract_key = { lhs = Modi_TaxTollCost value = 0.1 }
		}
	}
	if = {
		limit = {
			has_idea = aristocracy_ideas_1
		}
		subtract_key = { lhs = Modi_LevyNobleCost value = 0.05 }
		if = {
			limit = {
				has_idea = aristocracy_ideas_3
			}
			subtract_key = { lhs = Modi_TaxNobleCost value = 0.05 }
		}
	}
	if = {
		limit = {
			has_idea = standing_army_ideas_5
		}
		subtract_key = { lhs = Modi_LevyDraftCost value = 0.1 }
		subtract_key = { lhs = Modi_LevyVoluntCost value = 0.1 }
	}
	if = {
		limit = {
			has_idea = grand_army_ideas_2
		}
		subtract_key = { lhs = Modi_LevyVoluntCost value = 0.075 }
		subtract_key = { lhs = Modi_LevyFeudalCost value = 0.075 }
		subtract_key = { lhs = Modi_LevyNobleCost value = 0.075 }
		subtract_key = { lhs = Modi_LevyDraftCost value = 0.075 }
		subtract_key = { lhs = Modi_LevyUrbanCost value = 0.075 }
		subtract_key = { lhs = Modi_LevyNobleCost value = 0.075 }
	}
	if = {
		limit = {
			has_idea = professional_army_ideas_7
		}
		subtract_key = { lhs = Modi_LevyVoluntCost value = 0.05 }
		subtract_key = { lhs = Modi_LevyDraftCost value = 0.05 }
	}
	if = {
		limit = {
			has_idea = civic_religion_ideas_6
		}
		subtract_key = { lhs = Modi_TaxLandCost value = 0.05 }
	}
	if = {
		limit = {
			has_ruler_modifier = hee_TUS_state_treasury
		}
		subtract_key = { lhs = Modi_TaxMana value = 0.05 }
	}
	if = {
		limit = {
			has_country_modifier = papal_sanction_for_church_taxes
		}
		subtract_key = { lhs = Modi_TaxMana value = 0.05 }
	}
	if = {
		limit = {
			Rights_BUTax3HasGreater = yes
		}
		subtract_key = { lhs = Modi_LevyDraftCost value = 0.30 }
		subtract_key = { lhs = Modi_LevyVoluntCost value = 0.30 }
		subtract_key = { lhs = Modi_TaxLandCost value = 0.30 }
		subtract_key = { lhs = Modi_TaxPropCost value = 0.30 }
		subtract_key = { lhs = Modi_TaxInheritCost value = 0.30 }
		subtract_key = { lhs = Modi_TaxChattelsCost value = 0.30 }
		subtract_key = { lhs = Modi_TaxPollCost value = 0.30 }
		subtract_key = { lhs = Modi_TaxPropAgricultureCost value = 0.30 }
		subtract_key = { lhs = Modi_TaxPropExtractionCost value = 0.30 }
		subtract_key = { lhs = Modi_TaxPropForestryCost value = 0.30 }
		subtract_key = { lhs = Modi_TaxPropFisheryCost value = 0.30 }
		subtract_key = { lhs = Modi_TaxPropIndustrialCost value = 0.30 }
		subtract_key = { lhs = Modi_TaxPropAcademicCost value = 0.30 }
		subtract_key = { lhs = Modi_TaxPropCommercialCost value = 0.30 }
		subtract_key = { lhs = Modi_TaxTollCost value = 0.30 }
		subtract_key = { lhs = Modi_TaxSaltCost value = 0.30 }
		subtract_key = { lhs = Modi_TaxTimberCost value = 0.30 }
		subtract_key = { lhs = Modi_TaxSubstCost value = 0.30 }
		subtract_key = { lhs = Modi_TaxAlcoholCost value = 0.30 }
	}
	else_if = {
		limit = {
			Rights_BUTax2HasGreater = yes
		}
		if = {
			limit = {
				Rights_BUDir3HasGreater = yes
			}
			subtract_key = { lhs = Modi_LevyDraftCost value = 0.20 }
			subtract_key = { lhs = Modi_LevyVoluntCost value = 0.20 }
			subtract_key = { lhs = Modi_TaxLandCost value = 0.20 }
			subtract_key = { lhs = Modi_TaxPropCost value = 0.20 }
			subtract_key = { lhs = Modi_TaxInheritCost value = 0.20 }
			subtract_key = { lhs = Modi_TaxChattelsCost value = 0.20 }
			subtract_key = { lhs = Modi_TaxPollCost value = 0.20 }
			subtract_key = { lhs = Modi_TaxPropAgricultureCost value = 0.20 }
			subtract_key = { lhs = Modi_TaxPropExtractionCost value = 0.20 }
			subtract_key = { lhs = Modi_TaxPropForestryCost value = 0.20 }
			subtract_key = { lhs = Modi_TaxPropFisheryCost value = 0.20 }
			subtract_key = { lhs = Modi_TaxPropIndustrialCost value = 0.20 }
			subtract_key = { lhs = Modi_TaxPropAcademicCost value = 0.20 }
			subtract_key = { lhs = Modi_TaxPropCommercialCost value = 0.20 }
		}
		else_if = {
			limit = {
				Rights_BUDir2HasGreater = yes
			}
			subtract_key = { lhs = Modi_LevyDraftCost value = 0.10 }
			subtract_key = { lhs = Modi_LevyVoluntCost value = 0.10 }
			subtract_key = { lhs = Modi_TaxLandCost value = 0.10 }
			subtract_key = { lhs = Modi_TaxPropCost value = 0.10 }
			subtract_key = { lhs = Modi_TaxInheritCost value = 0.10 }
			subtract_key = { lhs = Modi_TaxChattelsCost value = 0.10 }
			subtract_key = { lhs = Modi_TaxPollCost value = 0.10 }
			subtract_key = { lhs = Modi_TaxPropAgricultureCost value = 0.10 }
			subtract_key = { lhs = Modi_TaxPropExtractionCost value = 0.10 }
			subtract_key = { lhs = Modi_TaxPropForestryCost value = 0.10 }
			subtract_key = { lhs = Modi_TaxPropFisheryCost value = 0.10 }
			subtract_key = { lhs = Modi_TaxPropIndustrialCost value = 0.10 }
			subtract_key = { lhs = Modi_TaxPropAcademicCost value = 0.10 }
			subtract_key = { lhs = Modi_TaxPropCommercialCost value = 0.10 }
		}
		else = {
			subtract_key = { lhs = Modi_LevyDraftCost value = 0.05 }
			subtract_key = { lhs = Modi_LevyVoluntCost value = 0.05 }
			subtract_key = { lhs = Modi_TaxLandCost value = 0.05 }
			subtract_key = { lhs = Modi_TaxPropCost value = 0.05 }
			subtract_key = { lhs = Modi_TaxInheritCost value = 0.05 }
			subtract_key = { lhs = Modi_TaxChattelsCost value = 0.05 }
			subtract_key = { lhs = Modi_TaxPollCost value = 0.05 }
			subtract_key = { lhs = Modi_TaxPropAgricultureCost value = 0.05 }
			subtract_key = { lhs = Modi_TaxPropExtractionCost value = 0.05 }
			subtract_key = { lhs = Modi_TaxPropForestryCost value = 0.05 }
			subtract_key = { lhs = Modi_TaxPropFisheryCost value = 0.05 }
			subtract_key = { lhs = Modi_TaxPropIndustrialCost value = 0.05 }
			subtract_key = { lhs = Modi_TaxPropAcademicCost value = 0.05 }
			subtract_key = { lhs = Modi_TaxPropCommercialCost value = 0.05 }
		}
		if = {
			limit = {
				Rights_BUInd3HasGreater = yes
			}
			subtract_key = { lhs = Modi_TaxTollCost value = 0.20 }
			subtract_key = { lhs = Modi_TaxSaltCost value = 0.20 }
			subtract_key = { lhs = Modi_TaxTimberCost value = 0.20 }
			subtract_key = { lhs = Modi_TaxSubstCost value = 0.20 }
			subtract_key = { lhs = Modi_TaxAlcoholCost value = 0.20 }
		}
		else_if = {
			limit = {
				Rights_BUInd2HasGreater = yes
			}
			subtract_key = { lhs = Modi_TaxTollCost value = 0.10 }
			subtract_key = { lhs = Modi_TaxSaltCost value = 0.10 }
			subtract_key = { lhs = Modi_TaxTimberCost value = 0.10 }
			subtract_key = { lhs = Modi_TaxSubstCost value = 0.10 }
			subtract_key = { lhs = Modi_TaxAlcoholCost value = 0.10 }
		}
		else = {
			subtract_key = { lhs = Modi_TaxTollCost value = 0.05 }
			subtract_key = { lhs = Modi_TaxSaltCost value = 0.05 }
			subtract_key = { lhs = Modi_TaxTimberCost value = 0.05 }
			subtract_key = { lhs = Modi_TaxSubstCost value = 0.05 }
			subtract_key = { lhs = Modi_TaxAlcoholCost value = 0.05 }
		}
		
	}
	#Multiply 'Modi_TaxMana' by the "Mana Cost of Taxation" multiplier variable
	export_to_key = { lhs = Modi_Tmp0 value = modifier:expand_administration_cost }	#"expand_administration_cost" = "Mana Cost of Taxation"
	change_key = { lhs = Modi_Tmp0 value = 1 }
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_Tmp0 value = 0.01 } }
		}
		set_key = { lhs = Modi_Tmp0 value = 0.01 }
	}
	multiply_key = { lhs = Modi_TaxMana which = Modi_Tmp0 }
}
Modi_TaxProvince = {
	set_key = { lhs = Modi_TaxMana which = owner }
	set_key = { lhs = Modi_ManaCostFromPop which = owner }
	set_key = { lhs = Modi_LevyDraftCost which = owner }
	set_key = { lhs = Modi_LevyVoluntCost which = owner }
	set_key = { lhs = Modi_LevyFeudalCost which = owner }
	set_key = { lhs = Modi_LevyNobleCost which = owner }
	set_key = { lhs = Modi_LevyUrbanCost which = owner }
	set_key = { lhs = Modi_LevyHordeCost which = owner }
	set_key = { lhs = Modi_TaxNobleCost which = owner }
	set_key = { lhs = Modi_TaxCharterCost which = owner }
	set_key = { lhs = Modi_TaxTributeCost which = owner }
	set_key = { lhs = Modi_TaxLandCost which = owner }
	set_key = { lhs = Modi_TaxPropCost which = owner }
	set_key = { lhs = Modi_TaxInheritCost which = owner }
	set_key = { lhs = Modi_TaxChattelsCost which = owner }
	set_key = { lhs = Modi_TaxPollCost which = owner }
	set_key = { lhs = Modi_TaxFeudalCost which = owner }
	set_key = { lhs = Modi_TaxTollCost which = owner }
	set_key = { lhs = Modi_TaxSaltCost which = owner }
	set_key = { lhs = Modi_TaxTimberCost which = owner }
	set_key = { lhs = Modi_TaxSubstCost which = owner }
	set_key = { lhs = Modi_TaxAlcoholCost which = owner }
	set_key = { lhs = Modi_TaxPropAgricultureCost which = owner }
	set_key = { lhs = Modi_TaxPropExtractionCost which = owner }
	set_key = { lhs = Modi_TaxPropForestryCost which = owner }
	set_key = { lhs = Modi_TaxPropFisheryCost which = owner }
	set_key = { lhs = Modi_TaxPropIndustrialCost which = owner }
	set_key = { lhs = Modi_TaxPropAcademicCost which = owner }
	set_key = { lhs = Modi_TaxPropCommercialCost which = owner }
	if = {
		limit = {
			OR = {
				continent = asia
				superregion = japan_superregion
				area = zungaria_area
				region = kazakh_region
				region = steppes_region
				region = crimea_region
				continent = indian_continent
			}
			NOT = { region = tibet_region }
			owner = {
				OR = {
					is_tribal = yes
					is_nomad = yes
				}
			}
		}
		multiply_key = { lhs = Modi_LevyHordeCost value = 0.666 }
	}
	if = {
		limit = {
			OR = {
				continent = asia
				superregion = japan_superregion
				continent = indian_continent
			}
		}
		multiply_key = { lhs = Modi_ManaCostFromPop value = 0.666 }
	}
	if = {
		limit = {
			culture_group = altaic
		}
		multiply_key = { lhs = Modi_LevyHordeCost value = 0.5 }
		multiply_key = { lhs = Modi_TaxTributeCost value = 0.5 }
	}
	if = {
		limit = {
			culture = hulun
			owner = { primary_culture = hulun }
			region = korea_region
		}
		multiply_key = { lhs = Modi_LevyHordeCost value = 0.333 }
	}

	if = {
		limit = {
			has_state_edict = adm_edict_extract_taxes
		}
		change_key = { lhs = Modi_TaxMana value = -0.25 } # -25% Mana Cost of Taxation
	}

	trigger_switch = {
		on_trigger = has_province_modifier
		korean_settlement = {
			change_key = { lhs = Modi_TaxMana value = 2 }
		}
		kingdom_of_castille = {
			change_key = { lhs = Modi_TaxFeudalCost value = 0.1 }
		}
		kingdom_of_portugal = { 
			change_key = { lhs = Modi_TaxFeudalCost value = 0.1 }
		}
		kingdom_of_leon = {
			change_key = { lhs = Modi_TaxFeudalCost value = 0.1 }
		}
		kingdom_of_andalucia = {
			change_key = { lhs = Modi_TaxFeudalCost value = 0.1 }
		}
		kingdom_of_granada = {
			change_key = { lhs = Modi_TaxFeudalCost value = 0.1 }
		}
		kingdom_of_murcia = {
			change_key = { lhs = Modi_TaxFeudalCost value = 0.1 }
		}
		kingdom_of_aragon = {
			change_key = { lhs = Modi_TaxFeudalCost value = 0.1 }
		}
		kingdom_of_navarra = {
			change_key = { lhs = Modi_TaxFeudalCost value = 0.1 }
		}
		corrupt_bey = {
			change_key = { lhs = Modi_TaxFeudalCost value = 0.25 }
		}
		refusal_of_petition_of_rights = {
			change_key = { lhs = Modi_TaxFeudalCost value = 0.20 }
		}
		rebel_refugees = {
			change_key = { lhs = Modi_TaxFeudalCost value = 0.40 }
		}
		rebel_stronghold = {
			change_key = { lhs = Modi_TaxFeudalCost value = 1 }
		}
		particularists_organizing = {
			change_key = { lhs = Modi_TaxMana value = 1 }
		}
		hee_tuscan_toll_roads = {
			subtract_key = { lhs = Modi_TaxTollCost value = 0.2 }
		}
	}
	#Multiply 'Modi_TaxProvince' by the "Power Cost of Local Taxation" multiplier variable
	export_to_key = { lhs = Modi_Tmp0 value = modifier:local_gold_depletion_chance_modifier }	#"local_gold_depletion_chance_modifier" = "Power Cost of Local Taxation"
	change_key = { lhs = Modi_Tmp0 value = 1 }
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_Tmp0 value = 0.01 } }
		}
		set_key = { lhs = Modi_Tmp0 value = 0.01 }
	}
	multiply_key = { lhs = Modi_TaxMana which = Modi_Tmp0 }
	if = {
		limit = {
			NOT = { check_key = { lhs = Modi_TaxMana value = 0.1 } }
		}
		set_key = { lhs = Modi_TaxMana value = 0.1 }
	}

}
## $class$_Lit will be multiplied by Tmp_7
#Modi_Literacy = {
#    trigger_switch = {
#       on_trigger = superregion 
#       italy_superregion = { set_key = { lhs = Tmp_7 value = 3.5 } }
#       scandinavian_superregion = { set_key = { lhs = Tmp_7 value = 0.4 } }
#       balkan_superregion  = { set_key = { lhs = Tmp_7 value = 0.65 } }
#       greater_russia_superregion  = { set_key = { lhs = Tmp_7 value = 0.35 } }
#    }
#    trigger_switch = {
#        on_trigger = region
#        baltic_region = { multiply_key = { lhs = Tmp_7 value = 0.4 } }
#        east_russia_region = { multiply_key = { lhs = Tmp_7 value = 0.4 } }
#        north_russia_region = { multiply_key = { lhs = Tmp_7 value = 0.4 } }
#        prussia_region = { multiply_key = { lhs = Tmp_7 value = 0.4 } }
#        ruthenia_region = { multiply_key = { lhs = Tmp_7 value = 0.4 } }
#        lithuania_region = { multiply_key = { lhs = Tmp_7 value = 0.4 } }
#    }
#}
## $class$_Edu will be multiplied by Tmp_6
#Modi_Education = {        
#    trigger_switch = { 
#        on_trigger = has_province_flag
#        edu_1 = { set_key = { lhs = Tmp_6 value = 1.3 } }
#        edu_7 = { set_key = { lhs = Tmp_6 value = 1.3 } }
#        edu_12 = { set_key = { lhs = Tmp_6 value = 1.3 } }
#        edu_8 = { set_key = { lhs = Tmp_6 value = 1.3 } }
#        edu_11 = { set_key = { lhs = Tmp_6 value = 1.3 } }
#    }
#    if = {
#        limit = {
#            has_province_modifier = Education_Center_Major
#        }
#        multiply_key = { lhs = Tmp_6 value = 1.5 }
#    }
#    if = {
#        limit = {
#            is_year = 1430
#        }
#        if = {
#            limit = {
#                Casual_Literacy = 100
#            }
#            if = {
#                limit = {
#                    Scientific_Method = 100
#                }
#                if = {
#                    limit = {
#                        Academia = 100
#                    }
#                    change_key = { lhs = Tmp_6 value = 3 }
#                }
#                else = {
#                    change_key = { lhs = Tmp_6 value = 2 }
#                }
#            }
#            else = { 
#                change_key = { lhs = Tmp_6 value = 1 }
#            }
#        }
#    }
#}

Modi_DiplomacyCountry = {
	set_key = { lhs = Modi_Diplo_Ally_Limit value = 0 } # Additive Modifier to Alliance Limit [expects integer input]
	set_key = { lhs = Modi_Diplo_BaseIntegrationProgress value = 0 } # Additive Modifier to base % of integration rate [expects decimal]
	set_key = { lhs = Modi_Diplo_Range_Add value = 0 } # Additive modifier on base diplomatic range
	set_key = { lhs = Modi_Diplo_Range_Multi value = 1 } # Multiplier on diplomatic range (after tech)

	# If you add an entry here, please remember to also make an entry in the customizable localization
	trigger_switch = { 
		on_trigger = has_idea
		flemish_ideas_6 = {
			change_key = { lhs = Modi_Diplo_Ally_Limit value = 1  }
		}
		papal_ideas_2 = {
			change_key = { lhs = Modi_Diplo_Range_Multi value = 0.2 }
			change_key = { lhs = Modi_Diplo_Ally_Limit value = 1 } 
		}
		cypriote_ideas_7 = {
			change_key = { lhs = Modi_Diplo_Range_Multi value = 0.15 }
			change_key = { lhs = Modi_Diplo_Ally_Limit value = 1 } 
		}
	}

	if = {
		limit = {
			has_idea = eminence_ideas_7
		}
		change_key = { lhs = Modi_Diplo_Ally_Limit value = 1 }
	}

	if = {
		limit = {
			has_idea = diplomacy_ideas_5
		}
		change_key = { lhs = Modi_Diplo_Ally_Limit value = 1 }
	}

	trigger_switch = {
		on_trigger = government_rank
		6 = { change_key = { lhs = Modi_Diplo_Range_Multi value = -0.1 } }
		5 = { change_key = { lhs = Modi_Diplo_Range_Multi value = -0.05 } }
		4 = { change_key = { lhs = Modi_Diplo_Range_Multi value = 0.025 } }
		3 = { change_key = { lhs = Modi_Diplo_Range_Multi value = 0.05 } }
		2 = { change_key = { lhs = Modi_Diplo_Range_Multi value = 0.1 } }
		1 = { change_key = { lhs = Modi_Diplo_Range_Multi value = 0.2 } }
	}
}	

### DISABLED ###
# Inputs: type=which/value val=varname/0.01
# Example: Effect_ChangeSubsistence = { type=which val=varname }
# Example: Effect_ChangeSubsistence = { type=value val=0.2 }
Effect_ChangeSubsistence = {
	set_key = { lhs = Modi_Tmp0 value = 0 }
}

# Inputs: IndustryID, Soph (0-100), Size (value)
# Industry IDs can be found listed in SYS-Prod_Misc
# Size is best a function of buildings, so pick a number of buildings you want to provide industry space for
# Example: Effect_OpenProdValue = { IndustryID=2 Soph=0 Size=2 }
Effect_OpenProdValue = {
	Public_AddProduce = {
		prod = $IndustryID$
		wealth = 0
		soph = $Soph$
		size = $Size$
	}
}

# Inputs: IndustryID, Soph (0-100), Size (variable)
# Industry IDs can be found listed in SYS-Prod_Misc
# Size is best a function of buildings, so pick a number of buildings you want to provide industry space for
# Example: Effect_OpenProdVar = { IndustryID=3 Soph=0 Size=Modi_Tmp0 }
Effect_OpenProdVar = {
	Public_AddProduceVar = {
		prod = $IndustryID$
		wealth = 0
		soph = $Soph$
		size = $Size$
	}
}

# Inputs: Slot
# Example: Effect_CloseSlot = { Slot=0 }
Effect_CloseSlot = {
	Public_PopSlot = { slot=$Slot$ }
}

# Inputs: IndustryID
# Industry IDs can be found listed in SYS-Prod_Misc
# Example: Effect_CloseProd = { IndustryID=21 }
Effect_CloseProd = {
	Public_PopProd = { prod=$IndustryID$ }
}

Pol_ChangeGovMonarchy = {
	change_government = monarchy
	add_government_reform = Pol_Succession$Succession$
	Pol_FamilyInit = yes
	Pol_SetGovernmentHelper1 = yes
	add_government_reform = Pol_Assembly$Assembly$
	Pol_SetGovernmentHelper2 = yes
	add_government_reform = Pol_Privileges1
	[[SpecialArrangement] 
		add_government_reform = $SpecialArrangement$
		remove_government_reform = Pol_Privileges1
	]
}
Pol_ChangeGovRepublic = {
	change_government = republic
	add_government_reform = Pol_Mandate$Mandate$
	add_government_reform = Pol_Stylings$Stylings$
	add_government_reform = Pol_ExtraPowers$ExtraPowers$
	add_government_reform = Pol_Assembly$Assembly$
	add_government_reform = Pol_TermOfOffice$TermOfOffice$
	Pol_SetGovernmentHelper1 = yes ## Nobility
	Pol_SetGovernmentHelper2 = yes ## Core
	add_government_reform = Pol_Privileges1
	[[SpecialArrangement] 
		add_government_reform = $SpecialArrangement$
		remove_government_reform = Pol_Privileges1
	]
}
Pol_ChangeGovTheocracy = {
	change_government = theocracy
	add_government_reform = Pol_Organisation$Organisation$
	add_government_reform = Pol_Mediumship$Mediumship$
	Pol_SetGovernmentHelper1 = yes ## Nobility
	add_government_reform = Pol_Assembly$Assembly$
	Pol_SetGovernmentHelper2 = yes ## Core
	add_government_reform = Pol_Privileges1
	[[SpecialArrangement] 
		add_government_reform = $SpecialArrangement$
		remove_government_reform = Pol_Privileges1
	]
}
Pol_ChangeGovClans = {
	change_government = tribal
	add_government_reform = Pol_Identity$Identity$
	add_government_reform = Pol_Leadership$Leadership$
	add_government_reform = Pol_Tradition$Tradition$
	Pol_SetGovernmentHelper1 = yes ## Nobility
	Pol_SetGovernmentHelper2 = yes ## Core
	add_government_reform = Pol_Privileges1
	[[special_arrangement] 
		add_government_reform = $special_arrangement$
		remove_government_reform = Pol_Privileges1
	]
}
Pol_SetGovernmentHelper1 = {
	if = {
		limit = {
			is_key_equal = { lhs = Pol_Nobility value = 0 }
		}
		add_government_reform = Pol_Nobility1
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Pol_Nobility value = 1 }
		}
		add_government_reform = Pol_Nobility2
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Pol_Nobility value = 2 }
		}
		add_government_reform = Pol_Nobility3
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Pol_Nobility value = 3 }
		}
		add_government_reform = Pol_Nobility4
	}
}
Pol_SetGovernmentHelper2 = {
	if = {
		limit = {
			is_key_equal = { lhs = Pol_Structure value = 0 }
		}
		add_government_reform = Pol_Structure1
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Pol_Structure value = 1 }
		}
		add_government_reform = Pol_Structure2
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Pol_Structure value = 2 }
		}
		add_government_reform = Pol_Structure3
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Pol_Structure value = 3 }
		}
		add_government_reform = Pol_Structure4
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Pol_Structure value = 4 }
		}
		add_government_reform = Pol_Structure5
	}
	if = {
		limit = {
			is_key_equal = { lhs = Pol_Centralisation value = 0 }
		}
		add_government_reform = Pol_Centralisation1
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Pol_Centralisation value = 1 }
		}
		add_government_reform = Pol_Centralisation2
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Pol_Centralisation value = 2 }
		}
		add_government_reform = Pol_Centralisation3
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Pol_Centralisation value = 3 }
		}
		add_government_reform = Pol_Centralisation4
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Pol_Centralisation value = 4 }
		}
		add_government_reform = Pol_Centralisation5
	}
	if = {
		limit = {
			is_key_equal = { lhs = Pol_Autonomy value = 0 }
		}
		add_government_reform = Pol_Autonomy1
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Pol_Autonomy value = 1 }
		}
		add_government_reform = Pol_Autonomy2
	}
	if = {
		limit = {
			is_key_equal = { lhs = Pol_Provincial value = 0 }
		}
		add_government_reform = Pol_Provincial1
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Pol_Provincial value = 1 }
		}
		add_government_reform = Pol_Provincial2
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Pol_Provincial value = 2 }
		}
		add_government_reform = Pol_Provincial3
	}
	if = {
		limit = {
			is_key_equal = { lhs = Pol_Military value = 0 }
		}
		add_government_reform = Pol_Military1
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Pol_Military value = 1 }
		}
		add_government_reform = Pol_Military2
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Pol_Military value = 2 }
		}
		add_government_reform = Pol_Military3
	}
	else_if = {
		limit = {
			is_key_equal = { lhs = Pol_Military value = 3 }
		}
		add_government_reform = Pol_Military4
	}
}
### CALLED EVERY MONTH, SET THESE FLAGS IF NEEDED and not already set by script
Modi_UpdatePopWealth = {
	if = {
		limit = {
			has_province_flag = POP_ChangedPop
		}
		clr_province_flag = POP_ChangedPop

		POP_SetClass = yes

		TN_GetWealthPC = { class = SF }
		TN_GetWealthPC = { class = NM }
		TN_GetWealthPC = { class = RE }
		TN_GetWealthPC = { class = NO }
		TN_GetWealthPC = { class = BG }
		TN_GetWealthPC = { class = CL }
	}
	if = {
		limit = {
			has_province_flag = POP_ChangedWealth
		}
		clr_province_flag = POP_ChangedWealth

		POP_SumWealth = yes

		TN_GetWealthPC = { class = SF }
		TN_GetWealthPC = { class = NM }
		TN_GetWealthPC = { class = RE }
		TN_GetWealthPC = { class = NO }
		TN_GetWealthPC = { class = BG }
		TN_GetWealthPC = { class = CL }
	}
}

# change amounts here for imports
# param = $return$
# ROOT = sector trading WITH (conductee)
# PREV = conductor, sector who is making the trade
# event_target:ProvOwner = owner of PREV
# example that reduces amounts by 90% if they are not owned by the same guy
# if = {
#	limit = {
#		NOT = { owned_by = PREV }		
#	}
#	set_key = { lhs = $return$ value = 0.1 }
# }
#WARNING: $return$ can never leave this function higher than when it came. It would be magic goods
ChangeAmountsImport = {

}

# change amounts here for imports
# param = $return$ -> goods amount
# ROOT = sector trading WITH (conductee)
# PREV = conductor, sector who is making the trade
# event_target:ProvOwner = owner of PREV
# example that reduces amounts by 90% if they are not owned by the same guy
# if = {
#	limit = {
#		NOT = { owned_by = PREV }		
#	}
#	set_key = { lhs = $return$ value = 0.1 }
# }
#WARNING: $return$ can never leave this function higher than when it came. It would be magic goods
ChangeAmountsExport = {

}

#modify key Modi_ImportBottleneck here
ModiImportBottleneck = {
}

#modify key Modi_ExportBottleneck here
ModiExportBottlneck = {
}